<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Flutter 架構圖與基本檔案結構說明 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="flutter-架構與專案結構完整指南"><a class="header" href="#flutter-架構與專案結構完整指南">Flutter 架構與專案結構完整指南</a></h1>
<blockquote>
<p>本指南以白話方式介紹 Flutter 的系統架構與專案結構，幫助初學者快速掌握 Flutter 的運作原理和開發實務。</p>
</blockquote>
<h2 id="-flutter-系統架構總覽"><a class="header" href="#-flutter-系統架構總覽">🏗️ Flutter 系統架構總覽</a></h2>
<p>Flutter 採用分層架構設計，從上到下分為四個主要層級：</p>
<pre><code>┌─────────────────────────────────────────┐
│              Flutter App                │  ← 開發者程式碼層
│  • Widget Tree (UI 元件樹)               │
│  • Business Logic (業務邏輯)             │
│  • State Management (狀態管理)           │
└─────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────┐
│           Flutter Framework             │  ← Flutter 框架層
│  • Widgets (UI 元件庫)                   │
│  • Rendering (渲染系統)                  │
│  • Animation &amp; Gesture (動畫與手勢)      │
│  • Material &amp; Cupertino Design          │
└─────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────┐
│            Flutter Engine               │  ← 引擎層 (C/C++)
│  • Skia Graphics Engine (繪圖引擎)       │
│  • Dart Runtime (Dart 執行時)           │
│  • Platform Channels (平台通道)          │
│  • Text Layout &amp; Input                  │
└─────────────────────────────────────────┘
                     ↓
┌─────────────────────────────────────────┐
│           Native Platform               │  ← 原生平台層
│  • Android (Java/Kotlin)               │
│  • iOS (Objective-C/Swift)             │
│  • Windows/macOS/Linux/Web              │
└─────────────────────────────────────────┘
</code></pre>
<h3 id="架構層級詳解"><a class="header" href="#架構層級詳解">架構層級詳解</a></h3>
<div class="table-wrapper"><table><thead><tr><th>層級</th><th>技術棧</th><th>主要職責</th><th>開發者接觸度</th></tr></thead><tbody>
<tr><td><strong>Flutter App</strong></td><td>Dart</td><td>業務邏輯、UI 設計、狀態管理</td><td>⭐⭐⭐⭐⭐ 高頻使用</td></tr>
<tr><td><strong>Framework</strong></td><td>Dart</td><td>提供 Widget、動畫、手勢等 API</td><td>⭐⭐⭐⭐ 經常使用</td></tr>
<tr><td><strong>Engine</strong></td><td>C/C++</td><td>渲染、平台通訊、Dart VM</td><td>⭐⭐ 偶爾接觸</td></tr>
<tr><td><strong>Platform</strong></td><td>原生語言</td><td>系統 API、硬體存取</td><td>⭐ 特殊需求才用</td></tr>
</tbody></table>
</div>
<h2 id="-flutter-專案結構深度解析"><a class="header" href="#-flutter-專案結構深度解析">📁 Flutter 專案結構深度解析</a></h2>
<h3 id="標準專案目錄結構"><a class="header" href="#標準專案目錄結構">標準專案目錄結構</a></h3>
<pre><code>my_flutter_app/
├── 📱 android/              # Android 原生專案
│   ├── app/
│   │   ├── src/main/
│   │   │   ├── AndroidManifest.xml
│   │   │   └── kotlin/
│   │   └── build.gradle
│   └── gradle.properties
├── 🍎 ios/                  # iOS 原生專案
│   ├── Runner/
│   │   ├── Info.plist
│   │   └── AppDelegate.swift
│   └── Runner.xcodeproj/
├── 🌐 web/                  # Web 平台檔案
│   ├── index.html
│   └── manifest.json
├── 💻 windows/              # Windows 桌面應用
├── 🐧 linux/               # Linux 桌面應用
├── 🖥️ macos/               # macOS 桌面應用
├── 📚 lib/                  # Dart 主程式碼區
│   ├── main.dart           # 應用程式入口
│   ├── models/             # 資料模型
│   ├── views/              # UI 畫面
│   ├── controllers/        # 邏輯控制器
│   ├── services/           # 服務層
│   ├── utils/              # 工具函數
│   └── constants/          # 常數定義
├── 🎨 assets/              # 靜態資源
│   ├── images/
│   ├── fonts/
│   └── data/
├── 🧪 test/                # 測試檔案
│   ├── unit_test/
│   ├── widget_test/
│   └── integration_test/
├── 📋 pubspec.yaml         # 專案配置檔
├── 📋 pubspec.lock         # 依賴版本鎖定
├── 🔧 analysis_options.yaml # 程式碼分析規則
├── 🏗️ build/               # 編譯產物（自動生成）
└── 🔨 .dart_tool/          # Dart 工具暫存（自動生成）
</code></pre>
<h3 id="核心檔案與資料夾說明"><a class="header" href="#核心檔案與資料夾說明">核心檔案與資料夾說明</a></h3>
<h4 id="-lib-目錄---程式核心"><a class="header" href="#-lib-目錄---程式核心">📚 <code>lib/</code> 目錄 - 程式核心</a></h4>
<p>這是開發者花最多時間的地方，建議的組織結構：</p>
<pre><code>lib/
├── main.dart              # 應用程式入口點
├── app.dart              # App 主體配置
├── 📱 screens/            # 畫面頁面
│   ├── home/
│   ├── profile/
│   └── settings/
├── 🧩 widgets/            # 可重用元件
│   ├── common/
│   └── custom/
├── 📊 models/             # 資料模型
├── 🔧 services/           # API 服務、資料庫
├── 🎛️ providers/          # 狀態管理
├── 🔄 utils/              # 工具函數
├── 🎨 themes/             # 主題設定
└── 📝 constants/          # 常數定義
</code></pre>
<h4 id="-pubspecyaml---專案配置核心"><a class="header" href="#-pubspecyaml---專案配置核心">📋 <code>pubspec.yaml</code> - 專案配置核心</a></h4>
<pre><code class="language-yaml">name: my_flutter_app
description: Flutter 應用程式描述
version: 1.0.0+1

environment:
  sdk: '&gt;=3.0.0 &lt;4.0.0'
  flutter: "&gt;=3.10.0"

dependencies:
  flutter:
    sdk: flutter
  # 第三方套件
  http: ^1.1.0
  provider: ^6.0.5

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0

flutter:
  uses-material-design: true
  assets:
    - assets/images/
    - assets/data/
  fonts:
    - family: CustomFont
      fonts:
        - asset: assets/fonts/CustomFont-Regular.ttf
</code></pre>
<h2 id="-開發工作流程"><a class="header" href="#-開發工作流程">🚀 開發工作流程</a></h2>
<h3 id="1-專案建立與設定"><a class="header" href="#1-專案建立與設定">1. 專案建立與設定</a></h3>
<pre><code class="language-bash"># 建立新專案
flutter create my_app

# 進入專案目錄
cd my_app

# 檢查環境
flutter doctor
</code></pre>
<h3 id="2-開發流程"><a class="header" href="#2-開發流程">2. 開發流程</a></h3>
<pre><code class="language-bash"># 執行專案 (開發模式)
flutter run

# Hot Reload - 即時更新 UI
# 在 terminal 按 'r' 或在 IDE 中儲存檔案

# Hot Restart - 重啟應用狀態
# 在 terminal 按 'R'
</code></pre>
<h3 id="3-測試與除錯"><a class="header" href="#3-測試與除錯">3. 測試與除錯</a></h3>
<pre><code class="language-bash"># 執行單元測試
flutter test

# 執行整合測試
flutter drive --target=test_driver/app.dart

# 效能分析
flutter run --profile
</code></pre>
<h3 id="4-建置與部署"><a class="header" href="#4-建置與部署">4. 建置與部署</a></h3>
<pre><code class="language-bash"># 建置 Release 版本
flutter build apk          # Android APK
flutter build appbundle    # Android App Bundle
flutter build ios          # iOS (需在 macOS)
flutter build web          # Web 版本
</code></pre>
<h2 id="-平台互操作機制"><a class="header" href="#-平台互操作機制">🔗 平台互操作機制</a></h2>
<h3 id="platform-channels-通訊原理"><a class="header" href="#platform-channels-通訊原理">Platform Channels 通訊原理</a></h3>
<pre><code>Flutter App (Dart)
       ↕️ MethodChannel
Platform Code (Java/Kotlin/Swift/ObjC)
       ↕️
Native Platform APIs
</code></pre>
<h3 id="使用範例"><a class="header" href="#使用範例">使用範例</a></h3>
<pre><code class="language-dart">// Dart 端呼叫原生功能
static const platform = MethodChannel('app.channel/battery');

Future&lt;String&gt; getBatteryLevel() async {
  try {
    final int result = await platform.invokeMethod('getBatteryLevel');
    return 'Battery level at $result%';
  } on PlatformException catch (e) {
    return "Failed to get battery level: '${e.message}'.";
  }
}
</code></pre>
<h2 id="-最佳實務建議"><a class="header" href="#-最佳實務建議">🎯 最佳實務建議</a></h2>
<h3 id="專案結構組織"><a class="header" href="#專案結構組織">專案結構組織</a></h3>
<ul>
<li><strong>按功能模組分資料夾</strong>：而非按檔案類型</li>
<li><strong>保持 Widget 樹簡潔</strong>：避免過深的巢狀結構</li>
<li><strong>善用 const 建構子</strong>：提升效能</li>
<li><strong>分離 UI 與邏輯</strong>：使用 MVVM 或 MVC 模式</li>
</ul>
<h3 id="效能最佳化"><a class="header" href="#效能最佳化">效能最佳化</a></h3>
<ul>
<li><strong>使用 ListView.builder</strong>：處理大量清單資料</li>
<li><strong>實作適當的 shouldRebuild</strong>：避免不必要的重繪</li>
<li><strong>圖片最佳化</strong>：使用適當格式與尺寸</li>
<li><strong>lazy loading</strong>：延遲載入不常用功能</li>
</ul>
<h3 id="程式碼品質"><a class="header" href="#程式碼品質">程式碼品質</a></h3>
<ul>
<li><strong>遵循 Dart 編碼規範</strong>：使用 <code>flutter_lints</code></li>
<li><strong>寫測試</strong>：單元測試、Widget 測試、整合測試</li>
<li><strong>使用型別安全</strong>：善用 Dart 的強型別特性</li>
<li><strong>文件化</strong>：為公開 API 撰寫文件註解</li>
</ul>
<h2 id="-開發工具推薦"><a class="header" href="#-開發工具推薦">🛠️ 開發工具推薦</a></h2>
<h3 id="ide-選擇"><a class="header" href="#ide-選擇">IDE 選擇</a></h3>
<ul>
<li><strong>VS Code</strong> + Flutter 擴充套件 (輕量、快速)</li>
<li><strong>Android Studio</strong> + Flutter plugin (功能完整)</li>
<li><strong>IntelliJ IDEA</strong> + Dart/Flutter plugin</li>
</ul>
<h3 id="除錯工具"><a class="header" href="#除錯工具">除錯工具</a></h3>
<ul>
<li><strong>Flutter Inspector</strong>：視覺化 Widget 樹</li>
<li><strong>Network Inspector</strong>：監控網路請求</li>
<li><strong>Performance View</strong>：效能分析</li>
<li><strong>Memory View</strong>：記憶體使用情況</li>
</ul>
<h2 id="-延伸學習資源"><a class="header" href="#-延伸學習資源">📚 延伸學習資源</a></h2>
<h3 id="官方資源"><a class="header" href="#官方資源">官方資源</a></h3>
<ul>
<li><a href="https://flutter.dev/docs">Flutter 官方文件</a></li>
<li><a href="https://dart.dev/guides/language/language-tour">Dart 語言導覽</a></li>
<li><a href="https://flutter.dev/docs/cookbook">Flutter Cookbook</a></li>
</ul>
<h3 id="社群資源"><a class="header" href="#社群資源">社群資源</a></h3>
<ul>
<li><a href="https://github.com/fluttercommunity">Flutter Community</a></li>
<li><a href="https://github.com/Solido/awesome-flutter">Awesome Flutter</a></li>
<li><a href="https://pub.dev">Flutter 套件庫</a></li>
</ul>
<hr />
<p>🎉 <strong>恭喜！</strong> 你現在對 Flutter 的架構和專案結構有了完整的理解。開始你的 Flutter 開發之旅吧！</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../android/flutter.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../android/flutter_ubuntu_guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../android/flutter.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../android/flutter_ubuntu_guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
