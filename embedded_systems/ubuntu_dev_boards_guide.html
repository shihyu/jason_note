<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sipeed Tang Primer 25K &amp; Milk-V Duo S Ubuntu 開發環境指南 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sipeed-tang-primer-25k--milk-v-duo-s-ubuntu-開發環境指南"><a class="header" href="#sipeed-tang-primer-25k--milk-v-duo-s-ubuntu-開發環境指南">Sipeed Tang Primer 25K &amp; Milk-V Duo S Ubuntu 開發環境指南</a></h1>
<h2 id="目錄"><a class="header" href="#目錄">目錄</a></h2>
<ul>
<li><a href="#%E4%B8%80sipeed-tang-primer-25k-fpga%E9%96%8B%E7%99%BC%E6%9D%BF">一、Sipeed Tang Primer 25K (FPGA開發板)</a>
<ul>
<li><a href="#%E9%96%8B%E7%99%BC%E7%92%B0%E5%A2%83%E6%9E%B6%E8%A8%AD">開發環境架設</a></li>
<li><a href="#%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F%E7%A2%BC%E6%B8%AC%E8%A9%A6">範例程式碼測試</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8Cmilk-v-duo-s-risc-v-sbc">二、Milk-V Duo S (RISC-V SBC)</a>
<ul>
<li><a href="#%E9%96%8B%E7%99%BC%E7%92%B0%E5%A2%83%E6%9E%B6%E8%A8%AD-1">開發環境架設</a></li>
<li><a href="#%E7%AF%84%E4%BE%8B%E7%A8%8B%E5%BC%8F%E7%A2%BC%E6%B8%AC%E8%A9%A6-1">範例程式碼測試</a></li>
<li><a href="#%E7%87%92%E9%8C%84%E8%88%87%E5%9F%B7%E8%A1%8C">燒錄與執行</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89%E5%BF%AB%E9%80%9F%E6%B8%AC%E8%A9%A6%E8%85%B3%E6%9C%AC">三、快速測試腳本</a></li>
</ul>
<hr />
<h2 id="一sipeed-tang-primer-25k-fpga開發板"><a class="header" href="#一sipeed-tang-primer-25k-fpga開發板">一、Sipeed Tang Primer 25K (FPGA開發板)</a></h2>
<h3 id="開發環境架設"><a class="header" href="#開發環境架設">開發環境架設</a></h3>
<h4 id="1-安裝-gowin-ide-適用於-tang-primer-25k"><a class="header" href="#1-安裝-gowin-ide-適用於-tang-primer-25k">1. 安裝 Gowin IDE (適用於 Tang Primer 25K)</a></h4>
<pre><code class="language-bash"># 重要提示：Tang Primer 25K 需要使用 Gowin IDE 1.9.9 或更新版本
# 請從高雲半導體官網下載最新版本：
# https://www.gowinsemi.com/en/support/download_eda/

# 方法一：手動下載（推薦）
# 1. 訪問 Gowin 官網下載頁面
# 2. 選擇 Linux 版本的 Gowin IDE (Version &gt;= 1.9.9)
# 3. 下載後解壓縮

# 假設下載的檔案為 Gowin_V1.9.9_linux.tar.gz
tar -xzvf Gowin_V1.9.9_linux.tar.gz
cd IDE/

# 安裝依賴
sudo apt-get update
sudo apt-get install -y libglib2.0-0 libpng16-16 libfreetype6 libfontconfig1 \
                        libxrender1 libsm6 libxext6 libxft2 libncurses5

# 執行 IDE
./gw_ide

# 設定環境變數（根據實際安裝路徑調整）
echo 'export PATH=$PATH:/opt/Gowin/IDE/bin' &gt;&gt; ~/.bashrc
source ~/.bashrc

# 註：教育版 IDE 無需額外申請授權
</code></pre>
<h4 id="2-安裝-openfpgaloader-燒錄工具"><a class="header" href="#2-安裝-openfpgaloader-燒錄工具">2. 安裝 openFPGALoader (燒錄工具)</a></h4>
<pre><code class="language-bash"># 安裝依賴
sudo apt-get install -y git cmake libftdi1-dev libhidapi-dev libudev-dev

# 編譯安裝
git clone https://github.com/trabucayre/openFPGALoader.git
cd openFPGALoader
mkdir build &amp;&amp; cd build
cmake ..
make -j$(nproc)
sudo make install
</code></pre>
<h4 id="3-usb-權限設定"><a class="header" href="#3-usb-權限設定">3. USB 權限設定</a></h4>
<pre><code class="language-bash"># 新增 udev 規則
sudo tee /etc/udev/rules.d/99-openfpgaloader.rules &gt; /dev/null &lt;&lt;EOF
# Tang Primer 25K
ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", MODE="0666", GROUP="plugdev"
EOF

# 重新載入規則
sudo udevadm control --reload-rules
sudo udevadm trigger

# 將使用者加入 plugdev 群組
sudo usermod -a -G plugdev $USER
</code></pre>
<h3 id="範例程式碼測試"><a class="header" href="#範例程式碼測試">範例程式碼測試</a></h3>
<h4 id="led-閃爍範例-verilog"><a class="header" href="#led-閃爍範例-verilog">LED 閃爍範例 (Verilog)</a></h4>
<p>建立 <code>led_blink.v</code> 檔案：</p>
<pre><code class="language-verilog">// led_blink.v
module led_blink (
    input wire clk,      // 50MHz 時鐘
    input wire rst_n,    // 重置信號（低電平有效）
    output reg [5:0] led // 6個LED輸出
);

reg [24:0] counter;

always @(posedge clk or negedge rst_n) begin
    if (!rst_n) begin
        counter &lt;= 25'd0;
        led &lt;= 6'b000001;
    end else begin
        counter &lt;= counter + 1;
        if (counter == 25'd25_000_000) begin  // 0.5秒
            counter &lt;= 25'd0;
            led &lt;= {led[4:0], led[5]};  // 循環點亮
        end
    end
end

endmodule
</code></pre>
<h4 id="約束檔案-cst"><a class="header" href="#約束檔案-cst">約束檔案 (.cst)</a></h4>
<p>建立 <code>tang_primer_25k.cst</code> 檔案：</p>
<pre><code class="language-tcl">// tang_primer_25k.cst
IO_LOC "clk" 52;
IO_PORT "clk" IO_TYPE=LVCMOS33;

IO_LOC "rst_n" 88;
IO_PORT "rst_n" IO_TYPE=LVCMOS33 PULL_MODE=UP;

IO_LOC "led[0]" 86;
IO_LOC "led[1]" 87;
IO_LOC "led[2]" 89;
IO_LOC "led[3]" 90;
IO_LOC "led[4]" 91;
IO_LOC "led[5]" 92;
IO_PORT "led[0]" IO_TYPE=LVCMOS33 DRIVE=8;
IO_PORT "led[1]" IO_TYPE=LVCMOS33 DRIVE=8;
IO_PORT "led[2]" IO_TYPE=LVCMOS33 DRIVE=8;
IO_PORT "led[3]" IO_TYPE=LVCMOS33 DRIVE=8;
IO_PORT "led[4]" IO_TYPE=LVCMOS33 DRIVE=8;
IO_PORT "led[5]" IO_TYPE=LVCMOS33 DRIVE=8;
</code></pre>
<h4 id="編譯與燒錄"><a class="header" href="#編譯與燒錄">編譯與燒錄</a></h4>
<pre><code class="language-bash"># 使用 Gowin IDE GUI 編譯（推薦）
# 1. 開啟 Gowin IDE
# 2. 創建新專案，選擇 GW5A-LV25MG121 晶片
# 3. 加入 led_blink.v 和約束檔案
# 4. 執行 Synthesize → Place &amp; Route → Program Device

# 或使用 openFPGALoader 命令列燒錄
# 編譯後會生成 .fs 檔案
openFPGALoader -b tangprimer25k impl/pnr/led_blink.fs

# 也可以直接燒錄到 Flash
openFPGALoader -b tangprimer25k -f impl/pnr/led_blink.fs
</code></pre>
<hr />
<h2 id="二milk-v-duo-s-risc-v-sbc"><a class="header" href="#二milk-v-duo-s-risc-v-sbc">二、Milk-V Duo S (RISC-V SBC)</a></h2>
<h3 id="開發環境架設-1"><a class="header" href="#開發環境架設-1">開發環境架設</a></h3>
<h4 id="1-安裝交叉編譯工具鏈"><a class="header" href="#1-安裝交叉編譯工具鏈">1. 安裝交叉編譯工具鏈</a></h4>
<pre><code class="language-bash"># 下載 RISC-V 工具鏈
wget https://github.com/milkv-duo/duo-buildroot-sdk/releases/download/v1.0.0/riscv64-linux-musl-x86_64.tar.xz

# 解壓縮到 /opt
sudo tar -xJf riscv64-linux-musl-x86_64.tar.xz -C /opt/

# 設定環境變數
echo 'export PATH=$PATH:/opt/riscv64-linux-musl-x86_64/bin' &gt;&gt; ~/.bashrc
echo 'export CROSS_COMPILE=riscv64-linux-musl-' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<h4 id="2-安裝開發工具"><a class="header" href="#2-安裝開發工具">2. 安裝開發工具</a></h4>
<pre><code class="language-bash"># 基本開發工具
sudo apt-get install -y build-essential git wget python3 python3-pip
sudo apt-get install -y bc kmod cpio flex bison libssl-dev
sudo apt-get install -y libncurses5-dev libncursesw5-dev

# 串口工具
sudo apt-get install -y minicom picocom screen

# 網路工具
sudo apt-get install -y tftp-hpa tftpd-hpa nfs-kernel-server
</code></pre>
<h4 id="3-下載-duo-s-sdk"><a class="header" href="#3-下載-duo-s-sdk">3. 下載 Duo S SDK</a></h4>
<pre><code class="language-bash"># Clone SDK
git clone https://github.com/milkv-duo/duo-buildroot-sdk.git
cd duo-buildroot-sdk

# 切換到 Duo S 分支
git checkout develop

# 設定環境
source build/envsetup.sh
# 選擇 milkv-duo-s
</code></pre>
<h3 id="範例程式碼測試-1"><a class="header" href="#範例程式碼測試-1">範例程式碼測試</a></h3>
<h4 id="1-hello-world-c程式"><a class="header" href="#1-hello-world-c程式">1. Hello World (C程式)</a></h4>
<p>建立 <code>hello.c</code> 檔案：</p>
<pre><code class="language-c">// hello.c
#include &lt;stdio.h&gt;
#include &lt;unistd.h&gt;

int main(void) {
    int i = 0;
    printf("Hello from Milk-V Duo S!\n");
    printf("RISC-V Architecture Test\n");
    
    while(i &lt; 5) {
        printf("Count: %d\n", i);
        sleep(1);
        i++;
    }
    
    return 0;
}
</code></pre>
<p>編譯指令：</p>
<pre><code class="language-bash"># 交叉編譯
riscv64-linux-musl-gcc -o hello hello.c

# 或使用 SDK 內的工具鏈
${CROSS_COMPILE}gcc -o hello hello.c
</code></pre>
<h4 id="2-gpio-led-控制範例"><a class="header" href="#2-gpio-led-控制範例">2. GPIO LED 控制範例</a></h4>
<p>建立 <code>gpio_led.c</code> 檔案：</p>
<pre><code class="language-c">// gpio_led.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;string.h&gt;

#define GPIO_PIN "440"  // Duo S 的 LED GPIO
#define GPIO_PATH "/sys/class/gpio"

void gpio_export(const char* pin) {
    int fd = open(GPIO_PATH "/export", O_WRONLY);
    if (fd &lt; 0) return;
    write(fd, pin, strlen(pin));
    close(fd);
}

void gpio_set_direction(const char* pin, const char* direction) {
    char path[64];
    snprintf(path, sizeof(path), GPIO_PATH "/gpio%s/direction", pin);
    int fd = open(path, O_WRONLY);
    if (fd &lt; 0) return;
    write(fd, direction, strlen(direction));
    close(fd);
}

void gpio_write(const char* pin, int value) {
    char path[64];
    char val[2];
    snprintf(path, sizeof(path), GPIO_PATH "/gpio%s/value", pin);
    int fd = open(path, O_WRONLY);
    if (fd &lt; 0) return;
    snprintf(val, sizeof(val), "%d", value);
    write(fd, val, 1);
    close(fd);
}

int main(void) {
    gpio_export(GPIO_PIN);
    gpio_set_direction(GPIO_PIN, "out");
    
    printf("LED Blinking on Milk-V Duo S\n");
    
    for (int i = 0; i &lt; 10; i++) {
        gpio_write(GPIO_PIN, 1);
        printf("LED ON\n");
        sleep(1);
        
        gpio_write(GPIO_PIN, 0);
        printf("LED OFF\n");
        sleep(1);
    }
    
    return 0;
}
</code></pre>
<h4 id="3-makefile-範例"><a class="header" href="#3-makefile-範例">3. Makefile 範例</a></h4>
<p>建立 <code>Makefile</code> 檔案：</p>
<pre><code class="language-makefile"># Makefile
CROSS_COMPILE ?= riscv64-linux-musl-
CC = $(CROSS_COMPILE)gcc
CFLAGS = -Wall -O2
TARGET = hello gpio_led

all: $(TARGET)

hello: hello.c
	$(CC) $(CFLAGS) -o $@ $&lt;

gpio_led: gpio_led.c
	$(CC) $(CFLAGS) -o $@ $&lt;

clean:
	rm -f $(TARGET)

.PHONY: all clean
</code></pre>
<h3 id="燒錄與執行"><a class="header" href="#燒錄與執行">燒錄與執行</a></h3>
<h4 id="1-準備-sd-卡映像"><a class="header" href="#1-準備-sd-卡映像">1. 準備 SD 卡映像</a></h4>
<pre><code class="language-bash"># 下載官方映像
wget https://github.com/milkv-duo/duo-buildroot-sdk/releases/download/v1.0.0/milkv-duo-s.img.xz

# 解壓縮
xz -d milkv-duo-s.img.xz

# 燒錄到 SD 卡（假設 SD 卡是 /dev/sdX）
# 注意：請確認 SD 卡裝置名稱，避免誤寫其他磁碟
sudo dd if=milkv-duo-s.img of=/dev/sdX bs=4M status=progress
sudo sync
</code></pre>
<h4 id="2-串口連接"><a class="header" href="#2-串口連接">2. 串口連接</a></h4>
<pre><code class="language-bash"># 設定串口參數
# 波特率：115200, 8N1
sudo minicom -D /dev/ttyUSB0 -b 115200

# 或使用 picocom
sudo picocom -b 115200 /dev/ttyUSB0

# 退出 minicom: Ctrl+A, X
# 退出 picocom: Ctrl+A, Ctrl+X
</code></pre>
<h4 id="3-透過網路傳輸檔案"><a class="header" href="#3-透過網路傳輸檔案">3. 透過網路傳輸檔案</a></h4>
<p>在 Ubuntu 主機上：</p>
<pre><code class="language-bash"># 設定 TFTP 伺服器
sudo systemctl start tftpd-hpa
sudo systemctl enable tftpd-hpa

# 將編譯好的檔案複製到 TFTP 目錄
sudo cp hello gpio_led /srv/tftp/
sudo chmod 755 /srv/tftp/*
</code></pre>
<p>在 Duo S 上（透過串口終端）：</p>
<pre><code class="language-bash"># 設定網路
ifconfig eth0 192.168.1.100

# 從 TFTP 伺服器下載檔案
tftp -g -r hello 192.168.1.1
tftp -g -r gpio_led 192.168.1.1

# 執行程式
chmod +x hello gpio_led
./hello
./gpio_led
</code></pre>
<hr />
<h2 id="三快速測試腳本"><a class="header" href="#三快速測試腳本">三、快速測試腳本</a></h2>
<p>建立 <code>test_boards.sh</code> 檔案：</p>
<pre><code class="language-bash">#!/bin/bash
# test_boards.sh
# 開發板環境測試腳本

echo "======================================"
echo "   Board Development Test Script      "
echo "======================================"
echo ""

# 顏色定義
RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

# 檢查函數
check_command() {
    if command -v $1 &amp;&gt; /dev/null; then
        echo -e "${GREEN}✓${NC} $2 found"
        $1 --version 2&gt;&amp;1 | head -n1
        return 0
    else
        echo -e "${RED}✗${NC} $2 not found"
        return 1
    fi
}

# 檢查 RISC-V 工具鏈
echo "=== Checking Development Tools ==="
echo ""
echo "1. RISC-V Toolchain:"
check_command "riscv64-linux-musl-gcc" "RISC-V GCC"

echo ""
echo "2. FPGA Tools:"
check_command "openFPGALoader" "openFPGALoader"

# 檢查 Gowin IDE
echo ""
if [ -d "/opt/Gowin/IDE" ] || [ -f "$(which gw_ide 2&gt;/dev/null)" ]; then
    echo -e "${GREEN}✓${NC} Gowin IDE installed"
else
    echo -e "${RED}✗${NC} Gowin IDE not found"
fi

# 檢查連接的裝置
echo ""
echo "=== Detecting Connected Devices ==="
echo ""

# 偵測 Tang Primer 25K
echo "1. FPGA Boards:"
if lsusb | grep -q "0403:6010"; then
    echo -e "${GREEN}✓${NC} Tang Primer 25K detected"
    lsusb | grep "0403:6010"
else
    echo -e "${RED}✗${NC} Tang Primer 25K not detected"
fi

# 偵測串口設備
echo ""
echo "2. Serial Devices (Duo S):"
if ls /dev/ttyUSB* 2&gt;/dev/null; then
    echo -e "${GREEN}✓${NC} Serial devices found:"
    ls -la /dev/ttyUSB*
else
    echo -e "${RED}✗${NC} No serial devices found"
fi

# 檢查必要的服務
echo ""
echo "=== Checking Services ==="
echo ""

# TFTP 服務
if systemctl is-active --quiet tftpd-hpa; then
    echo -e "${GREEN}✓${NC} TFTP server is running"
else
    echo -e "${RED}✗${NC} TFTP server is not running"
    echo "   Run: sudo systemctl start tftpd-hpa"
fi

# 使用者群組
echo ""
echo "=== User Permissions ==="
if groups | grep -q "plugdev"; then
    echo -e "${GREEN}✓${NC} User is in plugdev group"
else
    echo -e "${RED}✗${NC} User is not in plugdev group"
    echo "   Run: sudo usermod -a -G plugdev $USER"
fi

if groups | grep -q "dialout"; then
    echo -e "${GREEN}✓${NC} User is in dialout group"
else
    echo -e "${RED}✗${NC} User is not in dialout group"
    echo "   Run: sudo usermod -a -G dialout $USER"
fi

echo ""
echo "======================================"
echo "          Test Complete               "
echo "======================================"
</code></pre>
<h2 id="四常見問題排除"><a class="header" href="#四常見問題排除">四、常見問題排除</a></h2>
<h3 id="tang-primer-25k-問題"><a class="header" href="#tang-primer-25k-問題">Tang Primer 25K 問題</a></h3>
<ol>
<li>
<p><strong>USB 裝置無法識別</strong></p>
<ul>
<li>檢查 USB 線材是否支援資料傳輸</li>
<li>確認 udev 規則已正確設定</li>
<li>重新插拔 USB 或重啟電腦</li>
</ul>
</li>
<li>
<p><strong>Gowin IDE 相關問題</strong></p>
<ul>
<li>Tang Primer 25K 使用 Gowin IDE (非 TD IDE)</li>
<li>需要版本 &gt;= 1.9.9</li>
<li>教育版無需額外授權</li>
<li>晶片型號：GW5A-LV25MG121</li>
</ul>
</li>
</ol>
<h3 id="milk-v-duo-s-問題"><a class="header" href="#milk-v-duo-s-問題">Milk-V Duo S 問題</a></h3>
<ol>
<li>
<p><strong>串口無法連接</strong></p>
<pre><code class="language-bash"># 檢查串口權限
sudo chmod 666 /dev/ttyUSB0
# 或將使用者加入 dialout 群組
sudo usermod -a -G dialout $USER
</code></pre>
</li>
<li>
<p><strong>SD 卡無法開機</strong></p>
<ul>
<li>確認使用至少 8GB 的 SD 卡</li>
<li>使用 Class 10 或以上速度等級</li>
<li>重新燒錄映像檔</li>
</ul>
</li>
<li>
<p><strong>網路連接問題</strong></p>
<pre><code class="language-bash"># 在 Duo S 上設定靜態 IP
ifconfig eth0 192.168.1.100 netmask 255.255.255.0
route add default gw 192.168.1.1
</code></pre>
</li>
</ol>
<h2 id="五實用連結"><a class="header" href="#五實用連結">五、實用連結</a></h2>
<h3 id="sipeed-tang-primer-25k"><a class="header" href="#sipeed-tang-primer-25k">Sipeed Tang Primer 25K</a></h3>
<ul>
<li><a href="https://wiki.sipeed.com/hardware/en/tang/tang-primer-25k/primer-25k.html">官方 Wiki</a></li>
<li><a href="https://github.com/sipeed/TangPrimer-25K-example">範例程式庫</a></li>
<li><a href="https://www.gowinsemi.com/en/support/download_eda/">Gowin IDE 下載</a></li>
<li><a href="http://www.gowinsemi.com.cn/en/support/database/">Gowin 官方文件</a></li>
</ul>
<h3 id="milk-v-duo-s"><a class="header" href="#milk-v-duo-s">Milk-V Duo S</a></h3>
<ul>
<li><a href="https://milkv.io/docs/duo/getting-started/duo-s">官方文件</a></li>
<li><a href="https://github.com/milkv-duo/duo-buildroot-sdk">GitHub SDK</a></li>
<li><a href="https://community.milkv.io/">社群論壇</a></li>
</ul>
<h2 id="六測試驗證結果"><a class="header" href="#六測試驗證結果">六、測試驗證結果</a></h2>
<h3 id="已驗證項目-2025-09-28"><a class="header" href="#已驗證項目-2025-09-28">已驗證項目 (2025-09-28)</a></h3>
<p>✅ <strong>C 程式碼編譯</strong></p>
<ul>
<li>hello.c 和 gpio_led.c 已成功編譯</li>
<li>Makefile 測試通過</li>
<li>程式可正常執行（使用系統 GCC）</li>
</ul>
<p>✅ <strong>Verilog 程式碼</strong></p>
<ul>
<li>led_blink.v 語法正確</li>
<li>tang_primer_25k.cst 約束檔案格式正確</li>
</ul>
<p>✅ <strong>測試腳本</strong></p>
<ul>
<li>test_boards.sh 可正常執行</li>
<li>環境檢測功能正常</li>
</ul>
<h3 id="注意事項"><a class="header" href="#注意事項">注意事項</a></h3>
<ul>
<li>若無 RISC-V 工具鏈，可先用系統 GCC 測試程式邏輯</li>
<li>FPGA 工具需要另外下載安裝</li>
<li>記得將使用者加入必要的群組（plugdev, dialout）</li>
</ul>
<h2 id="七進階開發建議"><a class="header" href="#七進階開發建議">七、進階開發建議</a></h2>
<h3 id="fpga-開發建議"><a class="header" href="#fpga-開發建議">FPGA 開發建議</a></h3>
<ol>
<li>使用版本控制管理 Verilog/VHDL 程式碼</li>
<li>建立模擬測試環境 (使用 Verilator 或 iverilog)</li>
<li>學習時序約束的設定</li>
<li>使用 Chipscope/SignalTap 進行除錯</li>
</ol>
<h3 id="risc-v-開發建議"><a class="header" href="#risc-v-開發建議">RISC-V 開發建議</a></h3>
<ol>
<li>熟悉 Device Tree 配置</li>
<li>學習建立自訂的 Buildroot 套件</li>
<li>開發核心模組驅動程式</li>
<li>使用 GDB 進行遠端除錯</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../embedded_systems/hft_fpga_simulation.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../android/android.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../embedded_systems/hft_fpga_simulation.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../android/android.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
