<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Node.js 完整開發指南 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="nodejs-學習指南---從-pythoncrust-背景出發"><a class="header" href="#nodejs-學習指南---從-pythoncrust-背景出發">Node.js 學習指南 - 從 Python/C++/Rust 背景出發</a></h1>
<h2 id="安裝-nodejs"><a class="header" href="#安裝-nodejs">安裝 Node.js</a></h2>
<h3 id="方法-1使用-node-version-manager-nvm---推薦"><a class="header" href="#方法-1使用-node-version-manager-nvm---推薦">方法 1：使用 Node Version Manager (NVM) - <strong>推薦</strong></a></h3>
<p>NVM 讓你能輕鬆切換不同版本的 Node.js（類似 Python 的 pyenv）</p>
<h4 id="linuxmacos"><a class="header" href="#linuxmacos">Linux/macOS</a></h4>
<pre><code class="language-bash"># 安裝 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
# 或使用 wget
wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 重新載入設定
source ~/.bashrc

# 安裝最新 LTS 版本
nvm install --lts
nvm use --lts

# 檢查版本
node --version
npm --version
</code></pre>
<h4 id="windows"><a class="header" href="#windows">Windows</a></h4>
<pre><code class="language-powershell"># 使用 nvm-windows (從 GitHub 下載安裝程式)
# https://github.com/coreybutler/nvm-windows/releases

# 安裝後執行
nvm install lts
nvm use lts
</code></pre>
<h3 id="方法-2官方安裝包"><a class="header" href="#方法-2官方安裝包">方法 2：官方安裝包</a></h3>
<ul>
<li>前往 https://nodejs.org/</li>
<li>下載 LTS 版本（長期支援版）</li>
<li>執行安裝程式</li>
</ul>
<h3 id="方法-3套件管理器"><a class="header" href="#方法-3套件管理器">方法 3：套件管理器</a></h3>
<h4 id="ubuntudebian"><a class="header" href="#ubuntudebian">Ubuntu/Debian</a></h4>
<pre><code class="language-bash"># 使用 NodeSource repository (推薦)
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs
</code></pre>
<h4 id="macos-homebrew"><a class="header" href="#macos-homebrew">macOS (Homebrew)</a></h4>
<pre><code class="language-bash">brew install node
</code></pre>
<h4 id="windows-chocolatey"><a class="header" href="#windows-chocolatey">Windows (Chocolatey)</a></h4>
<pre><code class="language-powershell">choco install nodejs
</code></pre>
<h3 id="驗證安裝"><a class="header" href="#驗證安裝">驗證安裝</a></h3>
<pre><code class="language-bash">node --version  # 應顯示 v20.x.x 或更新
npm --version   # Node Package Manager
npx --version   # npm 套件執行器
</code></pre>
<hr />
<h2 id="語法對照表"><a class="header" href="#語法對照表">語法對照表</a></h2>
<h3 id="1-變數宣告"><a class="header" href="#1-變數宣告">1. 變數宣告</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Node.js/JavaScript</th><th>Python</th><th>Rust</th><th>C++</th></tr></thead><tbody>
<tr><td><code>const x = 10;</code></td><td><code>x = 10</code></td><td><code>let x = 10;</code></td><td><code>const int x = 10;</code></td></tr>
<tr><td><code>let y = 20;</code></td><td><code>y = 20</code></td><td><code>let mut y = 20;</code></td><td><code>int y = 20;</code></td></tr>
<tr><td><code>var z = 30;</code> (避免)</td><td>-</td><td>-</td><td>-</td></tr>
</tbody></table>
</div>
<pre><code class="language-javascript">// Node.js 範例
const PI = 3.14159;        // 常數（不可重新賦值）
let counter = 0;           // 變數（可重新賦值）
var oldStyle = "避免使用"; // 舊式宣告（作用域問題）

// 解構賦值（類似 Python 的 tuple unpacking）
const [a, b] = [1, 2];
const {name, age} = {name: "Alice", age: 30};
</code></pre>
<h3 id="2-函數定義"><a class="header" href="#2-函數定義">2. 函數定義</a></h3>
<div class="table-wrapper"><table><thead><tr><th>語言</th><th>基本函數</th><th>Lambda/閉包</th></tr></thead><tbody>
<tr><td>Node.js</td><td><code>function add(a, b) { return a + b; }</code></td><td><code>(a, b) =&gt; a + b</code></td></tr>
<tr><td>Python</td><td><code>def add(a, b): return a + b</code></td><td><code>lambda a, b: a + b</code></td></tr>
<tr><td>Rust</td><td><code>fn add(a: i32, b: i32) -&gt; i32 { a + b }</code></td><td><code>|a, b| a + b</code></td></tr>
<tr><td>C++</td><td><code>int add(int a, int b) { return a + b; }</code></td><td><code>[](int a, int b) { return a + b; }</code></td></tr>
</tbody></table>
</div>
<pre><code class="language-javascript">// Node.js 多種函數寫法
// 1. 函數宣告
function greet(name) {
    return `Hello, ${name}!`;
}

// 2. 函數表達式
const greet = function(name) {
    return `Hello, ${name}!`;
};

// 3. 箭頭函數（最常用）
const greet = (name) =&gt; `Hello, ${name}!`;

// 4. 方法簡寫（物件內）
const obj = {
    greet(name) {
        return `Hello, ${name}!`;
    }
};

// 預設參數（類似 Python）
const greet = (name = "World") =&gt; `Hello, ${name}!`;

// Rest 參數（類似 Python 的 *args）
const sum = (...numbers) =&gt; numbers.reduce((a, b) =&gt; a + b, 0);

// 解構參數
const printUser = ({name, age}) =&gt; console.log(`${name} is ${age}`);
</code></pre>
<h3 id="3-資料結構"><a class="header" href="#3-資料結構">3. 資料結構</a></h3>
<h4 id="陣列array"><a class="header" href="#陣列array">陣列（Array）</a></h4>
<pre><code class="language-javascript">// Node.js
const arr = [1, 2, 3, 4, 5];

// 常用方法對照
arr.push(6);           // Python: arr.append(6)
arr.pop();             // Python: arr.pop()
arr.shift();           // Python: arr.pop(0)
arr.unshift(0);        // Python: arr.insert(0, 0)
arr.slice(1, 3);       // Python: arr[1:3]
arr.includes(3);       // Python: 3 in arr
arr.length;            // Python: len(arr)

// 函數式操作（類似 Rust 的 Iterator）
const doubled = arr.map(x =&gt; x * 2);              // Rust: .map(|x| x * 2)
const evens = arr.filter(x =&gt; x % 2 === 0);       // Rust: .filter(|x| x % 2 == 0)
const sum = arr.reduce((acc, x) =&gt; acc + x, 0);   // Rust: .fold(0, |acc, x| acc + x)

// 鏈式操作
const result = arr
    .filter(x =&gt; x &gt; 2)
    .map(x =&gt; x * 2)
    .reduce((a, b) =&gt; a + b, 0);
</code></pre>
<h4 id="物件object"><a class="header" href="#物件object">物件（Object）</a></h4>
<pre><code class="language-javascript">// Node.js 物件（類似 Python dict / Rust HashMap）
const person = {
    name: "Alice",
    age: 30,
    "special-key": "value",  // 特殊鍵名
    greet() {
        return `Hello, I'm ${this.name}`;
    }
};

// 存取
person.name;            // 點記法
person["special-key"];  // 括號記法（類似 Python dict）

// 物件操作
Object.keys(person);    // Python: person.keys()
Object.values(person);  // Python: person.values()
Object.entries(person); // Python: person.items()

// 展開運算子（類似 Python 的 **dict）
const newPerson = {...person, city: "Taipei"};

// 可選鏈（Optional Chaining）- 類似 Rust 的 ?
const city = person?.address?.city;  // 安全存取
</code></pre>
<h3 id="4-控制流程"><a class="header" href="#4-控制流程">4. 控制流程</a></h3>
<pre><code class="language-javascript">// if-else（與 C/Rust 類似）
if (condition) {
    // ...
} else if (otherCondition) {
    // ...
} else {
    // ...
}

// 三元運算子
const result = condition ? valueIfTrue : valueIfFalse;

// switch（類似 Rust 的 match，但較弱）
switch (value) {
    case 1:
        console.log("one");
        break;
    case 2:
    case 3:
        console.log("two or three");
        break;
    default:
        console.log("other");
}

// for 迴圈
for (let i = 0; i &lt; 10; i++) { }              // C-style
for (const item of array) { }                 // Python: for item in array
for (const key in object) { }                 // Python: for key in object
array.forEach((item, index) =&gt; { });          // 函數式

// while
while (condition) { }
do { } while (condition);

// 迴圈控制
break;      // 跳出迴圈
continue;   // 跳過本次迭代
</code></pre>
<h3 id="5-類別與繼承"><a class="header" href="#5-類別與繼承">5. 類別與繼承</a></h3>
<pre><code class="language-javascript">// ES6 Class（類似 Python class）
class Animal {
    constructor(name) {
        this.name = name;  // 類似 Python 的 self.name
    }
    
    speak() {
        console.log(`${this.name} makes a sound`);
    }
    
    // Getter/Setter
    get age() {
        return this._age;
    }
    
    set age(value) {
        this._age = value;
    }
    
    // 靜態方法（類似 Python @staticmethod）
    static createDog(name) {
        return new Dog(name);
    }
}

// 繼承
class Dog extends Animal {
    constructor(name, breed) {
        super(name);  // 呼叫父類建構子
        this.breed = breed;
    }
    
    speak() {
        super.speak();
        console.log("Woof!");
    }
}

const dog = new Dog("Max", "Golden Retriever");
</code></pre>
<hr />
<h2 id="非同步程式設計nodejs-核心"><a class="header" href="#非同步程式設計nodejs-核心">非同步程式設計（Node.js 核心）</a></h2>
<h3 id="1-callback回呼函數--舊式"><a class="header" href="#1-callback回呼函數--舊式">1. Callback（回呼函數）- 舊式</a></h3>
<pre><code class="language-javascript">// Node.js 傳統回呼模式（error-first）
fs.readFile('file.txt', 'utf8', (err, data) =&gt; {
    if (err) {
        console.error(err);
        return;
    }
    console.log(data);
});

// 回呼地獄（Callback Hell）
getData((err, data) =&gt; {
    if (err) return handleError(err);
    processData(data, (err, result) =&gt; {
        if (err) return handleError(err);
        saveData(result, (err) =&gt; {
            if (err) return handleError(err);
            console.log('Done!');
        });
    });
});
</code></pre>
<h3 id="2-promise---中間演進"><a class="header" href="#2-promise---中間演進">2. Promise - 中間演進</a></h3>
<pre><code class="language-javascript">// Promise 基礎
const promise = new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
        if (Math.random() &gt; 0.5) {
            resolve('Success!');
        } else {
            reject(new Error('Failed'));
        }
    }, 1000);
});

// Promise 鏈
promise
    .then(result =&gt; console.log(result))
    .catch(error =&gt; console.error(error))
    .finally(() =&gt; console.log('Cleanup'));

// Promise 組合
Promise.all([promise1, promise2, promise3])       // 全部完成
Promise.race([promise1, promise2, promise3])      // 第一個完成
Promise.allSettled([promise1, promise2])          // 全部結束（不管成功失敗）
</code></pre>
<h3 id="3-asyncawait---現代寫法類似-pythonrust-async"><a class="header" href="#3-asyncawait---現代寫法類似-pythonrust-async">3. Async/Await - 現代寫法（類似 Python/Rust async）</a></h3>
<pre><code class="language-javascript">// 基本 async/await
async function fetchData() {
    try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Error fetching data:', error);
        throw error;
    }
}

// 並行執行
async function fetchMultiple() {
    // 錯誤：順序執行（慢）
    const data1 = await fetch('/api/1');
    const data2 = await fetch('/api/2');
    
    // 正確：並行執行（快）
    const [data1, data2] = await Promise.all([
        fetch('/api/1'),
        fetch('/api/2')
    ]);
    
    return {data1, data2};
}

// 非同步迭代
async function* generateNumbers() {
    for (let i = 0; i &lt; 5; i++) {
        await new Promise(resolve =&gt; setTimeout(resolve, 100));
        yield i;
    }
}

// 使用非同步迭代器
for await (const num of generateNumbers()) {
    console.log(num);
}
</code></pre>
<hr />
<h2 id="event-loop事件循環"><a class="header" href="#event-loop事件循環">Event Loop（事件循環）</a></h2>
<h3 id="執行順序"><a class="header" href="#執行順序">執行順序</a></h3>
<pre><code class="language-javascript">console.log('1: 同步程式碼');

setTimeout(() =&gt; console.log('2: Timer (宏任務)'), 0);

Promise.resolve().then(() =&gt; console.log('3: Promise (微任務)'));

process.nextTick(() =&gt; console.log('4: nextTick (最優先)'));

console.log('5: 同步程式碼');

// 輸出順序：1, 5, 4, 3, 2
</code></pre>
<h3 id="event-loop-階段"><a class="header" href="#event-loop-階段">Event Loop 階段</a></h3>
<ol>
<li><strong>同步程式碼</strong> - 立即執行</li>
<li><strong>process.nextTick</strong> - Node.js 特有，最高優先級</li>
<li><strong>微任務（Microtasks）</strong> - Promise callbacks, queueMicrotask</li>
<li><strong>宏任務（Macrotasks）</strong> - setTimeout, setInterval, I/O</li>
</ol>
<hr />
<h2 id="模組系統"><a class="header" href="#模組系統">模組系統</a></h2>
<h3 id="commonjsnodejs-傳統"><a class="header" href="#commonjsnodejs-傳統">CommonJS（Node.js 傳統）</a></h3>
<pre><code class="language-javascript">// math.js - 匯出
function add(a, b) {
    return a + b;
}

module.exports = {
    add,
    subtract: (a, b) =&gt; a - b,
    PI: 3.14159
};

// main.js - 匯入
const math = require('./math');
const { add, PI } = require('./math');  // 解構匯入

console.log(math.add(2, 3));
console.log(PI);
</code></pre>
<h3 id="es6-modules現代標準"><a class="header" href="#es6-modules現代標準">ES6 Modules（現代標準）</a></h3>
<pre><code class="language-javascript">// math.mjs - 匯出
export function add(a, b) {
    return a + b;
}

export const PI = 3.14159;

export default class Calculator {
    // ...
}

// main.mjs - 匯入
import Calculator, { add, PI } from './math.mjs';
import * as math from './math.mjs';  // 匯入全部

// 動態匯入
const module = await import('./math.mjs');
</code></pre>
<hr />
<h2 id="錯誤處理"><a class="header" href="#錯誤處理">錯誤處理</a></h2>
<pre><code class="language-javascript">// 自定義錯誤類別
class ValidationError extends Error {
    constructor(message) {
        super(message);
        this.name = 'ValidationError';
    }
}

// try-catch（類似其他語言）
try {
    throw new ValidationError('Invalid input');
} catch (error) {
    if (error instanceof ValidationError) {
        console.error('Validation failed:', error.message);
    } else {
        throw error;  // 重新拋出
    }
} finally {
    console.log('Cleanup');
}

// 非同步錯誤處理
async function riskyOperation() {
    try {
        const result = await someAsyncFunction();
        return result;
    } catch (error) {
        console.error('Async error:', error);
        throw error;
    }
}

// Promise 錯誤處理
promise
    .then(result =&gt; {
        if (!result.valid) {
            throw new Error('Invalid result');
        }
        return result;
    })
    .catch(error =&gt; {
        console.error('Promise rejected:', error);
    });

// 全域錯誤處理
process.on('uncaughtException', (error) =&gt; {
    console.error('Uncaught Exception:', error);
    process.exit(1);
});

process.on('unhandledRejection', (reason, promise) =&gt; {
    console.error('Unhandled Rejection at:', promise, 'reason:', reason);
});
</code></pre>
<hr />
<h2 id="重要內建模組"><a class="header" href="#重要內建模組">重要內建模組</a></h2>
<h3 id="file-system-fs"><a class="header" href="#file-system-fs">File System (fs)</a></h3>
<pre><code class="language-javascript">const fs = require('fs').promises;  // 使用 Promise 版本

// 讀寫檔案
async function fileOperations() {
    // 讀檔
    const data = await fs.readFile('file.txt', 'utf8');
    
    // 寫檔
    await fs.writeFile('output.txt', data);
    
    // 檢查檔案存在
    try {
        await fs.access('file.txt');
        console.log('File exists');
    } catch {
        console.log('File does not exist');
    }
    
    // 讀取目錄
    const files = await fs.readdir('.');
    
    // 檔案資訊
    const stats = await fs.stat('file.txt');
    console.log(stats.size, stats.isDirectory());
}
</code></pre>
<h3 id="path"><a class="header" href="#path">Path</a></h3>
<pre><code class="language-javascript">const path = require('path');

// 路徑操作
path.join('/users', 'john', 'documents', 'file.txt');
path.resolve('file.txt');  // 絕對路徑
path.dirname('/users/john/file.txt');  // '/users/john'
path.basename('/users/john/file.txt'); // 'file.txt'
path.extname('file.txt');  // '.txt'
</code></pre>
<h3 id="httphttps"><a class="header" href="#httphttps">HTTP/HTTPS</a></h3>
<pre><code class="language-javascript">const http = require('http');

// 建立簡單伺服器
const server = http.createServer((req, res) =&gt; {
    if (req.url === '/' &amp;&amp; req.method === 'GET') {
        res.writeHead(200, { 'Content-Type': 'text/plain' });
        res.end('Hello World\n');
    } else {
        res.writeHead(404);
        res.end('Not Found\n');
    }
});

server.listen(3000, () =&gt; {
    console.log('Server running at http://localhost:3000/');
});
</code></pre>
<h3 id="process"><a class="header" href="#process">Process</a></h3>
<pre><code class="language-javascript">// 命令列參數
console.log(process.argv);  // ['node', 'script.js', ...args]

// 環境變數
console.log(process.env.NODE_ENV);

// 退出程式
process.exit(0);  // 0 = 成功, 非 0 = 錯誤

// 當前目錄
console.log(process.cwd());

// 記憶體使用
console.log(process.memoryUsage());

// 事件
process.on('exit', (code) =&gt; {
    console.log(`About to exit with code: ${code}`);
});
</code></pre>
<hr />
<h2 id="javascript-特殊概念"><a class="header" href="#javascript-特殊概念">JavaScript 特殊概念</a></h2>
<h3 id="1-型別轉換type-coercion"><a class="header" href="#1-型別轉換type-coercion">1. 型別轉換（Type Coercion）</a></h3>
<pre><code class="language-javascript">// 自動型別轉換（與 Python/Rust 差異很大）
console.log(5 + "3");     // "53" (字串連接)
console.log(5 - "3");     // 2 (轉為數字)
console.log("5" * "3");   // 15 (轉為數字)
console.log(5 == "5");    // true (寬鬆相等)
console.log(5 === "5");   // false (嚴格相等，推薦)

// Truthy/Falsy
// Falsy: false, 0, "", null, undefined, NaN
// Truthy: 其他所有值（包括 [], {}）

if ([]) console.log("Empty array is truthy!");  // 會執行！
</code></pre>
<h3 id="2-this-綁定"><a class="header" href="#2-this-綁定">2. this 綁定</a></h3>
<pre><code class="language-javascript">// this 的值取決於如何呼叫函數
const obj = {
    value: 42,
    getValue() {
        return this.value;
    },
    getValueArrow: () =&gt; this.value,  // 箭頭函數的 this 不同！
    getValueLater() {
        setTimeout(() =&gt; {
            console.log(this.value);  // 箭頭函數保留 this
        }, 1000);
        
        setTimeout(function() {
            console.log(this.value);  // undefined（this 丟失）
        }, 1000);
    }
};

// 綁定 this
const getValue = obj.getValue.bind(obj);
</code></pre>
<h3 id="3-閉包closure"><a class="header" href="#3-閉包closure">3. 閉包（Closure）</a></h3>
<pre><code class="language-javascript">// 函數記住外部變數
function makeCounter() {
    let count = 0;
    return {
        increment: () =&gt; ++count,
        decrement: () =&gt; --count,
        getCount: () =&gt; count
    };
}

const counter = makeCounter();
console.log(counter.increment()); // 1
console.log(counter.increment()); // 2

// 常見陷阱
for (var i = 0; i &lt; 3; i++) {
    setTimeout(() =&gt; console.log(i), 100);  // 印出 3, 3, 3
}

// 修正方法
for (let i = 0; i &lt; 3; i++) {
    setTimeout(() =&gt; console.log(i), 100);  // 印出 0, 1, 2
}
</code></pre>
<h3 id="4-原型鏈prototype-chain"><a class="header" href="#4-原型鏈prototype-chain">4. 原型鏈（Prototype Chain）</a></h3>
<pre><code class="language-javascript">// JavaScript 的繼承機制
function Person(name) {
    this.name = name;
}

Person.prototype.greet = function() {
    return `Hello, I'm ${this.name}`;
};

const alice = new Person("Alice");
console.log(alice.greet());  // "Hello, I'm Alice"

// 原型鏈查找
console.log(alice.hasOwnProperty('name'));  // true
console.log(alice.hasOwnProperty('greet')); // false (在原型上)
</code></pre>
<hr />
<h2 id="npmnode-package-manager"><a class="header" href="#npmnode-package-manager">NPM（Node Package Manager）</a></h2>
<h3 id="基本指令"><a class="header" href="#基本指令">基本指令</a></h3>
<pre><code class="language-bash"># 初始化專案（建立 package.json）
npm init -y

# 安裝套件
npm install express              # 生產依賴
npm install --save-dev eslint    # 開發依賴
npm install -g typescript        # 全域安裝

# 簡寫
npm i express
npm i -D eslint
npm i -g typescript

# 更新套件
npm update
npm update express

# 移除套件
npm uninstall express

# 列出套件
npm list
npm list --depth=0  # 只顯示第一層

# 執行腳本
npm run test
npm start  # 特殊腳本，不需要 run

# 安裝所有依賴（根據 package.json）
npm install

# 檢查過時套件
npm outdated

# 審計安全性問題
npm audit
npm audit fix
</code></pre>
<h3 id="packagejson-範例"><a class="header" href="#packagejson-範例">package.json 範例</a></h3>
<pre><code class="language-json">{
  "name": "my-project",
  "version": "1.0.0",
  "description": "My Node.js project",
  "main": "index.js",
  "type": "module",  // 使用 ES6 模組
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "jest",
    "lint": "eslint ."
  },
  "dependencies": {
    "express": "^4.18.0",
    "mongoose": "^7.0.0"
  },
  "devDependencies": {
    "eslint": "^8.0.0",
    "jest": "^29.0.0",
    "nodemon": "^3.0.0"
  },
  "engines": {
    "node": "&gt;=18.0.0",
    "npm": "&gt;=8.0.0"
  }
}
</code></pre>
<hr />
<h2 id="typescript-整合類似-rust-的型別系統"><a class="header" href="#typescript-整合類似-rust-的型別系統">TypeScript 整合（類似 Rust 的型別系統）</a></h2>
<p>如果你喜歡 Rust 的型別安全，可以使用 TypeScript：</p>
<pre><code class="language-typescript">// 型別定義
interface User {
    id: number;
    name: string;
    email?: string;  // 可選屬性
}

// 函數型別
function greet(user: User): string {
    return `Hello, ${user.name}!`;
}

// 泛型（類似 Rust）
function identity&lt;T&gt;(value: T): T {
    return value;
}

// 聯合型別
type Status = "pending" | "approved" | "rejected";

// 型別守衛
function isUser(obj: any): obj is User {
    return obj &amp;&amp; typeof obj.id === 'number';
}

// Async 函數型別
async function fetchUser(id: number): Promise&lt;User&gt; {
    const response = await fetch(`/api/users/${id}`);
    return response.json();
}
</code></pre>
<hr />
<h2 id="常用框架與工具"><a class="header" href="#常用框架與工具">常用框架與工具</a></h2>
<h3 id="web-框架"><a class="header" href="#web-框架">Web 框架</a></h3>
<ul>
<li><strong>Express.js</strong> - 最流行的輕量級框架</li>
<li><strong>Koa.js</strong> - Express 的現代化版本</li>
<li><strong>Fastify</strong> - 高效能框架</li>
<li><strong>NestJS</strong> - 企業級框架（類似 Spring）</li>
</ul>
<h3 id="工具"><a class="header" href="#工具">工具</a></h3>
<ul>
<li><strong>nodemon</strong> - 自動重啟（開發用）</li>
<li><strong>pm2</strong> - Process Manager（生產環境）</li>
<li><strong>npm/yarn/pnpm</strong> - 套件管理器</li>
<li><strong>ESLint</strong> - 程式碼檢查</li>
<li><strong>Prettier</strong> - 程式碼格式化</li>
</ul>
<hr />
<h2 id="學習資源"><a class="header" href="#學習資源">學習資源</a></h2>
<h3 id="官方文件"><a class="header" href="#官方文件">官方文件</a></h3>
<ul>
<li>Node.js 官方文件：https://nodejs.org/docs</li>
<li>MDN JavaScript：https://developer.mozilla.org/zh-TW/docs/Web/JavaScript</li>
<li>NPM 官方：https://docs.npmjs.com/</li>
</ul>
<h3 id="推薦書籍"><a class="header" href="#推薦書籍">推薦書籍</a></h3>
<ul>
<li>《You Don't Know JS》系列</li>
<li>《Node.js Design Patterns》</li>
<li>《JavaScript: The Good Parts》</li>
</ul>
<h3 id="線上教學"><a class="header" href="#線上教學">線上教學</a></h3>
<ul>
<li>Node.js 官方教學：https://nodejs.dev/learn</li>
<li>The Odin Project：https://www.theodinproject.com/</li>
<li>freeCodeCamp：https://www.freecodecamp.org/</li>
</ul>
<h3 id="實作專案建議"><a class="header" href="#實作專案建議">實作專案建議</a></h3>
<ol>
<li>CLI 工具（類似 Python script）</li>
<li>REST API 伺服器</li>
<li>WebSocket 即時聊天</li>
<li>檔案處理工具</li>
<li>Web Scraper</li>
</ol>
<hr />
<h2 id="從-pythonrust-背景的提醒"><a class="header" href="#從-pythonrust-背景的提醒">從 Python/Rust 背景的提醒</a></h2>
<h3 id="與-python-的差異"><a class="header" href="#與-python-的差異">與 Python 的差異</a></h3>
<ol>
<li><strong>非同步是預設</strong>：Node.js 的 I/O 操作預設非阻塞</li>
<li><strong>單執行緒</strong>：用事件循環處理並發，不是多執行緒</li>
<li><strong>原型繼承</strong>：不是傳統的 class-based OOP</li>
<li><strong>弱型別</strong>：需要更多防禦性程式設計</li>
<li><strong>this 綁定</strong>：比 self 複雜很多</li>
</ol>
<h3 id="與-rust-的差異"><a class="header" href="#與-rust-的差異">與 Rust 的差異</a></h3>
<ol>
<li><strong>沒有所有權系統</strong>：需要手動管理記憶體洩漏</li>
<li><strong>執行時錯誤</strong>：沒有編譯時保證</li>
<li><strong>可變性</strong>：預設可變，用 const 來限制</li>
<li><strong>null/undefined</strong>：兩種空值概念</li>
<li><strong>型別安全</strong>：使用 TypeScript 獲得部分型別保證</li>
</ol>
<h3 id="最佳實踐"><a class="header" href="#最佳實踐">最佳實踐</a></h3>
<ol>
<li><strong>永遠使用 <code>===</code> 而非 <code>==</code></strong></li>
<li><strong>優先使用 const，其次 let，避免 var</strong></li>
<li><strong>使用 async/await 而非 callback</strong></li>
<li><strong>啟用 strict mode：<code>'use strict';</code></strong></li>
<li><strong>處理所有錯誤情況</strong></li>
<li><strong>使用 ESLint 和 Prettier</strong></li>
<li><strong>考慮使用 TypeScript</strong></li>
<li><strong>理解事件循環</strong></li>
<li><strong>避免阻塞事件循環</strong></li>
<li><strong>適當使用 npm scripts</strong></li>
</ol>
<hr />
<h2 id="快速開始範例"><a class="header" href="#快速開始範例">快速開始範例</a></h2>
<h3 id="hello-world-api-server"><a class="header" href="#hello-world-api-server">Hello World API Server</a></h3>
<pre><code class="language-javascript">// server.js
import express from 'express';

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(express.json());

// Routes
app.get('/', (req, res) =&gt; {
    res.json({ message: 'Hello World!' });
});

app.get('/users/:id', async (req, res) =&gt; {
    try {
        const { id } = req.params;
        // 模擬資料庫查詢
        const user = await getUserById(id);
        res.json(user);
    } catch (error) {
        res.status(404).json({ error: 'User not found' });
    }
});

// 啟動伺服器
app.listen(PORT, () =&gt; {
    console.log(`Server running on http://localhost:${PORT}`);
});

// 模擬非同步函數
async function getUserById(id) {
    return new Promise((resolve, reject) =&gt; {
        setTimeout(() =&gt; {
            if (id === '1') {
                resolve({ id: 1, name: 'Alice' });
            } else {
                reject(new Error('Not found'));
            }
        }, 100);
    });
}
</code></pre>
<p>執行：</p>
<pre><code class="language-bash">npm init -y
npm install express
node server.js
</code></pre>
<hr />
<p>祝你學習順利！有 Python/C++/Rust 背景學 Node.js 會很快上手的。重點是理解事件驅動模型和非同步程式設計。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../web/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../web/websocket_perf_comparison_py_go_rust.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../web/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../web/websocket_perf_comparison_py_go_rust.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
