<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>WebAssembly (WASM) å®Œæ•´é–‹ç™¼æŒ‡å— - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="webassembly-wasm-å®Œæ•´é–‹ç™¼æŒ‡å—"><a class="header" href="#webassembly-wasm-å®Œæ•´é–‹ç™¼æŒ‡å—">WebAssembly (WASM) å®Œæ•´é–‹ç™¼æŒ‡å—</a></h1>
<h2 id="ç›®éŒ„"><a class="header" href="#ç›®éŒ„">ç›®éŒ„</a></h2>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">åŸºæœ¬æ¦‚å¿µ</a></li>
<li><a href="#%E5%B7%A5%E5%85%B7%E9%8F%88%E9%97%9C%E4%BF%82">å·¥å…·éˆé—œä¿‚</a></li>
<li><a href="#rust-%E7%B7%A8%E8%AD%AF-wasm-%E8%AA%9E%E6%B3%95">Rust ç·¨è­¯ WASM èªæ³•</a></li>
<li><a href="#%E7%A8%8B%E5%BC%8F%E7%A2%BC%E7%9B%B8%E5%AE%B9%E6%80%A7">ç¨‹å¼ç¢¼ç›¸å®¹æ€§</a></li>
<li><a href="#%E7%B7%A8%E8%AD%AF%E7%AF%84%E4%BE%8B">ç·¨è­¯ç¯„ä¾‹</a></li>
<li><a href="#%E6%95%88%E8%83%BD%E5%B0%8D%E6%AF%94">æ•ˆèƒ½å°æ¯”</a></li>
<li><a href="#%E5%B8%B8%E8%A6%8B%E8%AA%A4%E8%A7%A3">å¸¸è¦‹èª¤è§£</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90">æœ€ä½³å¯¦è¸</a></li>
<li><a href="#%E5%AF%A6%E9%9A%9B%E6%A1%88%E4%BE%8B">å¯¦éš›æ¡ˆä¾‹</a></li>
</ul>
<h2 id="åŸºæœ¬æ¦‚å¿µ"><a class="header" href="#åŸºæœ¬æ¦‚å¿µ">åŸºæœ¬æ¦‚å¿µ</a></h2>
<h3 id="webassembly-æ˜¯ä»€éº¼"><a class="header" href="#webassembly-æ˜¯ä»€éº¼">WebAssembly æ˜¯ä»€éº¼ï¼Ÿ</a></h3>
<p>WebAssembly (WASM) æ˜¯ä¸€ç¨®ä½éšçš„é¡ä¼¼çµ„èªçš„èªè¨€ï¼Œå…·æœ‰ç·Šæ¹Šçš„äºŒé€²åˆ¶æ ¼å¼ï¼Œç‚ºå…¶ä»–èªè¨€æä¾›ä¸€å€‹ç·¨è­¯ç›®æ¨™ï¼Œä½¿å®ƒå€‘èƒ½å¤ åœ¨ Web ä¸Šé‹è¡Œï¼ŒåŒæ™‚æä¾›æ¥è¿‘åŸç”Ÿçš„æ•ˆèƒ½ã€‚</p>
<h3 id="æ ¸å¿ƒç‰¹æ€§"><a class="header" href="#æ ¸å¿ƒç‰¹æ€§">æ ¸å¿ƒç‰¹æ€§</a></h3>
<ul>
<li><strong>å®‰å…¨æ€§</strong>ï¼šé‹è¡Œåœ¨æ²™ç›’ç’°å¢ƒä¸­</li>
<li><strong>æ•ˆèƒ½</strong>ï¼šæ¥è¿‘åŸç”Ÿä»£ç¢¼çš„åŸ·è¡Œé€Ÿåº¦</li>
<li><strong>å¯ç§»æ¤æ€§</strong>ï¼šè·¨å¹³å°åŸ·è¡Œ</li>
<li><strong>èªè¨€ç„¡é—œ</strong>ï¼šæ”¯æ´å¤šç¨®ç·¨ç¨‹èªè¨€</li>
<li><strong>Web æ¨™æº–</strong>ï¼šW3C æ¨™æº–ï¼Œæ‰€æœ‰ä¸»æµç€è¦½å™¨æ”¯æŒ</li>
</ul>
<h3 id="wasm-ä¸æ˜¯ç¨‹å¼èªè¨€è½‰æ›"><a class="header" href="#wasm-ä¸æ˜¯ç¨‹å¼èªè¨€è½‰æ›">WASM ä¸æ˜¯ç¨‹å¼èªè¨€è½‰æ›</a></h3>
<p><strong>é‡è¦å€åˆ¥</strong>ï¼š</p>
<ul>
<li><strong>.so æª”æ¡ˆ â†’ WASM</strong>ï¼šâŒ ä¸å¯èƒ½</li>
<li><strong>åŸå§‹ç¢¼ â†’ WASM</strong>ï¼šâœ… å¯è¡Œ</li>
</ul>
<pre><code class="language-bash"># âŒ ç„¡æ³•ç›´æ¥è½‰æ›å·²ç·¨è­¯çš„äºŒé€²åˆ¶æª”æ¡ˆ
# .so æª”æ¡ˆæ˜¯ x86-64 æ©Ÿå™¨ç¢¼ï¼ŒWASM æ˜¯è™›æ“¬æŒ‡ä»¤é›†

# âœ… å¿…é ˆå¾åŸå§‹ç¢¼é‡æ–°ç·¨è­¯
emcc your_code.c -o output.wasm -s WASM=1
</code></pre>
<h3 id="è¨˜æ†¶é«”æ¨¡å‹"><a class="header" href="#è¨˜æ†¶é«”æ¨¡å‹">è¨˜æ†¶é«”æ¨¡å‹</a></h3>
<pre><code class="language-javascript">// WASM ä½¿ç”¨ç·šæ€§è¨˜æ†¶é«”æ¨¡å‹
const memory = new WebAssembly.Memory({
    initial: 10,  // 10 é  (640KB)
    maximum: 100  // æœ€å¤§ 100 é  (6.4MB)
});

// æ¯é  = 64KB
// è¨˜æ†¶é«”æ˜¯é€£çºŒçš„ï¼Œé¡ä¼¼ C çš„ malloc
</code></pre>
<h3 id="é¡å‹ç³»çµ±"><a class="header" href="#é¡å‹ç³»çµ±">é¡å‹ç³»çµ±</a></h3>
<p>WASM æ”¯æ´å››ç¨®åŸºæœ¬æ•¸å€¼é¡å‹ï¼š</p>
<ul>
<li><code>i32</code>: 32ä½æ•´æ•¸</li>
<li><code>i64</code>: 64ä½æ•´æ•¸</li>
<li><code>f32</code>: 32ä½æµ®é»æ•¸</li>
<li><code>f64</code>: 64ä½æµ®é»æ•¸</li>
</ul>
<h2 id="å·¥å…·éˆé—œä¿‚"><a class="header" href="#å·¥å…·éˆé—œä¿‚">å·¥å…·éˆé—œä¿‚</a></h2>
<h3 id="åŸºæœ¬é—œä¿‚åœ–"><a class="header" href="#åŸºæœ¬é—œä¿‚åœ–">åŸºæœ¬é—œä¿‚åœ–</a></h3>
<pre><code>Source Code (Rust/C/C++)
        â†“
    Cargo.toml (é…ç½®)
        â†“
    cargo build (ç·¨è­¯)
        â†“
    wasm-pack (åŒ…è£)
        â†“
    WebAssembly + JSç¶å®š
</code></pre>
<h3 id="cargo-èˆ‡-cargotoml"><a class="header" href="#cargo-èˆ‡-cargotoml">Cargo èˆ‡ Cargo.toml</a></h3>
<p><strong>Cargo</strong> æ˜¯ Rust çš„åŒ…ç®¡ç†å·¥å…·å’Œæ§‹å»ºç³»çµ±
<strong>Cargo.toml</strong> æ˜¯é …ç›®é…ç½®æ–‡ä»¶ï¼Œå®šç¾©ï¼š</p>
<pre><code class="language-toml">[package]
name = "my-wasm-project"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]  # ç”Ÿæˆå‹•æ…‹åº«ä¾› WASM ä½¿ç”¨

[dependencies]
wasm-bindgen = "0.2"
serde = { version = "1.0", features = ["derive"] }

[dependencies.web-sys]
version = "0.3"
features = [
  "console",
  "Document",
  "Element",
  "HtmlElement",
  "Window",
]

[features]
default = ["console_error_panic_hook"]
console_error_panic_hook = ["console_error_panic_hook/dep"]
</code></pre>
<h3 id="wasm-pack-çš„ä½œç”¨"><a class="header" href="#wasm-pack-çš„ä½œç”¨">wasm-pack çš„ä½œç”¨</a></h3>
<p>wasm-pack æ˜¯ cargo çš„é«˜å±¤åŒ…è£ï¼ŒåŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š</p>
<ol>
<li><strong>ç·¨è­¯ WASM</strong>ï¼š<code>cargo build --target wasm32-unknown-unknown</code></li>
<li><strong>ç”Ÿæˆç¶å®š</strong>ï¼šä½¿ç”¨ wasm-bindgen å‰µå»º JS/TS æ¥å£</li>
<li><strong>å„ªåŒ–</strong>ï¼šä½¿ç”¨ wasm-opt å„ªåŒ–äºŒé€²åˆ¶æ–‡ä»¶</li>
<li><strong>æ‰“åŒ…</strong>ï¼šç”Ÿæˆ npm å¯ç”¨çš„åŒ…çµæ§‹</li>
</ol>
<h3 id="åƒæ•¸èªªæ˜"><a class="header" href="#åƒæ•¸èªªæ˜">åƒæ•¸èªªæ˜</a></h3>
<h4 id="wasm-pack-build-åƒæ•¸"><a class="header" href="#wasm-pack-build-åƒæ•¸">wasm-pack build åƒæ•¸</a></h4>
<pre><code class="language-bash"># é–‹ç™¼æ¨¡å¼ï¼ˆæœªå„ªåŒ–ï¼Œä¿ç•™èª¿è©¦ä¿¡æ¯ï¼‰
wasm-pack build --dev

# ç¦ç”¨é»˜èªç‰¹æ€§
wasm-pack build --no-default-features

# æŒ‡å®šç›®æ¨™
wasm-pack build --target web           # é©ç”¨æ–¼ ES6 æ¨¡çµ„
wasm-pack build --target nodejs       # é©ç”¨æ–¼ Node.js
wasm-pack build --target bundler      # é©ç”¨æ–¼ Webpack ç­‰

# è¼¸å‡ºç›®éŒ„
wasm-pack build --out-dir pkg

# ç¯„åœï¼ˆç”¨æ–¼ npm ç™¼å¸ƒï¼‰
wasm-pack build --scope mycompany
</code></pre>
<h2 id="rust-ç·¨è­¯-wasm-èªæ³•"><a class="header" href="#rust-ç·¨è­¯-wasm-èªæ³•">Rust ç·¨è­¯ WASM èªæ³•</a></h2>
<h3 id="åŸºæœ¬è¨­å®š"><a class="header" href="#åŸºæœ¬è¨­å®š">åŸºæœ¬è¨­å®š</a></h3>
<h4 id="cargotoml-é…ç½®"><a class="header" href="#cargotoml-é…ç½®">Cargo.toml é…ç½®</a></h4>
<pre><code class="language-toml">[package]
name = "my-wasm-project"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]  # ç·¨è­¯æˆå‹•æ…‹åº«

[dependencies]
wasm-bindgen = "0.2"
</code></pre>
<h3 id="å‡½æ•¸åŒ¯å‡ºèªæ³•"><a class="header" href="#å‡½æ•¸åŒ¯å‡ºèªæ³•">å‡½æ•¸åŒ¯å‡ºèªæ³•</a></h3>
<h4 id="ä½¿ç”¨-wasm-bindgen-æ¨è–¦"><a class="header" href="#ä½¿ç”¨-wasm-bindgen-æ¨è–¦">ä½¿ç”¨ wasm-bindgen (æ¨è–¦)</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// åŒ¯å‡ºåŸºæœ¬å‡½æ•¸
#[wasm_bindgen]
pub fn add(a: i32, b: i32) -&gt; i32 {
    a + b
}

// åŒ¯å‡ºå­—ä¸²è™•ç†å‡½æ•¸
#[wasm_bindgen]
pub fn greet(name: &amp;str) -&gt; String {
    format!("Hello, {}!", name)
}

// åŒ¯å‡ºçµæ§‹é«”
#[wasm_bindgen]
pub struct Calculator {
    value: i32,
}

#[wasm_bindgen]
impl Calculator {
    #[wasm_bindgen(constructor)]
    pub fn new() -&gt; Calculator {
        Calculator { value: 0 }
    }
    
    #[wasm_bindgen]
    pub fn add(&amp;mut self, x: i32) {
        self.value += x;
    }
    
    #[wasm_bindgen(getter)]
    pub fn value(&amp;self) -&gt; i32 {
        self.value
    }
}
<span class="boring">}</span></code></pre></pre>
<h4 id="javascript-äº’æ“ä½œ"><a class="header" href="#javascript-äº’æ“ä½œ">JavaScript äº’æ“ä½œ</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// JavaScript å°å…¥
#[wasm_bindgen]
extern "C" {
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &amp;str);
    
    #[wasm_bindgen(js_namespace = Math)]
    fn random() -&gt; f64;
}

// å®šç¾© console.log å·¨é›†
macro_rules! console_log {
    ($($t:tt)*) =&gt; (log(&amp;format_args!($($t)*).to_string()))
}

#[wasm_bindgen]
pub fn use_js_functions() {
    console_log!("Random number: {}", random());
}
<span class="boring">}</span></code></pre></pre>
<h3 id="é‡è¦æ¦‚å¿µæ¾„æ¸…"><a class="header" href="#é‡è¦æ¦‚å¿µæ¾„æ¸…">é‡è¦æ¦‚å¿µæ¾„æ¸…</a></h3>
<h4 id="wasm_bindgen-çš„ä½œç”¨"><a class="header" href="#wasm_bindgen-çš„ä½œç”¨"><code>#[wasm_bindgen]</code> çš„ä½œç”¨</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âœ… æ‰€æœ‰ç¨‹å¼ç¢¼éƒ½æœƒç·¨è­¯æˆ WASM
fn internal_function() -&gt; i32 {
    42  // é€™å€‹å‡½æ•¸ä¹Ÿæœƒç·¨è­¯æˆ WASMï¼Œä½†ä¸æœƒåŒ¯å‡ºçµ¦ JavaScript
}

#[wasm_bindgen]
pub fn exported_function() -&gt; i32 {
    internal_function()  // é€™å€‹å‡½æ•¸æœƒåŒ¯å‡ºçµ¦ JavaScript ä½¿ç”¨
}
<span class="boring">}</span></code></pre></pre>
<p><strong>é—œéµé»</strong>ï¼š</p>
<ul>
<li><code>#[wasm_bindgen]</code> <strong>ä¸æ±ºå®š</strong>æ˜¯å¦ç·¨è­¯æˆ WASM</li>
<li>å®ƒåªæ±ºå®šæ˜¯å¦<strong>åŒ¯å‡º</strong>çµ¦ JavaScript ä½¿ç”¨</li>
<li>æ•´å€‹ Rust å°ˆæ¡ˆéƒ½æœƒç·¨è­¯æˆ WASM</li>
</ul>
<h2 id="ç¨‹å¼ç¢¼ç›¸å®¹æ€§"><a class="header" href="#ç¨‹å¼ç¢¼ç›¸å®¹æ€§">ç¨‹å¼ç¢¼ç›¸å®¹æ€§</a></h2>
<h3 id="ä¸¦éæ‰€æœ‰ç¨‹å¼ç¢¼éƒ½èƒ½è½‰æˆ-wasm"><a class="header" href="#ä¸¦éæ‰€æœ‰ç¨‹å¼ç¢¼éƒ½èƒ½è½‰æˆ-wasm">ä¸¦éæ‰€æœ‰ç¨‹å¼ç¢¼éƒ½èƒ½è½‰æˆ WASM</a></h3>
<p><strong>ä¸»è¦é™åˆ¶</strong>ï¼š</p>
<ol>
<li><strong>ç³»çµ±å‘¼å«å’Œå¹³å° API</strong></li>
<li><strong>æª”æ¡ˆç³»çµ±æ“ä½œ</strong></li>
<li><strong>å¤šåŸ·è¡Œç·’ï¼ˆéƒ¨åˆ†æ”¯æ´ï¼‰</strong></li>
<li><strong>å…§åµŒçµ„åˆèªè¨€</strong></li>
<li><strong>å‹•æ…‹é€£çµ</strong></li>
</ol>
<h3 id="-ç„¡æ³•ç·¨è­¯æˆ-wasm-çš„ç¨‹å¼ç¢¼"><a class="header" href="#-ç„¡æ³•ç·¨è­¯æˆ-wasm-çš„ç¨‹å¼ç¢¼">âŒ ç„¡æ³•ç·¨è­¯æˆ WASM çš„ç¨‹å¼ç¢¼</a></h3>
<h4 id="1-ç³»çµ±å‘¼å«å’Œæª”æ¡ˆ-io"><a class="header" href="#1-ç³»çµ±å‘¼å«å’Œæª”æ¡ˆ-io">1. ç³»çµ±å‘¼å«å’Œæª”æ¡ˆ I/O</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::fs;
use std::process::Command;

// âŒ æª”æ¡ˆç³»çµ±æ“ä½œ
fn read_file() -&gt; String {
    fs::read_to_string("config.txt").unwrap()  // ç„¡æ³•ç·¨è­¯
}

// âŒ åŸ·è¡Œç³»çµ±å‘½ä»¤
fn run_command() {
    Command::new("ls").output().unwrap();  // ç„¡æ³•ç·¨è­¯
}

// âŒ ç’°å¢ƒè®Šæ•¸
fn get_env() {
    std::env::var("HOME").unwrap();  // ç„¡æ³•ç·¨è­¯
}
<span class="boring">}</span></code></pre></pre>
<h4 id="2-å¤šåŸ·è¡Œç·’"><a class="header" href="#2-å¤šåŸ·è¡Œç·’">2. å¤šåŸ·è¡Œç·’</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::thread;
use std::sync::Mutex;

// âŒ æ¨™æº–åŸ·è¡Œç·’
fn spawn_thread() {
    thread::spawn(|| {
        println!("Hello from thread!");
    });
}

// âŒ åŒæ­¥åŸèª
static COUNTER: Mutex&lt;i32&gt; = Mutex::new(0);  // ç„¡æ³•ç·¨è­¯
<span class="boring">}</span></code></pre></pre>
<h4 id="3-ç¶²è·¯å’Œ-socket"><a class="header" href="#3-ç¶²è·¯å’Œ-socket">3. ç¶²è·¯å’Œ Socket</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use std::net::{TcpListener, TcpStream, UdpSocket};

// âŒ TCP Socket
fn tcp_server() {
    let listener = TcpListener::bind("127.0.0.1:8080").unwrap();  // ç„¡æ³•ç·¨è­¯
}

// âŒ UDP Socket
fn udp_socket() {
    let socket = UdpSocket::bind("127.0.0.1:0").unwrap();  // ç„¡æ³•ç·¨è­¯
}
<span class="boring">}</span></code></pre></pre>
<h4 id="4-å¹³å°ç‰¹å®šç¨‹å¼ç¢¼"><a class="header" href="#4-å¹³å°ç‰¹å®šç¨‹å¼ç¢¼">4. å¹³å°ç‰¹å®šç¨‹å¼ç¢¼</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âŒ å…§åµŒçµ„åˆèªè¨€
#[cfg(target_arch = "x86_64")]
fn assembly_code() {
    unsafe {
        asm!("mov rax, 42");  // ç„¡æ³•ç·¨è­¯
    }
}

// âŒ Windows API
#[cfg(windows)]
extern "system" {
    fn GetCurrentProcessId() -&gt; u32;  // ç„¡æ³•ç·¨è­¯
}
<span class="boring">}</span></code></pre></pre>
<h3 id="-å¯ä»¥ç·¨è­¯æˆ-wasm-çš„ç¨‹å¼ç¢¼"><a class="header" href="#-å¯ä»¥ç·¨è­¯æˆ-wasm-çš„ç¨‹å¼ç¢¼">âœ… å¯ä»¥ç·¨è­¯æˆ WASM çš„ç¨‹å¼ç¢¼</a></h3>
<h4 id="1-ç´”è¨ˆç®—é‚è¼¯"><a class="header" href="#1-ç´”è¨ˆç®—é‚è¼¯">1. ç´”è¨ˆç®—é‚è¼¯</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// âœ… æ•¸å­¸è¨ˆç®—
#[wasm_bindgen]
pub fn fibonacci(n: u32) -&gt; u64 {
    match n {
        0 =&gt; 0,
        1 =&gt; 1,
        _ =&gt; fibonacci(n - 1) + fibonacci(n - 2),
    }
}

// âœ… å­—ä¸²è™•ç†
#[wasm_bindgen]
pub fn reverse_string(s: &amp;str) -&gt; String {
    s.chars().rev().collect()
}

// âœ… é™£åˆ—æ“ä½œ
#[wasm_bindgen]
pub fn sum_array(numbers: &amp;[i32]) -&gt; i32 {
    numbers.iter().sum()
}
<span class="boring">}</span></code></pre></pre>
<h4 id="2-è³‡æ–™çµæ§‹å’Œæ¼”ç®—æ³•"><a class="header" href="#2-è³‡æ–™çµæ§‹å’Œæ¼”ç®—æ³•">2. è³‡æ–™çµæ§‹å’Œæ¼”ç®—æ³•</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// âœ… æ’åºæ¼”ç®—æ³•
#[wasm_bindgen]
pub fn quick_sort(mut arr: Vec&lt;i32&gt;) -&gt; Vec&lt;i32&gt; {
    if arr.len() &lt;= 1 {
        return arr;
    }
    
    let pivot = arr.len() / 2;
    let pivot_value = arr[pivot];
    arr.remove(pivot);
    
    let less: Vec&lt;i32&gt; = arr.iter().filter(|&amp;&amp;x| x &lt; pivot_value).cloned().collect();
    let greater: Vec&lt;i32&gt; = arr.iter().filter(|&amp;&amp;x| x &gt;= pivot_value).cloned().collect();
    
    let mut result = quick_sort(less);
    result.push(pivot_value);
    result.extend(quick_sort(greater));
    result
}
<span class="boring">}</span></code></pre></pre>
<h4 id="3-åœ–åƒå’ŒéŸ³è¨Šè™•ç†"><a class="header" href="#3-åœ–åƒå’ŒéŸ³è¨Šè™•ç†">3. åœ–åƒå’ŒéŸ³è¨Šè™•ç†</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// âœ… åœ–åƒæ¿¾é¡
#[wasm_bindgen]
pub fn apply_grayscale(pixels: &amp;mut [u8]) {
    for chunk in pixels.chunks_exact_mut(4) {
        let r = chunk[0] as f32;
        let g = chunk[1] as f32;
        let b = chunk[2] as f32;
        
        let gray = (0.299 * r + 0.587 * g + 0.114 * b) as u8;
        
        chunk[0] = gray;
        chunk[1] = gray;
        chunk[2] = gray;
        // chunk[3] æ˜¯ alphaï¼Œä¿æŒä¸è®Š
    }
}

// âœ… éŸ³è¨Šè™•ç†
#[wasm_bindgen]
pub fn apply_echo(samples: &amp;mut [f32], delay_samples: usize, decay: f32) {
    for i in delay_samples..samples.len() {
        samples[i] += samples[i - delay_samples] * decay;
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="ç›¸å®¹æ€§ç¸½çµè¡¨"><a class="header" href="#ç›¸å®¹æ€§ç¸½çµè¡¨">ç›¸å®¹æ€§ç¸½çµè¡¨</a></h3>
<div class="table-wrapper"><table><thead><tr><th><strong>å¯ä»¥ç·¨è­¯æˆ WASM</strong></th><th><strong>ç„¡æ³•ç·¨è­¯æˆ WASM</strong></th></tr></thead><tbody>
<tr><td>ç´”è¨ˆç®—é‚è¼¯</td><td>ç³»çµ±å‘¼å«</td></tr>
<tr><td>è³‡æ–™çµæ§‹æ“ä½œ</td><td>æª”æ¡ˆ I/O</td></tr>
<tr><td>æ¼”ç®—æ³•å¯¦ä½œ</td><td>ç¶²è·¯ Socket</td></tr>
<tr><td>å­—ä¸²/é™£åˆ—è™•ç†</td><td>å¤šåŸ·è¡Œç·’</td></tr>
<tr><td>æ•¸å­¸é‹ç®—</td><td>å¹³å°ç‰¹å®š API</td></tr>
<tr><td>éŠæˆ²é‚è¼¯</td><td>ç’°å¢ƒè®Šæ•¸å­˜å–</td></tr>
<tr><td>åœ–åƒ/éŸ³è¨Šè™•ç†</td><td>è¡Œç¨‹ç®¡ç†</td></tr>
<tr><td>åŠ å¯†/å£“ç¸®</td><td>ç¡¬é«”ç›´æ¥å­˜å–</td></tr>
</tbody></table>
</div>
<h2 id="ç·¨è­¯ç¯„ä¾‹"><a class="header" href="#ç·¨è­¯ç¯„ä¾‹">ç·¨è­¯ç¯„ä¾‹</a></h2>
<h3 id="1-åŸºæœ¬-rust--wasm-è¨­å®š"><a class="header" href="#1-åŸºæœ¬-rust--wasm-è¨­å®š">1. åŸºæœ¬ Rust + WASM è¨­å®š</a></h3>
<p><strong>Cargo.toml</strong>:</p>
<pre><code class="language-toml">[package]
name = "hello-wasm"
version = "0.1.0"
edition = "2021"

[lib]
crate-type = ["cdylib"]

[dependencies]
wasm-bindgen = "0.2"

[dependencies.web-sys]
version = "0.3"
features = [
  "console",
]

[features]
default = ["console_error_panic_hook"]

[dependencies.console_error_panic_hook]
version = "0.1.6"
optional = true
</code></pre>
<p><strong>src/lib.rs</strong>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod utils;

use wasm_bindgen::prelude::*;

// å°å…¥ `console.log` å‡½æ•¸
#[wasm_bindgen]
extern "C" {
    #[wasm_bindgen(js_namespace = console)]
    fn log(s: &amp;str);
}

// å®šç¾©ä¸€å€‹å®ä¾†æ–¹ä¾¿èª¿ç”¨ `console.log`
macro_rules! console_log {
    ($($t:tt)*) =&gt; (log(&amp;format_args!($($t)*).to_string()))
}

#[wasm_bindgen]
pub fn greet(name: &amp;str) {
    console_log!("Hello, {}!", name);
}

#[wasm_bindgen]
pub fn add(a: i32, b: i32) -&gt; i32 {
    a + b
}

// è¤‡é›œé‹ç®—ç¤ºä¾‹
#[wasm_bindgen]
pub fn fibonacci(n: u32) -&gt; u32 {
    match n {
        0 =&gt; 0,
        1 =&gt; 1,
        _ =&gt; fibonacci(n - 1) + fibonacci(n - 2),
    }
}

// è™•ç†æ•¸çµ„
#[wasm_bindgen]
pub fn sum_array(numbers: &amp;[i32]) -&gt; i32 {
    numbers.iter().sum()
}
<span class="boring">}</span></code></pre></pre>
<h3 id="2-ç·¨è­¯å‘½ä»¤"><a class="header" href="#2-ç·¨è­¯å‘½ä»¤">2. ç·¨è­¯å‘½ä»¤</a></h3>
<pre><code class="language-bash"># å®‰è£ç›®æ¨™å¹³å°
rustup target add wasm32-unknown-unknown

# åˆå§‹åŒ–é …ç›®
cargo generate --git https://github.com/rustwasm/wasm-pack-template
cd my-wasm-project

# åŸºæœ¬ç·¨è­¯
cargo build --target wasm32-unknown-unknown --release

# ä½¿ç”¨ wasm-pack (æ¨è–¦)
cargo install wasm-pack

# é–‹ç™¼ç‰ˆæœ¬ç·¨è­¯
wasm-pack build --dev

# ç”Ÿç”¢ç‰ˆæœ¬ç·¨è­¯
wasm-pack build --release

# æŒ‡å®šç‰¹å®šç‰¹æ€§
wasm-pack build --no-default-features --features "web-feature"

# é‡å°ä¸åŒç›®æ¨™
wasm-pack build --target web --out-dir pkg-web
wasm-pack build --target nodejs --out-dir pkg-node
wasm-pack build --target bundler    # æ‰“åŒ…å·¥å…· (webpackç­‰)
wasm-pack build --target no-modules # å…¨åŸŸè®Šæ•¸
</code></pre>
<h3 id="3-javascript-ä½¿ç”¨"><a class="header" href="#3-javascript-ä½¿ç”¨">3. JavaScript ä½¿ç”¨</a></h3>
<p><strong>åœ¨ Web ä¸­ä½¿ç”¨</strong>:</p>
<pre><code class="language-javascript">import init, { greet, add, fibonacci } from './pkg/hello_wasm.js';

async function run() {
    // åˆå§‹åŒ– WASM æ¨¡çµ„
    await init();
    
    // èª¿ç”¨å‡½æ•¸
    greet('World');
    console.log('2 + 3 =', add(2, 3));
    console.log('fibonacci(10) =', fibonacci(10));
}

run();
</code></pre>
<p><strong>åœ¨ Node.js ä¸­ä½¿ç”¨</strong>:</p>
<pre><code class="language-javascript">const wasm = require('./pkg-node/hello_wasm.js');

// Node.js ç‰ˆæœ¬é€šå¸¸æ˜¯åŒæ­¥åˆå§‹åŒ–
console.log('2 + 3 =', wasm.add(2, 3));
</code></pre>
<h3 id="4-é«˜ç´šç¯„ä¾‹åœ–åƒè™•ç†"><a class="header" href="#4-é«˜ç´šç¯„ä¾‹åœ–åƒè™•ç†">4. é«˜ç´šç¯„ä¾‹ï¼šåœ–åƒè™•ç†</a></h3>
<p><strong>Cargo.toml</strong>:</p>
<pre><code class="language-toml">[dependencies]
wasm-bindgen = "0.2"
js-sys = "0.3"
image = { version = "0.24", default-features = false, features = ["png", "jpeg"] }

[dependencies.web-sys]
version = "0.3"
features = [
  "console",
  "ImageData",
  "CanvasRenderingContext2d",
]
</code></pre>
<p><strong>src/lib.rs</strong>:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;
use wasm_bindgen::Clamped;
use web_sys::{CanvasRenderingContext2d, ImageData};

#[wasm_bindgen]
pub struct ImageProcessor {
    width: u32,
    height: u32,
    data: Vec&lt;u8&gt;,
}

#[wasm_bindgen]
impl ImageProcessor {
    #[wasm_bindgen(constructor)]
    pub fn new(width: u32, height: u32) -&gt; ImageProcessor {
        ImageProcessor {
            width,
            height,
            data: vec![0; (width * height * 4) as usize],
        }
    }

    #[wasm_bindgen]
    pub fn apply_grayscale(&amp;mut self) {
        for pixel in self.data.chunks_exact_mut(4) {
            let gray = (0.299 * pixel[0] as f64 
                      + 0.587 * pixel[1] as f64 
                      + 0.114 * pixel[2] as f64) as u8;
            pixel[0] = gray;
            pixel[1] = gray;
            pixel[2] = gray;
            // Alpha é€šé“ä¿æŒä¸è®Š
        }
    }

    #[wasm_bindgen]
    pub fn get_image_data(&amp;self, ctx: &amp;CanvasRenderingContext2d) -&gt; Result&lt;ImageData, JsValue&gt; {
        ImageData::new_with_u8_clamped_array_and_sh(
            Clamped(&amp;self.data),
            self.width,
            self.height,
        )
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="æ•ˆèƒ½å°æ¯”"><a class="header" href="#æ•ˆèƒ½å°æ¯”">æ•ˆèƒ½å°æ¯”</a></h2>
<h3 id="web-ç’°å¢ƒæ•ˆèƒ½æ¯”è¼ƒ"><a class="header" href="#web-ç’°å¢ƒæ•ˆèƒ½æ¯”è¼ƒ">Web ç’°å¢ƒæ•ˆèƒ½æ¯”è¼ƒ</a></h3>
<div class="table-wrapper"><table><thead><tr><th>æŠ€è¡“</th><th>é©ç”¨å ´æ™¯</th><th>æ•ˆèƒ½</th><th>é™åˆ¶</th></tr></thead><tbody>
<tr><td><strong>ç´” JavaScript</strong></td><td>DOM æ“ä½œã€è¼•é‡é‹ç®—</td><td>åŸºæº–</td><td>V8 å„ªåŒ–é™åˆ¶</td></tr>
<tr><td><strong>WebAssembly</strong></td><td>CPU å¯†é›†é‹ç®—</td><td>2-10x æ›´å¿«</td><td>èª¿ç”¨é‚Šç•Œé–‹éŠ·</td></tr>
<tr><td><strong>.so åº«</strong></td><td>âŒ ä¸æ”¯æ´</td><td>N/A</td><td>ç€è¦½å™¨æ²™ç›’é™åˆ¶</td></tr>
</tbody></table>
</div>
<h3 id="æ‰‹æ©Ÿç’°å¢ƒæ•ˆèƒ½æ¯”è¼ƒ"><a class="header" href="#æ‰‹æ©Ÿç’°å¢ƒæ•ˆèƒ½æ¯”è¼ƒ">æ‰‹æ©Ÿç’°å¢ƒæ•ˆèƒ½æ¯”è¼ƒ</a></h3>
<h4 id="react-native--hybrid-apps"><a class="header" href="#react-native--hybrid-apps">React Native / Hybrid Apps</a></h4>
<pre><code class="language-javascript">// .so åº«èª¿ç”¨ (Android)
import { NativeModules } from 'react-native';
const { MyNativeModule } = NativeModules;

// â­ æ•ˆèƒ½æœ€ä½³ - ç›´æ¥ JNI èª¿ç”¨
MyNativeModule.computeHeavyTask(data)
    .then(result =&gt; console.log(result));

// WASM èª¿ç”¨
import wasmModule from './my_module.wasm';
// âš ï¸ éœ€è¦é¡å¤–çš„ runtimeï¼Œæ•ˆèƒ½è¼ƒå·®
</code></pre>
<h4 id="åŸç”Ÿ-app"><a class="header" href="#åŸç”Ÿ-app">åŸç”Ÿ App</a></h4>
<pre><code class="language-java">// Android - ç›´æ¥ JNI èª¿ç”¨
static {
    System.loadLibrary("mynative");
}
public native int computeTask(int[] data);
</code></pre>
<pre><code class="language-swift">// iOS - ç›´æ¥èª¿ç”¨ C/C++ Framework
import MyNativeFramework
let result = MyNativeFramework.computeTask(data)
</code></pre>
<h3 id="æ•ˆèƒ½æ¸¬è©¦çµæœ"><a class="header" href="#æ•ˆèƒ½æ¸¬è©¦çµæœ">æ•ˆèƒ½æ¸¬è©¦çµæœ</a></h3>
<div class="table-wrapper"><table><thead><tr><th>ç’°å¢ƒ</th><th>.so åº«</th><th>WASM</th><th>æ•ˆèƒ½æ¯”è¼ƒ</th></tr></thead><tbody>
<tr><td><strong>Web ç€è¦½å™¨</strong></td><td>âŒ</td><td>âœ… è‰¯å¥½</td><td>WASM å”¯ä¸€é¸æ“‡</td></tr>
<tr><td><strong>React Native</strong></td><td>â­ æ¥µä½³</td><td>âš ï¸ å—é™</td><td>.so å¿« 3-5x</td></tr>
<tr><td><strong>Android åŸç”Ÿ</strong></td><td>â­ æ¥µä½³</td><td>âŒ</td><td>.so æœ€å„ª</td></tr>
<tr><td><strong>iOS åŸç”Ÿ</strong></td><td>â­ æ¥µä½³</td><td>âŒ</td><td>Native æœ€å„ª</td></tr>
<tr><td><strong>Node.js</strong></td><td>â­ æ¥µä½³</td><td>âœ… è‰¯å¥½</td><td>.so å¿« 1.5-3x</td></tr>
</tbody></table>
</div>
<h2 id="å¸¸è¦‹èª¤è§£"><a class="header" href="#å¸¸è¦‹èª¤è§£">å¸¸è¦‹èª¤è§£</a></h2>
<h3 id="-æ¦‚å¿µèª¤è§£"><a class="header" href="#-æ¦‚å¿µèª¤è§£">ğŸ§  æ¦‚å¿µèª¤è§£</a></h3>
<h4 id="1-wasm-æœƒå–ä»£-javascript"><a class="header" href="#1-wasm-æœƒå–ä»£-javascript">1. ã€ŒWASM æœƒå–ä»£ JavaScriptã€</a></h4>
<pre><code class="language-javascript">// âŒ èª¤è§£ï¼šWASM è¦å®Œå…¨å–ä»£ JS
// âœ… å¯¦éš›ï¼šWASM å’Œ JS å”ä½œ

// JavaScript è² è²¬ DOM æ“ä½œ
document.getElementById('canvas').addEventListener('click', (e) =&gt; {
    // WASM è² è²¬å¯†é›†è¨ˆç®—
    const result = wasm.heavy_computation(e.clientX, e.clientY);
    // JS è² è²¬æ›´æ–° UI
    updateDisplay(result);
});
</code></pre>
<h4 id="2-èªè¨€æ”¯æ´èª¤è§£"><a class="header" href="#2-èªè¨€æ”¯æ´èª¤è§£">2. èªè¨€æ”¯æ´èª¤è§£</a></h4>
<pre><code class="language-markdown">âœ… å®¹æ˜“ç·¨è­¯ï¼šRust, C/C++, AssemblyScript
âš ï¸ éœ€è¦å·¥å…·ï¼šGo, Python (via Pyodide)
âŒ å›°é›£/ä¸æ”¯æ´ï¼šJava, C#ï¼ˆéƒ¨åˆ†æ”¯æ´ï¼‰, PHP, Ruby
</code></pre>
<h3 id="-èª¤è§£-1wasm-ç¸½æ˜¯æ¯”-javascript-å¿«"><a class="header" href="#-èª¤è§£-1wasm-ç¸½æ˜¯æ¯”-javascript-å¿«">âŒ èª¤è§£ 1ï¼šWASM ç¸½æ˜¯æ¯” JavaScript å¿«</a></h3>
<pre><code class="language-javascript">// éŒ¯èª¤ï¼šé »ç¹çš„å°é‹ç®—èª¿ç”¨
for (let i = 0; i &lt; 1000; i++) {
    wasmAdd(i, i + 1); // æ¯æ¬¡èª¿ç”¨éƒ½æœ‰é‚Šç•Œé–‹éŠ·
}

// æ­£ç¢ºï¼šæ‰¹é‡è™•ç†
const results = wasmBatchAdd(array1, array2);
</code></pre>
<p><strong>è§£é‡‹</strong>ï¼šJS â†” WASM èª¿ç”¨æœ‰é–‹éŠ·ï¼Œå°é‹ç®—å¯èƒ½æ¯”ç´” JS æ…¢ã€‚</p>
<h3 id="-èª¤è§£-2æ‰‹æ©Ÿç€è¦½å™¨æ”¯æ´-so-èª¿ç”¨"><a class="header" href="#-èª¤è§£-2æ‰‹æ©Ÿç€è¦½å™¨æ”¯æ´-so-èª¿ç”¨">âŒ èª¤è§£ 2ï¼šæ‰‹æ©Ÿç€è¦½å™¨æ”¯æ´ .so èª¿ç”¨</a></h3>
<pre><code class="language-javascript">// å®Œå…¨éŒ¯èª¤ - æ‰‹æ©Ÿç€è¦½å™¨ä»æ˜¯æ²™ç›’ç’°å¢ƒ
loadLibrary('./native.so'); // âŒ ä¸å¯èƒ½
</code></pre>
<h3 id="-èª¤è§£-3wasm-æª”æ¡ˆå¤§å°ä¸é‡è¦"><a class="header" href="#-èª¤è§£-3wasm-æª”æ¡ˆå¤§å°ä¸é‡è¦">âŒ èª¤è§£ 3ï¼šWASM æª”æ¡ˆå¤§å°ä¸é‡è¦</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// éŒ¯èª¤ï¼šåŒ…å«å¤§é‡ç„¡ç”¨ä¾è³´
[dependencies]
tokio = "1.0"        // ç•°æ­¥ runtimeï¼ŒWASM ä¸­ç„¡ç”¨
reqwest = "0.11"     // HTTP å®¢æˆ¶ç«¯ï¼Œç”¨ fetch API å³å¯
serde_json = "1.0"   // å¦‚æœåªéœ€ç°¡å–®åºåˆ—åŒ–

// æ­£ç¢ºï¼šæœ€å°åŒ–ä¾è³´
[dependencies]
wasm-bindgen = "0.2"
serde = { version = "1.0", features = ["derive"] }
<span class="boring">}</span></code></pre></pre>
<h3 id="-èª¤è§£-4æ‰€æœ‰é‹ç®—éƒ½é©åˆ-wasm"><a class="header" href="#-èª¤è§£-4æ‰€æœ‰é‹ç®—éƒ½é©åˆ-wasm">âŒ èª¤è§£ 4ï¼šæ‰€æœ‰é‹ç®—éƒ½é©åˆ WASM</a></h3>
<pre><code class="language-javascript">// éŒ¯èª¤ï¼šDOM æ“ä½œç”¨ WASM
wasm.updateElement(id, value); // åè€Œæ›´æ…¢

// æ­£ç¢ºï¼šåˆ†å·¥åˆä½œ
const processed = wasm.processData(rawData); // CPU å¯†é›†ç”¨ WASM
document.getElementById(id).value = processed; // DOM æ“ä½œç”¨ JS
</code></pre>
<h3 id="-èª¤è§£-5wasm-å¯ä»¥ç›´æ¥æ“ä½œ-dom"><a class="header" href="#-èª¤è§£-5wasm-å¯ä»¥ç›´æ¥æ“ä½œ-dom">âŒ èª¤è§£ 5ï¼šWASM å¯ä»¥ç›´æ¥æ“ä½œ DOM</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// éŒ¯èª¤ç†è§£ - WASM ç„¡æ³•ç›´æ¥è¨ªå• DOM
// éœ€è¦é€šé web-sys ç¶å®š
use web_sys::{console, Document, Element, HtmlElement, Window};

#[wasm_bindgen]
pub fn update_dom(id: &amp;str, text: &amp;str) {
    let window = web_sys::window().unwrap();
    let document = window.document().unwrap();
    let element = document.get_element_by_id(id).unwrap();
    element.set_text_content(Some(text));
}
<span class="boring">}</span></code></pre></pre>
<h3 id="-æŠ€è¡“èª¤è§£"><a class="header" href="#-æŠ€è¡“èª¤è§£">ğŸ”§ æŠ€è¡“èª¤è§£</a></h3>
<h4 id="3-è¨˜æ†¶é«”ç®¡ç†æ··æ·†"><a class="header" href="#3-è¨˜æ†¶é«”ç®¡ç†æ··æ·†">3. è¨˜æ†¶é«”ç®¡ç†æ··æ·†</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

// âŒ èª¤è§£ï¼šJS æœƒè‡ªå‹•å›æ”¶ Rust è¨˜æ†¶é«”
#[wasm_bindgen]
pub fn create_data() -&gt; *mut u8 {
    let data = vec![0u8; 1000];
    let ptr = data.as_mut_ptr();
    std::mem::forget(data);  // è¨˜æ†¶é«”æ´©æ¼ï¼
    ptr
}

// âœ… æ­£ç¢ºï¼šæ˜ç¢ºç®¡ç†è¨˜æ†¶é«”
#[wasm_bindgen]
pub struct DataBuffer {
    data: Vec&lt;u8&gt;,
}

#[wasm_bindgen]
impl DataBuffer {
    #[wasm_bindgen(constructor)]
    pub fn new(size: usize) -&gt; DataBuffer {
        DataBuffer {
            data: vec![0; size],
        }
    }
    
    // æ˜ç¢ºçš„æ¸…ç†æ–¹æ³•
    #[wasm_bindgen]
    pub fn free(self) {
        // Rust çš„ Drop trait æœƒè‡ªå‹•æ¸…ç†
    }
}
<span class="boring">}</span></code></pre></pre>
<h4 id="4-æ•ˆèƒ½æœŸæœ›ä¸å¯¦éš›"><a class="header" href="#4-æ•ˆèƒ½æœŸæœ›ä¸å¯¦éš›">4. æ•ˆèƒ½æœŸæœ›ä¸å¯¦éš›</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âŒ èª¤è§£ï¼šWASM ç¸½æ˜¯æ¯” JS å¿«
#[wasm_bindgen]
pub fn simple_addition(a: i32, b: i32) -&gt; i32 {
    a + b  // å°ç°¡å–®æ“ä½œï¼ŒJS å¯èƒ½æ›´å¿«ï¼ˆJIT å„ªåŒ–ï¼‰
}

// âœ… WASM é©åˆï¼šå¯†é›†è¨ˆç®—
#[wasm_bindgen]
pub fn matrix_multiplication(a: &amp;[f64], b: &amp;[f64], size: usize) -&gt; Vec&lt;f64&gt; {
    // å¤§é‡è¨ˆç®—ï¼ŒWASM é¡¯è‘—æ›´å¿«
    let mut result = vec![0.0; size * size];
    for i in 0..size {
        for j in 0..size {
            for k in 0..size {
                result[i * size + j] += a[i * size + k] * b[k * size + j];
            }
        }
    }
    result
}
<span class="boring">}</span></code></pre></pre>
<h3 id="-ç€è¦½å™¨å…¼å®¹æ€§"><a class="header" href="#-ç€è¦½å™¨å…¼å®¹æ€§">ğŸŒ ç€è¦½å™¨å…¼å®¹æ€§</a></h3>
<h4 id="5-æ”¯æ´æ€§æª¢æŸ¥"><a class="header" href="#5-æ”¯æ´æ€§æª¢æŸ¥">5. æ”¯æ´æ€§æª¢æŸ¥</a></h4>
<pre><code class="language-javascript">// âœ… æª¢æŸ¥æ”¯æ´æ€§
if (typeof WebAssembly === 'object') {
    // åŸºæœ¬ WASM æ”¯æ´
    import('./pkg/my_wasm.js').then(wasm =&gt; {
        // ä½¿ç”¨ WASM
    });
} else {
    // é™ç´šåˆ° JS å¯¦ä½œ
    console.log('WASM not supported, using JS fallback');
}

// âš ï¸ æ–°åŠŸèƒ½éœ€è¦ç‰¹åˆ¥æª¢æŸ¥
if (WebAssembly.instantiateStreaming) {
    // æ”¯æ´ä¸²æµç·¨è­¯
} else {
    // ä½¿ç”¨å‚³çµ±æ–¹å¼
}
</code></pre>
<h2 id="æœ€ä½³å¯¦è¸"><a class="header" href="#æœ€ä½³å¯¦è¸">æœ€ä½³å¯¦è¸</a></h2>
<h3 id="1-é¸æ“‡åˆé©çš„å ´æ™¯"><a class="header" href="#1-é¸æ“‡åˆé©çš„å ´æ™¯">1. é¸æ“‡åˆé©çš„å ´æ™¯</a></h3>
<p><strong>âœ… é©åˆ WASMï¼š</strong></p>
<ul>
<li>æ•¸å­¸å¯†é›†é‹ç®—ï¼ˆåŠ å¯†ã€åœ–åƒè™•ç†ã€ç‰©ç†æ¨¡æ“¬ï¼‰</li>
<li>æ•¸æ“šè™•ç†ï¼ˆæ’åºã€éæ¿¾ã€çµ±è¨ˆï¼‰</li>
<li>éŠæˆ²é‚è¼¯</li>
<li>éŸ³è¨Š/è¦–è¨Šè™•ç†</li>
</ul>
<p><strong>âŒ ä¸é©åˆ WASMï¼š</strong></p>
<ul>
<li>DOM æ“ä½œ</li>
<li>ç¶²çµ¡è«‹æ±‚</li>
<li>ç°¡å–®çš„æ¥­å‹™é‚è¼¯</li>
<li>é »ç¹çš„å°é‹ç®—</li>
</ul>
<h3 id="2-å„ªåŒ–ç·¨è­¯"><a class="header" href="#2-å„ªåŒ–ç·¨è­¯">2. å„ªåŒ–ç·¨è­¯</a></h3>
<pre><code class="language-bash"># ç”Ÿç”¢ç’°å¢ƒå„ªåŒ–
wasm-pack build --release --target web

# é€²ä¸€æ­¥å„ªåŒ–
wasm-opt -Oz -o optimized.wasm original.wasm

# å£“ç¸®
gzip optimized.wasm
</code></pre>
<h3 id="3-è¨˜æ†¶é«”ç®¡ç†"><a class="header" href="#3-è¨˜æ†¶é«”ç®¡ç†">3. è¨˜æ†¶é«”ç®¡ç†</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub struct LargeData {
    data: Vec&lt;f64&gt;,
}

#[wasm_bindgen]
impl LargeData {
    #[wasm_bindgen(constructor)]
    pub fn new(size: usize) -&gt; LargeData {
        LargeData {
            data: vec![0.0; size],
        }
    }
    
    // æä¾›æ˜ç¢ºçš„æ¸…ç†æ–¹æ³•
    #[wasm_bindgen]
    pub fn free(self) {
        // Rust æœƒè‡ªå‹•æ¸…ç†
        drop(self);
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="4-éŒ¯èª¤è™•ç†"><a class="header" href="#4-éŒ¯èª¤è™•ç†">4. éŒ¯èª¤è™•ç†</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use wasm_bindgen::prelude::*;

#[wasm_bindgen]
pub fn safe_divide(a: f64, b: f64) -&gt; Result&lt;f64, JsValue&gt; {
    if b == 0.0 {
        Err(JsValue::from_str("Division by zero"))
    } else {
        Ok(a / b)
    }
}
<span class="boring">}</span></code></pre></pre>
<h3 id="5-èª¿è©¦æŠ€å·§"><a class="header" href="#5-èª¿è©¦æŠ€å·§">5. èª¿è©¦æŠ€å·§</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// é–‹ç™¼ç’°å¢ƒå•Ÿç”¨ panic hook
#[cfg(feature = "console_error_panic_hook")]
console_error_panic_hook::set_once();

// æ—¥å¿—è¼¸å‡º
web_sys::console::log_1(&amp;format!("Debug: {}", value).into());
<span class="boring">}</span></code></pre></pre>
<h3 id="6-æ€§èƒ½ç›£æ§"><a class="header" href="#6-æ€§èƒ½ç›£æ§">6. æ€§èƒ½ç›£æ§</a></h3>
<pre><code class="language-javascript">// æ¸¬é‡ WASM è¼‰å…¥æ™‚é–“
console.time('WASM Load');
await init();
console.timeEnd('WASM Load');

// æ¸¬é‡å‡½æ•¸åŸ·è¡Œæ™‚é–“
console.time('WASM Execution');
const result = wasmFunction(data);
console.timeEnd('WASM Execution');
</code></pre>
<h3 id="-å®‰å…¨æ€§"><a class="header" href="#-å®‰å…¨æ€§">ğŸ”’ å®‰å…¨æ€§</a></h3>
<h4 id="9-æ²™ç›’å®‰å…¨æ€§"><a class="header" href="#9-æ²™ç›’å®‰å…¨æ€§">9. æ²™ç›’å®‰å…¨æ€§</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âš ï¸ WASM æ²™ç›’æœ‰é™åˆ¶ï¼Œä½†ä¸æ˜¯è¬èƒ½çš„
#[wasm_bindgen]
pub fn potential_issue(size: usize) -&gt; Vec&lt;u8&gt; {
    // æƒ¡æ„è¼¸å…¥å¯èƒ½é€ æˆè¨˜æ†¶é«”è€—ç›¡
    if size &gt; 1_000_000_000 {
        panic!("Size too large!");  // ä½†é€™ä¸æœƒé˜²æ­¢æ‰€æœ‰æ”»æ“Š
    }
    vec![0; size]
}

// âœ… æ›´å¥½çš„é˜²è­·
#[wasm_bindgen]
pub fn safe_allocation(size: usize) -&gt; Option&lt;Vec&lt;u8&gt;&gt; {
    const MAX_SIZE: usize = 10_000_000;  // 10MB é™åˆ¶
    if size &gt; MAX_SIZE {
        return None;
    }
    Some(vec![0; size])
}
<span class="boring">}</span></code></pre></pre>
<h3 id="-æœ€ä½³å¯¦è¸"><a class="header" href="#-æœ€ä½³å¯¦è¸">ğŸ¯ æœ€ä½³å¯¦è¸</a></h3>
<h4 id="10-é–‹ç™¼å·¥ä½œæµç¨‹"><a class="header" href="#10-é–‹ç™¼å·¥ä½œæµç¨‹">10. é–‹ç™¼å·¥ä½œæµç¨‹</a></h4>
<pre><code class="language-bash"># âŒ ç›´æ¥ç”¨ cargo ç·¨è­¯ WASM
cargo build --target wasm32-unknown-unknown

# âœ… ä½¿ç”¨å°ˆé–€å·¥å…·
wasm-pack build --target web
wasm-pack build --target bundler
wasm-pack build --target nodejs

# ğŸ”§ é€²éšå„ªåŒ–
wasm-opt -Oz output.wasm -o optimized.wasm  # é€²ä¸€æ­¥å£“ç¸®
</code></pre>
<h4 id="11-é™¤éŒ¯æ–¹æ³•"><a class="header" href="#11-é™¤éŒ¯æ–¹æ³•">11. é™¤éŒ¯æ–¹æ³•</a></h4>
<pre><code class="language-javascript">// âŒ èª¤è§£ï¼šWASM é›£ä»¥é™¤éŒ¯
// âœ… å¯¦éš›ï¼šæœ‰å¤šç¨®é™¤éŒ¯æ–¹å¼

// 1. åœ¨ Rust ä¸­æ·»åŠ æ—¥èªŒ
use web_sys::console;
console::log_1(&amp;"Debug message".into());

// 2. ä½¿ç”¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„ WASM æ”¯æ´
// 3. ä½¿ç”¨ wasm-pack çš„é™¤éŒ¯æ¨¡å¼
// wasm-pack build --dev
</code></pre>
<h3 id="-éƒ¨ç½²å’Œè¼‰å…¥"><a class="header" href="#-éƒ¨ç½²å’Œè¼‰å…¥">ğŸ“¦ éƒ¨ç½²å’Œè¼‰å…¥</a></h3>
<h4 id="7-bundler-æ•´åˆ"><a class="header" href="#7-bundler-æ•´åˆ">7. bundler æ•´åˆ</a></h4>
<pre><code class="language-javascript">// âŒ éŒ¯èª¤çš„è¼‰å…¥æ–¹å¼
import wasmModule from './my_module.wasm';  // ä¸æœƒå·¥ä½œ

// âœ… æ­£ç¢ºçš„æ–¹å¼
import init, { my_function } from './pkg/my_module.js';

async function run() {
    await init();  // å¿…é ˆå…ˆåˆå§‹åŒ–
    const result = my_function(42);
}
</code></pre>
<h4 id="8-æª”æ¡ˆå¤§å°å„ªåŒ–"><a class="header" href="#8-æª”æ¡ˆå¤§å°å„ªåŒ–">8. æª”æ¡ˆå¤§å°å„ªåŒ–</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// âœ… å„ªåŒ–å»ºè­°
// 1. ä½¿ç”¨ wee_alloc æ›¿ä»£é è¨­åˆ†é…å™¨
extern crate wee_alloc;
#[global_allocator]
static ALLOC: wee_alloc::WeeAlloc = wee_alloc::WeeAlloc::INIT;

// 2. åœ¨ Cargo.toml ä¸­å•Ÿç”¨ LTO å’Œå¤§å°å„ªåŒ–
// [profile.release]
// lto = true
// opt-level = "s"  // å„ªåŒ–å¤§å°
// codegen-units = 1
<span class="boring">}</span></code></pre></pre>
<h3 id="-æœªä¾†ç™¼å±•"><a class="header" href="#-æœªä¾†ç™¼å±•">ğŸš€ æœªä¾†ç™¼å±•</a></h3>
<h4 id="12-wasm-çš„ç™¼å±•æ–¹å‘"><a class="header" href="#12-wasm-çš„ç™¼å±•æ–¹å‘">12. WASM çš„ç™¼å±•æ–¹å‘</a></h4>
<pre><code class="language-markdown">âœ… å¯¦éš›è¶¨å‹¢ï¼š
- åƒåœ¾æ”¶é›†æ”¯æ´ï¼ˆWasmGCï¼‰
- SIMD æŒ‡ä»¤æ”¯æ´
- ç•°å¸¸è™•ç†æ”¹é€²
- WASIï¼ˆç³»çµ±ä»‹é¢æ¨™æº–åŒ–ï¼‰

âŒ å¸¸è¦‹èª¤è§£ï¼š
- "WASM æœƒå®Œå…¨å–ä»£ JavaScript"
- "æ‰€æœ‰ç¶²ç«™éƒ½æœƒç”¨ WASM"
- "WASM åªé©ç”¨æ–¼ç¶²é "
</code></pre>
<h2 id="å¯¦éš›æ¡ˆä¾‹"><a class="header" href="#å¯¦éš›æ¡ˆä¾‹">å¯¦éš›æ¡ˆä¾‹</a></h2>
<h3 id="buttplug-å°ˆæ¡ˆ"><a class="header" href="#buttplug-å°ˆæ¡ˆ">Buttplug å°ˆæ¡ˆ</a></h3>
<h4 id="ä¾è³´ç‰ˆæœ¬è¡çªè§£æ±º"><a class="header" href="#ä¾è³´ç‰ˆæœ¬è¡çªè§£æ±º">ä¾è³´ç‰ˆæœ¬è¡çªè§£æ±º</a></h4>
<p>ç•¶é‡åˆ° <code>getrandom</code> ç‰ˆæœ¬è¡çªæ™‚ï¼š</p>
<pre><code class="language-bash"># æª¢æŸ¥ä¾è³´æ¨¹
cargo tree | grep getrandom

# å¼·åˆ¶çµ±ä¸€ç‰ˆæœ¬
[patch.crates-io]
getrandom = { version = "0.2.16", features = ["js"] }

# æ¸…ç†ä¸¦é‡å»º
cargo clean
wasm-pack build --target web --no-default-features --features "wasm"
</code></pre>
<h4 id="buttplug-wasm-ç·¨è­¯"><a class="header" href="#buttplug-wasm-ç·¨è­¯">Buttplug WASM ç·¨è­¯</a></h4>
<pre><code class="language-bash"># æ­£ç¢ºçš„ç·¨è­¯å‘½ä»¤
wasm-pack build --target web --no-default-features --features "wasm,client,serialize-json"
</code></pre>
<h2 id="ç¸½çµ"><a class="header" href="#ç¸½çµ">ç¸½çµ</a></h2>
<p><strong>æ ¸å¿ƒåŸå‰‡</strong>ï¼š</p>
<ol>
<li><strong>æ­£ç¢ºé¸æ“‡ä½¿ç”¨å ´æ™¯</strong>ï¼šCPU å¯†é›†å‹ä»»å‹™</li>
<li><strong>åˆç†çš„æ¶æ§‹è¨­è¨ˆ</strong>ï¼šJS è™•ç† I/Oï¼ŒWASM è™•ç†é‹ç®—</li>
<li><strong>é©ç•¶çš„å„ªåŒ–ç­–ç•¥</strong>ï¼šç·¨è­¯å„ªåŒ–ã€è¨˜æ†¶é«”ç®¡ç†</li>
<li><strong>è·¨å¹³å°è€ƒé‡</strong>ï¼šWeb ç”¨ WASMï¼ŒNative App ç”¨åŸç”Ÿåº«</li>
<li>WASM é©åˆç´”è¨ˆç®—ã€ä¸ä¾è³´ç³»çµ±è³‡æºçš„ç¨‹å¼ç¢¼</li>
<li><code>#[wasm_bindgen]</code> æ§åˆ¶åŒ¯å‡ºï¼Œä¸æ§åˆ¶ç·¨è­¯</li>
<li>WASM å’Œ JavaScript æ˜¯å”ä½œé—œä¿‚ï¼Œä¸æ˜¯æ›¿ä»£é—œä¿‚</li>
<li>è¨˜æ†¶é«”ç®¡ç†éœ€è¦ç‰¹åˆ¥æ³¨æ„</li>
<li>æ•ˆèƒ½å„ªå‹¢ä¸»è¦é«”ç¾åœ¨å¯†é›†è¨ˆç®—å ´æ™¯</li>
</ol>
<p><strong>æœ€ä½³å¯¦è¸</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>wasm-pack</code> è€Œé <code>cargo</code> ç›´æ¥ç·¨è­¯</li>
<li>æ˜ç¢ºç®¡ç†è¨˜æ†¶é«”ç”Ÿå‘½é€±æœŸ</li>
<li>é©ç•¶çš„éŒ¯èª¤è™•ç†å’Œé‚Šç•Œæª¢æŸ¥</li>
<li>é‡å°ç›®æ¨™å¹³å°å„ªåŒ–ç·¨è­¯è¨­å®š</li>
</ul>
<p>è¨˜ä½ï¼šæŠ€è¡“é¸å‹æ²’æœ‰éŠ€å½ˆï¼Œè¦æ ¹æ“šå…·é«”éœ€æ±‚å’Œç’°å¢ƒåšå‡ºæœ€ä½³é¸æ“‡ã€‚WebAssembly æ˜¯å¼·å¤§çš„å·¥å…·ï¼Œä½†äº†è§£å…¶é™åˆ¶å’Œé©ç”¨å ´æ™¯åŒæ¨£é‡è¦ã€‚å®ƒä¸æ˜¯éŠ€å½ˆï¼Œè€Œæ˜¯ç¾ä»£ Web é–‹ç™¼å·¥å…·ç®±ä¸­çš„ä¸€å€‹é‡è¦çµ„ä»¶ã€‚</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../web/webassembly.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../web/buttplug_wasm_flow.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../web/webassembly.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../web/buttplug_wasm_flow.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
