<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>TRON å€å¡Šéˆåº•å±¤å¯¦ç¾æŒ‡å— - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="tron-å€å¡Šéˆåº•å±¤å¯¦ç¾æŒ‡å—"><a class="header" href="#tron-å€å¡Šéˆåº•å±¤å¯¦ç¾æŒ‡å—">TRON å€å¡Šéˆåº•å±¤å¯¦ç¾æŒ‡å—</a></h1>
<blockquote>
<p><strong>ç´” Python å¯¦ç¾ - æ·±å…¥ç†è§£ TRON é‹ä½œåŸç†</strong><br />
æœ¬æ–‡æª”è©³ç´°èªªæ˜å¦‚ä½•ä½¿ç”¨ HTTP API å’Œå¯†ç¢¼å­¸åº«å¯¦ç¾ TRON å€å¡Šéˆçš„æ ¸å¿ƒåŠŸèƒ½</p>
</blockquote>
<hr />
<h2 id="-ç›®éŒ„"><a class="header" href="#-ç›®éŒ„">ğŸ“‹ ç›®éŒ„</a></h2>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD">æ ¸å¿ƒåŠŸèƒ½</a></li>
<li><a href="#%E6%8A%80%E8%A1%93%E6%9E%B6%E6%A7%8B">æŠ€è¡“æ¶æ§‹</a></li>
<li><a href="#%E9%97%9C%E9%8D%B5%E6%B5%81%E7%A8%8B%E5%9C%96">é—œéµæµç¨‹åœ–</a></li>
<li><a href="#%E6%A8%A1%E7%B5%84%E8%A9%B3%E8%A7%A3">æ¨¡çµ„è©³è§£</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E7%AF%84%E4%BE%8B">ä½¿ç”¨ç¯„ä¾‹</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85">å®‰å…¨æ³¨æ„äº‹é …</a></li>
</ul>
<hr />
<h2 id="æ¦‚è¿°"><a class="header" href="#æ¦‚è¿°">æ¦‚è¿°</a></h2>
<h3 id="ä»€éº¼æ˜¯é€™å€‹å°ˆæ¡ˆ"><a class="header" href="#ä»€éº¼æ˜¯é€™å€‹å°ˆæ¡ˆ">ä»€éº¼æ˜¯é€™å€‹å°ˆæ¡ˆï¼Ÿ</a></h3>
<p>é€™æ˜¯ä¸€å€‹æ•™å­¸å°å‘çš„ TRON å€å¡Šéˆåº•å±¤å¯¦ç¾ï¼Œ<strong>ä¸ä¾è³´</strong> <code>tronpy</code> ç­‰é«˜éšå¥—ä»¶ï¼Œç›´æ¥ä½¿ç”¨ï¼š</p>
<ul>
<li>HTTP API èˆ‡ç¯€é»é€šä¿¡</li>
<li>å¯†ç¢¼å­¸åº«å¯¦ç¾ç°½åå’Œåœ°å€ç”Ÿæˆ</li>
<li>ç´” Python å¯¦ç¾æ‰€æœ‰æ ¸å¿ƒé‚è¼¯</li>
</ul>
<h3 id="ç‚ºä»€éº¼è¦é€™æ¨£åš"><a class="header" href="#ç‚ºä»€éº¼è¦é€™æ¨£åš">ç‚ºä»€éº¼è¦é€™æ¨£åšï¼Ÿ</a></h3>
<p>é€šéåº•å±¤å¯¦ç¾ï¼Œæ‚¨å¯ä»¥ï¼š</p>
<ul>
<li>æ·±å…¥ç†è§£ TRON çš„åœ°å€ç”Ÿæˆæ©Ÿåˆ¶</li>
<li>æŒæ¡ ECDSA ç°½åçš„å®Œæ•´æµç¨‹</li>
<li>äº†è§£æ™ºèƒ½åˆç´„èª¿ç”¨çš„ç·¨ç¢¼æ–¹å¼</li>
<li>å­¸ç¿’å€å¡Šéˆäº¤æ˜“çš„ç”Ÿå‘½é€±æœŸ</li>
</ul>
<hr />
<h2 id="æ ¸å¿ƒåŠŸèƒ½"><a class="header" href="#æ ¸å¿ƒåŠŸèƒ½">æ ¸å¿ƒåŠŸèƒ½</a></h2>
<h3 id="1-åœ°å€ç®¡ç†"><a class="header" href="#1-åœ°å€ç®¡ç†">1ï¸âƒ£ åœ°å€ç®¡ç†</a></h3>
<ul>
<li>âœ… Base58 â†” Hex æ ¼å¼è½‰æ›</li>
<li>âœ… å¾ç§é‘°ç”Ÿæˆå…¬é‘°ï¼ˆsecp256k1ï¼‰</li>
<li>âœ… å¾å…¬é‘°ç”Ÿæˆåœ°å€ï¼ˆKeccak256ï¼‰</li>
</ul>
<h3 id="2-å¸³æˆ¶æŸ¥è©¢"><a class="header" href="#2-å¸³æˆ¶æŸ¥è©¢">2ï¸âƒ£ å¸³æˆ¶æŸ¥è©¢</a></h3>
<ul>
<li>âœ… æŸ¥è©¢ TRX é¤˜é¡</li>
<li>âœ… æŸ¥è©¢ TRC20 ä»£å¹£é¤˜é¡ï¼ˆå¦‚ USDTï¼‰</li>
<li>âœ… æŸ¥è©¢å¸³æˆ¶è³‡æºï¼ˆèƒ½é‡ã€å¸¶å¯¬ï¼‰</li>
</ul>
<h3 id="3-äº¤æ˜“è™•ç†"><a class="header" href="#3-äº¤æ˜“è™•ç†">3ï¸âƒ£ äº¤æ˜“è™•ç†</a></h3>
<ul>
<li>âœ… å»ºç«‹ TRX è½‰è³¬äº¤æ˜“</li>
<li>âœ… å»ºç«‹æ™ºèƒ½åˆç´„èª¿ç”¨äº¤æ˜“</li>
<li>âœ… ECDSA ç°½åï¼ˆå« Recovery IDï¼‰</li>
<li>âœ… å»£æ’­äº¤æ˜“åˆ°ç¶²è·¯</li>
</ul>
<h3 id="4-æ™ºèƒ½åˆç´„"><a class="header" href="#4-æ™ºèƒ½åˆç´„">4ï¸âƒ£ æ™ºèƒ½åˆç´„</a></h3>
<ul>
<li>âœ… èª¿ç”¨åªè®€å‡½æ•¸ï¼ˆå¦‚ <code>balanceOf</code>ï¼‰</li>
<li>âœ… èª¿ç”¨å¯«å…¥å‡½æ•¸ï¼ˆå¦‚ <code>transfer</code>ï¼‰</li>
<li>âœ… åƒæ•¸ç·¨ç¢¼ï¼ˆABI å…¼å®¹ï¼‰</li>
</ul>
<hr />
<h2 id="æŠ€è¡“æ¶æ§‹"><a class="header" href="#æŠ€è¡“æ¶æ§‹">æŠ€è¡“æ¶æ§‹</a></h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ‡‰ç”¨å±¤                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ TronTransfer â”‚  â”‚  TronQuery   â”‚  â”‚     å…¶ä»–     â”‚      â”‚
â”‚  â”‚  (è½‰è³¬åŠŸèƒ½)  â”‚  â”‚  (æŸ¥è©¢åŠŸèƒ½)  â”‚  â”‚   (æ“´å±•åŠŸèƒ½) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        æ ¸å¿ƒå±¤                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚KeyGenerator  â”‚  â”‚TransactionSigâ”‚  â”‚AddressConvertâ”‚      â”‚
â”‚  â”‚(å¯†é‘°/åœ°å€)   â”‚  â”‚    (ç°½å)    â”‚  â”‚  (æ ¼å¼è½‰æ›)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        API å±¤                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    TronAPI                          â”‚   â”‚
â”‚  â”‚  (HTTP API å°è£ - èˆ‡ TRON ç¯€é»é€šä¿¡)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      åŸºç¤è¨­æ–½å±¤                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   requests   â”‚  â”‚    ecdsa     â”‚  â”‚   Crypto     â”‚      â”‚
â”‚  â”‚  (HTTP è«‹æ±‚) â”‚  â”‚  (æ©¢åœ“æ›²ç·š)  â”‚  â”‚  (Keccak256) â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr />
<h2 id="é—œéµæµç¨‹åœ–"><a class="header" href="#é—œéµæµç¨‹åœ–">é—œéµæµç¨‹åœ–</a></h2>
<h3 id="1-tron-åœ°å€ç”Ÿæˆæµç¨‹"><a class="header" href="#1-tron-åœ°å€ç”Ÿæˆæµç¨‹">1. TRON åœ°å€ç”Ÿæˆæµç¨‹</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç§é‘° (Private Key)                         â”‚
â”‚                   64 hex å­—ç¬¦ (32 bytes)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: ECDSA secp256k1 æ©¢åœ“æ›²ç·šé‹ç®—                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚
â”‚  ç®—æ³•: P = d Ã— G                                            â”‚
â”‚    - d: ç§é‘°ï¼ˆæ•´æ•¸ï¼‰                                        â”‚
â”‚    - G: secp256k1 åŸºé»                                      â”‚
â”‚    - P: å…¬é‘°é» (x, y)                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              éå£“ç¸®å…¬é‘° (Uncompressed Public Key)           â”‚
â”‚              04 + x(32 bytes) + y(32 bytes)                 â”‚
â”‚                    130 hex å­—ç¬¦ (65 bytes)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: å»é™¤ '04' å‰ç¶´                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚  å‰©é¤˜: x + y (64 bytes)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: Keccak-256 å“ˆå¸Œ                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚
â”‚  H = Keccak256(x || y)                                      â”‚
â”‚  è¼¸å‡º: 32 bytes (64 hex å­—ç¬¦)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: å–æœ€å¾Œ 20 bytes                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚  åœ°å€æ ¸å¿ƒ = H[12:32]                                        â”‚
â”‚  40 hex å­—ç¬¦ (20 bytes)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: æ·»åŠ ç¶²è·¯å‰ç¶´ '41'                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚  Hex åœ°å€ = '41' + åœ°å€æ ¸å¿ƒ                                 â”‚
â”‚  42 hex å­—ç¬¦ (21 bytes)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6-8: è¨ˆç®— Base58Check æ ¡é©—å’Œ                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚  1. SHA-256(Hex åœ°å€) â†’ hash1                               â”‚
â”‚  2. SHA-256(hash1) â†’ hash2                                  â”‚
â”‚  3. æ ¡é©—å’Œ = hash2[0:4]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 9: é€£æ¥åœ°å€å’Œæ ¡é©—å’Œ                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  å®Œæ•´æ•¸æ“š = Hex åœ°å€ + æ ¡é©—å’Œ                               â”‚
â”‚  50 hex å­—ç¬¦ (25 bytes)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 10: Base58 ç·¨ç¢¼                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚  æœ€çµ‚åœ°å€ = Base58(å®Œæ•´æ•¸æ“š)                                â”‚
â”‚  æ ¼å¼: T + [A-Za-z0-9]+ (ä»¥ 'T' é–‹é ­)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              TQyZzVEs9qgLy52JAZQc7ZyxJf13ZNUG8u
                   (TRON Base58 åœ°å€)
</code></pre>
<h3 id="2-trx-è½‰è³¬å®Œæ•´æµç¨‹"><a class="header" href="#2-trx-è½‰è³¬å®Œæ•´æµç¨‹">2. TRX è½‰è³¬å®Œæ•´æµç¨‹</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ç”¨æˆ¶ç™¼èµ·è½‰è³¬                          â”‚
â”‚  è¼¸å…¥: ç§é‘°ã€æ¥æ”¶åœ°å€ã€é‡‘é¡                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 1: åœ°å€ç”Ÿæˆ                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚  from_address = KeyGenerator.private_key_to_address()       â”‚
â”‚                                                             â”‚
â”‚  âœ“ å¾ç§é‘°æ´¾ç”Ÿç™¼é€è€…åœ°å€                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 2: å»ºç«‹äº¤æ˜“ (Create Transaction)                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚  POST /wallet/createtransaction                             â”‚
â”‚  {                                                          â”‚
â”‚    "to_address": "TTqob...",                                â”‚
â”‚    "owner_address": "TQyZz...",                             â”‚
â”‚    "amount": 1000000  // 1 TRX = 10^6 SUN                   â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â”‚  â† è¿”å›: æœªç°½åäº¤æ˜“ (åŒ…å« txIDã€raw_data)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 3: ç°½åäº¤æ˜“ (Sign Transaction)                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚  3.1 æå– txID (32 bytes)                                   â”‚
â”‚       txID æ˜¯äº¤æ˜“æ•¸æ“šçš„ SHA-256 å“ˆå¸Œ                        â”‚
â”‚                                                             â”‚
â”‚  3.2 ECDSA ç°½å                                             â”‚
â”‚       signature = ECDSA_sign(txID, private_key)             â”‚
â”‚       â†’ å¾—åˆ° (r, s) å„ 32 bytes                             â”‚
â”‚                                                             â”‚
â”‚  3.3 è¨ˆç®— Recovery ID                                       â”‚
â”‚       å˜—è©¦ 4 ç¨®å¯èƒ½å€¼ (0,1,2,3)                             â”‚
â”‚       æ‰¾å‡ºèƒ½æ­£ç¢ºæ¢å¾©å…¬é‘°çš„é‚£å€‹                              â”‚
â”‚                                                             â”‚
â”‚  3.4 çµ„åˆç°½å                                               â”‚
â”‚       final_sig = r + s + recovery_id                       â”‚
â”‚       â†’ 65 bytes                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 4: å»£æ’­äº¤æ˜“ (Broadcast Transaction)                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  POST /wallet/broadcasttransaction                          â”‚
â”‚  {                                                          â”‚
â”‚    "txID": "abc123...",                                     â”‚
â”‚    "raw_data": {...},                                       â”‚
â”‚    "signature": ["65_bytes_hex"]                            â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â”‚  â† è¿”å›: {"result": true, "txid": "..."}                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 5: äº¤æ˜“é€²å…¥è¨˜æ†¶æ±  (Memory Pool)                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚  1. ç¯€é»é©—è­‰äº¤æ˜“æ ¼å¼                                        â”‚
â”‚  2. é©—è­‰ç°½åæœ‰æ•ˆæ€§                                          â”‚
â”‚  3. æª¢æŸ¥å¸³æˆ¶é¤˜é¡                                            â”‚
â”‚  4. æ”¾å…¥å¾…æ‰“åŒ…è¨˜æ†¶æ±                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 6: è¶…ç´šä»£è¡¨æ‰“åŒ…å€å¡Š                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  1. SR (Super Representative) å¾è¨˜æ†¶æ± é¸å–äº¤æ˜“              â”‚
â”‚  2. æ‰“åŒ…æˆæ–°å€å¡Š                                            â”‚
â”‚  3. å»£æ’­åˆ°å…¨ç¶²                                              â”‚
â”‚  4. å…¶ä»–ç¯€é»é©—è­‰ä¸¦æ¥å—                                      â”‚
â”‚                                                             â”‚
â”‚  â± TRON å€å¡Šæ™‚é–“: 3 ç§’                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  éšæ®µ 7: äº¤æ˜“ç¢ºèª                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  å€å¡Šæ•¸: 1  â†’ äº¤æ˜“ä¸Šéˆï¼ˆå¯è¦‹ï¼‰                              â”‚
â”‚  å€å¡Šæ•¸: 19 â†’ å›ºåŒ–ï¼ˆä¸å¯é€†ï¼‰                                â”‚
â”‚                                                             â”‚
â”‚  æŸ¥è©¢: GET /wallet/gettransactioninfobyid                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                   âœ… è½‰è³¬å®Œæˆ
</code></pre>
<h3 id="3-usdt-trc20-è½‰è³¬æµç¨‹"><a class="header" href="#3-usdt-trc20-è½‰è³¬æµç¨‹">3. USDT (TRC20) è½‰è³¬æµç¨‹</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ¶ç™¼èµ· USDT è½‰è³¬                        â”‚
â”‚  è¼¸å…¥: ç§é‘°ã€æ¥æ”¶åœ°å€ã€USDT é‡‘é¡ã€åˆç´„åœ°å€                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 1: ç·¨ç¢¼åˆç´„å‡½æ•¸èª¿ç”¨                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚  å‡½æ•¸: transfer(address _to, uint256 _value)                â”‚
â”‚                                                             â”‚
â”‚  1.1 å‡½æ•¸é¸æ“‡å™¨                                             â”‚
â”‚      selector = "transfer(address,uint256)"                 â”‚
â”‚                                                             â”‚
â”‚  1.2 ç·¨ç¢¼åƒæ•¸                                               â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚      â”‚ åƒæ•¸ 1: address (32 bytes)          â”‚                â”‚
â”‚      â”‚  - å»é™¤ '41' å‰ç¶´                   â”‚                â”‚
â”‚      â”‚  - å·¦è£œé›¶åˆ° 32 bytes                â”‚                â”‚
â”‚      â”‚  ä¾‹: 000...0a49b6890465f39...       â”‚                â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚      â”‚ åƒæ•¸ 2: uint256 (32 bytes)          â”‚                â”‚
â”‚      â”‚  - é‡‘é¡ Ã— 10^6 (USDT 6 ä½å°æ•¸)      â”‚                â”‚
â”‚      â”‚  - è½‰ç‚º hex ä¸¦å·¦è£œé›¶åˆ° 32 bytes    â”‚                 â”‚
â”‚      â”‚  ä¾‹: 000...000000000000000f4240     â”‚                â”‚
â”‚      â”‚     (1000000 = 1 USDT)              â”‚                â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                             â”‚
â”‚  1.3 çµ„åˆåƒæ•¸                                               â”‚
â”‚      parameter = åƒæ•¸1 + åƒæ•¸2 (64 bytes)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 2: å»ºç«‹æ™ºèƒ½åˆç´„èª¿ç”¨äº¤æ˜“                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚  POST /wallet/triggersmartcontract                          â”‚
â”‚  {                                                          â”‚
â”‚    "owner_address": "TQyZz...",                             â”‚
â”‚    "contract_address": "TR7NH..." (USDT åˆç´„),              â”‚
â”‚    "function_selector": "transfer(address,uint256)",        â”‚
â”‚    "parameter": "000...åƒæ•¸...",                            â”‚
â”‚    "fee_limit": 50000000,  // 50 TRX ä¸Šé™                   â”‚
â”‚    "call_value": 0         // ä¸ç™¼é€ TRX                    â”‚
â”‚  }                                                          â”‚
â”‚                                                             â”‚
â”‚  â† è¿”å›: {                                                  â”‚
â”‚      "result": {"result": true},                            â”‚
â”‚      "transaction": {                                       â”‚
â”‚        "txID": "...",                                       â”‚
â”‚        "raw_data": {...}                                    â”‚
â”‚      }                                                      â”‚
â”‚    }                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 3: ç°½åäº¤æ˜“                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  (èˆ‡ TRX è½‰è³¬ç›¸åŒçš„ç°½åæµç¨‹)                                â”‚
â”‚  1. æå– txID                                               â”‚
â”‚  2. ECDSA ç°½å â†’ (r, s)                                     â”‚
â”‚  3. è¨ˆç®— Recovery ID                                        â”‚
â”‚  4. çµ„åˆç‚º 65 bytes ç°½å                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 4: å»£æ’­äº¤æ˜“                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  POST /wallet/broadcasttransaction                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 5: æ™ºèƒ½åˆç´„åŸ·è¡Œ                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚  5.1 TVM (TRON Virtual Machine) è¼‰å…¥åˆç´„                    â”‚
â”‚                                                             â”‚
â”‚  5.2 åŸ·è¡Œ transfer å‡½æ•¸                                     â”‚
â”‚      - æª¢æŸ¥ç™¼é€è€…é¤˜é¡                                       â”‚
â”‚      - æ‰£é™¤ç™¼é€è€…é¤˜é¡                                       â”‚
â”‚      - å¢åŠ æ¥æ”¶è€…é¤˜é¡                                       â”‚
â”‚      - è§¸ç™¼ Transfer äº‹ä»¶                                   â”‚
â”‚                                                             â”‚
â”‚  5.3 æ¶ˆè€—è³‡æº                                               â”‚
â”‚      - èƒ½é‡ (Energy): ~14000                                â”‚
â”‚      - æˆ–ç‡’æ¯€ TRX ä»£æ›¿èƒ½é‡                                  â”‚
â”‚                                                             â”‚
â”‚  5.4 å¯«å…¥ç‹€æ…‹                                               â”‚
â”‚      æ›´æ–°éˆä¸Šä»£å¹£é¤˜é¡                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                   âœ… USDT è½‰è³¬å®Œæˆ
</code></pre>
<h3 id="4-ecdsa-ç°½åèˆ‡-recovery-id-è¨ˆç®—"><a class="header" href="#4-ecdsa-ç°½åèˆ‡-recovery-id-è¨ˆç®—">4. ECDSA ç°½åèˆ‡ Recovery ID è¨ˆç®—</a></h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è¼¸å…¥: txID (32 bytes)                    â”‚
â”‚                    ç§é‘°: d (32 bytes)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 1: ç”Ÿæˆéš¨æ©Ÿæ•¸ k                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚
â”‚  k âˆˆ [1, n-1]  (n æ˜¯æ›²ç·šéšæ•¸)                               â”‚
â”‚  å¿…é ˆéš¨æ©Ÿä¸”æ¯æ¬¡ä¸åŒï¼Œå¦å‰‡ç§é‘°å¯è¢«æ¨å°                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 2: è¨ˆç®— R = k Ã— G                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚  R æ˜¯æ©¢åœ“æ›²ç·šä¸Šçš„é» (rx, ry)                                â”‚
â”‚  G æ˜¯ secp256k1 çš„åŸºé»                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 3: è¨ˆç®— r = rx mod n                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚  r æ˜¯ç°½åçš„ç¬¬ä¸€å€‹åˆ†é‡ (32 bytes)                            â”‚
â”‚  å¦‚æœ r = 0ï¼Œé‡æ–°ç”Ÿæˆ k                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 4: è¨ˆç®— s                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  e = int(txID)  // å°‡ txID è¦–ç‚ºæ•´æ•¸                         â”‚
â”‚  s = k^(-1) Ã— (e + r Ã— d) mod n                             â”‚
â”‚                                                             â”‚
â”‚  å…¶ä¸­:                                                      â”‚
â”‚    - k^(-1) æ˜¯ k çš„æ¨¡é€†å…ƒ                                   â”‚
â”‚    - d æ˜¯ç§é‘°                                               â”‚
â”‚    - n æ˜¯æ›²ç·šéšæ•¸                                           â”‚
â”‚                                                             â”‚
â”‚  s æ˜¯ç°½åçš„ç¬¬äºŒå€‹åˆ†é‡ (32 bytes)                            â”‚
â”‚  å¦‚æœ s = 0ï¼Œé‡æ–°ç”Ÿæˆ k                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 5: è¨ˆç®— Recovery ID (0-3)                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚  Recovery ID ç”±å…©å€‹å› ç´ æ±ºå®š:                                â”‚
â”‚                                                             â”‚
â”‚  Bit 0 (æœ€ä½ä½): å…¬é‘° y åæ¨™çš„å¥‡å¶æ€§                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ if y % 2 == 0: bit_0 = 0         â”‚                       â”‚
â”‚  â”‚ if y % 2 == 1: bit_0 = 1         â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                             â”‚
â”‚  Bit 1 (æ¬¡ä½ä½): r æ˜¯å¦è¶…éæ›²ç·šéšæ•¸                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚ if r &lt; n: bit_1 = 0              â”‚                       â”‚
â”‚  â”‚ if r &gt;= n: bit_1 = 1 (ç½•è¦‹)      â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                             â”‚
â”‚  recovery_id = bit_1 Ã— 2 + bit_0                            â”‚
â”‚                                                             â”‚
â”‚  é€šå¸¸æƒ…æ³: recovery_id âˆˆ {0, 1}                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 6: é©—è­‰ç°½å (å¯é¸ï¼Œç”¨æ–¼æª¢æŸ¥)                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚
â”‚  å°æ¯å€‹å¯èƒ½çš„ recovery_id:                                  â”‚
â”‚                                                             â”‚
â”‚  6.1 å¾ r æ§‹é€  x åæ¨™                                       â”‚
â”‚      x = r (æˆ– r + nï¼Œå¦‚æœ bit_1 = 1)                       â”‚
â”‚                                                             â”‚
â”‚  6.2 å¾ x è¨ˆç®— y åæ¨™                                       â”‚
â”‚      æ›²ç·šæ–¹ç¨‹: yÂ² = xÂ³ + 7 (mod p)                          â”‚
â”‚      y = sqrt(yÂ²) mod p                                     â”‚
â”‚      æ ¹æ“š bit_0 é¸æ“‡ y æˆ– -y                                â”‚
â”‚                                                             â”‚
â”‚  6.3 æ§‹é€ é» R = (x, y)                                      â”‚
â”‚                                                             â”‚
â”‚  6.4 æ¢å¾©å…¬é‘°                                               â”‚
â”‚      Q = r^(-1) Ã— (sÃ—R - eÃ—G)                               â”‚
â”‚                                                             â”‚
â”‚  6.5 æ¯”å°å…¬é‘°                                               â”‚
â”‚      å¦‚æœ Q == å¯¦éš›å…¬é‘°ï¼Œæ‰¾åˆ°æ­£ç¢ºçš„ recovery_id             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥é©Ÿ 7: çµ„åˆæœ€çµ‚ç°½å                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                    â”‚
â”‚  signature = r || s || recovery_id                          â”‚
â”‚            = 32 + 32 + 1 = 65 bytes                         â”‚
â”‚                                                             â”‚
â”‚  Hex æ ¼å¼: 130 å€‹å­—ç¬¦                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
            âœ… ç°½åå®Œæˆï¼Œå¯ç”¨æ–¼å»£æ’­äº¤æ˜“
</code></pre>
<hr />
<h2 id="æ¨¡çµ„è©³è§£"><a class="header" href="#æ¨¡çµ„è©³è§£">æ¨¡çµ„è©³è§£</a></h2>
<h3 id="å¸¸æ•¸å®šç¾©æ¨¡çµ„"><a class="header" href="#å¸¸æ•¸å®šç¾©æ¨¡çµ„">å¸¸æ•¸å®šç¾©æ¨¡çµ„</a></h3>
<h4 id="tronnetwork---ç¶²è·¯é…ç½®"><a class="header" href="#tronnetwork---ç¶²è·¯é…ç½®">TronNetwork - ç¶²è·¯é…ç½®</a></h4>
<pre><code class="language-python">class TronNetwork:
    """TRON ç¶²è·¯é…ç½®å¸¸æ•¸"""
    
    # API ç«¯é»
    NILE_API = "https://nile.trongrid.io"      # Nile æ¸¬è©¦ç¶²
    MAINNET_API = "https://api.trongrid.io"    # ä¸»ç¶²
    
    # USDT åˆç´„åœ°å€
    USDT_CONTRACT_MAINNET = "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"
    USDT_CONTRACT_NILE = "TXYZopYRdj2D9XRtbG411XZZ3kM5VkAeBf"
    
    # åœ°å€å‰ç¶´
    ADDRESS_PREFIX = "41"  # TRON ä¸»ç¶²åœ°å€çš„ hex å‰ç¶´
</code></pre>
<p><strong>èªªæ˜:</strong></p>
<ul>
<li><code>NILE_API</code>: æ¸¬è©¦ç¶²ç«¯é»ï¼Œç”¨æ–¼é–‹ç™¼å’Œæ¸¬è©¦</li>
<li><code>MAINNET_API</code>: ä¸»ç¶²ç«¯é»ï¼ŒçœŸå¯¦è³‡ç”¢ç’°å¢ƒ</li>
<li><code>USDT_CONTRACT_*</code>: TRC20 USDT æ™ºèƒ½åˆç´„åœ°å€</li>
<li><code>ADDRESS_PREFIX</code>: æ‰€æœ‰ TRON ä¸»ç¶²åœ°å€çš„ hex æ ¼å¼éƒ½ä»¥ "41" é–‹é ­</li>
</ul>
<h4 id="cryptoconstants---å¯†ç¢¼å­¸å¸¸æ•¸"><a class="header" href="#cryptoconstants---å¯†ç¢¼å­¸å¸¸æ•¸">CryptoConstants - å¯†ç¢¼å­¸å¸¸æ•¸</a></h4>
<pre><code class="language-python">class CryptoConstants:
    """å¯†ç¢¼å­¸ç›¸é—œå¸¸æ•¸"""
    
    # secp256k1 æ©¢åœ“æ›²ç·šåƒæ•¸
    CURVE = SECP256k1
    CURVE_ORDER = SECP256k1.order           # n = æ›²ç·šçš„éš
    FIELD_PRIME = SECP256k1.curve.p()       # p = æœ‰é™åŸŸçš„æ¨¡æ•¸
    
    # å…¬é‘°æ ¼å¼
    UNCOMPRESSED_PUBKEY_PREFIX = b"\x04"     # éå£“ç¸®: 04 + x + y
    COMPRESSED_PUBKEY_EVEN_PREFIX = b"\x02"  # å£“ç¸®: 02 + x (yå¶æ•¸)
    COMPRESSED_PUBKEY_ODD_PREFIX = b"\x03"   # å£“ç¸®: 03 + x (yå¥‡æ•¸)
</code></pre>
<p><strong>æŠ€è¡“èƒŒæ™¯:</strong></p>
<ol>
<li>
<p><strong>secp256k1 æ›²ç·š</strong></p>
<ul>
<li>æ¯”ç‰¹å¹£ã€ä»¥å¤ªåŠã€TRON éƒ½ä½¿ç”¨æ­¤æ›²ç·š</li>
<li>æ–¹ç¨‹: yÂ² = xÂ³ + 7 (mod p)</li>
<li>éšæ•¸ n â‰ˆ 2Â²âµâ¶ï¼Œæä¾› 128 ä½å®‰å…¨å¼·åº¦</li>
</ul>
</li>
<li>
<p><strong>å…¬é‘°æ ¼å¼</strong></p>
<ul>
<li>éå£“ç¸®: 65 bytes (04 + x + y)ï¼Œå®Œæ•´ä¿ç•™åæ¨™</li>
<li>å£“ç¸®: 33 bytes (02/03 + x)ï¼Œç¯€çœç©ºé–“ï¼Œå¯å¾ x æ¨å° y</li>
</ul>
</li>
</ol>
<hr />
<h3 id="åœ°å€è½‰æ›æ¨¡çµ„"><a class="header" href="#åœ°å€è½‰æ›æ¨¡çµ„">åœ°å€è½‰æ›æ¨¡çµ„</a></h3>
<h4 id="addressconverter---åœ°å€æ ¼å¼è½‰æ›"><a class="header" href="#addressconverter---åœ°å€æ ¼å¼è½‰æ›">AddressConverter - åœ°å€æ ¼å¼è½‰æ›</a></h4>
<p>TRON åœ°å€æœ‰å…©ç¨®è¡¨ç¤ºæ–¹å¼:</p>
<ol>
<li>
<p><strong>Base58 æ ¼å¼</strong> (ç”¨æˆ¶å‹å¥½)</p>
<ul>
<li>ä»¥ 'T' é–‹é ­</li>
<li>åŒ…å«æ ¡é©—å’Œï¼Œå¯æª¢æ¸¬è¼¸å…¥éŒ¯èª¤</li>
<li>ä¾‹: <code>TQyZzVEs9qgLy52JAZQc7ZyxJf13ZNUG8u</code></li>
</ul>
</li>
<li>
<p><strong>Hex æ ¼å¼</strong> (æ©Ÿå™¨è™•ç†)</p>
<ul>
<li>ä»¥ '41' é–‹é ­ï¼ˆä¸»ç¶²æ¨™è­˜ï¼‰</li>
<li>42 å­—ç¬¦ï¼ˆ21 bytesï¼‰</li>
<li>ä¾‹: <code>41a49b6890465f39fce73b18e5c9c5fd9136c70e38</code></li>
</ul>
</li>
</ol>
<p><strong>è½‰æ›æ–¹æ³•:</strong></p>
<pre><code class="language-python"># Hex â†’ Base58
base58_addr = AddressConverter.hex_to_base58("41a49b6890...")

# Base58 â†’ Hex
hex_addr = AddressConverter.base58_to_hex("TQyZzVEs9qg...")
hex_addr_no_prefix = AddressConverter.base58_to_hex("TQyZzVEs9qg...", include_prefix=False)
</code></pre>
<hr />
<h3 id="å¯†é‘°èˆ‡åœ°å€ç”Ÿæˆæ¨¡çµ„"><a class="header" href="#å¯†é‘°èˆ‡åœ°å€ç”Ÿæˆæ¨¡çµ„">å¯†é‘°èˆ‡åœ°å€ç”Ÿæˆæ¨¡çµ„</a></h3>
<h4 id="keygenerator---åœ°å€ç”Ÿæˆ"><a class="header" href="#keygenerator---åœ°å€ç”Ÿæˆ">KeyGenerator - åœ°å€ç”Ÿæˆ</a></h4>
<p><strong>æ ¸å¿ƒæ–¹æ³•:</strong></p>
<ol>
<li>
<p><strong>private_key_to_public_key()</strong></p>
<ul>
<li>è¼¸å…¥: ç§é‘° (64 hex å­—ç¬¦)</li>
<li>è¼¸å‡º: å…¬é‘° (130/66 hex å­—ç¬¦)</li>
<li>ç®—æ³•: ECDSA secp256k1</li>
</ul>
</li>
<li>
<p><strong>private_key_to_address()</strong></p>
<ul>
<li>è¼¸å…¥: ç§é‘°</li>
<li>è¼¸å‡º: Base58 åœ°å€</li>
<li>æµç¨‹: ç§é‘° â†’ å…¬é‘° â†’ Keccak256 â†’ Base58Check</li>
</ul>
</li>
</ol>
<p><strong>å®‰å…¨è€ƒæ…®:</strong></p>
<pre><code class="language-python"># âŒ å±éšªï¼šç¡¬ç·¨ç¢¼ç§é‘°
private_key = "9930882e47d2b4d4d671435278edc06ba970184a436fba212f8c31a22f1fd7b2"

# âœ… å®‰å…¨ï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸
import os
private_key = os.environ.get('TRON_PRIVATE_KEY')
if not private_key:
    raise ValueError("è«‹è¨­ç½® TRON_PRIVATE_KEY ç’°å¢ƒè®Šæ•¸")
</code></pre>
<hr />
<h3 id="http-api-å°è£æ¨¡çµ„"><a class="header" href="#http-api-å°è£æ¨¡çµ„">HTTP API å°è£æ¨¡çµ„</a></h3>
<h4 id="tronapi---ç¯€é»é€šä¿¡"><a class="header" href="#tronapi---ç¯€é»é€šä¿¡">TronAPI - ç¯€é»é€šä¿¡</a></h4>
<p><strong>ä¸»è¦ç«¯é»:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>ç«¯é»</th><th>æ–¹æ³•</th><th>ç”¨é€”</th></tr></thead><tbody>
<tr><td><code>/wallet/getaccount</code></td><td>POST</td><td>æŸ¥è©¢å¸³æˆ¶è³‡è¨Š</td></tr>
<tr><td><code>/wallet/createtransaction</code></td><td>POST</td><td>å»ºç«‹ TRX è½‰è³¬</td></tr>
<tr><td><code>/wallet/triggersmartcontract</code></td><td>POST</td><td>èª¿ç”¨æ™ºèƒ½åˆç´„ï¼ˆå¯«å…¥ï¼‰</td></tr>
<tr><td><code>/wallet/triggerconstantcontract</code></td><td>POST</td><td>æŸ¥è©¢æ™ºèƒ½åˆç´„ï¼ˆåªè®€ï¼‰</td></tr>
<tr><td><code>/wallet/broadcasttransaction</code></td><td>POST</td><td>å»£æ’­å·²ç°½åäº¤æ˜“</td></tr>
<tr><td><code>/wallet/gettransactioninfobyid</code></td><td>POST</td><td>æŸ¥è©¢äº¤æ˜“è³‡è¨Š</td></tr>
</tbody></table>
</div>
<p><strong>ä½¿ç”¨ç¯„ä¾‹:</strong></p>
<pre><code class="language-python"># åˆå§‹åŒ– API
api = TronAPI(TronNetwork.NILE_API, api_key="your-api-key")

# æŸ¥è©¢é¤˜é¡
balance = api.get_account_balance("TQyZzVEs9qgLy52JAZQc7ZyxJf13ZNUG8u")
print(f"é¤˜é¡: {balance} TRX")

# æŸ¥è©¢ USDT é¤˜é¡
result = api.trigger_constant_contract(
    contract_address=TronNetwork.USDT_CONTRACT_NILE,
    function_selector="balanceOf(address)",
    parameter="000000000000000000000000a49b6890465f39fce73b18e5c9c5fd9136c70e38",
    owner_address="TQyZzVEs9qgLy52JAZQc7ZyxJf13ZNUG8u"
)
</code></pre>
<hr />
<h3 id="äº¤æ˜“ç°½åæ¨¡çµ„"><a class="header" href="#äº¤æ˜“ç°½åæ¨¡çµ„">äº¤æ˜“ç°½åæ¨¡çµ„</a></h3>
<h4 id="transactionsigner---ecdsa-ç°½å"><a class="header" href="#transactionsigner---ecdsa-ç°½å">TransactionSigner - ECDSA ç°½å</a></h4>
<p><strong>ç°½åçµæ§‹:</strong></p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        r           â”‚         s          â”‚ recovery_id  â”‚
â”‚    (32 bytes)      â”‚    (32 bytes)      â”‚   (1 byte)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         ECDSA ç°½ååˆ†é‡                      æ¢å¾©æ¨™è­˜
</code></pre>
<p><strong>Recovery ID çš„ä½œç”¨:</strong></p>
<p>Recovery ID å…è¨±å¾ç°½åæ¢å¾©å…¬é‘°ï¼Œé€™æ¨£äº¤æ˜“ä¸­ä¸éœ€è¦åŒ…å«å®Œæ•´å…¬é‘°ï¼Œç¯€çœç©ºé–“ã€‚</p>
<p><strong>æ•¸å­¸åŸç†:</strong></p>
<p>çµ¦å®šç°½å (r, s) å’Œæ¶ˆæ¯ eï¼Œå¯ä»¥æ¢å¾©å…¬é‘° Q:</p>
<pre><code>Q = r^(-1) Ã— (sÃ—R - eÃ—G)
</code></pre>
<p>å…¶ä¸­:</p>
<ul>
<li>R æ˜¯å¾ r æ§‹é€ çš„æ©¢åœ“æ›²ç·šé»</li>
<li>G æ˜¯åŸºé»</li>
<li>recovery_id å¹«åŠ©ç¢ºå®šæ­£ç¢ºçš„ R å’Œ y åæ¨™</li>
</ul>
<hr />
<h3 id="é«˜éšåŠŸèƒ½æ¨¡çµ„"><a class="header" href="#é«˜éšåŠŸèƒ½æ¨¡çµ„">é«˜éšåŠŸèƒ½æ¨¡çµ„</a></h3>
<h4 id="trontransfer---è½‰è³¬å°è£"><a class="header" href="#trontransfer---è½‰è³¬å°è£">TronTransfer - è½‰è³¬å°è£</a></h4>
<p><strong>TRX è½‰è³¬:</strong></p>
<pre><code class="language-python">txid = TronTransfer.transfer_trx(
    api=api,
    private_key_hex="your_private_key",
    to_address="TTqobYiHixykLYyA3WxmCLVCMCySHfigyE",
    amount_trx=1.0,
    verbose=True
)
</code></pre>
<p><strong>USDT è½‰è³¬:</strong></p>
<pre><code class="language-python">txid = TronTransfer.transfer_usdt(
    api=api,
    private_key_hex="your_private_key",
    to_address="TTqobYiHixykLYyA3WxmCLVCMCySHfigyE",
    amount_usdt=10.0,
    contract_address=TronNetwork.USDT_CONTRACT_NILE,
    verbose=True
)
</code></pre>
<p><strong>åƒæ•¸ç·¨ç¢¼ (TRC20):</strong></p>
<p>TRC20 ä»£å¹£è½‰è³¬éœ€è¦ç·¨ç¢¼ <code>transfer(address,uint256)</code> å‡½æ•¸:</p>
<pre><code>åƒæ•¸æ ¼å¼ (ç¸½å…± 64 bytes):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åœ°å€ (address) - 32 bytes             â”‚
â”‚  000000000000000000000000a49b6890...   â”‚
â”‚  â””â”€ å·¦è£œé›¶åˆ° 32 bytes                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é‡‘é¡ (uint256) - 32 bytes             â”‚
â”‚  00000000000000000000000000000f4240    â”‚
â”‚  â””â”€ 1000000 (1 USDT)ï¼Œå·¦è£œé›¶           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 id="tronquery---æŸ¥è©¢å°è£"><a class="header" href="#tronquery---æŸ¥è©¢å°è£">TronQuery - æŸ¥è©¢å°è£</a></h4>
<p><strong>æŸ¥è©¢ USDT é¤˜é¡:</strong></p>
<pre><code class="language-python">balance = TronQuery.check_usdt_balance(
    api=api,
    address="TQyZzVEs9qgLy52JAZQc7ZyxJf13ZNUG8u",
    contract_address=TronNetwork.USDT_CONTRACT_NILE
)
print(f"USDT é¤˜é¡: {balance:.6f} USDT")
</code></pre>
<hr />
<h2 id="ä½¿ç”¨ç¯„ä¾‹"><a class="header" href="#ä½¿ç”¨ç¯„ä¾‹">ä½¿ç”¨ç¯„ä¾‹</a></h2>
<h3 id="å®Œæ•´å·¥ä½œæµç¨‹"><a class="header" href="#å®Œæ•´å·¥ä½œæµç¨‹">å®Œæ•´å·¥ä½œæµç¨‹</a></h3>
<pre><code class="language-python">import os
from tron_impl import *

# 1. åˆå§‹åŒ– APIï¼ˆä½¿ç”¨æ¸¬è©¦ç¶²ï¼‰
api = TronAPI(TronNetwork.NILE_API)

# 2. å¾ç’°å¢ƒè®Šæ•¸è®€å–ç§é‘°ï¼ˆå®‰å…¨åšæ³•ï¼‰
private_key = os.environ.get('TRON_PRIVATE_KEY')
if not private_key:
    raise ValueError("è«‹è¨­ç½® TRON_PRIVATE_KEY ç’°å¢ƒè®Šæ•¸")

# 3. ç”Ÿæˆåœ°å€
my_address = KeyGenerator.private_key_to_address(private_key)
print(f"æˆ‘çš„åœ°å€: {my_address}")

# 4. æŸ¥è©¢é¤˜é¡
trx_balance = api.get_account_balance(my_address)
usdt_balance = TronQuery.check_usdt_balance(
    api, my_address, TronNetwork.USDT_CONTRACT_NILE
)
print(f"TRX é¤˜é¡: {trx_balance:.6f} TRX")
print(f"USDT é¤˜é¡: {usdt_balance:.6f} USDT")

# 5. TRX è½‰è³¬
txid = TronTransfer.transfer_trx(
    api=api,
    private_key_hex=private_key,
    to_address="TTqobYiHixykLYyA3WxmCLVCMCySHfigyE",
    amount_trx=1.0
)
print(f"TRX è½‰è³¬äº¤æ˜“: https://nile.tronscan.org/#/transaction/{txid}")

# 6. USDT è½‰è³¬
txid = TronTransfer.transfer_usdt(
    api=api,
    private_key_hex=private_key,
    to_address="TTqobYiHixykLYyA3WxmCLVCMCySHfigyE",
    amount_usdt=10.0,
    contract_address=TronNetwork.USDT_CONTRACT_NILE
)
print(f"USDT è½‰è³¬äº¤æ˜“: https://nile.tronscan.org/#/transaction/{txid}")
</code></pre>
<h3 id="åœ°å€ç”Ÿæˆè©³ç´°ç¤ºç¯„"><a class="header" href="#åœ°å€ç”Ÿæˆè©³ç´°ç¤ºç¯„">åœ°å€ç”Ÿæˆè©³ç´°ç¤ºç¯„</a></h3>
<pre><code class="language-python"># ç¤ºç¯„åœ°å€ç”Ÿæˆçš„æ¯ä¸€æ­¥
private_key = "9930882e47d2b4d4d671435278edc06ba970184a436fba212f8c31a22f1fd7b2"

# ä½¿ç”¨ show_steps=True é¡¯ç¤ºè©³ç´°éç¨‹
address = KeyGenerator.private_key_to_address(private_key, show_steps=True)

# è¼¸å‡ºå°‡åŒ…å«:
# - æ¯ä¸€æ­¥çš„è¨ˆç®—çµæœ
# - ä¸­é–“æ•¸æ“šçš„é•·åº¦é©—è­‰
# - æ ¼å¼æª¢æŸ¥
# - å®Œæ•´çš„æ¨å°éç¨‹
</code></pre>
<hr />
<h2 id="å®‰å…¨æ³¨æ„äº‹é …"><a class="header" href="#å®‰å…¨æ³¨æ„äº‹é …">å®‰å…¨æ³¨æ„äº‹é …</a></h2>
<h3 id="-é—œéµå®‰å…¨è¦å‰‡"><a class="header" href="#-é—œéµå®‰å…¨è¦å‰‡">ğŸ”´ é—œéµå®‰å…¨è¦å‰‡</a></h3>
<ol>
<li>
<p><strong>çµ•ä¸åœ¨ä»£ç¢¼ä¸­ç¡¬ç·¨ç¢¼ç§é‘°</strong></p>
<pre><code class="language-python"># âŒ å±éšª
private_key = "9930882e47d2b4d4d671435278edc06ba970184a436fba212f8c31a22f1fd7b2"

# âœ… å®‰å…¨
private_key = os.environ.get('TRON_PRIVATE_KEY')
</code></pre>
</li>
<li>
<p><strong>çµ•ä¸å°‡ç§é‘°æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶</strong></p>
<ul>
<li>ä½¿ç”¨ <code>.gitignore</code> æ’é™¤åŒ…å«ç§é‘°çš„æ–‡ä»¶</li>
<li>ä½¿ç”¨ç’°å¢ƒè®Šæ•¸æˆ–å¯†é‘°ç®¡ç†æœå‹™</li>
</ul>
</li>
<li>
<p><strong>å€åˆ†æ¸¬è©¦ç¶²å’Œä¸»ç¶²</strong></p>
<pre><code class="language-python"># æ¸¬è©¦ç¶² - å¯ä»¥è‡ªç”±å¯¦é©—
api = TronAPI(TronNetwork.NILE_API)

# ä¸»ç¶² - è¬¹æ…æ“ä½œï¼Œæ¶‰åŠçœŸå¯¦è³‡ç”¢
api = TronAPI(TronNetwork.MAINNET_API)
</code></pre>
</li>
<li>
<p><strong>é©—è­‰äº¤æ˜“åƒæ•¸</strong></p>
<ul>
<li>ç¢ºèªæ¥æ”¶åœ°å€æ­£ç¢º</li>
<li>ç¢ºèªè½‰è³¬é‡‘é¡æ­£ç¢º</li>
<li>åœ¨ä¸»ç¶²æ“ä½œå‰å…ˆåœ¨æ¸¬è©¦ç¶²é©—è­‰</li>
</ul>
</li>
<li>
<p><strong>ç§é‘°å„²å­˜å»ºè­°</strong></p>
<ul>
<li>ä½¿ç”¨ç¡¬é«”éŒ¢åŒ…ï¼ˆLedger, Trezorï¼‰</li>
<li>ä½¿ç”¨åŠ å¯†çš„å¯†é‘°ç®¡ç†æœå‹™</li>
<li>ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰</li>
<li>æ°¸é ä¸è¦æˆªåœ–æˆ–è¤‡è£½åˆ°ä¸å®‰å…¨çš„åœ°æ–¹</li>
</ul>
</li>
</ol>
<h3 id="-ä»£ç¢¼å®‰å…¨æª¢æŸ¥æ¸…å–®"><a class="header" href="#-ä»£ç¢¼å®‰å…¨æª¢æŸ¥æ¸…å–®">ğŸ›¡ï¸ ä»£ç¢¼å®‰å…¨æª¢æŸ¥æ¸…å–®</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
ç§»é™¤æ‰€æœ‰ç¡¬ç·¨ç¢¼çš„ç§é‘°</li>
<li><input disabled="" type="checkbox"/>
é…ç½® <code>.gitignore</code> æ’é™¤æ•æ„Ÿæ–‡ä»¶</li>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†ç§é‘°</li>
<li><input disabled="" type="checkbox"/>
åœ¨æ¸¬è©¦ç¶²å……åˆ†æ¸¬è©¦</li>
<li><input disabled="" type="checkbox"/>
è¨­ç½®é©ç•¶çš„ <code>fee_limit</code> é¿å…éé«˜æ‰‹çºŒè²»</li>
<li><input disabled="" type="checkbox"/>
é©—è­‰æ¥æ”¶åœ°å€çš„æœ‰æ•ˆæ€§</li>
<li><input disabled="" type="checkbox"/>
å¯¦ç¾äº¤æ˜“ç¢ºèªæª¢æŸ¥æ©Ÿåˆ¶</li>
</ul>
<hr />
<h2 id="æŠ€è¡“æ·±å…¥æ¢è¨"><a class="header" href="#æŠ€è¡“æ·±å…¥æ¢è¨">æŠ€è¡“æ·±å…¥æ¢è¨</a></h2>
<h3 id="secp256k1-æ©¢åœ“æ›²ç·š"><a class="header" href="#secp256k1-æ©¢åœ“æ›²ç·š">secp256k1 æ©¢åœ“æ›²ç·š</a></h3>
<p><strong>æ›²ç·šæ–¹ç¨‹:</strong></p>
<pre><code>yÂ² â‰¡ xÂ³ + 7 (mod p)
</code></pre>
<p><strong>åƒæ•¸:</strong></p>
<ul>
<li><strong>p</strong> (æœ‰é™åŸŸæ¨¡æ•¸): 2Â²âµâ¶ - 2Â³Â² - 977</li>
<li><strong>n</strong> (æ›²ç·šéšæ•¸): éå¸¸æ¥è¿‘ 2Â²âµâ¶ çš„è³ªæ•¸</li>
<li><strong>G</strong> (åŸºé»): æ¨™æº–åŒ–çš„èµ·å§‹é»</li>
</ul>
<p><strong>ç‚ºä»€éº¼é¸æ“‡ secp256k1?</strong></p>
<ol>
<li>é«˜æ•ˆç‡çš„è¨ˆç®—</li>
<li>128 ä½å®‰å…¨å¼·åº¦</li>
<li>è¡Œæ¥­æ¨™æº–ï¼ˆæ¯”ç‰¹å¹£ã€ä»¥å¤ªåŠï¼‰</li>
<li>è‰¯å¥½çš„æ•¸å­¸ç‰¹æ€§</li>
</ol>
<h3 id="keccak-256-vs-sha-256"><a class="header" href="#keccak-256-vs-sha-256">Keccak-256 vs SHA-256</a></h3>
<div class="table-wrapper"><table><thead><tr><th>ç‰¹æ€§</th><th>Keccak-256</th><th>SHA-256</th></tr></thead><tbody>
<tr><td>ç”¨æ–¼</td><td>åœ°å€ç”Ÿæˆ</td><td>äº¤æ˜“å“ˆå¸Œã€æ ¡é©—å’Œ</td></tr>
<tr><td>è¼¸å‡º</td><td>256 bits</td><td>256 bits</td></tr>
<tr><td>æ¨™æº–</td><td>SHA-3 å€™é¸ï¼ˆåŸå§‹ç‰ˆæœ¬ï¼‰</td><td>FIPS 180-4</td></tr>
<tr><td>TRON ä½¿ç”¨</td><td>âœ… åœ°å€æ´¾ç”Ÿ</td><td>âœ… ç°½åã€æ ¡é©—</td></tr>
</tbody></table>
</div>
<h3 id="base58-vs-base58check"><a class="header" href="#base58-vs-base58check">Base58 vs Base58Check</a></h3>
<p><strong>Base58:</strong></p>
<ul>
<li>ç§»é™¤æ˜“æ··æ·†å­—ç¬¦: 0, O, I, l</li>
<li>åƒ…ç”¨æ–¼ç·¨ç¢¼ï¼Œç„¡éŒ¯èª¤æª¢æ¸¬</li>
</ul>
<p><strong>Base58Check:</strong></p>
<ul>
<li>Base58 + 4 bytes æ ¡é©—å’Œ</li>
<li>å¯æª¢æ¸¬è¼¸å…¥éŒ¯èª¤</li>
<li>TRON åœ°å€ä½¿ç”¨ Base58Check</li>
</ul>
<p><strong>æ ¡é©—å’Œè¨ˆç®—:</strong></p>
<pre><code>checksum = SHA256(SHA256(data))[0:4]
</code></pre>
<hr />
<h2 id="å¸¸è¦‹å•é¡Œ-faq"><a class="header" href="#å¸¸è¦‹å•é¡Œ-faq">å¸¸è¦‹å•é¡Œ (FAQ)</a></h2>
<h3 id="q1-trx-å’Œ-sun-çš„é—œä¿‚"><a class="header" href="#q1-trx-å’Œ-sun-çš„é—œä¿‚">Q1: TRX å’Œ SUN çš„é—œä¿‚ï¼Ÿ</a></h3>
<p><strong>A:</strong> 1 TRX = 1,000,000 SUN</p>
<p>SUN æ˜¯ TRON çš„æœ€å°å–®ä½ï¼Œé¡ä¼¼æ–¼æ¯”ç‰¹å¹£çš„ Satoshiã€‚
æ‰€æœ‰éˆä¸Šé‡‘é¡éƒ½ä»¥ SUN ç‚ºå–®ä½ã€‚</p>
<h3 id="q2-ç‚ºä»€éº¼éœ€è¦-recovery-id"><a class="header" href="#q2-ç‚ºä»€éº¼éœ€è¦-recovery-id">Q2: ç‚ºä»€éº¼éœ€è¦ Recovery IDï¼Ÿ</a></h3>
<p><strong>A:</strong> Recovery ID å…è¨±å¾ç°½åæ¢å¾©å…¬é‘°ï¼Œé€™æ¨£:</p>
<ul>
<li>äº¤æ˜“ä¸­ä¸éœ€è¦åŒ…å«å®Œæ•´å…¬é‘°ï¼ˆç¯€çœç©ºé–“ï¼‰</li>
<li>ç¯€é»å¯ä»¥é©—è­‰ç°½åè€…èº«ä»½</li>
<li>æ¸›å°‘äº¤æ˜“å¤§å°ï¼ˆé™ä½æ‰‹çºŒè²»ï¼‰</li>
</ul>
<h3 id="q3-trc20-ä»£å¹£è½‰è³¬ç‚ºä»€éº¼éœ€è¦èƒ½é‡"><a class="header" href="#q3-trc20-ä»£å¹£è½‰è³¬ç‚ºä»€éº¼éœ€è¦èƒ½é‡">Q3: TRC20 ä»£å¹£è½‰è³¬ç‚ºä»€éº¼éœ€è¦èƒ½é‡ï¼Ÿ</a></h3>
<p><strong>A:</strong> TRC20 ä»£å¹£è½‰è³¬éœ€è¦èª¿ç”¨æ™ºèƒ½åˆç´„ï¼Œæ¶ˆè€—è¨ˆç®—è³‡æº:</p>
<ul>
<li><strong>èƒ½é‡ (Energy)</strong>: ç´„ 14,000 - 65,000</li>
<li><strong>ç²å–æ–¹å¼</strong>:
<ol>
<li>è³ªæŠ¼ TRX ç²å¾—èƒ½é‡</li>
<li>ç‡’æ¯€ TRX ä»£æ›¿èƒ½é‡ï¼ˆç´„ 420 SUN = 1 èƒ½é‡ï¼‰</li>
</ol>
</li>
</ul>
<h3 id="q4-ä»€éº¼æ˜¯å›ºåŒ–-solidified"><a class="header" href="#q4-ä»€éº¼æ˜¯å›ºåŒ–-solidified">Q4: ä»€éº¼æ˜¯å›ºåŒ– (Solidified)ï¼Ÿ</a></h3>
<p><strong>A:</strong> TRON çš„ç¢ºèªæ©Ÿåˆ¶:</p>
<ul>
<li><strong>1 å€‹å€å¡Š</strong>: äº¤æ˜“ä¸Šéˆï¼ˆå¯è¦‹ï¼‰</li>
<li><strong>19 å€‹å€å¡Š</strong>: äº¤æ˜“å›ºåŒ–ï¼ˆä¸å¯é€†ï¼‰</li>
<li><strong>æ™‚é–“</strong>: ç´„ 1 åˆ†é˜ï¼ˆ19 Ã— 3 ç§’ï¼‰</li>
</ul>
<h3 id="q5-æ¸¬è©¦ç¶²å’Œä¸»ç¶²çš„å·®ç•°"><a class="header" href="#q5-æ¸¬è©¦ç¶²å’Œä¸»ç¶²çš„å·®ç•°">Q5: æ¸¬è©¦ç¶²å’Œä¸»ç¶²çš„å·®ç•°ï¼Ÿ</a></h3>
<div class="table-wrapper"><table><thead><tr><th>ç‰¹æ€§</th><th>æ¸¬è©¦ç¶² (Nile)</th><th>ä¸»ç¶²</th></tr></thead><tbody>
<tr><td>ä»£å¹£åƒ¹å€¼</td><td>ç„¡åƒ¹å€¼</td><td>çœŸå¯¦è³‡ç”¢</td></tr>
<tr><td>ç²å–æ¸¬è©¦å¹£</td><td>æ°´é¾é ­å…è²»é ˜å–</td><td>éœ€è¦è³¼è²·</td></tr>
<tr><td>API ç«¯é»</td><td>nile.trongrid.io</td><td>api.trongrid.io</td></tr>
<tr><td>é©ç”¨å ´æ™¯</td><td>é–‹ç™¼ã€æ¸¬è©¦</td><td>ç”Ÿç”¢ç’°å¢ƒ</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="æ“´å±•è³‡æº"><a class="header" href="#æ“´å±•è³‡æº">æ“´å±•è³‡æº</a></h2>
<h3 id="å®˜æ–¹æ–‡æª”"><a class="header" href="#å®˜æ–¹æ–‡æª”">å®˜æ–¹æ–‡æª”</a></h3>
<ul>
<li><a href="https://developers.tron.network/">TRON é–‹ç™¼è€…æ–‡æª”</a></li>
<li><a href="https://developers.tron.network/docs/tron-grid-intro">TronGrid API æ–‡æª”</a></li>
<li><a href="https://github.com/tronprotocol/TIPs/blob/master/tip-20.md">TRC20 ä»£å¹£æ¨™æº–</a></li>
</ul>
<h3 id="å·¥å…·å’Œæœå‹™"><a class="header" href="#å·¥å…·å’Œæœå‹™">å·¥å…·å’Œæœå‹™</a></h3>
<ul>
<li><a href="https://nileex.io/join/getJoinPage">Nile æ¸¬è©¦ç¶²æ°´é¾é ­</a></li>
<li><a href="https://tronscan.org/">TronScan å€å¡Šéˆç€è¦½å™¨</a></li>
<li><a href="https://www.tronlink.org/">TronLink éŒ¢åŒ…</a></li>
</ul>
<h3 id="ç›¸é—œæ¨™æº–"><a class="header" href="#ç›¸é—œæ¨™æº–">ç›¸é—œæ¨™æº–</a></h3>
<ul>
<li><a href="https://eips.ethereum.org/EIPS/eip-55">EIP-55: æ··åˆå¤§å°å¯«æ ¡é©—å’Œåœ°å€ç·¨ç¢¼</a></li>
<li><a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki">BIP-32: åˆ†å±¤ç¢ºå®šæ€§éŒ¢åŒ…</a></li>
<li><a href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki">BIP-39: åŠ©è¨˜è©</a></li>
</ul>
<hr />
<h2 id="ç‰ˆæœ¬æ­·å²"><a class="header" href="#ç‰ˆæœ¬æ­·å²">ç‰ˆæœ¬æ­·å²</a></h2>
<h3 id="v20-2025-01-22"><a class="header" href="#v20-2025-01-22">v2.0 (2025-01-22)</a></h3>
<ul>
<li>âœ… é‡æ§‹ä»£ç¢¼çµæ§‹ï¼Œæ¨¡çµ„åŒ–è¨­è¨ˆ</li>
<li>âœ… æ·»åŠ è©³ç´°çš„ä¸­æ–‡è¨»é‡‹</li>
<li>âœ… å¯¦ç¾ TRX å’Œ USDT è½‰è³¬</li>
<li>âœ… å®Œå–„éŒ¯èª¤è™•ç†</li>
<li>âœ… æ·»åŠ ä½¿ç”¨ç¤ºç¯„</li>
</ul>
<h3 id="v10-2024-xx-xx"><a class="header" href="#v10-2024-xx-xx">v1.0 (2024-XX-XX)</a></h3>
<ul>
<li>âœ… åˆå§‹ç‰ˆæœ¬</li>
<li>âœ… åŸºæœ¬åœ°å€ç”ŸæˆåŠŸèƒ½</li>
<li>âœ… ç°¡å–®çš„ API å°è£</li>
</ul>
<hr />
<h2 id="æˆæ¬Šèˆ‡å…è²¬è²æ˜"><a class="header" href="#æˆæ¬Šèˆ‡å…è²¬è²æ˜">æˆæ¬Šèˆ‡å…è²¬è²æ˜</a></h2>
<h3 id="ä½¿ç”¨è¨±å¯"><a class="header" href="#ä½¿ç”¨è¨±å¯">ä½¿ç”¨è¨±å¯</a></h3>
<p>æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šï¼Œå¯è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹å’Œåˆ†ç™¼ã€‚</p>
<h3 id="å…è²¬è²æ˜"><a class="header" href="#å…è²¬è²æ˜">å…è²¬è²æ˜</a></h3>
<ul>
<li>æœ¬å°ˆæ¡ˆåƒ…ä¾›<strong>æ•™å­¸å’Œå­¸ç¿’</strong>ç”¨é€”</li>
<li>åœ¨ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨å‰è«‹<strong>å……åˆ†æ¸¬è©¦</strong></li>
<li>ä½œè€…ä¸å°ä½¿ç”¨æœ¬ä»£ç¢¼é€ æˆçš„ä»»ä½•æå¤±è² è²¬</li>
<li>è«‹éµå®ˆç•¶åœ°æ³•å¾‹æ³•è¦</li>
</ul>
<h3 id="å®‰å…¨æé†’"><a class="header" href="#å®‰å…¨æé†’">å®‰å…¨æé†’</a></h3>
<ul>
<li>ğŸ”´ <strong>æ°¸é ä¸è¦åœ¨å…¬é–‹å ´åˆåˆ†äº«ç§é‘°</strong></li>
<li>ğŸ”´ <strong>åœ¨ä¸»ç¶²æ“ä½œå‰å‹™å¿…åœ¨æ¸¬è©¦ç¶²é©—è­‰</strong></li>
<li>ğŸ”´ <strong>å®šæœŸå‚™ä»½é‡è¦æ•¸æ“š</strong></li>
<li>ğŸ”´ <strong>ä½¿ç”¨ç¡¬é«”éŒ¢åŒ…ä¿è­·å¤§é¡è³‡ç”¢</strong></li>
</ul>
<hr />
<h2 id="è²¢ç»æŒ‡å—"><a class="header" href="#è²¢ç»æŒ‡å—">è²¢ç»æŒ‡å—</a></h2>
<p>æ­¡è¿æäº¤å•é¡Œå’Œæ”¹é€²å»ºè­°ï¼</p>
<h3 id="å¦‚ä½•è²¢ç»"><a class="header" href="#å¦‚ä½•è²¢ç»">å¦‚ä½•è²¢ç»</a></h3>
<ol>
<li>Fork æœ¬å°ˆæ¡ˆ</li>
<li>å‰µå»ºç‰¹æ€§åˆ†æ”¯ (<code>git checkout -b feature/AmazingFeature</code>)</li>
<li>æäº¤æ›´æ”¹ (<code>git commit -m 'Add some AmazingFeature'</code>)</li>
<li>æ¨é€åˆ°åˆ†æ”¯ (<code>git push origin feature/AmazingFeature</code>)</li>
<li>é–‹å•Ÿ Pull Request</li>
</ol>
<h3 id="ä»£ç¢¼é¢¨æ ¼"><a class="header" href="#ä»£ç¢¼é¢¨æ ¼">ä»£ç¢¼é¢¨æ ¼</a></h3>
<ul>
<li>éµå¾ª PEP 8 è¦ç¯„</li>
<li>ä½¿ç”¨æœ‰æ„ç¾©çš„è®Šæ•¸åç¨±</li>
<li>æ·»åŠ æ¸…æ™°çš„è¨»é‡‹ï¼ˆä¸­æ–‡ï¼‰</li>
<li>åŒ…å«å–®å…ƒæ¸¬è©¦</li>
</ul>
<h2 id="å®Œæ•´ç¨‹å¼ç¢¼"><a class="header" href="#å®Œæ•´ç¨‹å¼ç¢¼">å®Œæ•´ç¨‹å¼ç¢¼</a></h2>
<h3 id="ä¾è³´å®‰è£"><a class="header" href="#ä¾è³´å®‰è£">ä¾è³´å®‰è£</a></h3>
<pre><code class="language-bash">pip install requests base58 ecdsa pycryptodome --break-system-packages
</code></pre>
<h3 id="å®Œæ•´å¯¦ç¾ä»£ç¢¼"><a class="header" href="#å®Œæ•´å¯¦ç¾ä»£ç¢¼">å®Œæ•´å¯¦ç¾ä»£ç¢¼</a></h3>
<pre><code class="language-python">"""
TRON å€å¡Šéˆåº•å±¤å¯¦ç¾ - ç´” Python ç‰ˆæœ¬
=====================================

æœ¬ç¨‹å¼ç›´æ¥ä½¿ç”¨ HTTP API å’Œå¯†ç¢¼å­¸åº«å¯¦ç¾ TRON å€å¡Šéˆçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œ
ä¸ä¾è³´ tronpy ç­‰é«˜éšå¥—ä»¶ï¼Œå¹«åŠ©æ·±å…¥ç†è§£ TRON çš„åº•å±¤é‹ä½œåŸç†ã€‚

ä¸»è¦åŠŸèƒ½ï¼š
1. åœ°å€æ ¼å¼è½‰æ› (Base58 â†” Hex)
2. å¾ç§é‘°ç”Ÿæˆå…¬é‘°å’Œåœ°å€
3. æŸ¥è©¢å¸³æˆ¶é¤˜é¡ (TRX å’Œ TRC20 ä»£å¹£)
4. å»ºç«‹ã€ç°½åã€å»£æ’­äº¤æ˜“
5. TRX å’Œ USDT (TRC20) è½‰è³¬

ä½œè€…ï¼šAI Assistant
ç‰ˆæœ¬ï¼š2.0 (é‡æ§‹ç‰ˆ)
æœ€å¾Œæ›´æ–°ï¼š2025-01-22
"""

import hashlib
from typing import Dict, Any, Optional
import os

import base58
import requests
from Crypto.Hash import keccak
from ecdsa import SECP256k1, SigningKey
from ecdsa.util import sigencode_string
from ecdsa.numbertheory import square_root_mod_prime
from ecdsa.ellipticcurve import Point


# ============================================
# å¸¸æ•¸å®šç¾©
# ============================================


class TronNetwork:
    """TRON ç¶²è·¯é…ç½®å¸¸æ•¸"""

    # API ç«¯é»
    NILE_API = "https://nile.trongrid.io"  # Nile æ¸¬è©¦ç¶²
    MAINNET_API = "https://api.trongrid.io"  # ä¸»ç¶²

    # USDT åˆç´„åœ°å€
    USDT_CONTRACT_MAINNET = "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"  # ä¸»ç¶² USDT
    USDT_CONTRACT_NILE = "TXYZopYRdj2D9XRtbG411XZZ3kM5VkAeBf"  # æ¸¬è©¦ç¶² USDT

    # åœ°å€å‰ç¶´
    ADDRESS_PREFIX = "41"  # TRON ä¸»ç¶²åœ°å€çš„ hex å‰ç¶´


class CryptoConstants:
    """å¯†ç¢¼å­¸ç›¸é—œå¸¸æ•¸"""

    # secp256k1 æ©¢åœ“æ›²ç·šåƒæ•¸
    CURVE = SECP256k1
    CURVE_ORDER = SECP256k1.order  # æ›²ç·šçš„éš
    FIELD_PRIME = SECP256k1.curve.p()  # æœ‰é™åŸŸçš„æ¨¡æ•¸

    # å…¬é‘°æ ¼å¼
    UNCOMPRESSED_PUBKEY_PREFIX = b"\x04"  # éå£“ç¸®å…¬é‘°å‰ç¶´
    COMPRESSED_PUBKEY_EVEN_PREFIX = b"\x02"  # å£“ç¸®å…¬é‘°å‰ç¶´ (y ç‚ºå¶æ•¸)
    COMPRESSED_PUBKEY_ODD_PREFIX = b"\x03"  # å£“ç¸®å…¬é‘°å‰ç¶´ (y ç‚ºå¥‡æ•¸)

    # é•·åº¦å¸¸æ•¸
    PRIVATE_KEY_LENGTH = 64  # ç§é‘°é•·åº¦ (hex å­—ç¬¦)
    PUBLIC_KEY_UNCOMPRESSED_LENGTH = 130  # éå£“ç¸®å…¬é‘°é•·åº¦ (hex å­—ç¬¦)
    PUBLIC_KEY_COMPRESSED_LENGTH = 66  # å£“ç¸®å…¬é‘°é•·åº¦ (hex å­—ç¬¦)
    ADDRESS_HEX_LENGTH = 42  # å¸¶å‰ç¶´çš„ hex åœ°å€é•·åº¦
    ADDRESS_CORE_LENGTH = 40  # ä¸å¸¶å‰ç¶´çš„ hex åœ°å€é•·åº¦
    SIGNATURE_LENGTH = 65  # ECDSA å¯æ¢å¾©ç°½åé•·åº¦ (bytes)


# ============================================
# åœ°å€è½‰æ›å·¥å…·
# ============================================


class AddressConverter:
    """
    TRON åœ°å€æ ¼å¼è½‰æ›å·¥å…·

    æ”¯æ´ Base58 å’Œ Hex æ ¼å¼ä¹‹é–“çš„ç›¸äº’è½‰æ›ã€‚
    """

    @staticmethod
    def hex_to_base58(hex_address: str) -&gt; str:
        """å°‡ Hex æ ¼å¼åœ°å€è½‰æ›ç‚º Base58 æ ¼å¼"""
        # ç§»é™¤ 0x å‰ç¶´ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
        if hex_address.startswith(("0x", "0X")):
            hex_address = hex_address[2:]

        # çµ±ä¸€è½‰ç‚ºå°å¯«
        hex_address = hex_address.lower()

        # æª¢æŸ¥ä¸¦è™•ç† 41 å‰ç¶´
        if hex_address.startswith("41"):
            if len(hex_address) != CryptoConstants.ADDRESS_HEX_LENGTH:
                raise ValueError(
                    f"å¸¶ 41 å‰ç¶´çš„åœ°å€é•·åº¦æ‡‰ç‚º {CryptoConstants.ADDRESS_HEX_LENGTH} å­—ç¬¦"
                )
        else:
            if len(hex_address) != CryptoConstants.ADDRESS_CORE_LENGTH:
                raise ValueError(
                    f"ä¸å¸¶ 41 å‰ç¶´çš„åœ°å€é•·åº¦æ‡‰ç‚º {CryptoConstants.ADDRESS_CORE_LENGTH} å­—ç¬¦"
                )
            hex_address = TronNetwork.ADDRESS_PREFIX + hex_address

        # é©—è­‰æ˜¯å¦ç‚ºæœ‰æ•ˆçš„ hex å­—ç¬¦ä¸²
        try:
            address_bytes = bytes.fromhex(hex_address)
        except ValueError as e:
            raise ValueError(f"ç„¡æ•ˆçš„ hex å­—ç¬¦ä¸²: {hex_address}") from e

        # Base58Check ç·¨ç¢¼
        base58_address = base58.b58encode_check(address_bytes).decode()

        # é©—è­‰çµæœ
        if not base58_address.startswith("T"):
            raise ValueError(f"è½‰æ›çµæœä¸æ˜¯æœ‰æ•ˆçš„ TRON ä¸»ç¶²åœ°å€: {base58_address}")

        return base58_address

    @staticmethod
    def base58_to_hex(base58_address: str, include_prefix: bool = True) -&gt; str:
        """å°‡ Base58 æ ¼å¼åœ°å€è½‰æ›ç‚º Hex æ ¼å¼"""
        try:
            decoded = base58.b58decode_check(base58_address)
            hex_address = decoded.hex()

            if not hex_address.startswith("41"):
                raise ValueError(f"ä¸æ˜¯æœ‰æ•ˆçš„ TRON ä¸»ç¶²åœ°å€: {hex_address}")

            if include_prefix:
                return hex_address
            else:
                return hex_address[2:]

        except Exception as e:
            raise ValueError(f"Base58 è§£ç¢¼å¤±æ•—: {e}") from e


# ============================================
# å¯†é‘°èˆ‡åœ°å€ç”Ÿæˆ
# ============================================


class KeyGenerator:
    """TRON å¯†é‘°å’Œåœ°å€ç”Ÿæˆå·¥å…·"""

    @staticmethod
    def private_key_to_public_key(
        private_key_hex: str, compressed: bool = False
    ) -&gt; str:
        """å¾ç§é‘°ç”Ÿæˆå…¬é‘°"""
        if len(private_key_hex) != CryptoConstants.PRIVATE_KEY_LENGTH:
            raise ValueError(f"ç§é‘°é•·åº¦æ‡‰ç‚º {CryptoConstants.PRIVATE_KEY_LENGTH} å­—ç¬¦")

        try:
            private_key_bytes = bytes.fromhex(private_key_hex)
        except ValueError as e:
            raise ValueError("ç„¡æ•ˆçš„ hex å­—ç¬¦ä¸²") from e

        signing_key = SigningKey.from_string(
            private_key_bytes, curve=CryptoConstants.CURVE
        )
        verifying_key = signing_key.get_verifying_key()

        public_key_bytes = verifying_key.to_string()
        x_bytes = public_key_bytes[:32]
        y_bytes = public_key_bytes[32:]

        if compressed:
            y_int = int.from_bytes(y_bytes, byteorder="big")
            prefix = (
                CryptoConstants.COMPRESSED_PUBKEY_EVEN_PREFIX
                if y_int % 2 == 0
                else CryptoConstants.COMPRESSED_PUBKEY_ODD_PREFIX
            )
            public_key = prefix + x_bytes
        else:
            public_key = CryptoConstants.UNCOMPRESSED_PUBKEY_PREFIX + public_key_bytes

        return public_key.hex()

    @staticmethod
    def private_key_to_address(private_key_hex: str, show_steps: bool = False) -&gt; str:
        """å¾ç§é‘°ç”Ÿæˆ TRON åœ°å€"""
        if show_steps:
            print("=" * 70)
            print("TRON åœ°å€ç”Ÿæˆæµç¨‹")
            print("=" * 70)
            print(f"\nç§é‘°: {private_key_hex}\n")

        # Step 1: ç”Ÿæˆéå£“ç¸®å…¬é‘°
        public_key_hex = KeyGenerator.private_key_to_public_key(
            private_key_hex, compressed=False
        )
        if show_steps:
            print(f"ã€Step 1ã€‘å…¬é‘°: {public_key_hex}\n")

        # Step 2: å»æ‰ "04" å‰ç¶´
        public_key_no_prefix = public_key_hex[2:]
        if show_steps:
            print(f"ã€Step 2ã€‘å»å‰ç¶´: {public_key_no_prefix}\n")

        # Step 3: Keccak256 å“ˆå¸Œ
        keccak_hash = keccak.new(digest_bits=256)
        keccak_hash.update(bytes.fromhex(public_key_no_prefix))
        keccak_digest = keccak_hash.hexdigest()
        if show_steps:
            print(f"ã€Step 3ã€‘Keccak256: {keccak_digest}\n")

        # Step 4: å–æœ€å¾Œ 20 bytes
        address_core = keccak_digest[-40:]
        if show_steps:
            print(f"ã€Step 4ã€‘åœ°å€æ ¸å¿ƒ: {address_core}\n")

        # Step 5: æ·»åŠ  "41" å‰ç¶´
        address_with_prefix = TronNetwork.ADDRESS_PREFIX + address_core
        if show_steps:
            print(f"ã€Step 5ã€‘Hex åœ°å€: {address_with_prefix}\n")

        # Step 6-8: è¨ˆç®—æ ¡é©—å’Œ
        sha256_first = hashlib.sha256(bytes.fromhex(address_with_prefix)).hexdigest()
        sha256_second = hashlib.sha256(bytes.fromhex(sha256_first)).hexdigest()
        checksum = sha256_second[:8]
        if show_steps:
            print(f"ã€Step 6-8ã€‘æ ¡é©—å’Œ: {checksum}\n")

        # Step 9: é€£æ¥åœ°å€å’Œæ ¡é©—å’Œ
        address_with_checksum = address_with_prefix + checksum
        if show_steps:
            print(f"ã€Step 9ã€‘å®Œæ•´æ•¸æ“š: {address_with_checksum}\n")

        # Step 10: Base58 ç·¨ç¢¼
        address_base58 = base58.b58encode(bytes.fromhex(address_with_checksum)).decode()
        if show_steps:
            print(f"ã€Step 10ã€‘Base58 åœ°å€: {address_base58}\n")
            print("=" * 70)

        return address_base58


# ============================================
# HTTP API å°è£
# ============================================


class TronAPI:
    """TRON HTTP API å°è£é¡åˆ¥"""

    def __init__(self, api_url: str, api_key: Optional[str] = None):
        """åˆå§‹åŒ– TRON API å®¢æˆ¶ç«¯"""
        self.api_url = api_url
        self.headers = {"Content-Type": "application/json"}

        if api_key:
            self.headers["TRON-PRO-API-KEY"] = api_key

    def post(self, endpoint: str, data: Dict[str, Any]) -&gt; Dict[str, Any]:
        """ç™¼é€ POST è«‹æ±‚åˆ° TRON ç¯€é»"""
        url = f"{self.api_url}{endpoint}"
        response = requests.post(url, json=data, headers=self.headers)
        response.raise_for_status()
        return response.json()

    def get(self, endpoint: str) -&gt; Dict[str, Any]:
        """ç™¼é€ GET è«‹æ±‚åˆ° TRON ç¯€é»"""
        url = f"{self.api_url}{endpoint}"
        response = requests.get(url, headers=self.headers)
        response.raise_for_status()
        return response.json()

    def get_account(self, address: str) -&gt; Dict[str, Any]:
        """æŸ¥è©¢å¸³æˆ¶è³‡è¨Š"""
        data = {"address": address, "visible": True}
        return self.post("/wallet/getaccount", data)

    def get_account_balance(self, address: str) -&gt; float:
        """æŸ¥è©¢ TRX é¤˜é¡"""
        account = self.get_account(address)
        balance_sun = account.get("balance", 0)
        return balance_sun / 1_000_000

    def trigger_constant_contract(
        self,
        contract_address: str,
        function_selector: str,
        parameter: str,
        owner_address: str,
    ) -&gt; Dict[str, Any]:
        """èª¿ç”¨æ™ºèƒ½åˆç´„ï¼ˆåªè®€ï¼‰"""
        data = {
            "owner_address": owner_address,
            "contract_address": contract_address,
            "function_selector": function_selector,
            "parameter": parameter,
            "visible": True,
        }
        return self.post("/wallet/triggerconstantcontract", data)

    def create_transaction(
        self, to_address: str, owner_address: str, amount: float
    ) -&gt; Dict[str, Any]:
        """å»ºç«‹ TRX è½‰è³¬äº¤æ˜“"""
        data = {
            "to_address": to_address,
            "owner_address": owner_address,
            "amount": int(amount * 1_000_000),
            "visible": True,
        }
        return self.post("/wallet/createtransaction", data)

    def trigger_smart_contract(
        self,
        contract_address: str,
        function_selector: str,
        parameter: str,
        fee_limit: int,
        owner_address: str,
    ) -&gt; Dict[str, Any]:
        """èª¿ç”¨æ™ºèƒ½åˆç´„ï¼ˆå¯«å…¥ï¼‰"""
        data = {
            "owner_address": owner_address,
            "contract_address": contract_address,
            "function_selector": function_selector,
            "parameter": parameter,
            "fee_limit": fee_limit,
            "call_value": 0,
            "visible": True,
        }
        return self.post("/wallet/triggersmartcontract", data)

    def broadcast_transaction(
        self, signed_transaction: Dict[str, Any]
    ) -&gt; Dict[str, Any]:
        """å»£æ’­å·²ç°½åçš„äº¤æ˜“åˆ°ç¶²è·¯"""
        return self.post("/wallet/broadcasttransaction", signed_transaction)

    def get_transaction_info(self, txid: str) -&gt; Dict[str, Any]:
        """æŸ¥è©¢äº¤æ˜“è³‡è¨Š"""
        data = {"value": txid}
        return self.post("/wallet/gettransactioninfobyid", data)


# ============================================
# äº¤æ˜“ç°½å
# ============================================


class TransactionSigner:
    """TRON äº¤æ˜“ç°½åå·¥å…·"""

    @staticmethod
    def sign_transaction(
        transaction: Dict[str, Any], private_key_hex: str
    ) -&gt; Dict[str, Any]:
        """å°äº¤æ˜“é€²è¡Œç°½å"""
        txid = transaction.get("txID")
        if not txid:
            raise ValueError("äº¤æ˜“è³‡æ–™ä¸­æ²’æœ‰ txID")

        txid_bytes = bytes.fromhex(txid)

        private_key_bytes = bytes.fromhex(private_key_hex)
        signing_key = SigningKey.from_string(
            private_key_bytes, curve=CryptoConstants.CURVE
        )

        signature = signing_key.sign_digest(txid_bytes, sigencode=sigencode_string)

        recovery_id = TransactionSigner._calculate_recovery_id(
            txid_bytes, signature, signing_key
        )

        signature_with_recovery = signature + bytes([recovery_id])

        transaction["signature"] = [signature_with_recovery.hex()]

        return transaction

    @staticmethod
    def _calculate_recovery_id(
        message_hash: bytes, signature: bytes, signing_key: SigningKey
    ) -&gt; int:
        """è¨ˆç®— ECDSA ç°½åçš„ Recovery ID"""
        r = int.from_bytes(signature[:32], byteorder="big")
        s = int.from_bytes(signature[32:64], byteorder="big")

        verifying_key = signing_key.get_verifying_key()
        correct_point = verifying_key.pubkey.point

        p = CryptoConstants.FIELD_PRIME
        n = CryptoConstants.CURVE_ORDER

        for recovery_id in range(4):
            try:
                x = r
                if recovery_id &gt;= 2:
                    x = r + n
                    if x &gt;= p:
                        continue

                y_squared = (pow(x, 3, p) + 7) % p
                y = square_root_mod_prime(y_squared, p)

                if (y % 2 == 0) != (recovery_id % 2 == 0):
                    y = p - y

                R = Point(CryptoConstants.CURVE.curve, x, y, n)

                e = int.from_bytes(message_hash, byteorder="big")
                r_inv = pow(r, -1, n)

                recovered_point = r_inv * (
                    s * R + (-e % n) * CryptoConstants.CURVE.generator
                )

                if (
                    recovered_point.x() == correct_point.x()
                    and recovered_point.y() == correct_point.y()
                ):
                    return recovery_id

            except Exception:
                continue

        y = correct_point.y()
        return 1 if y % 2 == 1 else 0


# ============================================
# é«˜éšåŠŸèƒ½å°è£
# ============================================


class TronTransfer:
    """TRON è½‰è³¬åŠŸèƒ½å°è£"""

    @staticmethod
    def transfer_trx(
        api: TronAPI,
        private_key_hex: str,
        to_address: str,
        amount_trx: float,
        verbose: bool = True,
    ) -&gt; Optional[str]:
        """è½‰è³¬ TRX"""
        if verbose:
            print("\n" + "=" * 60)
            print("é–‹å§‹ TRX è½‰è³¬")
            print("=" * 60)

        from_address = KeyGenerator.private_key_to_address(private_key_hex)

        if verbose:
            print(f"\nç™¼é€æ–¹: {from_address}")
            print(f"æ¥æ”¶æ–¹: {to_address}")
            print(f"é‡‘é¡: {amount_trx} TRX")

        if verbose:
            print("\n[1/3] å»ºç«‹äº¤æ˜“...")

        transaction = api.create_transaction(to_address, from_address, amount_trx)

        if "Error" in transaction:
            if verbose:
                print(f"âŒ å»ºç«‹äº¤æ˜“å¤±æ•—: {transaction}")
            return None

        if verbose:
            print(f"âœ“ äº¤æ˜“å·²å»ºç«‹")
            print(f"  äº¤æ˜“ID: {transaction['txID']}")

        if verbose:
            print("\n[2/3] ç°½åäº¤æ˜“...")

        signed_txn = TransactionSigner.sign_transaction(transaction, private_key_hex)

        if verbose:
            print("âœ“ äº¤æ˜“å·²ç°½å")

        if verbose:
            print("\n[3/3] å»£æ’­äº¤æ˜“...")

        result = api.broadcast_transaction(signed_txn)

        if result.get("result"):
            if verbose:
                print("âœ“ äº¤æ˜“å·²å»£æ’­æˆåŠŸ")
                print(f"\näº¤æ˜“ID: {transaction['txID']}")
                print("=" * 60)
            return transaction["txID"]
        else:
            if verbose:
                print(f"âŒ å»£æ’­å¤±æ•—: {result}")
            return None

    @staticmethod
    def transfer_usdt(
        api: TronAPI,
        private_key_hex: str,
        to_address: str,
        amount_usdt: float,
        contract_address: str,
        verbose: bool = True,
    ) -&gt; Optional[str]:
        """è½‰è³¬ USDT (TRC20 ä»£å¹£)"""
        if verbose:
            print("\n" + "=" * 60)
            print("é–‹å§‹ USDT (TRC20) è½‰è³¬")
            print("=" * 60)

        from_address = KeyGenerator.private_key_to_address(private_key_hex)

        if verbose:
            print(f"\nç™¼é€æ–¹: {from_address}")
            print(f"æ¥æ”¶æ–¹: {to_address}")
            print(f"é‡‘é¡: {amount_usdt} USDT")

        if verbose:
            print("\n[1/4] ç·¨ç¢¼åˆç´„åƒæ•¸...")

        to_hex = AddressConverter.base58_to_hex(to_address, include_prefix=False)
        to_param = to_hex.zfill(64)

        amount_raw = int(amount_usdt * 1_000_000)
        amount_param = hex(amount_raw)[2:].zfill(64)

        parameter = to_param + amount_param

        if verbose:
            print(f"âœ“ åƒæ•¸ç·¨ç¢¼å®Œæˆ")

        if verbose:
            print("\n[2/4] å»ºç«‹äº¤æ˜“...")

        transaction = api.trigger_smart_contract(
            contract_address=contract_address,
            function_selector="transfer(address,uint256)",
            parameter=parameter,
            fee_limit=50_000_000,
            owner_address=from_address,
        )

        if "Error" in transaction or "result" not in transaction:
            if verbose:
                print(f"âŒ å»ºç«‹äº¤æ˜“å¤±æ•—: {transaction}")
            return None

        if "transaction" not in transaction:
            if verbose:
                print(f"âŒ äº¤æ˜“çµæ§‹ç•°å¸¸: {transaction}")
            return None

        actual_txn = transaction["transaction"]

        if verbose:
            print(f"âœ“ äº¤æ˜“å·²å»ºç«‹")
            print(f"  äº¤æ˜“ID: {actual_txn['txID']}")

        if verbose:
            print("\n[3/4] ç°½åäº¤æ˜“...")

        signed_txn = TransactionSigner.sign_transaction(actual_txn, private_key_hex)

        if verbose:
            print("âœ“ äº¤æ˜“å·²ç°½å")

        if verbose:
            print("\n[4/4] å»£æ’­äº¤æ˜“...")

        result = api.broadcast_transaction(signed_txn)

        if result.get("result"):
            if verbose:
                print("âœ“ äº¤æ˜“å·²å»£æ’­æˆåŠŸ")
                print(f"\näº¤æ˜“ID: {actual_txn['txID']}")
                print("=" * 60)
            return actual_txn["txID"]
        else:
            if verbose:
                print(f"âŒ å»£æ’­å¤±æ•—: {result}")
            return None


class TronQuery:
    """TRON æŸ¥è©¢åŠŸèƒ½å°è£"""

    @staticmethod
    def check_usdt_balance(api: TronAPI, address: str, contract_address: str) -&gt; float:
        """æŸ¥è©¢ USDT (TRC20) é¤˜é¡"""
        addr_hex = AddressConverter.base58_to_hex(address, include_prefix=False)
        parameter = addr_hex.zfill(64)

        result = api.trigger_constant_contract(
            contract_address=contract_address,
            function_selector="balanceOf(address)",
            parameter=parameter,
            owner_address=address,
        )

        if "constant_result" in result and result["constant_result"]:
            balance_hex = result["constant_result"][0]
            balance_raw = int(balance_hex, 16)
            return balance_raw / 1_000_000

        return 0.0


# ============================================
# ä½¿ç”¨ç¯„ä¾‹
# ============================================


def main():
    """ä¸»ç¨‹å¼ - ç¤ºç¯„æ‰€æœ‰åŠŸèƒ½çš„ä½¿ç”¨æ–¹å¼"""
    print("=" * 70)
    print("TRON å€å¡Šéˆåº•å±¤å¯¦ç¾ - ç´” Python ç‰ˆæœ¬")
    print("=" * 70)

    # 1. åœ°å€è½‰æ›æ¸¬è©¦
    print("\nã€æ¸¬è©¦ 1ã€‘åœ°å€æ ¼å¼è½‰æ›")
    print("-" * 70)

    test_base58 = "TQyZzVEs9qgLy52JAZQc7ZyxJf13ZNUG8u"
    test_hex = "41a49b6890465f39fce73b18e5c9c5fd9136c70e38"

    print(f"Base58 åœ°å€: {test_base58}")
    converted_hex = AddressConverter.base58_to_hex(test_base58)
    print(f"è½‰ç‚º Hex: {converted_hex}")
    print(f"é©—è­‰: {'âœ“ é€šé' if converted_hex == test_hex else 'âœ— å¤±æ•—'}")

    # 2. å¾ç§é‘°ç”Ÿæˆåœ°å€
    print("\nã€æ¸¬è©¦ 2ã€‘å¾ç§é‘°ç”Ÿæˆåœ°å€")
    print("-" * 70)

    # âš ï¸ è­¦å‘Šï¼šè«‹ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼Œä¸è¦ç¡¬ç·¨ç¢¼ç§é‘°ï¼
    test_private_key = os.environ.get('TRON_TEST_PRIVATE_KEY', '')
    
    if not test_private_key:
        print("âš ï¸ æœªè¨­ç½® TRON_TEST_PRIVATE_KEY ç’°å¢ƒè®Šæ•¸")
        print("è·³éç§é‘°ç›¸é—œæ¸¬è©¦...")
        return

    test_address = KeyGenerator.private_key_to_address(test_private_key)
    print(f"ç”Ÿæˆçš„åœ°å€: {test_address}")

    # 3. åˆå§‹åŒ– API é€£æ¥
    print("\nã€æ¸¬è©¦ 3ã€‘é€£æ¥åˆ° TRON ç¶²è·¯")
    print("-" * 70)

    api = TronAPI(TronNetwork.NILE_API, api_key=None)
    print("âœ“ å·²é€£æ¥åˆ° Nile æ¸¬è©¦ç¶²")

    # 4. æŸ¥è©¢å¸³æˆ¶é¤˜é¡
    print("\nã€æ¸¬è©¦ 4ã€‘æŸ¥è©¢å¸³æˆ¶é¤˜é¡")
    print("-" * 70)

    trx_balance = api.get_account_balance(test_address)
    print(f"åœ°å€: {test_address}")
    print(f"TRX é¤˜é¡: {trx_balance:.6f} TRX")

    usdt_balance = TronQuery.check_usdt_balance(
        api, test_address, TronNetwork.USDT_CONTRACT_NILE
    )
    print(f"USDT é¤˜é¡: {usdt_balance:.6f} USDT")

    print("\n" + "=" * 70)
    print("æ¸¬è©¦å®Œæˆ!")
    print("=" * 70)


if __name__ == "__main__":
    main()
</code></pre>
<h3 id="ä½¿ç”¨èªªæ˜"><a class="header" href="#ä½¿ç”¨èªªæ˜">ä½¿ç”¨èªªæ˜</a></h3>
<h4 id="1-è¨­ç½®ç’°å¢ƒè®Šæ•¸å®‰å…¨åšæ³•"><a class="header" href="#1-è¨­ç½®ç’°å¢ƒè®Šæ•¸å®‰å…¨åšæ³•">1. è¨­ç½®ç’°å¢ƒè®Šæ•¸ï¼ˆå®‰å…¨åšæ³•ï¼‰</a></h4>
<p><strong>Linux/macOS:</strong></p>
<pre><code class="language-bash">export TRON_TEST_PRIVATE_KEY="your_private_key_here"
export TRON_API_KEY="your_api_key_here"  # å¯é¸
</code></pre>
<p><strong>Windows (PowerShell):</strong></p>
<pre><code class="language-powershell">$env:TRON_TEST_PRIVATE_KEY="your_private_key_here"
$env:TRON_API_KEY="your_api_key_here"  # å¯é¸
</code></pre>
<p><strong>Python ä»£ç¢¼ä¸­ä½¿ç”¨:</strong></p>
<pre><code class="language-python">import os

private_key = os.environ.get('TRON_TEST_PRIVATE_KEY')
if not private_key:
    raise ValueError("è«‹è¨­ç½® TRON_TEST_PRIVATE_KEY ç’°å¢ƒè®Šæ•¸")

api_key = os.environ.get('TRON_API_KEY')  # å¯é¸
api = TronAPI(TronNetwork.NILE_API, api_key=api_key)
</code></pre>
<h4 id="2-åŸºæœ¬ä½¿ç”¨ç¯„ä¾‹"><a class="header" href="#2-åŸºæœ¬ä½¿ç”¨ç¯„ä¾‹">2. åŸºæœ¬ä½¿ç”¨ç¯„ä¾‹</a></h4>
<pre><code class="language-python">from tron_impl import *
import os

# åˆå§‹åŒ–
api = TronAPI(TronNetwork.NILE_API)
private_key = os.environ.get('TRON_TEST_PRIVATE_KEY')

# ç”Ÿæˆåœ°å€
my_address = KeyGenerator.private_key_to_address(private_key)

# æŸ¥è©¢é¤˜é¡
balance = api.get_account_balance(my_address)
print(f"é¤˜é¡: {balance} TRX")

# TRX è½‰è³¬
txid = TronTransfer.transfer_trx(
    api, private_key, "TTqobYiHixykLYyA3WxmCLVCMCySHfigyE", 1.0
)
print(f"äº¤æ˜“ID: {txid}")
</code></pre>
<h4 id="3-å®‰å…¨æª¢æŸ¥æ¸…å–®"><a class="header" href="#3-å®‰å…¨æª¢æŸ¥æ¸…å–®">3. å®‰å…¨æª¢æŸ¥æ¸…å–®</a></h4>
<p>ä¿å­˜ç‚º <code>.py</code> æ–‡ä»¶å‰ï¼Œè«‹ç¢ºèªï¼š</p>
<ul>
<li><input disabled="" type="checkbox"/>
ç§»é™¤æ‰€æœ‰ç¡¬ç·¨ç¢¼çš„ç§é‘°</li>
<li><input disabled="" type="checkbox"/>
ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ç®¡ç†æ•æ„Ÿä¿¡æ¯</li>
<li><input disabled="" type="checkbox"/>
æ·»åŠ  <code>.env</code> åˆ° <code>.gitignore</code></li>
<li><input disabled="" type="checkbox"/>
åœ¨æ¸¬è©¦ç¶²å……åˆ†æ¸¬è©¦</li>
<li><input disabled="" type="checkbox"/>
è¨­ç½®åˆç†çš„ fee_limit</li>
<li><input disabled="" type="checkbox"/>
é©—è­‰åœ°å€æ ¼å¼æ­£ç¢ºæ€§</li>
<li><input disabled="" type="checkbox"/>
å¯¦ç¾éŒ¯èª¤è™•ç†æ©Ÿåˆ¶</li>
</ul>
<hr />
<h2 id="è‡´è¬"><a class="header" href="#è‡´è¬">è‡´è¬</a></h2>
<p>æ„Ÿè¬ä»¥ä¸‹å°ˆæ¡ˆå’Œè³‡æº:</p>
<ul>
<li><a href="https://tron.network/">TRON Protocol</a></li>
<li><a href="https://github.com/warner/python-ecdsa">ecdsa Python åº«</a></li>
<li><a href="https://www.pycryptodome.org/">PyCryptodome</a></li>
<li><a href="https://github.com/keis/base58">base58 Python åº«</a></li>
</ul>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../blockchain/ethereum-transaction-guide-tc.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../strategy/bollmaker.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../blockchain/ethereum-transaction-guide-tc.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../strategy/bollmaker.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
