# 操作系統知識點

每個知識領域應有本領域的範圍說明，包括領域知識的組成（知識單元）以及預期的能力培養目標，能力點的檢測方法（實驗設計的依據）

操作系統知識領域包含以下內容：

 1. 操作系統概述：操作系統定義、抽象性與特徵、操作系統歷史、操作系統的系統結構、計算機硬件與操作系統的關係
 1. 中斷：中斷、異常、系統調用
 1. 內存管理 ：連續物理內存分配、非連續物理內存分配
 1. 虛擬存儲：局部性原理、虛擬存儲基本概念、缺頁異常、局部頁面置換算法、全局頁面置換算法
 1. 進程與線程：概念、運行狀態、執行過程、控制管理、*協程
 1. 調度：單處理器調度，多處理器調度
 1. 同步互斥：基於軟件的同步互斥方法、基於硬件的同步互斥方法、信號量、管程、經典同步問題
 1. 死鎖：死鎖概念、死鎖處理方法、併發錯誤檢測
 1. 進程間通信：信號、管道、消息隊列、共享內存、*RPC、*APC、*異步機制
 1. 文件系統：文件系統基本概念、文件組織、文件系統實例
 1. 輸入輸出管理：輸入輸出特徵、輸入輸出調度、輸入輸出子系統實例
 1. *操作系統進展：OS內部安全、操作系統與編程語言、操作系統與系統結構（系統虛擬化）、異步編程

## 1.  操作系統概述

### 核心學習成效

 1. 掌握操作系統的定義：能從軟件角度、資源管理角度定義操作系統及其所屬範圍
 1. 掌握操作系統的抽象：理解進程、文件、地址空間的抽象對象以及與硬件關係
 1. 掌握操作系統的特徵：理解併發/並行、共享、虛擬化、異步的含義
 1. 掌握操作系統的歷史：理解單用戶系統、批處理系統、多道程序系統、分時系統、個人計算機、SMP系統、VMM系統、分佈式系統中的操作系統特徵
 1. 掌握操作系統的架構：理解簡單單體/分層單體/複雜單體/微/外/VMM kernel的特點
 1. 掌握 計算機硬件與操作系統的關係：理解硬件與操作系統之間的interface和各自的主要工作

### 能力檢測方法

 1. 能分析硬件的哪些功能能夠給操作系統提供哪些支持
 1. 能對一個計算機系統中的軟硬件的特徵、區別、關係、運行狀態進行清晰判斷
 1. 對操作系統有一個完整的總體分析

## 2.    中斷

### 核心學習成效

 1. 中斷/異常/系統調用：從硬件產生方式和處理的角度和軟件處理的角度理解中斷/異常/系統調用的產生緣由，產生方式與處理過程
 1. 三者關係、區別與作用：理解 中斷、異常和系統調用的關係，區別和作用
 1. 對於RISC-V或x86等硬件，理解中斷、異常和系統調用的設置，處理的細節

### 能力檢測方法

 1. 理解硬件的中斷、異常和系統調用的設置過程，且能完成針對具體硬件的操作系統的相關實驗
 1. 以時鐘中斷、除零異常、基本系統調用為例，理解RISC-V或x86等硬件的中斷、異常和系統調用的處理過程，且能完成針對具體硬件的操作系統相關實驗
 1. 理解特權級：用戶態和內核態的區別，以及硬件和操作系統在轉換特權級的注意事項和具體實現

## 3.  內存管理

### 核心學習成效

 1. 地址空間：理解從源程序-->編譯-->鏈接-->加載-->動態鏈接-->執行過程中地址的不同定義與變化
 1. 連續內存分配算法：first-fit, best-fit，worst-fit，buddy, *slab及其一些變種算法
 1. 內碎片和外碎片
 1. 連續內存分配方法：段地址，段式管理，頁地址，頁式管理，反置頁表管理，段頁式管理
 1. TLB與頁式管理的關係

### 能力檢測方法

 1. 能夠理解和運用 first-fit, best-fit，worst-fit，buddy算法進行內存分配與釋放
 1. 能夠基於段式、頁式、段頁式進行虛實地址轉換和虛存-->物理內存的訪存操作
 1. 理解在段式、頁式、段頁式內存訪問過程中，軟硬件的分工
 1. 理解硬件的段/頁式內存的處理過程，且能完成針對具體硬件的段頁式操作系統相關實驗
 
## 4.  虛擬存儲

### 核心學習成效

 1. 理解虛擬存儲的前提條件：局部性，掌握虛擬存儲相關的覆蓋/交換技術，掌握實現虛擬存儲
 1. swap的基本原理和在實現機制
 1. 局部頁置換算法：理解OPT、FIFO、LRU、LFU、CLOCK、改進的CLOCK等頁置換算法和特徵，理解belady異常，無belady異常的屬於stack算法類的頁置換算法
 1. 全局頁置換算法：理解工作集、常駐集、缺頁率的概念，內存抖動問題，負載控制方法，理解工作集置換算法、缺頁率置換算法

### 能力檢測方法

 1. 能夠理解和運用 fOPT、FIFO、LRU、LFU、CLOCK、改進的CLOCK、工作集置換算法、缺頁率置換算法等頁置換算法進行內存替換
 1. 能判斷某個置換算法是否屬於stack算法類
 1. 理解硬件的段/頁式內存的處理過程，且能完成針對具體硬件的虛擬存儲操作系統相關實驗

## 5.  進程與線程

### 核心學習成效

 1. 理解進程/線程的概念，進程與線程的關係與區別，進程/線程與程序的關係和差異，進程/線程控制塊的組成
 1. 理解進程/線程的生命週期和狀態模型
 1. 理解管理進程的過程：創建 fork、執行 exec、等待 wait、停止 exit
 1. 理解進程管理與內存管理的關係

 注：可根據課程時長：講解協程，理解不同的CPU複用方式；講解2019 HotOS論文“A fork() in the road”，理解fork的利弊；講解meltdown漏洞，從另外的角度理解arch/頁表/進程/信息之間的關係

### 能力檢測方法

 1. 能描述進程生命週期的狀態轉換關係和時機
 1. 能理解和掌握進程管理的4個重要過程
 1. 理解硬件的內核線程/用戶進程的管理過程，且能完成針對具體硬件的線程/進程操作系統相關實驗

## 6.  調度

### 核心學習成效

 1. 理解調度策略、準則和評價目標
 1. 掌握調度算法：先來先服務算法、短進程優先算法（搶佔/不搶佔）、最高響應比優先算法、最高響應比優先算法、多級反饋隊列算法
 1. 理解實時任務的特點，RM/EDF實時調度算法，優先級反轉問題和解決方法：優先級繼承，優先級天花板
 1. *瞭解多處理器調度相關的調度策略 O(1)，CFS，BFS（基於Linux）

### 能力檢測方法

1. 理解不同調度算法的差異，能夠在給定的條件下（時間片，算法名稱，進程執行時間等），進行具體調度算法的推演
 1. 理解並求解優先級反轉問題
 1. 理解硬件的內核線程/用戶進程的調度執行過程，且能完成針對具體硬件的調度框架/調度算法操作系統相關實驗

## 7.  同步互斥

### 核心學習成效

 1. 理解原子操作、臨界區的含義，臨界區的訪問規則
 1. 掌握臨界區的基本實現方法：禁用中斷、純軟件方法：Peterson算法、Dekkers算法、Eisenberg&McGuire算法；以及它們的侷限性
 1. 掌握臨界區的硬件原子指令支持下的實現方法：理解T&S，EXCHG等硬件原子指令，以及基於此指令的臨界區方法
 1. 掌握信號量：特徵，具體實現，易錯情況
 1. 掌握管程：特徵，具體實現，條件變量的特徵與實現，易錯情況，不同類型的管程：Hansen管程，Hoare管程，Mesa管程
 1. 掌握用信號量或管程來解決各種同步互斥問題：哲學家問題、理髮師問題、不同優先策略的讀者寫者問題等

### 能力檢測方法

 1. 能指出存在bug的臨界區方法的問題所在和後果
 1. 能用信號量或管程來解決各種同步互斥問題（偽代碼形式）
 1. 理解硬件的硬件原子指令，且能完成針對具體硬件的信號量、管程的實現和基於這兩種機制的同步互斥問題求解的操作系統相關實驗

## 8.  死鎖

### 核心學習成效

 1. 掌握死鎖的抽象表示方法
 1. 掌握死鎖的必要條件
 1. 掌握死鎖的的處理方法：死鎖預防(Deadlock Prevention)、死鎖避免(Deadlock Avoidance)、死鎖檢測和恢復(Deadlock Detection & Recovery)
 1. 掌握銀行家算法，理解出現死鎖與死鎖安全的關係與區別

### 能力檢測方法

 1. 能用偽代碼或形式描述銀行家算法的設計實現
 1. 理解硬件，且能實現針對具體硬件的死鎖處理方法的操作系統相關實驗

## 9.  進程間通信

### 核心學習成效

 1. 掌握IPC的基本原理
 1. 掌握PIPE機制和使用方法
 1. 掌握signal機制和使用方法
 1. 掌握message機制和使用方法
 1. 掌握shmem機制和使用方法
 
（注：可根據課程時長：講解RPC、APC、異步編程）

### 能力檢測方法

 1. 能用偽代碼或文字形式描述PIPE/signal/message/shmem的實現機制
 1. 理解硬件，且能實現針對具體硬件的各種IPC機制的操作系統相關實驗。
 1. *瞭解binder，dbus等IPC機制

## 10. 文件系統

### 核心學習成效

 1. 理解文件系統概念：文件系統、目錄、文件的定義，屬性與基本功能；文件描述符，文件控制塊的特徵與功能
 1. 理解目錄與文件訪問操作：文件目錄操作：搜索文件，創建文件，刪除文件，重命名文件，遍歷路徑，修改文件。
 1. 理解文件別名的兩種實現方式：軟鏈接、硬鏈接
 1. 理解虛擬文件系統的作用
 1. 理解文件系統的基本安全管理措施
 1. 理解日誌文件系統的基本原理
 1. 理解基於fat/inode機制的文件系統的設計與實現
 

### 能力檢測方法

 1. 能用偽代碼或文字形式描述文件系統的組成和基本功能
 1. 能判斷文件系統相關的系統調用在內核中的具體行為
 1. 理解硬件和磁盤等外設，且能實現針對具體硬件的文件系統機制的操作系統相關實驗。

## 11. 輸入輸出管理

### 核心學習成效

 1. 理解外設驅動的基本功能
 1. 理解不同外設的特點和相應的處理模式：輪詢、中斷、DMA等
 1. 理解一個具體外設的中斷響應過程
 1. 理解各種磁盤調度算法

### 能力檢測方法

 1. 能用偽代碼或文字形式描述磁盤調度算法，並能在給定條件下，進行算法的推演。
 1. 理解硬件和各種等外設，且能實現針對具體外設的設備驅動的操作系統相關實驗。

## 12. *操作系統進展

### 核心學習成效

 1. 瞭解操作系統與計算機系統結構的關係和影響：系統虛擬化VMM的方法、CPU虛擬化機制、MEM虛擬化機制、I/O虛擬化機制
 1. 瞭解操作系統與編程語言的相關關係和影響：非C語言編寫操作系統的特點、GO語言與操作系統、RUST語言與操作系統
 1. 瞭解異步編程的框架和實現方法：在用戶態和內核中應用、設計和實現基於事件的異步編程方法

### 能力檢測方法

 1. 能夠閱讀、分析測試具體的VMM， golang based OS, RUST-based OS，內核級異步編程基礎架構
