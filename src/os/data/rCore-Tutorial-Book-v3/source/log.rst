更新日誌
===============================

2022-12-14
-------------------------------

- 移除各分支上的 K210 開發板支持，僅保留 ``k210`` 分支作為原先 ``ch8`` 分支的鏡像支持 K210 。

2022-10-08
-------------------------------

- 將各分支的 rustsbi-qemu 的版本更新到 701e891，支持 QEMU 7.1.0 版本。

2022-10-02
-------------------------------

- 更新 VMware虛擬機鏡像至 Ubuntu22.04 ，內置 QEMU7.0.0 版本。同時，還更新了各章節的 Docker 相關文件。

2022-01-02
-------------------------------

- 第一章更新完成，Rust 版本升級至 ``nightly-2022-01-01`` ， ``asm`` 和 ``global_asm`` 特性已穩定，相關的宏可在 ``core::arch`` 中找到。更新了作者和版權信息，版本暫定 ``3.6.0-alpha.1`` 。

2021-11-20
-------------------------------

- 更新1~9章，添加第八章（同步互斥），原第八章（外設）改為第九章。

2021-10-20
-------------------------------

- 舊版的 3.5.0 文檔及代碼（全七章）已經發布在 `這裡 <https://github.com/rcore-os/rCore-Tutorial-v3/releases/tag/v3.5.0>`_ 。目前開始在主分支上更新新版的文檔和代碼。

2021-03-15
-------------------------------

- 增加了在做實驗的時候打補丁繼承上一章節修改的 :ref:`教程 <inherit-last-ch-changes>` 。
  
2021-03-09
-------------------------------

- 將所有分支的 RustSBI 版本更新為 [81d53d8] 的 0.2.0-alpha.1 ，主要是在 Qemu 平臺上支持非法指令的轉發，目前可以正確處理帶有非法指令的應用程序了。參考 ch2 分支上的測例 ``00hello_world.rs`` 。


2021-03-07
-------------------------------

- 在各章分支的鏈接腳本中加入了 ``.srodata/.sbss/.sdata`` 。

2021-03-06
-------------------------------

- 文檔第一版初稿（全七章）完成！
- 修復了框架中基於 Qemu 平臺運行卻仍需要下載 kflash.py 工具的問題。

2021-03-05
-------------------------------

- 第三章練習中增加了對於 ``sys_gettime`` 語義在教程和測例中差異的相關說明。
- 修正了第四章練習中 mmap 系統調用語義中的一處錯誤。


2021-03-03
-------------------------------

- 更新了第四章練習題。
- 為方便調試，提供了 riscv64 gcc 工具鏈的下載鏈接。
- 將文檔渲染改為寬屏模式。

2021-02-28
-------------------------------

修復了 ch3-coop 分支在 Rust 版本更新後無法成功運行的問題。

2021-02-27
-------------------------------

完善了 ``easy-fs`` ：

- 訂正了 ``easy-fs`` 塊緩存層的實現，移除了 ``dirty`` 子模塊。
- 支持二級間接塊索引，使得支持的單個文件最大容量從 :math:`94\text{KiB}` 變為超過 :math:`8\text{MiB}` 。調整了單個 ``DiskInode`` 大小為 128 字節。
- 在新建一個索引節點的時候不再直接分配一二級間接索引塊，而是完全按需分配。
- 將 ``easy-fs`` 的測試和應用程序打包的函數分離到另一個名為 ``easy-fs-fuse`` 的 crate 中。

從 ch7 開始：

- 出於後續的一些需求， ``sys_exec`` 需要支持命令行參數，為此shell程序 ``user_shell`` 中需要相應增加一些解析功能，內核中 ``sys_exec`` 的實現也需要進行修改。新增了應用 ``cmdline_args`` 來打印傳入的命令行參數。
- 新增了應用 cat 工具可以讀取一個文件的全部內容。
- 在shell程序中支持通過 ``<`` 和 ``>`` 進行簡單的輸入/輸出重定向，為此在內核中新增了一個 ``sys_dup`` 系統調用。 

另外，在所有章節分支新增了 docker 支持來儘可能降低環境配置的時間成本，詳見 :ref:`使用 Docker 環境 <link-docker-env>` 。

2021-02-20
-------------------------------

第六章文檔完成。

2021-02-16
-------------------------------

第五章文檔完成。

2021-02-13
-------------------------------

將 ch2-ch6 的 build.rs 中的對齊需求修改為剛好合適。

2021-02-09
-------------------------------

在每一章的引言處加入了本章的代碼樹改動概況。

2021-02-08
-------------------------------

將 K210 開發板的燒寫工具 ``kflash.py`` 從項目中移除。

2021-02-07
-------------------------------

將所有分支的 RustSBI 更新為最新的 0.1.1 版本[3257d899]， **不加任何改動** 直接放在項目中。這導致 qemu 和 k210 兩個平臺的內核入口點變得不同，目前根據 RustSBI 的默認配置，qemu 平臺上的內核入口點為 ``0x80200000`` ，而 k210 平臺上為了提高燒寫速度則為 ``0x80020000`` 。

前幾個章節應用放置在內存中的位置也需要對應進行修改：

- 第二章應用的起始地址變為 ``0x80400000`` ；
- 第三章應用的起始地址變為 ``0x80400000`` 。

文檔稍後更新。
