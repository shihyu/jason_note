# WebAssembly å°ˆæ¡ˆæ¶æ§‹åœ–

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         é–‹ç™¼è€…ä»‹é¢                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚make buildâ”‚  â”‚make run  â”‚  â”‚make cleanâ”‚  â”‚make help â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚             â”‚             â”‚
         â†“             â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Makefile (çµ±ä¸€ä»‹é¢)                         â”‚
â”‚                                                                 â”‚
â”‚  install: npm install + cargo install wasm-bindgen-cli        â”‚
â”‚  build:   npm run build                                        â”‚
â”‚  run:     kill-port + npm run serve                           â”‚
â”‚  clean:   rm -rf target/ dist/ node_modules/                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â†“                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  npm run build   â”‚              â”‚  npm run serve   â”‚
â”‚  (ç·¨è­¯éšæ®µ)       â”‚              â”‚  (é‹è¡Œéšæ®µ)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                                 â†“
         â”‚                                 â”‚
         â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                          â”‚   Webpack   â”‚
         â”‚                          â”‚ Dev Server  â”‚
         â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       build.js (å»ºç½®è…³æœ¬)                        â”‚
â”‚                                                                 â”‚
â”‚  Step 1: cargo build --release                                â”‚
â”‚          â†“                                                      â”‚
â”‚          è®€å– .cargo/config                                     â”‚
â”‚          ç™¼ç¾ target = "wasm32-unknown-unknown"                â”‚
â”‚          ç·¨è­¯ src/lib.rs â†’ WASM                                â”‚
â”‚                                                                 â”‚
â”‚  Step 2: wasm-bindgen target/.../wasm_demo.wasm --out-dir .   â”‚
â”‚          â†“                                                      â”‚
â”‚          ç”¢ç”Ÿ JavaScript ç¶å®š                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç·¨è­¯ç”¢ç‰© (artifacts)                        â”‚
â”‚                                                                 â”‚
â”‚  target/wasm32-unknown-unknown/release/                        â”‚
â”‚  â””â”€â”€ wasm_demo.wasm          [åŸå§‹ WASM äºŒé€²ä½]                â”‚
â”‚                                                                 â”‚
â”‚  å°ˆæ¡ˆæ ¹ç›®éŒ„/                                                     â”‚
â”‚  â”œâ”€â”€ wasm_demo.js            [JavaScript ç¶å®š]                 â”‚
â”‚  â”œâ”€â”€ wasm_demo_bg.wasm       [å„ªåŒ–å¾Œçš„ WASM]                   â”‚
â”‚  â””â”€â”€ wasm_demo.d.ts          [TypeScript å‹åˆ¥å®šç¾©]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Webpack æ‰“åŒ… (webpack.config.js)              â”‚
â”‚                                                                 â”‚
â”‚  entry: './index.js'                                           â”‚
â”‚      â†“                                                          â”‚
â”‚  ç™¼ç¾ import('./wasm_demo')                                    â”‚
â”‚      â†“                                                          â”‚
â”‚  experiments: { asyncWebAssembly: true }                       â”‚
â”‚      â†“                                                          â”‚
â”‚  è‡ªå‹•è™•ç† WASM æ¨¡çµ„                                             â”‚
â”‚      â†“                                                          â”‚
â”‚  ç”¢ç”Ÿ dist/ è¼¸å‡º                                                â”‚
â”‚      â†“                                                          â”‚
â”‚  dist/                                                          â”‚
â”‚  â”œâ”€â”€ index.html              [HtmlPlugin è‡ªå‹•ç”¢ç”Ÿ]             â”‚
â”‚  â”œâ”€â”€ bundle.js               [æ‰“åŒ…å¾Œçš„ JavaScript]             â”‚
â”‚  â””â”€â”€ *.wasm                  [WASM æ¨¡çµ„]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ç€è¦½å™¨é‹è¡Œæ™‚ (Browser Runtime)                    â”‚
â”‚                                                                 â”‚
â”‚  http://localhost:8080                                         â”‚
â”‚      â†“                                                          â”‚
â”‚  è¼‰å…¥ index.html                                                â”‚
â”‚      â†“                                                          â”‚
â”‚  <script src="bundle.js">                                      â”‚
â”‚      â†“                                                          â”‚
â”‚  åŸ·è¡Œ index.js                                                  â”‚
â”‚      â†“                                                          â”‚
â”‚  import('./wasm_demo')                                         â”‚
â”‚      â†“                                                          â”‚
â”‚  éåŒæ­¥è¼‰å…¥ WASM æ¨¡çµ„                                            â”‚
â”‚      â†“                                                          â”‚
â”‚  WebAssembly.instantiate(wasmBytes)                            â”‚
â”‚      â†“                                                          â”‚
â”‚  WASM å¯¦ä¾‹åŒ–å®Œæˆ                                                â”‚
â”‚      â†“                                                          â”‚
â”‚  wasm.main()                                                   â”‚
â”‚      â†“                                                          â”‚
â”‚  åŸ·è¡Œ Rust ç¨‹å¼ç¢¼                                               â”‚
â”‚      â†“                                                          â”‚
â”‚  æ“ä½œ DOM (document.createElement)                             â”‚
â”‚      â†“                                                          â”‚
â”‚  é¡¯ç¤º "Hello from Rust"                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ é…ç½®æª”æ¡ˆä¾è³´é—œä¿‚

```
.cargo/config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â†“
Cargo.toml â”€â”€â”€â”€â”€â”€â†’ [Rust Compiler] â”€â”€â†’ wasm_demo.wasm
    â†‘                                        â†“
    â”‚                                        â†“
src/lib.rs â”€â”€â”€â”€â”€â”€â”€â”˜               [wasm-bindgen] â”€â”€â†’ wasm_demo.js
                                                  â”€â”€â†’ wasm_demo_bg.wasm
                                                  â”€â”€â†’ wasm_demo.d.ts
                                        â†“
                                        â†“
index.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    â†“
webpack.config.js â”€â”€â†’ [Webpack] â”€â”€â†’ dist/
    â†‘                                â”œâ”€â”€ index.html
    â”‚                                â”œâ”€â”€ bundle.js
package.json â”€â”€â”€â”€â”˜                   â””â”€â”€ *.wasm
```

---

## ğŸ“¦ è³‡æ–™æµå‘

### ç·¨è­¯æ™‚ï¼ˆCompile Timeï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  src/lib.rs  â”‚  Rust æºç¢¼
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ [rustc + LLVM]
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WASM äºŒé€²ä½                  â”‚  æ©Ÿå™¨ç¢¼ï¼ˆWebAssembly æ ¼å¼ï¼‰
â”‚  (target/.../wasm_demo.wasm) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ [wasm-bindgen]
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JavaScript ç¶å®š              â”‚  å¯åœ¨ JS ä¸­ import çš„æ¨¡çµ„
â”‚  (wasm_demo.js)              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ [Webpack]
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰“åŒ…å¾Œçš„ bundle              â”‚  éƒ¨ç½²æª”æ¡ˆ
â”‚  (dist/bundle.js)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é‹è¡Œæ™‚ï¼ˆRuntimeï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç€è¦½å™¨     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ HTTP Request
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ index.html   â”‚ â† Webpack HtmlPlugin ç”¢ç”Ÿ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ <script src="bundle.js">
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  bundle.js   â”‚ â† åŒ…å« index.js + wasm ç¶å®š
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ import('./wasm_demo')
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  wasm_demo.js        â”‚ â† JavaScript ç¶å®šå±¤
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ fetch('wasm_demo_bg.wasm')
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ wasm_demo_bg.wasm    â”‚ â† WASM äºŒé€²ä½æ¨¡çµ„
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ WebAssembly.instantiate()
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WASM å¯¦ä¾‹           â”‚ â† åœ¨è¨˜æ†¶é«”ä¸­é‹è¡Œçš„ Rust ç¨‹å¼ç¢¼
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ wasm.main()
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŸ·è¡Œ Rust å‡½æ•¸      â”‚ â† æ“ä½œ DOMã€è™•ç†æ¥­å‹™é‚è¼¯
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ è¨˜æ†¶é«”æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç€è¦½å™¨è¨˜æ†¶é«”                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  JavaScript   â”‚           â”‚  WebAssembly  â”‚            â”‚
â”‚  â”‚  Heap         â”‚           â”‚  Linear Memoryâ”‚            â”‚
â”‚  â”‚               â”‚           â”‚               â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚  â”‚  â”‚ Objects â”‚  â”‚  âŸ· copy âŸ· â”‚  â”‚  Bytes  â”‚  â”‚            â”‚
â”‚  â”‚  â”‚ Strings â”‚  â”‚           â”‚  â”‚ Numbers â”‚  â”‚            â”‚
â”‚  â”‚  â”‚ Arrays  â”‚  â”‚           â”‚  â”‚  (i32)  â”‚  â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â”‚  â”‚               â”‚           â”‚               â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚         â†‘                            â†‘                     â”‚
â”‚         â”‚                            â”‚                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€ wasm-bindgen â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚              (è™•ç†å‹åˆ¥è½‰æ›èˆ‡è³‡æ–™è¤‡è£½)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å‹åˆ¥è½‰æ›ç¯„ä¾‹

```rust
// Rust ç«¯
#[wasm_bindgen]
pub fn process_text(input: &str) -> String {
    input.to_uppercase()
}
```

```javascript
// JavaScript ç«¯
wasm.process_text("hello");  // èƒŒå¾Œç™¼ç”Ÿï¼š

// 1. JS String "hello" â†’ UTF-8 bytes â†’ å¯«å…¥ WASM Linear Memory
// 2. å‘¼å« WASM å‡½æ•¸ï¼Œå‚³éæŒ‡æ¨™ + é•·åº¦
// 3. Rust è™•ç†ï¼Œçµæœå¯«å…¥ WASM Linear Memory
// 4. å¾ WASM Memory è®€å– â†’ è½‰æ›æˆ JS String
// 5. è¿”å› "HELLO"
```

---

## ğŸ”„ å»ºç½®å·¥å…·éˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é–‹ç™¼å·¥å…·éˆ                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Rust å·¥å…·éˆ                  JavaScript å·¥å…·éˆ
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   rustc (ç·¨è­¯å™¨)               node (é‹è¡Œç’°å¢ƒ)
      â†“                            â†“
   cargo (å»ºç½®å·¥å…·)              npm (å¥—ä»¶ç®¡ç†)
      â†“                            â†“
   wasm32 target                webpack (æ‰“åŒ…å·¥å…·)
      â†“                            â†“
   wasm-bindgen                 webpack-dev-server
   (ç¶å®šç”¢ç”Ÿå™¨)                  (é–‹ç™¼ä¼ºæœå™¨)

         â”‚                          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   æœ€çµ‚è¼¸å‡º (dist/) â”‚
         â”‚                    â”‚
         â”‚  index.html        â”‚
         â”‚  bundle.js         â”‚
         â”‚  *.wasm            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ éƒ¨ç½²æ¶æ§‹

### é–‹ç™¼ç’°å¢ƒ

```
é–‹ç™¼è€…æ©Ÿå™¨
â”œâ”€â”€ make run
â”œâ”€â”€ Webpack Dev Server (port 8080)
â”œâ”€â”€ Hot Reload
â””â”€â”€ Source Maps
```

### ç”Ÿç”¢ç’°å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CDN / éœæ…‹  â”‚
â”‚  æª”æ¡ˆä¼ºæœå™¨  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ éƒ¨ç½² dist/ å…§å®¹
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½¿ç”¨è€…ç€è¦½å™¨â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æª”æ¡ˆæ¸…å–®ï¼š
- index.html        (ä¸»é é¢)
- bundle.js         (æ‡‰ç”¨é‚è¼¯ + WASM è¼‰å…¥å™¨)
- *.wasm           (WebAssembly æ¨¡çµ„)
```

**æœ€ä½³åŒ–å»ºè­°ï¼š**
1. å•Ÿç”¨ gzip/brotli å£“ç¸®
2. è¨­å®š Cache-Control headers
3. ä½¿ç”¨ `webpack --mode production`
4. ä½¿ç”¨ `wasm-opt` å„ªåŒ– WASM å¤§å°

---

## ğŸ” é™¤éŒ¯æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      é™¤éŒ¯å·¥å…·éˆ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Rust å´                           JavaScript å´
â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

cargo test                        npm run serve
   â†“                                 â†“
å–®å…ƒæ¸¬è©¦                          ç€è¦½å™¨ DevTools
   â†“                                 â†“
println! / dbg!                   console.log
   â†“                                 â†“
Rust é™¤éŒ¯å™¨                        Source Maps
                                     â†“
                                  Network Tab
                                  (æª¢æŸ¥ WASM è¼‰å…¥)
                                     â†“
                                  Console Tab
                                  (JavaScript éŒ¯èª¤)
```

### Source Map æ”¯æ´

```javascript
// webpack.config.js
devtool: 'cheap-module-source-map',
```

é€™å…è¨±ï¼š
- åœ¨ç€è¦½å™¨ DevTools ä¸­çœ‹åˆ°åŸå§‹ Rust æºç¢¼ï¼ˆæœ‰é™æ”¯æ´ï¼‰
- JavaScript éŒ¯èª¤å¯è¿½æº¯åˆ° `index.js` æºç¢¼
- æ›´å¥½çš„é™¤éŒ¯é«”é©—

---

## ğŸ“Š æ•ˆèƒ½è€ƒé‡

### å†·å•Ÿå‹•æµç¨‹

```
é¦–æ¬¡è¼‰å…¥
    â†“
ä¸‹è¼‰ HTML (< 1KB)
    â†“
ä¸‹è¼‰ bundle.js (~ å¹¾å KB)
    â†“
ä¸‹è¼‰ .wasm (å–æ±ºæ–¼ç¨‹å¼å¤§å°)
    â†“
ç·¨è­¯ WASM (JIT/AOT)
    â†“
å¯¦ä¾‹åŒ–æ¨¡çµ„
    â†“
åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼ç¢¼
```

**å„ªåŒ–ç­–ç•¥ï¼š**
1. **Code Splitting**ï¼šå°‡ WASM æ¨¡çµ„åˆ†é›¢æˆç¨ç«‹ chunk
2. **å»¶é²è¼‰å…¥**ï¼šä½¿ç”¨ `import()` å‹•æ…‹è¼‰å…¥
3. **å£“ç¸®**ï¼šå•Ÿç”¨ gzip (é€šå¸¸å¯æ¸›å°‘ 70% å¤§å°)
4. **å¿«å–**ï¼šè¨­å®šé•·æœŸå¿«å– headers

### é‹è¡Œæ™‚æ•ˆèƒ½

```
Rust (WASM)                    JavaScript
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… æ•¸å€¼é‹ç®—å¿«                   âŒ æ•¸å€¼é‹ç®—æ…¢
âœ… è¨˜æ†¶é«”æ•ˆç‡é«˜                 âŒ GC é–‹éŠ·
âœ… å‹åˆ¥å®‰å…¨                     âš ï¸ å‹•æ…‹å‹åˆ¥
âŒ ç„¡æ³•ç›´æ¥æ“ä½œ DOM             âœ… åŸç”Ÿ DOM æ“ä½œ
âŒ èˆ‡ JS äº’å‹•æœ‰é–‹éŠ·              âœ… ç„¡è·¨å¢ƒé–‹éŠ·
```

**æœ€ä½³å¯¦è¸ï¼š**
- è¨ˆç®—å¯†é›†ä»»å‹™ â†’ Rust/WASM
- DOM æ“ä½œ â†’ JavaScript
- æœ€å°åŒ–è·¨é‚Šç•Œå‘¼å«æ¬¡æ•¸

---

## ğŸ“ æ“´å±•æ¶æ§‹

### å¤šæ¨¡çµ„æ¶æ§‹

```
src/
â”œâ”€â”€ lib.rs              (ä¸»å…¥å£)
â”œâ”€â”€ math.rs            (æ•¸å­¸é‹ç®—æ¨¡çµ„)
â”‚   â””â”€â”€ pub fn calculate()
â”œâ”€â”€ image.rs           (åœ–ç‰‡è™•ç†æ¨¡çµ„)
â”‚   â””â”€â”€ pub fn process_image()
â””â”€â”€ utils.rs           (å·¥å…·å‡½æ•¸)
    â””â”€â”€ pub fn helper()
```

```rust
// lib.rs
mod math;
mod image;
mod utils;

#[wasm_bindgen]
pub fn main() {
    math::calculate();
    image::process_image();
}
```

### Worker æ¶æ§‹ï¼ˆé€²éšï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Main Threadâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ postMessage
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web Worker  â”‚  â† åœ¨é€™è£¡åŸ·è¡Œ WASM
â”‚  + WASM      â”‚    (ä¸é˜»å¡ä¸»åŸ·è¡Œç·’)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ postMessage
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Main Thread â”‚  â† æ¥æ”¶çµæœï¼Œæ›´æ–° UI
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ç¸½çµ

é€™å€‹æ¶æ§‹å±•ç¤ºäº†ï¼š

1. **ç·¨è­¯éˆ**ï¼šRust â†’ WASM â†’ JS ç¶å®š â†’ Webpack æ‰“åŒ…
2. **é‹è¡Œæ™‚**ï¼šç€è¦½å™¨è¼‰å…¥ â†’ WASM å¯¦ä¾‹åŒ– â†’ åŸ·è¡Œ
3. **è³‡æ–™æµ**ï¼šJS â†” wasm-bindgen â†” WASM Memory
4. **å·¥å…·éˆ**ï¼šCargo + npm + Webpack çš„æ•´åˆ

**æ ¸å¿ƒå„ªå‹¢ï¼š**
- âœ… é«˜æ•ˆèƒ½è¨ˆç®—ï¼ˆæ¥è¿‘åŸç”Ÿé€Ÿåº¦ï¼‰
- âœ… å‹åˆ¥å®‰å…¨ï¼ˆRust ç·¨è­¯å™¨ä¿è­‰ï¼‰
- âœ… èˆ‡ JavaScript ç”Ÿæ…‹ç³»çµ±ç„¡ç¸«æ•´åˆ
- âœ… å¯åœ¨ç€è¦½å™¨ä¸­é‹è¡Œç³»çµ±ç´šèªè¨€
