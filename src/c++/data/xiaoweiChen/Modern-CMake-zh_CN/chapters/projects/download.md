# 使用 CMake 下載項目

## 在構建時 (build time) 下載

直到 CMake 3.11， 主流的下載包的方法都在構建時進行。這（在構建時下載）會造成幾個問題；其中最主要問題的是 `add_subdirectory` 不能對一個尚不存在的文件夾使用！因此，我們導入的外部項目內置的工具必須自己構建自己（這個外部項目）來解決這個問題。（同時，這種方法也能用於構建不支持 CMake 的包）[^1]

[^1]: 注意，外部數據就是不在包內的數據的工具。

## 在配置時 (configure time) 下載

如果你更喜歡在配置時下載，看看這個倉庫 [Crascit/DownloadProject](https://github.com/Crascit/DownloadProject) ，它提供了插件式（不需要改變你原有的 CMakeLists.txt）的解決方案。但是，子模塊 (submodules) 很好用，以至於我已經停止了使用 CMake 對諸如 GoogleTest 之類的項目的下載，並把他們加入到了子模塊中。自動下載在沒有網絡訪問的環境下也是難以實現的，並且外部項目經常被下載到構建目錄中，如果你有多個構建目錄，這就既浪費時間又浪費空間。

