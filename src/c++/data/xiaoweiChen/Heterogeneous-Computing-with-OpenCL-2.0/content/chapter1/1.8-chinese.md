# 1.8 使用OpenCL進行異構計算

讀者們應該對並行原理和異構計算的背景有了一定的瞭解，下面我們來看看哪些特性在OpenCL中得到了支持。這裡我們也來簡單的回顧一下OpenCL的歷史。

OpenCL是一個異構編程架構，其管理者是非盈利技術組織Khronos Group[3]。OpenCL是一個應用開發框架，在其框架下開發的應用，能夠在不同的硬件供應商的設備上運行。第一版的OpenCL(1.0)標準在2008年正式發佈，並出現在蘋果Mac OSX雪豹系統當中。2009年，AMD宣佈其旗下的顯卡支持OpenCL。IBM也在該年宣佈，其XL編譯器在Power架構的處理器下支持OpenCL。2010年，Khronos Group發佈了OpenCL 1.1標準。2011年，發佈了OpenCL 1.2標準。本書的第一版介紹了很多OpenCL 1.2的特性。2013年，Khronos Group發佈了OpenCL2.0標準，其包含如下新特性：

- 嵌套並行化
- 共享虛擬內存
- 管道內存對象
- C11原子操作
- 增強圖像支持

OpenCL支持多級別的並行化，能夠將應用高效的映射到同構或異構、單獨或多個CPU或GPU上，以及其他硬件供應商提供的硬件系統當中。OpenCL定義了一套“設備端-主機端”語言，主機作為對其他設備的管理者。設備端語言被設計用來映射內存系統和執行模型。主機端語言用較低的開銷，為複雜的併發程序搭建任務管道。總的來說，就是提供了一種方法，讓開發者能更高效的在OpenCL的環境下進行算法設計及實現。

OpenCL支持基於任務和基於數據的並行。OpenCL的內核類似於SPMD模型，內核就是並行單元(OpenCL稱為工作項)中執行的實例，內核實例創建併入隊後，會被映射到支持標量和矢量的硬件上運行。硬件平臺供應商都在迅速的對OpenCL進行支持，將OpenCL標準中所提到相關內容在硬件層面上給予實現。有了這些供應商，就代表著OpenCL具有很大的市場價值，從手機端與嵌入式平臺(ARM，Imageination，MediaTek，Texas Instrument)，到桌面和高性能計算(AMD, Apple, Intel, NVIDIA和IBM)。更多架構的CPU已經支持OpenCL(包括X86, ARM和Power)，以及以吞吐量和向量處理的著稱的GPU，還有能細粒度並行的設備，比如FPGA(Alter, Xilinx)。更重要的是，OpenCL是跨平臺、全行業支持的，其有良好的編程模型，值的開發者學習和使用。OpenCL將會在越來越多的地方是用到，並且使用和學習的門檻將越來越低。

OpenCL 2.0開始支持共享虛擬內存，後面的章節中會詳細探討。共享虛擬內存是一項很重要的特性，其對能減輕編程者的負擔，特別是在類似APU這樣使用統一物理內存的系統上。OpenCL 2.0也支持內存一致模型，提供“獲取/釋放”語義以緩解編程者在不明確的鎖上耗費不必要的精力。支持共享內存通訊、管道，還有其他很多OpenCL 2.0的新特性將在後面的章節中一一詳細介紹。

--------
[3] Khronos Group, OpenCL, 2014. https://www.khronos.org/opencl