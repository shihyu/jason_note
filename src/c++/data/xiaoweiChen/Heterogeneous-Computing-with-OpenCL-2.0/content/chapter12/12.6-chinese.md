#12.6 增强安全性

安全性是各个Web浏览器公司非常重视的问题。你会将浏览器作为打开JavaScript脚本的默认程序吗？出于对未知程序的怀疑，其中可能包含有一些访问系统数据的操作，可能会从你的电脑中盗取数据，或是向你的电脑安装病毒或者木马。恶意脚本还会让计算机对资源的使用能力降低，甚至是让其崩溃。

WebGL和WebCL的例子中，其代码是为了使用GPU从而将性能最大化，不过当前的GPU缺少相应的硬件机制，一个程序中的相应内存不能被其他程序所访问到，这就需要内存保护和读取未初始化数据的机制。

保护机制的创建可以保证内核在WebCL中运行时，不会访问越界。WebCL中的内核可以以文本的形式传入，然后通过WebCL内置的编译器进行编译。当然，使用预编译文件的方式对于程序和数字签名处理来说更加安全，不过目前为止没有相应的内核二进制文件的格式标准。

两个能保护内存的准则：1. 分配的内存需要初始化(程序不能访问旧数据)；2. 访问合法内存的代码可以置为可信。

下面的机制可用来保证程序的安全性：

- 持续跟踪内存分配(如果平台支持动态分配，需要在运行时进行跟踪)
- 监视合法读取的内存范围
- 合法的数据砸编译和运行时，会显得更加高效

内核在传递时，需要使用一个校验器对其内容进行校验，以确保不存在访问越界的情况，不过这将影响(经测量，性能要比无校验的性能低30%)。更多安全性的信息可以参阅[1]。

-------

[1] Vicit Ltd: Mikael Lepist, Tamiö Ylimäki, http://learningwebcl.com/wp-content/uploads/2013/11/WebCLMemoryProtection.pdf
