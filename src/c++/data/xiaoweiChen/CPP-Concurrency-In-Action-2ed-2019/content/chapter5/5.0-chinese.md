# 第5章 內存模型和原子操作

本章主要內容

- C++內存模型
- 標準庫中的原子類型
- 如何使用原子類型
- 使用原子操作同步線程

C++標準中有一個重要特性常被開發者所忽略，就是多線程(感知)內存模型，內存模型定義了基本部件應該如何工作。那為什麼大多數開發者都沒有注意到呢？當使用互斥量保護數據和條件變量，或者信號時，對於互斥量*為什麼*能起到這樣作用，大多數人並不會關心。只有試圖去“接觸硬件”，才能詳盡的瞭解到內存模型是如何作用的。

C++是系統級別的編程語言，標準委員會的目標是不需要比C++還要底層的高級語言。C++應該向程序員提供足夠的靈活性，無障礙的去做他們想要做的事情。需要時，也可以“接觸硬件”。原子類型和原子操作就可以“接觸硬件”，並提供底層同步操作，通常會將指令數縮減到1~2個CPU週期。

本章將討論內存模型的基本知識，再瞭解原子類型和原子操作，最後瞭解與原子操作相關的各種同步。這個過程會比較複雜：如果不需要使用原子操作(比如，第7章的無鎖數據結構)同步代碼，就可以跳過本章。
