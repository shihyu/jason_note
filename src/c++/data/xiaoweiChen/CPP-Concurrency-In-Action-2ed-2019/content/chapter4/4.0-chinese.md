# 第4章 同步操作

本章主要內容

- 帶有future的等待
- 在限定時間內等待
- 使用同步操作簡化代碼

上一章中，我們瞭解了線程間保護共享數據的方法。當然，我們不僅想要保護數據，還想對單獨的線程進行同步。例如，在第一個線程完成前，等待另一個線程執行完成。通常，線程會等待特定事件發生，或者等待某一條件達成。這可能需要定期檢查“任務完成”標識，或將類似的東西放到共享數據中。像這種情況就需要在線程中進行同步，C++標準庫提供了一些工具可用於同步，形式上表現為*條件變量*(condition variables)和future。併發技術規範中，為future添加了非常多的操作，並可與新工具*鎖存器*(latches)(輕量級鎖資源)和*柵欄*(barriers)一起使用。

本章將討論如何使用條件變量等待事件，介紹future，鎖存器和柵欄，以及如何簡化同步操作。