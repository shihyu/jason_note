# A.9 模板類參數的推導

C++17擴展了模板參數自動推斷類型的思想：如果聲明模板化的對象，在很多情況下，模板參數的類型可以從對象初始化器中推導出來。

具體來說，如果使用類模板來聲明對象，而不指定模板參數列表，則根據函數模板的常規類型推導規則，使用類模板中指定的構造函數從對象的初始值設定項中推導模板參數。

例如，互斥量模板類型以std::lock_guard作為一個模板參數。構造函數還接受單個參數，該參數是對該類型的引用。如果將對象聲明為std::lock_guard類型，則可以從提供的互斥體類型推斷類型參數：

```c++
std::mutex m;
std::lock_guard guard(m); // 推斷出std::lock_guard<std::mutex>
```

同樣適用於std::scoped_lock，雖然它有多個模板參數，但也能從多個互斥參數推導得出：

```c++
std::mutex m1;
std::shared_mutex m2;
std::scoped_lock guard(m1,m2);
// 推斷出std::scoped_lock<std::mutex,std::shared_mutex>
```

對於那些可能推導錯誤類型的模板，模板作者可以編寫顯式的推導指南，以確保導出正確的類型。不過，這些都超出了本書的範疇。