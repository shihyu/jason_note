# ç¾ä»£ C++ å¿…å‚™ç‰¹æ€§å®Œæ•´æŒ‡å—

> æœ¬æ–‡æ•´åˆè‡ªå…©ç¯‡é‡è¦æ–‡ç« çš„ç²¾è¯ï¼Œæ¶µè“‹ C++11 é–‹ç™¼è€…å¿…é ˆæŒæ¡çš„æ ¸å¿ƒç‰¹æ€§ã€‚

---

## ç›®éŒ„

1. [auto è‡ªå‹•å‹åˆ¥æ¨å°](#1-auto-è‡ªå‹•å‹åˆ¥æ¨å°)
2. [nullptr ç©ºæŒ‡æ¨™å­—é¢å€¼](#2-nullptr-ç©ºæŒ‡æ¨™å­—é¢å€¼)
3. [åŸºæ–¼ç¯„åœçš„ for è¿´åœˆ](#3-åŸºæ–¼ç¯„åœçš„-for-è¿´åœˆ-range-based-for-loops)
4. [å¼·å‹åˆ¥åˆ—èˆ‰](#4-å¼·å‹åˆ¥åˆ—èˆ‰-strongly-typed-enums)
5. [æ™ºæ…§æŒ‡æ¨™](#5-æ™ºæ…§æŒ‡æ¨™-smart-pointers)
6. [Lambda è¡¨é”å¼](#6-lambda-è¡¨é”å¼)
7. [override å’Œ final è­˜åˆ¥ç¬¦](#7-override-å’Œ-final-è­˜åˆ¥ç¬¦)
8. [static_assert ç·¨è­¯æœŸæ–·è¨€](#8-static_assert-ç·¨è­¯æœŸæ–·è¨€)
9. [ç§»å‹•èªç¾©](#9-ç§»å‹•èªç¾©-move-semantics)
   - [ç™½è©±è§£é‡‹ï¼šå·¦å€¼ vs å³å€¼](#ç™½è©±è§£é‡‹å·¦å€¼-vs-å³å€¼)
   - [ç‚ºä»€éº¼éœ€è¦ç§»å‹•èªç¾©ï¼Ÿ](#ç‚ºä»€éº¼éœ€è¦ç§»å‹•èªç¾©)
   - [std::move() çš„ä½œç”¨](#stdmove-çš„ä½œç”¨)
   - [å³å€¼åƒè€ƒ (&&) æ˜¯ä»€éº¼ï¼Ÿ](#å³å€¼åƒè€ƒ--æ˜¯ä»€éº¼)
   - [ä½•æ™‚è©²ç”¨ std::moveï¼Ÿ](#ä½•æ™‚è©²ç”¨-stdmove)
10. [noexcept ä¾‹å¤–è¦æ ¼](#10-noexcept-ä¾‹å¤–è¦æ ¼)
11. [åˆå§‹åŒ–åˆ—è¡¨](#11-åˆå§‹åŒ–åˆ—è¡¨-initializer-lists)
12. [å¯è®Šåƒæ•¸æ¨¡æ¿](#12-å¯è®Šåƒæ•¸æ¨¡æ¿-variadic-templates)
13. [std::thread åŸ·è¡Œç·’](#13-stdthread-åŸ·è¡Œç·’)
14. [éæˆå“¡ begin() å’Œ end()](#14-éæˆå“¡-begin-å’Œ-end)
15. [ç„¡åºå®¹å™¨](#15-ç„¡åºå®¹å™¨-unordered-containers)
16. [default å’Œ delete ç‰¹æ®Šæˆå“¡å‡½å¼](#16-default-å’Œ-delete-ç‰¹æ®Šæˆå“¡å‡½å¼)

---

## 1. auto è‡ªå‹•å‹åˆ¥æ¨å°

C++11 å°‡ `auto` é—œéµå­—çš„ç”¨é€”æ”¹ç‚ºå‹åˆ¥æ¨å°ï¼Œç·¨è­¯å™¨æœƒå¾åˆå§‹åŒ–å€¼è‡ªå‹•æ¨æ–·è®Šæ•¸å‹åˆ¥ã€‚

```cpp
auto i = 42;        // int
auto l = 42LL;      // long long
auto p = new foo(); // foo*

// ç°¡åŒ– STL è¿­ä»£å™¨
std::map<std::string, std::vector<int>> map;
for(auto it = begin(map); it != end(map); ++it) {
    // ...
}
```

**å„ªé»**ï¼šæ¸›å°‘å†—é•·çš„å‹åˆ¥å®£å‘Šï¼Œè®“ç¨‹å¼ç¢¼æ›´ç°¡æ½”ã€‚

**æ³¨æ„**ï¼šæ­é…å°¾éš¨å›å‚³å‹åˆ¥å¯ç”¨æ–¼å‡½å¼ï¼š

```cpp
template <typename T1, typename T2>
auto compose(T1 t1, T2 t2) -> decltype(t1 + t2) {
    return t1 + t2;
}
```

---

## 2. nullptr ç©ºæŒ‡æ¨™å­—é¢å€¼

C++11 å¼•å…¥ `nullptr` å–ä»£å‚³çµ±çš„ `NULL` æˆ– `0`ï¼Œé¿å…éš±å¼è½‰æ›ç‚ºæ•´æ•¸å‹åˆ¥çš„å•é¡Œã€‚

```cpp
int* p1 = NULL;      // èˆŠå¼å¯«æ³•
int* p2 = nullptr;   // æ–°å¼å¯«æ³•ï¼ˆæ¨è–¦ï¼‰

foo(nullptr);        // æ˜ç¢ºå‚³éç©ºæŒ‡æ¨™
bar(nullptr);

bool f = nullptr;    // OKï¼Œè½‰ç‚º false
int i = nullptr;     // éŒ¯èª¤ï¼ä¸èƒ½è½‰ç‚ºæ•´æ•¸
```

---

## 3. åŸºæ–¼ç¯„åœçš„ for è¿´åœˆ (Range-Based for Loops)

æ”¯æ´ `foreach` é¢¨æ ¼çš„è¿­ä»£ï¼Œé©ç”¨æ–¼ C é™£åˆ—ã€åˆå§‹åŒ–åˆ—è¡¨åŠä»»ä½•å¯¦ä½œ `begin()`/`end()` çš„å®¹å™¨ã€‚

```cpp
std::map<std::string, std::vector<int>> map;
for(const auto& kvp : map) {
    std::cout << kvp.first << std::endl;
    for(auto v : kvp.second) {
        std::cout << v << std::endl;
    }
}

int arr[] = {1, 2, 3, 4, 5};
for(int& e : arr) {
    e = e * e;  // åŸåœ°ä¿®æ”¹
}
```

---

## 4. å¼·å‹åˆ¥åˆ—èˆ‰ (Strongly-typed Enums)

ä½¿ç”¨ `enum class` è§£æ±ºå‚³çµ± enum çš„å•é¡Œï¼š

- åˆ—èˆ‰å€¼ä¸æœƒæ´©æ¼åˆ°å¤–åœä½œç”¨åŸŸ
- ä¸æœƒéš±å¼è½‰æ›ç‚ºæ•´æ•¸
- å¯æŒ‡å®šåº•å±¤å‹åˆ¥

```cpp
enum class Options { None, One, All };
Options o = Options::All;

// å¯ç¹¼æ‰¿åº•å±¤å‹åˆ¥
enum class Color : uint8_t { Red, Green, Blue };
```

---

## 5. æ™ºæ…§æŒ‡æ¨™ (Smart Pointers)

æ¨™æº–åŒ–çš„æ™ºæ…§æŒ‡æ¨™ï¼Œå‘Šåˆ¥æ‰‹å‹•è¨˜æ†¶é«”ç®¡ç†ï¼š

| é¡å‹ | ç”¨é€” |
|------|------|
| `unique_ptr` | ç¨ä½”æ‰€æœ‰æ¬Šï¼Œä¸å¯è¤‡è£½ï¼Œå¯ç§»å‹• |
| `shared_ptr` | å…±äº«æ‰€æœ‰æ¬Šï¼Œåƒè€ƒè¨ˆæ•¸ |
| `weak_ptr` | å¼±åƒè€ƒï¼Œä¸å¢åŠ è¨ˆæ•¸ï¼Œç”¨æ–¼æ‰“ç ´å¾ªç’°åƒè€ƒ |

```cpp
// unique_ptr
std::unique_ptr<int> p1(new int(42));
std::unique_ptr<int> p2 = std::move(p1);  // è½‰ç§»æ‰€æœ‰æ¬Š

// shared_ptr
auto p3 = std::make_shared<int>(42);  // æ¨è–¦å¯«æ³•
std::shared_ptr<int> p4 = p3;  // å…±äº«æ‰€æœ‰æ¬Š

// weak_ptr
std::weak_ptr<int> wp = p3;
if(auto sp = wp.lock()) {  // å–å¾— shared_ptr
    std::cout << *sp << std::endl;
}
```

**æ³¨æ„**ï¼š`auto_ptr` å·²æ£„ç”¨ï¼Œè«‹å‹¿ä½¿ç”¨ã€‚

---

## 6. Lambda è¡¨é”å¼

åŒ¿åå‡½å¼ï¼Œå¯ç”¨æ–¼ä»»ä½•éœ€è¦å‡½å¼ç‰©ä»¶çš„åœ°æ–¹ï¼š

```cpp
std::vector<int> v = {1, 2, 3};

// åŸºæœ¬ç”¨æ³•
std::for_each(std::begin(v), std::end(v),
    [](int n) { std::cout << n << std::endl; });

// å„²å­˜ç‚ºè®Šæ•¸
auto is_odd = [](int n) { return n % 2 == 1; };
auto pos = std::find_if(std::begin(v), std::end(v), is_odd);

// éè¿´ lambdaï¼ˆéœ€æ˜ç¢ºæŒ‡å®šå‹åˆ¥ï¼‰
std::function<int(int)> fib = [&fib](int n) {
    return n < 2 ? 1 : fib(n-1) + fib(n-2);
};
```

---

## 7. override å’Œ final è­˜åˆ¥ç¬¦

é˜²æ­¢è™›æ“¬å‡½å¼è¦†å¯«çš„å¸¸è¦‹éŒ¯èª¤ï¼š

```cpp
class Base {
public:
    virtual void f(short) { }
};

class Derived : public Base {
public:
    // ç·¨è­¯å™¨æœƒæª¢æŸ¥æ˜¯å¦çœŸæ­£è¦†å¯«åŸºé¡æ–¹æ³•
    virtual void f(short) override { }

    // ç¦æ­¢å­é¡å†è¦†å¯«
    virtual void g(int) override final { }
};
```

**å¸¸è¦‹éŒ¯èª¤ç¯„ä¾‹**ï¼š

```cpp
class B {
public:
    virtual void f(short) { std::cout << "B::f" << std::endl; }
};

class D : public B {
public:
    // éŒ¯èª¤ï¼šåƒæ•¸å‹åˆ¥ä¸åŒï¼Œé€™æ˜¯ overload ä¸æ˜¯ overrideï¼
    virtual void f(int) { std::cout << "D::f" << std::endl; }
};
```

ä½¿ç”¨ `override` å¯è®“ç·¨è­¯å™¨æ•æ‰é€™é¡éŒ¯èª¤ã€‚

---

## 8. static_assert ç·¨è­¯æœŸæ–·è¨€

åœ¨ç·¨è­¯æ™‚æœŸæª¢æŸ¥æ¢ä»¶ï¼Œç‰¹åˆ¥é©åˆæ¨¡æ¿åƒæ•¸é©—è­‰ï¼š

```cpp
template <typename T, size_t Size>
class Vector {
    static_assert(Size >= 3, "Size is too small");
    T _points[Size];
};

// æ­é… type traits ä½¿ç”¨
template <typename T1, typename T2>
auto add(T1 t1, T2 t2) -> decltype(t1 + t2) {
    static_assert(std::is_integral<T1>::value, "T1 must be integral");
    static_assert(std::is_integral<T2>::value, "T2 must be integral");
    return t1 + t2;
}
```

---

## 9. ç§»å‹•èªç¾© (Move Semantics)

é€éå³å€¼åƒè€ƒ (`&&`) å¯¦ç¾è³‡æºçš„ã€Œç§»å‹•ã€è€Œéã€Œè¤‡è£½ã€ï¼Œå¤§å¹…æå‡æ•ˆèƒ½ã€‚

### ç™½è©±è§£é‡‹ï¼šå·¦å€¼ vs å³å€¼

å…ˆææ‡‚ä»€éº¼æ˜¯ã€Œå·¦å€¼ã€å’Œã€Œå³å€¼ã€ï¼š

```
å·¦å€¼ (lvalue)ï¼šæœ‰åå­—ã€æœ‰åœ°å€ã€å¯ä»¥å–å€çš„æ±è¥¿
å³å€¼ (rvalue)ï¼šè‡¨æ™‚çš„ã€æ²’åå­—ã€å³å°‡æ¶ˆå¤±çš„æ±è¥¿
```

**ç”Ÿæ´»åŒ–æ¯”å–»**ï¼š

```
å·¦å€¼ = ä½ çš„æˆ¿å­ï¼ˆæœ‰åœ°å€ã€é•·æœŸå­˜åœ¨ï¼‰
å³å€¼ = æ¬å®¶å…¬å¸çš„å¡è»Šï¼ˆè‡¨æ™‚çš„ã€ç”¨å®Œå°±èµ°ï¼‰
```

**ç¨‹å¼ç¢¼ç¯„ä¾‹**ï¼š

```cpp
int x = 10;        // x æ˜¯å·¦å€¼ï¼ˆæœ‰åå­—ã€æœ‰åœ°å€ï¼‰
int y = x + 5;     // "x + 5" æ˜¯å³å€¼ï¼ˆè‡¨æ™‚è¨ˆç®—çµæœï¼‰

std::string s1 = "hello";              // s1 æ˜¯å·¦å€¼
std::string s2 = s1 + " world";        // "s1 + world" æ˜¯å³å€¼ï¼ˆè‡¨æ™‚å­—ä¸²ï¼‰
std::string s3 = std::string("temp");  // å³é‚Šæ˜¯å³å€¼ï¼ˆè‡¨æ™‚ç‰©ä»¶ï¼‰
```

### ç‚ºä»€éº¼éœ€è¦ç§»å‹•èªç¾©ï¼Ÿ

**å•é¡Œå ´æ™¯**ï¼šè¤‡è£½å¤§å‹ç‰©ä»¶å¾ˆæµªè²»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‚³çµ±è¤‡è£½ï¼ˆæ·±æ‹·è²ï¼‰- æµªè²»è³‡æºï¼                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   åŸå§‹ç‰©ä»¶ A                    æ–°ç‰©ä»¶ B                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ name_   â”‚                  â”‚ name_   â”‚                  â”‚
â”‚   â”‚ size_   â”‚   â•â•è¤‡è£½â•â•>      â”‚ size_   â”‚                  â”‚
â”‚   â”‚ data_ â”€â”€â”¼â”€â”€â”               â”‚ data_ â”€â”€â”¼â”€â”€â”               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â”‚
â”‚                â–¼                            â–¼               â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚         â”‚ 1GB è³‡æ–™     â”‚  è¤‡è£½æ•´å¡Š   â”‚ 1GB è³‡æ–™     â”‚        â”‚
â”‚         â”‚ [...........]â”‚ â•â•â•â•â•â•â•>   â”‚ [...........]â”‚        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚   ğŸ’€ å¦‚æœåŸå§‹ç‰©ä»¶é¦¬ä¸Šè¦è¢«éŠ·æ¯€ï¼Œé€™ 1GB çš„è¤‡è£½å®Œå…¨æ˜¯æµªè²»ï¼     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼šç§»å‹•èªç¾© - ç›´æ¥ã€Œå·ã€è³‡æº

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç§»å‹•èªç¾©ï¼ˆæ¬å®¶ï¼‰- è¶…é«˜æ•ˆï¼                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   åŸå§‹ç‰©ä»¶ Aï¼ˆå³å°‡éŠ·æ¯€ï¼‰         æ–°ç‰©ä»¶ B                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ name_   â”‚                  â”‚ name_   â”‚                  â”‚
â”‚   â”‚ size_   â”‚   â•â•ç§»å‹•â•â•>      â”‚ size_   â”‚                  â”‚
â”‚   â”‚ data_ â”€â”€â”¼â”€â”€â”               â”‚ data_ â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚       â”‚
â”‚                â”‚                                    â”‚       â”‚
â”‚                â–¼                                    â”‚       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚       â”‚
â”‚         â”‚ nullptr      â”‚   æŒ‡æ¨™ç›´æ¥è½‰ç§» â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                                          â–¼                  â”‚
â”‚                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                                   â”‚ 1GB è³‡æ–™     â”‚          â”‚
â”‚                                   â”‚ [...........]â”‚          â”‚
â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                             â”‚
â”‚   âœ… åªæ˜¯æ”¹äº†æŒ‡æ¨™çš„æŒ‡å‘ï¼Œè³‡æ–™å®Œå…¨æ²’å‹•ï¼O(1) æ™‚é–“è¤‡é›œåº¦      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### std::move() çš„ä½œç”¨

`std::move()` **ä¸æœƒç§»å‹•ä»»ä½•æ±è¥¿**ï¼å®ƒåªæ˜¯ä¸€å€‹ã€Œå‹åˆ¥è½‰æ›ã€ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  std::move() çš„çœŸæ­£ä½œç”¨                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚   std::move(x)  çš„æ„æ€æ˜¯ï¼š                                â”‚
â”‚                                                          â”‚
â”‚   ã€Œæˆ‘æ‰¿è«¾ä¸å†ä½¿ç”¨ x äº†ï¼Œä½ å¯ä»¥æŠŠå®ƒçš„è³‡æºæ¶èµ°ã€            â”‚
â”‚                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     std::move()      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  å·¦å€¼   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•>    â”‚  å³å€¼   â”‚           â”‚
â”‚   â”‚ (lvalue)â”‚     å‹åˆ¥è½‰æ›         â”‚(rvalue) â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                          â”‚
â”‚   å®ƒè®“ç·¨è­¯å™¨é¸æ“‡ã€Œç§»å‹•å»ºæ§‹å­ã€è€Œä¸æ˜¯ã€Œè¤‡è£½å»ºæ§‹å­ã€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç™½è©±ç‰ˆ**ï¼š

```cpp
std::string a = "hello";
std::string b = a;              // è¤‡è£½ï¼a é‚„è¦ç”¨
std::string c = std::move(a);   // ç§»å‹•ï¼å‘Šè¨´ç·¨è­¯å™¨ï¼ša æˆ‘ä¸è¦äº†ï¼Œæ¶èµ°å§

// ç§»å‹•å¾Œï¼Œa è™•æ–¼ã€Œæœ‰æ•ˆä½†æœªå®šç¾©ã€ç‹€æ…‹ï¼ˆé€šå¸¸æ˜¯ç©ºçš„ï¼‰
// å¯ä»¥é‡æ–°è³¦å€¼ï¼Œä½†ä¸è¦è®€å–å®ƒçš„å€¼
```

### å³å€¼åƒè€ƒ (&&) æ˜¯ä»€éº¼ï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åƒè€ƒé¡å‹å°ç…§è¡¨                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚   T&   = å·¦å€¼åƒè€ƒ   â†’ åªèƒ½ç¶å®šåˆ°å·¦å€¼ï¼ˆæœ‰åå­—çš„æ±è¥¿ï¼‰      â”‚
â”‚   T&&  = å³å€¼åƒè€ƒ   â†’ åªèƒ½ç¶å®šåˆ°å³å€¼ï¼ˆè‡¨æ™‚çš„æ±è¥¿ï¼‰        â”‚
â”‚                                                         â”‚
â”‚   void foo(std::string& s);   // åªæ¥å—å·¦å€¼              â”‚
â”‚   void foo(std::string&& s);  // åªæ¥å—å³å€¼              â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç¯„ä¾‹ï¼š                                                 â”‚
â”‚                                                         â”‚
â”‚   std::string name = "Alice";                           â”‚
â”‚   foo(name);                    // å‘¼å« foo(string&)    â”‚
â”‚   foo(std::string("temp"));     // å‘¼å« foo(string&&)   â”‚
â”‚   foo(std::move(name));         // å‘¼å« foo(string&&)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»å‹•å»ºæ§‹å­ vs è¤‡è£½å»ºæ§‹å­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç·¨è­¯å™¨å¦‚ä½•é¸æ“‡ï¼Ÿ                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚   MyClass(const MyClass& other);    // è¤‡è£½å»ºæ§‹å­        â”‚
â”‚   MyClass(MyClass&& other);         // ç§»å‹•å»ºæ§‹å­        â”‚
â”‚                                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ å‘¼å«æ–¹å¼         â”‚ é¸æ“‡å“ªå€‹å»ºæ§‹å­                 â”‚  â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚   â”‚ MyClass b(a);   â”‚ è¤‡è£½å»ºæ§‹å­ï¼ˆa æ˜¯å·¦å€¼ï¼‰          â”‚  â”‚
â”‚   â”‚ MyClass b(f()); â”‚ ç§»å‹•å»ºæ§‹å­ï¼ˆf() å›å‚³å³å€¼ï¼‰      â”‚  â”‚
â”‚   â”‚ MyClass b(      â”‚ ç§»å‹•å»ºæ§‹å­                      â”‚  â”‚
â”‚   â”‚  std::move(a)); â”‚ ï¼ˆstd::move æŠŠ a è½‰æˆå³å€¼ï¼‰     â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®Œæ•´ç¯„ä¾‹ï¼šç†è§£ç§»å‹•çš„éç¨‹

```cpp
class Buffer {
    std::string name_;
    std::unique_ptr<int[]> data_;
    size_t size_;

public:
    // å»ºæ§‹å­
    Buffer(const std::string& name, size_t size)
        : name_(name), size_(size), data_(new int[size]) {}

    // è¤‡è£½å»ºæ§‹å­
    Buffer(const Buffer& copy)
        : name_(copy.name_)
        , size_(copy.size_)
        , data_(new int[copy.size_])
    {
        std::copy(copy.data_.get(), copy.data_.get() + size_, data_.get());
    }

    // ç§»å‹•å»ºæ§‹å­
    Buffer(Buffer&& temp) noexcept
        : name_(std::move(temp.name_))
        , data_(std::move(temp.data_))
        , size_(temp.size_)
    {
        temp.size_ = 0;
    }

    // ç§»å‹•æŒ‡æ´¾é‹ç®—å­
    Buffer& operator=(Buffer&& temp) noexcept {
        if (this != &temp) {
            name_ = std::move(temp.name_);
            data_ = std::move(temp.data_);
            size_ = temp.size_;
            temp.size_ = 0;
        }
        return *this;
    }
};
```

**é—œéµ**ï¼šä½¿ç”¨ `std::move()` å°‡å·¦å€¼è½‰ç‚ºå³å€¼åƒè€ƒã€‚

**æ›¿ä»£å¯¦ä½œï¼ˆä½¿ç”¨ swapï¼‰**ï¼š

```cpp
class Buffer {
    // ... æˆå“¡è®Šæ•¸åŒä¸Š

public:
    // è¤‡è£½æŒ‡æ´¾é‹ç®—å­ï¼ˆè¤‡è£½ä¸¦äº¤æ›æ…£ç”¨æ³•ï¼‰
    Buffer& operator=(Buffer copy) {
        swap(*this, copy);
        return *this;
    }

    // ç§»å‹•å»ºæ§‹å­
    Buffer(Buffer&& temp) : Buffer() {
        swap(*this, temp);
    }

    friend void swap(Buffer& first, Buffer& second) noexcept {
        using std::swap;
        swap(first.name_, second.name_);
        swap(first.size_, second.size_);
        swap(first.data_, second.data_);
    }
};
```

### å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»€éº¼æ™‚å€™æœƒè‡ªå‹•è§¸ç™¼ç§»å‹•ï¼Ÿ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  1. å‡½å¼å›å‚³å€åŸŸè®Šæ•¸ï¼ˆRVO/NRVO ä¸é©ç”¨æ™‚ï¼‰                   â”‚
â”‚     std::vector<int> getVector() {                         â”‚
â”‚         std::vector<int> v = {1,2,3};                      â”‚
â”‚         return v;  // è‡ªå‹•ç§»å‹•ï¼ˆæˆ– RVO å„ªåŒ–ï¼‰               â”‚
â”‚     }                                                      â”‚
â”‚                                                            â”‚
â”‚  2. å®¹å™¨æ“ä½œ                                               â”‚
â”‚     vec.push_back(std::move(obj));  // ç§»å‹•é€²å®¹å™¨          â”‚
â”‚     vec.emplace_back(...);          // åŸåœ°å»ºæ§‹ï¼Œæ›´å¥½      â”‚
â”‚                                                            â”‚
â”‚  3. æ¨™æº–æ¼”ç®—æ³•                                             â”‚
â”‚     std::sort, std::unique ç­‰æœƒè‡ªå‹•ä½¿ç”¨ç§»å‹•                â”‚
â”‚                                                            â”‚
â”‚  4. æ™ºæ…§æŒ‡æ¨™è½‰ç§»                                           â”‚
â”‚     auto p2 = std::move(p1);  // unique_ptr å¿…é ˆç§»å‹•       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»å‹•å¾Œçš„ç‰©ä»¶ç‹€æ…‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ é‡è¦ï¼šç§»å‹•å¾Œç‰©ä»¶çš„ç‹€æ…‹                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚   std::string s = "hello";                                 â”‚
â”‚   std::string t = std::move(s);                            â”‚
â”‚                                                            â”‚
â”‚   // s ç¾åœ¨æ˜¯ã€Œæœ‰æ•ˆä½†æœªå®šç¾©ã€ç‹€æ…‹                           â”‚
â”‚   // âœ… å¯ä»¥åšçš„äº‹ï¼š                                       â”‚
â”‚   //    - éŠ·æ¯€å®ƒï¼ˆè§£æ§‹å­æœƒæ­£å¸¸åŸ·è¡Œï¼‰                       â”‚
â”‚   //    - é‡æ–°è³¦å€¼ï¼šs = "new value";                       â”‚
â”‚   //    - æ¸…ç©ºï¼šs.clear();                                 â”‚
â”‚   //                                                       â”‚
â”‚   // âŒ ä¸è¦åšçš„äº‹ï¼š                                       â”‚
â”‚   //    - è®€å–å®ƒçš„å€¼ï¼ˆæœªå®šç¾©è¡Œç‚ºï¼‰                         â”‚
â”‚   //    - å‡è¨­å®ƒæ˜¯ç©ºçš„ï¼ˆæ¨™æº–æ²’ä¿è­‰ï¼‰                       â”‚
â”‚                                                            â”‚
â”‚   s = "world";  // OKï¼Œé‡æ–°è³¦å€¼å¾Œå¯æ­£å¸¸ä½¿ç”¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½•æ™‚è©²ç”¨ std::moveï¼Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… è©²ç”¨ std::move çš„æƒ…æ³                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  1. æ˜ç¢ºçŸ¥é“ç‰©ä»¶ä¸å†éœ€è¦                                   â”‚
â”‚     void process(Widget w) {                               â”‚
â”‚         widgets.push_back(std::move(w));  // w ä¸å†ä½¿ç”¨    â”‚
â”‚     }                                                      â”‚
â”‚                                                            â”‚
â”‚  2. unique_ptr çš„è½‰ç§»ï¼ˆå¿…é ˆç”¨ï¼‰                            â”‚
â”‚     auto p2 = std::move(p1);                               â”‚
â”‚                                                            â”‚
â”‚  3. æˆå“¡åˆå§‹åŒ–ï¼ˆè½‰ç§»åƒæ•¸æ‰€æœ‰æ¬Šï¼‰                           â”‚
â”‚     MyClass(std::string name) : name_(std::move(name)) {}  â”‚
â”‚                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âŒ ä¸è©²ç”¨ std::move çš„æƒ…æ³                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  1. return å€åŸŸè®Šæ•¸ï¼ˆæœƒé˜»æ­¢ RVO å„ªåŒ–ï¼‰                     â”‚
â”‚     std::string foo() {                                    â”‚
â”‚         std::string s = "hello";                           â”‚
â”‚         return s;              // âœ… ä¸è¦åŠ  std::move      â”‚
â”‚         // return std::move(s); // âŒ åè€Œæ›´æ…¢             â”‚
â”‚     }                                                      â”‚
â”‚                                                            â”‚
â”‚  2. ä¹‹å¾Œé‚„è¦ä½¿ç”¨è©²è®Šæ•¸                                     â”‚
â”‚     auto b = std::move(a);                                 â”‚
â”‚     std::cout << a;  // âŒ æœªå®šç¾©è¡Œç‚º                      â”‚
â”‚                                                            â”‚
â”‚  3. å° const ç‰©ä»¶ï¼ˆç§»å‹•æœƒè®Šæˆè¤‡è£½ï¼‰                        â”‚
â”‚     const std::string s = "hello";                         â”‚
â”‚     auto t = std::move(s);  // å¯¦éš›ä¸Šæ˜¯è¤‡è£½ï¼              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•ˆèƒ½å°æ¯”ç¤ºæ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  std::vector<std::string> æ“ä½œæ•ˆèƒ½å°æ¯”                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  å‡è¨­å­—ä¸²é•·åº¦ 1MBï¼š                                        â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ æ“ä½œ                  â”‚ è¤‡è£½         â”‚ ç§»å‹•           â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ push_back            â”‚ ~1ms         â”‚ ~0.00001ms     â”‚ â”‚
â”‚  â”‚ vector æ“´å®¹(10å…ƒç´ )   â”‚ ~10ms        â”‚ ~0.0001ms      â”‚ â”‚
â”‚  â”‚ sort (1000å…ƒç´ )       â”‚ ~10000ms     â”‚ ~1ms           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                            â”‚
â”‚  ç§»å‹•åªæ˜¯æŒ‡æ¨™æ“ä½œï¼Œè¤‡è£½è¦æ‹·è²æ•´å¡Šè¨˜æ†¶é«”                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸€å¥è©±ç¸½çµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                            â”‚
â”‚   ç§»å‹•èªç¾© = ã€Œæ¬å®¶ã€è€Œä¸æ˜¯ã€Œå½±å°ã€                         â”‚
â”‚                                                            â”‚
â”‚   - å³å€¼ = å³å°‡è¢«ä¸Ÿæ‰çš„æ±è¥¿ï¼ˆè‡¨æ™‚ç‰©ä»¶ï¼‰                     â”‚
â”‚   - std::move() = å‘Šè¨´ç·¨è­¯å™¨ã€Œé€™æ±è¥¿æˆ‘ä¸è¦äº†ã€              â”‚
â”‚   - ç§»å‹•å»ºæ§‹å­ = æŠŠåˆ¥äººçš„è³‡æºæ¶éä¾†ç”¨                       â”‚
â”‚                                                            â”‚
â”‚   è¨˜ä½ï¼šstd::move ä¸ç§»å‹•ï¼Œå®ƒåªæ˜¯å…è¨±ç§»å‹•ç™¼ç”Ÿ                â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. noexcept ä¾‹å¤–è¦æ ¼

å®£å‘Šå‡½å¼ä¸æœƒæ‹‹å‡ºä¾‹å¤–ï¼Œæœ‰åŠ©æ–¼ç·¨è­¯å™¨å„ªåŒ–ï¼š

```cpp
void foo() noexcept {
    // ä¿è­‰ä¸æ‹‹å‡ºä¾‹å¤–
}

// æ¢ä»¶å¼ noexcept
template<typename T>
void bar(T& x) noexcept(noexcept(x.swap(x))) {
    // ...
}
```

---

## 11. åˆå§‹åŒ–åˆ—è¡¨ (Initializer Lists)

çµ±ä¸€çš„åˆå§‹åŒ–èªæ³•ï¼Œé©ç”¨æ–¼ä»»ä½•å®¹å™¨ï¼š

```cpp
void process(std::initializer_list<int> values) {
    for (auto v : values) {
        std::cout << v << " ";
    }
}

process({1, 2, 3, 4, 5});

std::vector<int> v = {1, 2, 3};
std::map<std::string, int> m = {{"one", 1}, {"two", 2}};
```

---

## 12. å¯è®Šåƒæ•¸æ¨¡æ¿ (Variadic Templates)

æ¥å—ä»»æ„æ•¸é‡ã€ä»»æ„å‹åˆ¥çš„æ¨¡æ¿åƒæ•¸ï¼š

```cpp
// C++11 éè¿´å±•é–‹
template<typename T>
void print(T value) {
    std::cout << value << std::endl;
}

template<typename T, typename... Args>
void print(T first, Args... rest) {
    std::cout << first << " ";
    print(rest...);
}

print(1, 2.5, "hello");

// C++17 fold expressionï¼ˆæ›´ç°¡æ½”ï¼‰
template<typename... Args>
void print17(Args... args) {
    (std::cout << ... << args) << std::endl;
}
```

---

## 13. std::thread åŸ·è¡Œç·’

æ¨™æº–åŒ–çš„å¤šåŸ·è¡Œç·’æ”¯æ´ï¼š

```cpp
#include <thread>

void worker(int id) {
    std::cout << "Worker " << id << std::endl;
}

int main() {
    std::thread t1(worker, 1);
    std::thread t2([]() { std::cout << "Lambda thread\n"; });

    t1.join();
    t2.join();

    return 0;
}
```

---

## 14. éæˆå“¡ begin() å’Œ end()

çµ±ä¸€çš„ä»‹é¢ï¼Œæ”¯æ´æ‰€æœ‰å®¹å™¨å’Œ C é™£åˆ—ï¼š

```cpp
int arr[] = {1, 2, 3};
std::vector<int> v = {4, 5, 6};

// ç›¸åŒçš„ç¨‹å¼ç¢¼é©ç”¨æ–¼é™£åˆ—å’Œå®¹å™¨
for (auto it = std::begin(arr); it != std::end(arr); ++it) { }
for (auto it = std::begin(v); it != std::end(v); ++it) { }

// æ›´å®¹æ˜“å¯«å‡ºæ³›å‹ç¨‹å¼ç¢¼
template<typename Container>
void process(Container& c) {
    std::for_each(std::begin(c), std::end(c), [](auto& e) { });
}
```

**å°æ¯”èˆŠå¼ C é™£åˆ—è™•ç†**ï¼š

```cpp
// èˆŠå¼ï¼ˆç¹ç‘£ï¼‰
int arr[] = {1, 2, 3};
auto begin = &arr[0];
auto end = &arr[0] + sizeof(arr)/sizeof(arr[0]);

// æ–°å¼ï¼ˆç°¡æ½”ï¼‰
auto begin = std::begin(arr);
auto end = std::end(arr);
```

---

## 15. ç„¡åºå®¹å™¨ (Unordered Containers)

åŸºæ–¼é›œæ¹Šè¡¨çš„é«˜æ•ˆå®¹å™¨ï¼š

| å®¹å™¨ | èªªæ˜ |
|------|------|
| `unordered_map` | ç„¡åºéµå€¼å° |
| `unordered_set` | ç„¡åºé›†åˆ |
| `unordered_multimap` | å…è¨±é‡è¤‡éµçš„ç„¡åºæ˜ å°„ |
| `unordered_multiset` | å…è¨±é‡è¤‡å…ƒç´ çš„ç„¡åºé›†åˆ |

```cpp
std::unordered_map<std::string, int> scores;
scores["Alice"] = 100;
scores["Bob"] = 95;

// å¹³å‡ O(1) çš„æŸ¥æ‰¾æ™‚é–“
if (scores.find("Alice") != scores.end()) {
    std::cout << "Found!" << std::endl;
}
```

---

## 16. default å’Œ delete ç‰¹æ®Šæˆå“¡å‡½å¼

æ˜ç¢ºæ§åˆ¶ç·¨è­¯å™¨ç”Ÿæˆçš„ç‰¹æ®Šæˆå“¡å‡½å¼ï¼š

```cpp
class NonCopyable {
public:
    NonCopyable() = default;  // ä½¿ç”¨é è¨­å¯¦ä½œ

    // ç¦æ­¢è¤‡è£½
    NonCopyable(const NonCopyable&) = delete;
    NonCopyable& operator=(const NonCopyable&) = delete;

    // å…è¨±ç§»å‹•
    NonCopyable(NonCopyable&&) = default;
    NonCopyable& operator=(NonCopyable&&) = default;
};
```

---

## ç¸½çµ

### å„ªå…ˆæŒæ¡ï¼ˆå¿…å­¸ï¼‰

| ç‰¹æ€§ | é‡è¦æ€§ |
|------|--------|
| `auto` | ç°¡åŒ–å‹åˆ¥å®£å‘Š |
| `nullptr` | å‹åˆ¥å®‰å…¨çš„ç©ºæŒ‡æ¨™ |
| ç¯„åœ for | ç°¡æ½”çš„è¿­ä»£èªæ³• |
| æ™ºæ…§æŒ‡æ¨™ | è‡ªå‹•è¨˜æ†¶é«”ç®¡ç† |
| Lambda | éˆæ´»çš„åŒ¿åå‡½å¼ |

### é€²éšç‰¹æ€§ï¼ˆé‡è¦ï¼‰

| ç‰¹æ€§ | é‡è¦æ€§ |
|------|--------|
| ç§»å‹•èªç¾© | æ•ˆèƒ½å„ªåŒ–é—œéµ |
| `override`/`final` | é˜²æ­¢è¦†å¯«éŒ¯èª¤ |
| `static_assert` | ç·¨è­¯æœŸæª¢æŸ¥ |

### å¯¦ç”¨ç‰¹æ€§

| ç‰¹æ€§ | é‡è¦æ€§ |
|------|--------|
| å¼·å‹åˆ¥ enum | æ›´å®‰å…¨çš„åˆ—èˆ‰ |
| åˆå§‹åŒ–åˆ—è¡¨ | çµ±ä¸€åˆå§‹åŒ–èªæ³• |
| ç„¡åºå®¹å™¨ | O(1) æŸ¥æ‰¾æ•ˆèƒ½ |
| `std::thread` | æ¨™æº–å¤šåŸ·è¡Œç·’ |

---

## åƒè€ƒè³‡æ–™

- [C++ Reference](https://en.cppreference.com/)
- [Bjarne Stroustrup's C++11 FAQ](http://www.stroustrup.com/C++11FAQ.html)
- [CppDepend Blog](https://cppdepend.com/blog/)
- [CodeProject - Ten C++11 Features](https://www.codeproject.com/Articles/570638/Ten-Cplusplus11-Features-Every-Cplusplus-Developer)
