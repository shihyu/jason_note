# ClaudeNightsWatch - è‡ªä¸»ä»»å‹™åŸ·è¡Œç³»çµ±

åŸºæ–¼ Claude CLI çš„æ™ºèƒ½è‡ªä¸»ä»»å‹™åŸ·è¡Œç³»çµ±ï¼Œå¯ç›£æ§ä½¿ç”¨æ™‚é–“çª—å£ä¸¦è‡ªå‹•åŸ·è¡Œé å®šç¾©ä»»å‹™ã€‚

## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

- **è‡ªä¸»åŸ·è¡Œ** - ç„¡éœ€æ‰‹å‹•å¹²é è‡ªå‹•åŸ·è¡Œä»»å‹™
- **ä»»å‹™æµç¨‹** - ä½¿ç”¨ç°¡å–®çš„ markdown æ–‡ä»¶å®šç¾©ä»»å‹™
- **å®‰å…¨è¦å‰‡** - é€é rules.md é…ç½®å®‰å…¨ç´„æŸ
- **æ™ºèƒ½å®šæ™‚** - ä½¿ç”¨ ccusage ç²å¾—æº–ç¢ºçš„æ™‚é–“ç›£æ§
- **é å®šé–‹å§‹** - å¯é…ç½®ç‰¹å®šæ™‚é–“é–‹å§‹åŸ·è¡Œ
- **å…¨é¢è¨˜éŒ„** - è¿½è¹¤æ‰€æœ‰æ´»å‹•å’ŒåŸ·è¡Œæ­·å²

## ğŸ“‹ å‰ç½®è¦æ±‚

### å¿…éœ€çµ„ä»¶
- [Claude CLI](https://docs.anthropic.com/en/docs/claude-code/quickstart) - å·²å®‰è£ä¸¦é…ç½®

### å¯é¸çµ„ä»¶  
- [ccusage](https://www.npmjs.com/package/ccusage) - æä¾›ç²¾ç¢ºæ™‚é–“ç›£æ§
  ```bash
  npm install -g ccusage
  ```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å®‰è£è¨­ç½®
```bash
# å…‹éš†å­˜å„²åº«
git clone https://github.com/aniketkarne/ClaudeNightsWatch.git
cd ClaudeNightsWatch

# ä½¿è…³æœ¬å¯åŸ·è¡Œ
chmod +x *.sh

# é‹è¡Œäº’å‹•å¼è¨­ç½®
./setup-nights-watch.sh
```

### 2. å‰µå»ºé…ç½®æ–‡ä»¶

**task.md - ä»»å‹™å®šç¾©**
```markdown
# æ—¥å¸¸é–‹ç™¼ä»»å‹™
1. å°æ‰€æœ‰æºæ–‡ä»¶é‹è¡Œ linting
2. æ›´æ–°ä¾è³´é …åˆ°æœ€æ–°ç‰ˆæœ¬
3. é‹è¡Œæ¸¬è©¦å¥—ä»¶
4. ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
5. å‰µå»ºè®Šæ›´æ‘˜è¦
```

**rules.md - å®‰å…¨è¦å‰‡**
```markdown
# å®‰å…¨è¦å‰‡
- åœ¨ä¸å‚™ä»½çš„æƒ…æ³ä¸‹æ°¸ä¸åˆªé™¤æ–‡ä»¶
- åªåœ¨é …ç›®ç›®éŒ„å…§å·¥ä½œ
- å§‹çµ‚ç‚ºè®Šæ›´å‰µå»º feature åˆ†æ”¯
- æ°¸ä¸æäº¤æ•æ„Ÿä¿¡æ¯
```

## ğŸ® åŸºæœ¬ä½¿ç”¨

### å•Ÿå‹•ç³»çµ±
```bash
# ç«‹å³å•Ÿå‹•
./claude-nights-watch-manager.sh start

# æŒ‡å®šæ™‚é–“å•Ÿå‹•
./claude-nights-watch-manager.sh start --at "09:00"
./claude-nights-watch-manager.sh start --at "2025-01-28 14:30"
```

### ç®¡ç†å‘½ä»¤
```bash
# åœæ­¢å®ˆè­·ç¨‹åº
./claude-nights-watch-manager.sh stop

# æª¢æŸ¥ç‹€æ…‹
./claude-nights-watch-manager.sh status

# é‡å•Ÿå®ˆè­·ç¨‹åº
./claude-nights-watch-manager.sh restart

# æŸ¥çœ‹ä»»å‹™å’Œè¦å‰‡
./claude-nights-watch-manager.sh task
```

### æ—¥èªŒç®¡ç†
```bash
# æŸ¥çœ‹æ—¥èªŒ
./claude-nights-watch-manager.sh logs

# å¯¦æ™‚è·Ÿéš¨æ—¥èªŒ
./claude-nights-watch-manager.sh logs -f

# äº’å‹•å¼æ—¥èªŒæŸ¥çœ‹å™¨
./view-logs.sh
```

## âš™ï¸ ç³»çµ±æ¶æ§‹

### å·¥ä½œåŸç†
1. **ç›£æ§éšæ®µ** - æŒçºŒç›£æ§ Claude ä½¿ç”¨æ™‚é–“çª—å£
2. **å®šæ™‚éšæ®µ** - æ¥è¿‘ 5 å°æ™‚é™åˆ¶æ™‚æº–å‚™åŸ·è¡Œ
3. **ä»»å‹™æº–å‚™** - è®€å–ä¸¦çµ„åˆ rules.md å’Œ task.md
4. **è‡ªä¸»åŸ·è¡Œ** - ä½¿ç”¨ `claude --dangerously-skip-permissions` åŸ·è¡Œ
5. **è¨˜éŒ„éšæ®µ** - å®Œæ•´è¨˜éŒ„æ‰€æœ‰æ´»å‹•

### æ™‚é–“æª¢æ¸¬æ©Ÿåˆ¶
| æƒ…æ³ | æª¢æ¸¬æ–¹å¼ |
|------|----------|
| **æœ‰ ccusage** | API ç²å¾—æº–ç¢ºå‰©é¤˜æ™‚é–“ |
| **æ²’æœ‰ ccusage** | åŸºæ–¼æ™‚é–“æˆ³çš„æª¢æŸ¥ |

### è‡ªé©æ‡‰æª¢æŸ¥é–“éš”
| å‰©é¤˜æ™‚é–“ | æª¢æŸ¥é »ç‡ |
|----------|----------|
| > 30 åˆ†é˜ | æ¯ 10 åˆ†é˜ |
| 5-30 åˆ†é˜ | æ¯ 2 åˆ†é˜ |
| < 5 åˆ†é˜ | æ¯ 30 ç§’ |

## ğŸ”„ å¤šå·¥ä»»å‹™ç®¡ç†

### Claude å¤šæœƒè©±èƒ½åŠ›
- âœ… **æŠ€è¡“ä¸Šå¯è¡Œ** - ä¸€å€‹å¸³è™Ÿå¯åŒæ™‚å¤šå€‹ CLI æœƒè©±
- âš ï¸ **å…±äº«é…é¡** - æ‰€æœ‰æœƒè©±å…±ç”¨ 5 å°æ™‚ä½¿ç”¨é™åˆ¶
- ğŸ¯ **å»ºè­°ç­–ç•¥** - æ™ºæ…§è¦åŠƒå‹éæš´åŠ›ä¸¦è¡Œ

### å¤šå·¥åŸ·è¡Œç­–ç•¥

#### ç­–ç•¥ä¸€ï¼šå¤šç›®éŒ„ç®¡ç†ï¼ˆæ¨è–¦ï¼‰
```bash
~/claude-tasks/
â”œâ”€â”€ project-a/          # å°ˆæ¡ˆ A ç¨ç«‹ç’°å¢ƒ
â”‚   â”œâ”€â”€ task.md
â”‚   â”œâ”€â”€ rules.md
â”‚   â””â”€â”€ claude-nights-watch-*
â”œâ”€â”€ project-b/          # å°ˆæ¡ˆ B ç¨ç«‹ç’°å¢ƒ
â”‚   â”œâ”€â”€ task.md
â”‚   â”œâ”€â”€ rules.md
â”‚   â””â”€â”€ claude-nights-watch-*
â””â”€â”€ project-c/          # å°ˆæ¡ˆ C ç¨ç«‹ç’°å¢ƒ
    â”œâ”€â”€ task.md
    â”œâ”€â”€ rules.md
    â””â”€â”€ claude-nights-watch-*
```

#### ç­–ç•¥äºŒï¼šæ™‚é–“åˆ†æ®µåŸ·è¡Œ
```bash
# æ—©ä¸ŠåŸ·è¡Œå°ˆæ¡ˆ A
./claude-nights-watch-manager.sh start --at "09:00"

# ä¸­åˆåŸ·è¡Œå°ˆæ¡ˆ B
./claude-nights-watch-manager.sh start --at "13:00"

# ä¸‹åˆåŸ·è¡Œå°ˆæ¡ˆ C
./claude-nights-watch-manager.sh start --at "17:00"
```

#### ç­–ç•¥ä¸‰ï¼štmux ä¸¦è¡Œç›£æ§
```bash
# å‰µå»º tmux æœƒè©±
tmux new-session -d -s claude-tasks

# å»ºç«‹å¤šå€‹è¦–çª—
tmux new-window -t claude-tasks:1 -n 'project-a'
tmux new-window -t claude-tasks:2 -n 'project-b'
tmux new-window -t claude-tasks:3 -n 'project-c'

# åœ¨å„è¦–çª—å•Ÿå‹•ä»»å‹™
tmux send-keys -t claude-tasks:1 'cd ~/claude-tasks/project-a && ./claude-nights-watch-manager.sh start' Enter
tmux send-keys -t claude-tasks:2 'cd ~/claude-tasks/project-b && ./claude-nights-watch-manager.sh start' Enter
tmux send-keys -t claude-tasks:3 'cd ~/claude-tasks/project-c && ./claude-nights-watch-manager.sh start' Enter
```

### æ–¹æ¡ˆé¸æ“‡å»ºè­°

#### Pro ç”¨æˆ¶ï¼ˆ$20/æœˆï¼‰
- ğŸ¯ **æ™‚é–“åˆ†æ®µåŸ·è¡Œ**
- ğŸ¯ **ä»»å‹™æ•´åˆåˆ°å–®ä¸€ task.md**
- ğŸ¯ **é‡é»å–®ä¸€å°ˆæ¡ˆæ·±åº¦å·¥ä½œ**

#### Max 5x ç”¨æˆ¶ï¼ˆ$100/æœˆï¼‰
- ğŸ¯ **2-3 å€‹ä¸¦è¡Œæœƒè©±**
- ğŸ¯ **tmux åˆ†å‰²ç®¡ç†**
- ğŸ¯ **ç›£æ§é…é¡ä½¿ç”¨**

#### Max 20x ç”¨æˆ¶ï¼ˆ$200/æœˆï¼‰
- ğŸ¯ **çœŸæ­£å¤šå°ˆæ¡ˆä¸¦è¡Œ**
- ğŸ¯ **5+ å€‹åŒæ™‚æœƒè©±**
- ğŸ¯ **é©åˆå¤§å‹åœ˜éšŠ**

## âš ï¸ å®‰å…¨æ³¨æ„äº‹é …

### é‡è¦æé†’
> æ­¤å·¥å…·ä½¿ç”¨ `--dangerously-skip-permissions` æ¨™èªŒï¼Œå°‡ä¸ç¶“ç¢ºèªåŸ·è¡Œä»»å‹™

### å®‰å…¨å»ºè­°
- âœ… åœ¨è¨­ç½®å‰æ‰‹å‹•æ¸¬è©¦æ‰€æœ‰ä»»å‹™
- âœ… ä½¿ç”¨å®Œæ•´çš„ rules.md é˜²æ­¢ç ´å£æ€§æ“ä½œ
- âœ… å¾ç°¡å–®ä»»å‹™é–‹å§‹ï¼Œé€æ­¥å¢åŠ è¤‡é›œæ€§
- âœ… å®šæœŸç›£æ§æ—¥èªŒç¢ºä¿æ­£ç¢ºåŸ·è¡Œ
- âœ… ä¿ç•™é‡è¦æ•¸æ“šå‚™ä»½
- âœ… åœ¨éš”é›¢ç’°å¢ƒä¸­é‹è¡Œ

### æ¨è–¦å®‰å…¨è¦å‰‡
- ğŸ”’ é™åˆ¶æ–‡ä»¶ç³»çµ±è¨ªå•åˆ°é …ç›®ç›®éŒ„
- ğŸš« ç¦æ­¢åˆªé™¤å‘½ä»¤
- ğŸ›¡ï¸ é˜²æ­¢ç³»çµ±ä¿®æ”¹
- ğŸŒ é™åˆ¶ç¶²è·¯è¨ªå•
- ğŸ“Š è¨­ç½®è³‡æºé™åˆ¶

## ğŸ› ç–‘é›£æ’è§£

### æª¢æŸ¥æ¸…å–®
1. **Claude CLI å®‰è£** - `which claude`
2. **é…ç½®æ–‡ä»¶å­˜åœ¨** - é©—è­‰ task.md å­˜åœ¨
3. **æŸ¥çœ‹æ—¥èªŒ** - `./claude-nights-watch-manager.sh logs`
4. **ä½¿ç”¨é‡æª¢æŸ¥** - `ccusage blocks`
5. **æ™‚é–“è¨­ç½®** - æª¢æŸ¥é å®šé–‹å§‹æ™‚é–“
6. **æ–‡ä»¶å…§å®¹** - ç¢ºä¿ task.md ä¸ç‚ºç©º
7. **ç²¾ç¢ºç›£æ§** - å®‰è£ ccusage æé«˜æº–ç¢ºæ€§
8. **ç³»çµ±æ™‚é–“** - æª¢æŸ¥æ™‚é–“æ˜¯å¦æ­£ç¢º

## ğŸ“ é …ç›®çµæ§‹

```
claude-nights-watch/
â”œâ”€â”€ claude-nights-watch-daemon.sh      # æ ¸å¿ƒå®ˆè­·ç¨‹åº
â”œâ”€â”€ claude-nights-watch-manager.sh     # ç®¡ç†ç•Œé¢
â”œâ”€â”€ setup-nights-watch.sh              # è¨­ç½®è…³æœ¬
â”œâ”€â”€ view-logs.sh                        # æ—¥èªŒæŸ¥çœ‹å™¨
â”œâ”€â”€ logs/                               # æ—¥èªŒå­˜å„²
â”œâ”€â”€ examples/                           # ç¤ºä¾‹æ–‡ä»¶
â”‚   â”œâ”€â”€ task.example.md
â”‚   â””â”€â”€ rules.example.md
â””â”€â”€ test/                              # æ¸¬è©¦è…³æœ¬
    â”œâ”€â”€ test-simple.sh
    â”œâ”€â”€ test-task-simple.md
    â””â”€â”€ test-rules-simple.md
```

## ğŸ§ª æ¸¬è©¦èˆ‡é©—è­‰

```bash
# é€²å…¥æ¸¬è©¦ç›®éŒ„
cd test

# é‹è¡Œç°¡å–®æ¸¬è©¦
./test-simple.sh

# æ¸¬è©¦å³æ™‚åŸ·è¡Œ
./test-immediate-execution.sh
```

## ğŸ¤ è²¢ç»æŒ‡å—

1. Fork å­˜å„²åº«
2. å‰µå»º feature åˆ†æ”¯
3. éµå¾ªç¾æœ‰ä»£ç¢¼é¢¨æ ¼
4. å„ªå…ˆè€ƒæ…®å®‰å…¨æ€§
5. æ›´æ–°ç›¸é—œæ–‡æª”
6. æä¾›ä½¿ç”¨ç¤ºä¾‹
7. ç¢ºä¿æ¸¬è©¦é€šé
8. æäº¤ Pull Request

## ğŸ“„ æˆæ¬Šè³‡è¨Š

- **æˆæ¬Š** - MIT License
- **å‰µå»ºè€…** - [Aniket Karne](https://github.com/aniketkarne)
- **åŸºæ–¼** - [CCAutoRenew](https://github.com/aniketkarne/CCAutoRenew) å°ˆæ¡ˆ

---

**è¨˜ä½**ï¼šå¼·å¤§çš„è‡ªå‹•åŒ–ä¼´éš¨é‡å¤§è²¬ä»»ã€‚å•Ÿç”¨è‡ªä¸»åŸ·è¡Œå‰ï¼Œè«‹å‹™å¿…ä»”ç´°æª¢æŸ¥ä»»å‹™å’Œè¦å‰‡ï¼ğŸš¨
