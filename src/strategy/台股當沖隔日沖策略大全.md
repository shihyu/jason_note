# 台股當沖 / 隔日沖策略大全

> **核心理念：利用資訊不對稱、技術訊號、籌碼異動，捕捉台股短線資金流向**

---

## 📋 目錄

1. [Tick 統計 × 產業共振策略](#策略一tick-統計--產業共振策略)
2. [跳空缺口策略](#策略二跳空缺口策略)
3. [前日強勢股慣性策略](#策略三前日強勢股慣性策略)
4. [大單追蹤當沖](#策略四大單追蹤當沖)
5. [區間突破當沖](#策略五區間突破當沖)
6. [盤中量價異動](#策略六盤中量價異動)
7. [ETF套利當沖](#策略七etf套利當沖)
8. [新聞事件驅動](#策略八新聞事件驅動)
9. [回測框架建議](#回測框架建議)
10. [風險管理原則](#風險管理原則)

---

## 策略一：Tick 統計 × 產業共振策略

### 核心概念
**利用「開盤第一筆 tick 異常成交量」＋「同細產業同步異常」**  
捕捉主力/法人提早進場的訊號

### 策略本質
- 開盤資訊不對稱
- 主力/法人/程式單提早曝光
- 產業內資金共振擴散

---

### 資料準備

#### 1. 細產業資料
`細產業成分股_含代號.json`

```json
{
  "半導體設備": ["3131", "3583", "5274"],
  "PCB上游": ["8046", "8039", "4991"],
  "IC設計": ["2454", "3034", "2458"],
  "被動元件": ["2327", "2456", "3006"]
}
```

**用途：**
- 定義「產業共振」
- 過濾單一股票雜訊

#### 2. Tick 資料需求
每檔股票需包含：
- 過去 N 日（建議 ≥ 20 日）
- **開盤第一筆 tick**
  - 時間（09:00:00 ~ 09:00:05）
  - 成交量（張）
  - 成交價

---

### 開盤第一筆「異常量」定義

#### 基準量（Baseline Volume）

**A. 簡單版**
```python
baseline = mean(open_tick_volume[-5:])
```

**B. 穩健版（推薦）**
```python
baseline = median(open_tick_volume[-20:])
```

**C. Z-score 版（回測用）**
```python
z = (today_open_vol - mean_20) / std_20
```

#### 異常條件（建議同時滿足）

```text
1. open_tick_vol > baseline × N
2. z-score > Z
3. open_tick_vol > 最小門檻（如 500 張）
```

**建議初始參數：**
- `N = 2.5 ~ 4.0`
- `Z = 2.0 ~ 3.0`
- 最小門檻 = 500 張（可依股本調整）

---

### 產業共振條件（Alpha 關鍵）

**定義：**
在同一「細產業」中：
```text
≥ K 檔股票同時出現「開盤第一筆 tick 異常量」
```

**建議參數：**
- 小型產業（< 5 檔成分股）：`K ≥ 2`
- 大型產業（≥ 5 檔成分股）：`K ≥ 3`

**目的：**
- 避免單一股票假訊號
- 提高勝率
- 確認產業資金流向

---

### 🟢 策略 A：開盤當沖（高勝率）

#### 📥 進場條件
**時間：** 09:00:05 ~ 09:01

**條件：**
1. 股票符合「異常開盤 tick」
2. 細產業共振成立（≥ K 檔）
3. 開盤價 ≥ 昨收價（確認多方）
4. （可選）大盤期貨同向

**進場方式：**
- 開盤價直接買
- 或第一根 1-min K 突破高點

#### 📤 出場條件（擇一或混合）

**出場 1：固定時間**
```text
10:00 或 10:30 全數出場
```

**出場 2：量價轉弱**
```text
- 5-min 成交量 < 前一根
- 價格跌破 VWAP
```

**出場 3：停損/停利**
```text
停損：-1.2% ~ -1.5%
停利：+2.0% ~ +3.0%
```

---

### 🟡 策略 B：隔日沖（偏趨勢）

#### 📥 進場條件（更嚴格）
1. 細產業 ≥ 3 檔異常
2. 當日收盤：
   - 收紅 K
   - 收在 VWAP 之上
   - 成交量 > 20MA
3. 尾盤 13:20 後進場

#### 📤 出場方式
**隔日：**
- 開盤後 5–15 分鐘出場
- 或觸及前一日高點 ± 0.5%
- 停損：跌破前日低點

---

### 台股交易成本（必算）

#### 成本結構（單邊）
- 手續費：約 `0.1425%`
- 交易稅：
  - 當沖賣出：`0.15%`
  - 一般賣出：`0.3%`

#### 當沖來回成本
```text
買入：0.1425%（手續費）
賣出：0.1425%（手續費）+ 0.15%（當沖稅）
總計：約 0.435%
```

📌 **策略期望值建議：**
```text
單筆平均獲利 ≥ 0.6% ~ 0.8%
勝率 ≥ 55%
```

---

### 用 FinLab「結果回推條件」

#### 步驟 1️⃣ 定義結果
撈出符合以下條件的股票：
- 當日漲幅前 20%
- 或隔日上漲 > 2%

#### 步驟 2️⃣ 回溯條件
檢查前一日是否具備：
- 開盤第一筆 tick 異常量
- 細產業共振（≥ K 檔）
- 開高走高
- 成交量 > 5MA
- 收盤 > VWAP

#### 步驟 3️⃣ 統計機率
```python
P(隔日上漲 | 開盤異常量 + 產業共振)
P(當日漲幅 > 2% | 條件組合)
```

#### 步驟 4️⃣ 參數優化
不要一次亂調，依序測試：
1. 異常倍數 `N`（2.0 → 5.0）
2. 產業共振數 `K`（2 → 4）
3. 停損幅度（0.8% / 1.2% / 1.5%）
4. 出場時間（10:00 / 10:30 / 收盤）

---

## 策略二：跳空缺口策略

### 核心邏輯
利用市場對「跳空」的心理反應，分為：
- **向上跳空**：追強勢
- **向下跳空**：搶反彈

---

### 🔼 向上跳空當沖

#### 進場條件
```text
1. 開盤價 > 昨日最高價 × 1.005（跳空 0.5%以上）
2. 開盤後 1 分鐘成交量 > 5MA 成交量
3. 跳空幅度 < 4%（避免漲停鎖死）
4. 前一日非跌停或大跌日
```

#### 進場時機
- 09:01 ~ 09:05 進場
- 等待第一次回測缺口下緣不破

#### 出場策略
```text
停利：+1.5% ~ +2.5%
停損：-1.0%（跌破缺口下緣）
時間停利：10:30 前出清 50%
```

**勝率提升技巧：**
- 搭配大盤同向跳空
- 產業有題材（新聞、法說）
- 前一日收帶量長紅

---

### 🔽 向下跳空反彈

#### 進場條件
```text
1. 開盤價 < 昨日最低價（向下跳空）
2. 跳空幅度 2% ~ 5%（太小沒反彈、太大續跌）
3. 前一日非利空或財報負面
4. 09:05 ~ 09:15 出現反彈訊號
```

#### 反彈訊號
- 1-min K 出現下影線
- 成交量萎縮（恐慌賣壓消化）
- RSI(5) < 30

#### 出場策略
```text
目標：缺口 1/2 或 2/3 位置
停損：再破開盤低點 -0.5%
嚴格時間停損：11:00 前出場
```

---

## 策略三：前日強勢股慣性策略

### 核心邏輯
**強者恆強**：前一日強勢股隔日開盤續強機率高

---

### 選股條件（前一日）

```text
1. 漲幅 > 3%（但 < 9%，避免漲停）
2. 成交量 > 20MA × 1.5
3. 收盤價 = 當日最高價（或差距 < 0.3%）
4. 收盤在 VWAP 之上
5. 非冷門股（日均量 > 500 張）
```

### 進場時機（隔日）

```text
時間：09:00 ~ 09:03
條件：開盤價 ≥ 前日收盤價
進場價：開盤後首次回測不破，突破時進場
```

### 出場策略

#### 當沖版
```text
停利：+1.5% ~ +2.0%
停損：-1.0%
時間出場：11:00 或 13:00
```

#### 波段版（持有 2~3 日）
```text
停利：+5% ~ +7%
停損：跌破 5MA
加碼條件：突破前高 + 放量
```

### 進階篩選

#### 加分條件
- 前日屬於產業龍頭
- 有法說會、新品發表
- 外資連續買超 3 日以上
- 融資餘額下降（籌碼乾淨）

#### 扣分條件
- 前日尾盤量縮
- 技術指標背離（KD > 80）
- 大盤轉弱

---

## 策略四：大單追蹤當沖

### 核心邏輯
即時監控「大額成交單」，跟隨主力動向

---

### 大單定義

```text
單筆成交量 ≥ 100 張
且該筆成交價 ≥ 內盤價（主動買進）
```

**監控時段：**
- 09:00 ~ 09:30（開盤異動）
- 12:30 ~ 13:00（午盤布局）

---

### 進場條件

```text
1. 5 分鐘內出現 ≥ 3 筆大單
2. 大單方向一致（都是買盤）
3. 價格同步上漲 > 0.5%
4. 委買量 > 委賣量
```

#### 進場時機
- 大單出現後 1~2 分鐘內進場
- 或等待價格突破前高

---

### 出場策略

```text
快進快出：
停利：+0.8% ~ +1.2%
停損：-0.6%
時間停損：持有不超過 30 分鐘

或
追蹤停利：
- 最高價回落 0.5% 出場
- 大單轉為賣單立即出場
```

### 進階技巧

#### 大單品質判斷
- ✅ 連續掛單往上掃（強勢）
- ✅ 大單出現在關鍵價位（整數關卡）
- ❌ 大單後價格不漲（可能是對倒）
- ❌ 同時出現大賣單（多空交戰）

---

## 策略五：區間突破當沖

### 核心邏輯
利用「盤整區間突破」進行方向性交易

---

### 區間定義

```text
盤整時間：09:10 ~ 10:00
震盪幅度：< 1.5%
成交量：逐漸萎縮
```

**關鍵價位：**
- 區間高點（盤整期間最高價）
- 區間低點（盤整期間最低價）

---

### 進場條件

#### 向上突破
```text
1. 價格突破區間高點 + 0.2%
2. 突破當下成交量 > 前 5 根 K 棒平均量
3. MACD 翻正或即將黃金交叉
```

#### 向下突破
```text
1. 價格跌破區間低點 - 0.2%
2. 放量跌破
3. 可放空標的
```

---

### 出場策略

```text
停利目標：區間寬度 × 1.5
例：區間 100~102，突破後目標 102 + 3 = 105

停損：回破區間邊界（假突破）

時間停損：
- 10:30 前未達停利減碼 50%
- 11:30 前全數出場
```

---

## 策略六：盤中量價異動

### 核心邏輯
捕捉盤中「突發性」量價異常

---

### 異動定義

```text
時間：任何時段（09:30~13:00）

條件（同時滿足）：
1. 單根 5-min K 漲幅 > 1.5%
2. 該根成交量 > 前 10 根平均量 × 2
3. 價格創當日新高
4. 無漲停跡象（< 9.5%）
```

---

### 進場時機

**激進型：**
- 異動發生時立即進場
- 適合經驗豐富交易者

**穩健型：**
- 等待第一次回測不破
- 確認支撐後進場

---

### 出場策略

```text
快速停利：
+1.0% ~ +1.5% 出場

移動停損：
最高價回落 0.7% 出場

時間停損：
持有不超過 20 分鐘
```

### 風險控制

```text
⚠️ 注意事項：
1. 避開漲停股（流動性風險）
2. 確認無重大利空消息
3. 單筆投入資金 < 總資金 10%
4. 一日最多操作 3 次
```

---

## 策略七：ETF 套利當沖

### 核心邏輯
利用 ETF 與成分股之間的「折溢價」進行套利

---

### 適用標的

```text
- 0050（台灣 50）
- 0056（高股息）
- 00878（國泰永續高股息）
- 00919（大華優利高填息 30）
```

---

### 套利原理

#### 折價套利（ETF < 淨值）
```text
1. 買入 ETF
2. 同時放空主要成分股（如台積電、鴻海）
3. 等待折價收斂
```

#### 溢價套利（ETF > 淨值）
```text
1. 賣出 ETF（或放空）
2. 同時買入成分股
3. 等待溢價收斂
```

---

### 進場條件

```text
1. 折溢價 ≥ 0.3%（扣除交易成本後仍有利潤）
2. 成交量充足（避免流動性風險）
3. 大盤方向明確（避免趨勢風險）
```

---

### 出場策略

```text
目標：折溢價收斂至 0.1% 以內
停損：折溢價擴大至 0.8%
時間停損：當日收盤前平倉
```

### 風險警告

```text
⚠️ 需要大資金
⚠️ 需要即時報價系統
⚠️ 需考慮借券成本
⚠️ 適合專業交易者
```

---

## 策略八：新聞事件驅動

### 核心邏輯
利用「消息面」驅動的短期行情

---

### 事件類型

#### A. 產業利多
```text
- 政府補助政策（如晶片法案）
- 大廠訂單（如蘋果新機）
- 技術突破（如 AI 新應用）
```

#### B. 公司利多
```text
- 法說會超預期
- 獲利大增
- 產能滿載
- 接獲大單
```

#### C. 題材發酵
```text
- 除權息行情
- 併購消息
- 新品發布
```

---

### 操作策略

#### 利多當日（T+0）
```text
時間：消息發布後 30 分鐘內
進場：開盤跳空或盤中急拉
出場：當日收盤前（避免隔日不確定性）
```

#### 隔日操作（T+1）
```text
條件：前日收紅 K + 帶量
進場：隔日開高繼續追
出場：+2% ~ +3% 或尾盤
```

---

### 注意事項

```text
✅ 確認消息真實性（非謠言）
✅ 評估利多持續性
❌ 避免追高（漲幅已 > 7%）
❌ 注意出貨跡象（大量賣單）
```

---

## 回測框架建議

### Python 回測架構

```python
import pandas as pd
import numpy as np

class DayTradingBacktest:
    def __init__(self, data, strategy_params):
        self.data = data
        self.params = strategy_params
        self.trades = []
        
    def detect_signal(self, date):
        """偵測進場訊號"""
        # 實作各策略邏輯
        pass
    
    def execute_trade(self, entry_price, exit_price):
        """執行交易並計算損益"""
        cost = 0.435  # 當沖總成本 %
        profit = (exit_price - entry_price) / entry_price * 100 - cost
        return profit
    
    def run(self):
        """執行回測"""
        for date in self.data.index:
            signal = self.detect_signal(date)
            if signal:
                profit = self.execute_trade(
                    signal['entry'], 
                    signal['exit']
                )
                self.trades.append({
                    'date': date,
                    'profit': profit
                })
        return self.analyze_results()
    
    def analyze_results(self):
        """分析績效"""
        df = pd.DataFrame(self.trades)
        return {
            '總交易次數': len(df),
            '勝率': (df['profit'] > 0).mean(),
            '平均獲利': df['profit'].mean(),
            '最大回撤': self.calc_max_drawdown(df),
            '夏普比率': df['profit'].mean() / df['profit'].std()
        }
```

---

### FinLab 回測範例

```python
from finlab import data
from finlab.backtest import sim

# 策略一：開盤異常量
def opening_volume_strategy():
    # 取得開盤量資料
    open_vol = data.get('tick:volume:first')
    vol_ma20 = open_vol.rolling(20).mean()
    
    # 異常量定義
    abnormal = open_vol > vol_ma20 * 3
    
    # 產業共振
    industry = data.get('industry')  # 需自行準備
    industry_count = abnormal.groupby(industry).sum()
    resonance = industry_count >= 3
    
    # 進場訊號
    position = abnormal & resonance
    
    return position

# 執行回測
report = sim(
    opening_volume_strategy(),
    resample='D',  # 當沖
    fee=0.004,     # 交易成本
    stop_loss=0.012  # 停損 1.2%
)

print(report)
```

---

## 風險管理原則

### 💰 資金管理

```text
單筆投入 ≤ 總資金 5%~10%
同時持倉 ≤ 3~5 檔
日損失上限 = 總資金 2%
```

---

### 📊 績效追蹤

#### 每日記錄
```text
- 進場理由
- 進出場價位
- 持有時間
- 損益金額
- 心得檢討
```

#### 每週檢討
```text
- 勝率統計
- 最大獲利/虧損
- 策略優化
- 情緒管理
```

---

### ⚠️ 紀律鐵則

```text
1. 嚴格執行停損（不凹單）
2. 不追高殺低（等訊號）
3. 不預測行情（順勢而為）
4. 控制交易頻率（避免過度交易）
5. 保持情緒穩定（心態大於技術）
```

---

### 🚫 常見錯誤

```text
❌ 重押單一股票
❌ 不設停損
❌ 追漲停股
❌ 頻繁換策略
❌ 忽略交易成本
❌ 情緒化交易
❌ 過度自信
```

---

## 進階優化方向

### 1. 機器學習整合

```text
- 使用 XGBoost 預測當日漲跌機率
- 特徵工程：技術指標 + 籌碼 + 消息面
- 動態調整參數
```

### 2. 多策略組合

```text
- 將 5~8 個策略組合
- 分散風險
- 提高穩定性
```

### 3. 即時監控系統

```text
- 串接券商 API
- 自動下單
- 即時停損停利
```

### 4. 籌碼面整合

```text
- 外資/投信買賣超
- 融資融券變化
- 大股東持股異動
- 主力進出
```

---

## 總結

### 策略選擇建議

| 策略類型 | 勝率 | 報酬 | 難度 | 適合對象 |
|---------|------|------|------|---------|
| Tick 統計 | 高 | 中 | 高 | 程式交易者 |
| 跳空缺口 | 中高 | 中 | 中 | 技術派 |
| 強勢慣性 | 中 | 中高 | 低 | 新手 |
| 大單追蹤 | 中 | 高 | 高 | 盤中盯盤者 |
| 區間突破 | 中 | 中 | 中 | 技術派 |
| 量價異動 | 低 | 高 | 中 | 積極型 |
| ETF 套利 | 高 | 低 | 極高 | 專業交易者 |
| 事件驅動 | 低 | 極高 | 中 | 消息靈通者 |

---

### 成功關鍵

```text
1. 選擇適合自己的策略（2~3 個）
2. 確實執行風險管理
3. 持續記錄與優化
4. 保持學習與進化
5. 心態重於技術
```

---

### 最後提醒

> **當沖/隔日沖是零和遊戲**  
> 你的獲利 = 別人的虧損  
> 
> **成功率 < 10%**  
> 但透過紀律、系統化、風控  
> 可以提高到 30%~40%

> **這不是在賭博，而是在玩機率遊戲**  
> 小賺多次 > 大賠一次  
> 活下來，才有機會賺到錢

---

## 附錄：實用工具

### 資料來源
- FinLab（台股資料）
- TEJ（台灣經濟新報）
- CMoney（籌碼 K 線）
- 券商 API（富邦、元大、凱基）

### 回測平台
- FinLab Backtester
- Backtrader
- Zipline（台股版）
- QuantConnect

### 即時交易
- 富邦 e01
- 元大 API
- 群益 API
- 永豐 API

---

**版本：** v1.0  
**更新日期：** 2026-01-17  
**作者：** Claude + 你的交易智慧

---

## 下一步

如需以下內容請告知：
1. **完整 Python 回測 code**
2. **FinLab Notebook 實戰版**
3. **即時監控 Dashboard**
4. **自動化交易機器人**
5. **進階籌碼分析策略**

祝你交易順利！🚀📈
