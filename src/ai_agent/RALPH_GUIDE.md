# ğŸ¤– Ralph Loop for Gemini CLI: è‡ªå‹•åŒ–éè¿´æ€è€ƒæ¨¡çµ„

é€™æ˜¯ä¸€ä»½çµ¦ **Gemini CLI (Preview)** ä½¿ç”¨è€…çš„æ“´å……æŒ‡å—ã€‚
"Ralph Loop" æ˜¯ä¸€å€‹éˆæ„Ÿä¾†è‡ª [Anthropic Claude Code](https://github.com/anthropics/claude-code) çš„æ¦‚å¿µï¼Œæ—¨åœ¨è®“ AI åœ¨ CLI ç’°å¢ƒä¸­å…·å‚™ã€Œè‡ªæˆ‘å¾ªç’°ã€ã€ã€Œè‡ªæˆ‘æª¢æŸ¥ã€ç›´åˆ°é”æˆç›®æ¨™çš„èƒ½åŠ›ï¼Œè€Œéåƒ…åƒ…å›æ‡‰ä¸€æ¬¡å°è©±ã€‚

æœ¬æŒ‡å—å°‡æ•™ä½ å¦‚ä½•åœ¨ä½ çš„ Gemini CLI ç’°å¢ƒä¸­å®‰è£ä¸¦å•Ÿç”¨é€™å€‹åŠŸèƒ½ã€‚

---

## ğŸ“‹ å‰ç½®éœ€æ±‚èˆ‡å®‰è£ (Essential Setup)

è¦ä½¿ç”¨ Ralph Loop èˆ‡ Agent Skillsï¼Œè«‹å‹™å¿…æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ“ä½œï¼š

1.  **å®‰è£ Gemini CLI Preview**:
    å‰å¾€ [Gemini CLI Preview Changelogs](https://geminicli.com/docs/changelogs/preview/) ä¸‹è¼‰ä¸¦å®‰è£æœ€æ–°ç‰ˆæœ¬ã€‚
2.  **é–‹å•Ÿé è¦½åŠŸèƒ½ (Preview Features)**:
    - å•Ÿå‹•ï¼ˆæˆ–é‡å•Ÿï¼‰Gemini CLIã€‚
    - è¼¸å…¥ `/settings` é€²å…¥è¨­å®šä»‹é¢ã€‚
    - æ‰¾åˆ° **Preview Features (e.g., models)** ä¸¦å°‡å…¶è¨­å®šç‚º `True`ã€‚
    - **é‡å•Ÿ Gemini CLI**ã€‚
3.  **å•Ÿç”¨ Agent Skills**:
    - å†æ¬¡é€²å…¥ `/settings`ã€‚
    - æ‰¾åˆ° **Agent Skills** ä¸¦è¨­å®šç‚º `True`ã€‚
    - **å†æ¬¡é‡å•Ÿ Gemini CLI**ã€‚
4.  **é©—è­‰**:
    åœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥ `/skills`ï¼Œå¦‚æœæ‚¨èƒ½çœ‹åˆ° Skills åˆ—è¡¨ï¼Œä»£è¡¨ç’°å¢ƒå·²æº–å‚™å°±ç·’ï¼
    - è©³ç´° Skills èªªæ˜è«‹åƒé–± [å®˜æ–¹æ–‡ä»¶](https://geminicli.com/docs/cli/skills/)ã€‚

---

## ğŸš€ å¿«é€Ÿå®‰è£ Ralph Loop æŒ‡ä»¤

åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œè‡ªå‹•å»ºç«‹ `.gemini` è³‡æ–™å¤¾çµæ§‹ä¸¦é…ç½®æª”æ¡ˆï¼š

```bash
# 1. å»ºç«‹ç›®éŒ„çµæ§‹
mkdir -p .gemini/commands .gemini/scripts

# 2. å»ºç«‹æŒ‡ä»¤è¨­å®šæª” (ralph-loop.toml)
cat <<EOF > .gemini/commands/ralph-loop.toml
description = "Start an autonomous iterative loop (Ralph Wiggum mode)"
prompt = """
!{bash .gemini/scripts/ralph_manager.sh start {{args}}}

System: The Ralph Loop has been initialized with the parameters shown above.
If the initialization was successful (see "ğŸš€ Ralph Loop initialized"), please:
1. Acknowledge the mode (Autonomous Iteration).
2. Confirm the "Promise" (exit condition) and "Max Iterations".
3. IMMEDIATELY start executing the user's Task/Prompt.

IMPORTANT: Do not stop until you output the Promise string or run out of iterations.
"""
EOF

# 3. å»ºç«‹å–æ¶ˆæŒ‡ä»¤ (cancel-ralph.toml)
cat <<EOF > .gemini/commands/cancel-ralph.toml
description = "Stop the current active Ralph loop"
prompt = """
!{bash .gemini/scripts/ralph_manager.sh cancel}

System: The user has requested to cancel the autonomous loop.
Please confirm to the user that the loop state has been cleared (based on the output above).
"""
EOF

# 4. å»ºç«‹ç®¡ç†å™¨è…³æœ¬ (ralph_manager.sh)
cat <<'EOF' > .gemini/scripts/ralph_manager.sh
#!/bin/bash
STATE_FILE=".gemini/ralph-loop.local.md"
if [ "$1" == "cancel" ]; then
    [ -f "$STATE_FILE" ] && rm "$STATE_FILE" && echo "ğŸ›‘ Ralph Loop has been cancelled." || echo "â„¹ï¸ No active Ralph Loop found."
    exit 0
fi
if [ "$1" == "start" ]; then
    shift
    PROMISE="<promise>"; MAX=5; PROMPT=""
    while [[ $# -gt 0 ]]; do
        case "$1" in
            --promise|-p) PROMISE="$2"; shift; shift ;;
            --max|-m) MAX="$2"; shift; shift ;;
            *) PROMPT="$PROMPT $1"; shift ;;
        esac
    done
    PROMPT=$(echo "$PROMPT" | sed 's/^ *//')
    [ -z "$PROMPT" ] && echo "âš ï¸ Error: No prompt provided." && exit 1
    echo -e "# Ralph Loop State\nPrompt: $PROMPT\nPromise: $PROMISE\nMaxIterations: $MAX\nCurrentIteration: 0\nStartedAt: $(date)" > "$STATE_FILE"
    echo -e "ğŸš€ Ralph Loop initialized.\nğŸ“ Task: $PROMPT\nğŸ¯ Goal: Output '$PROMISE' to finish.\nğŸ”„ Max Iterations: $MAX"
    exit 0
fi
EOF

chmod +x .gemini/scripts/ralph_manager.sh
```

---

## ğŸ® å¦‚ä½•ä½¿ç”¨

å®‰è£å¾Œï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ Slash Commandsï¼š

### 1. å•Ÿå‹•å¾ªç’° (`/ralph-loop`)
```
/ralph-loop å¹«æˆ‘é–‹ç™¼ä¸€å€‹å…·å‚™æ¸¬è©¦æ¡ˆä¾‹çš„ API æ¨¡çµ„ï¼ŒæŒçºŒä¿®æ­£ç›´åˆ°æ‰€æœ‰æ¸¬è©¦é€šéï¼Œæœ€å¾Œè¼¸å‡º <promise>
```
AI æœƒé€²å…¥ã€Œè‡ªä¸»è¿­ä»£ã€æ¨¡å¼ï¼Œå®ƒæœƒè‡ªå‹•å‘¼å«å·¥å…·ã€æª¢æŸ¥éŒ¯èª¤ä¸¦è‡ªæˆ‘ä¿®æ­£ï¼Œç›´åˆ°é”æˆç›®æ¨™ã€‚

### 2. å–æ¶ˆå¾ªç’° (`/cancel-ralph`)
å¦‚æœç™¼ç¾ AI é™·å…¥æ­»è¿´åœˆæˆ–æƒ³ææ—©çµ‚æ­¢ï¼Œè¼¸å…¥ `/cancel-ralph` å³å¯æ¸…é™¤ç‹€æ…‹ã€‚

---

## ğŸ› ï¸ åŸç†èªªæ˜ (Deep Dive)

1.  **æŒ‡ä»¤è§¸ç™¼**: ç•¶æ‚¨è¼¸å…¥ `/ralph-loop` æ™‚ï¼ŒGemini CLI æœƒåŸ·è¡Œ `ralph-loop.toml`ã€‚
2.  **ç‹€æ…‹é–å®š**: é€é `!{bash ...}` èªæ³•èª¿ç”¨ `ralph_manager.sh`ï¼Œåœ¨ `.gemini/ralph-loop.local.md` å»ºç«‹ä¸€å€‹ç‹€æ…‹æª”æ¡ˆã€‚
3.  **æ¨¡å¼åˆ‡æ›**: Prompt æœƒå°‡ AI åˆ‡æ›è‡³ã€Œè‡ªä¸»è¿­ä»£æ¨¡å¼ã€ï¼Œä¸¦æ˜ç¢ºå‘ŠçŸ¥å…¶çµæŸæ¢ä»¶ï¼ˆPromise å­—ä¸²ï¼‰ã€‚
4.  **Context ä¿æŒ**: Gemini CLI æœƒåµæ¸¬åˆ°é–å®šæª”æ¡ˆçš„å­˜åœ¨ï¼Œä¸¦é…åˆå…§å»ºçš„ Hook æ©Ÿåˆ¶ï¼ˆæˆ–ç³»çµ±æç¤ºçš„å¼·å¼•å°ï¼‰ï¼Œè®“ AI æŒçºŒåœ¨å°è©±ä¸­å‘¼å«å·¥å…·ç›´åˆ°è¼¸å‡ºæ‰¿è«¾çš„é«˜åƒ¹å€¼çµæœã€‚

---

## âš ï¸ æ³¨æ„äº‹é …

_Generated by Gemini CLI Agent_
