<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Poetry - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="å¾é›¶é–‹å§‹ä½¿ç”¨-poetry"><a class="header" href="#å¾é›¶é–‹å§‹ä½¿ç”¨-poetry">å¾é›¶é–‹å§‹ä½¿ç”¨ Poetry</a></h2>
<p>å‡ºè™•: https://blog.kyomind.tw/python-poetry/</p>
<p>æœ¬æ–‡æ‰€æœ‰çš„åƒè€ƒè³‡æ–™æœƒæ”¾åœ¨æ–‡æœ«çš„ã€Œåƒè€ƒã€ä¸€æ¬„ä¸­ï¼Œä¸éåœ¨æ­¤é‚„æ˜¯è¦ç‰¹åˆ¥æåŠä¸»è¦çš„åƒè€ƒå°è±¡ï¼Œç¸½å…±æœ‰äºŒï¼š</p>
<ul>
<li><a href="https://python-poetry.org/docs/">Poetry å®˜æ–¹æ–‡ä»¶</a></li>
<li><a href="https://realpython.com/dependency-management-python-poetry/">Dependency Management With Python Poetry</a></li>
</ul>
<p>å¦‚æœåœ¨æœ¬æ–‡æ‰¾ä¸åˆ°ä½ éœ€è¦çš„å…§å®¹ï¼Œä»¥ä¸ŠäºŒè™•å¯èƒ½æœƒæœ‰ï¼Œæ‰€ä»¥ä¸»å‹•åˆ—å‡ºã€‚</p>
<p>å¦å¤–æœ¬æ–‡ä¸»è¦ä»¥ macOS å’Œ Linuxï¼ˆUbuntuï¼‰ç’°å¢ƒä¾†é€²è¡Œå®‰è£åŠæ•™å­¸ï¼ŒWindows ç”¨æˆ¶å¦‚æœæœ‰ç„¡æ³•é †åˆ©å®‰è£çš„æƒ…æ³ï¼Œå»ºè­°åƒè€ƒå®˜æ–¹æ–‡ä»¶å…§å®¹ä¿®æ­£ã€‚ä¸éï¼Œå³ä½¿æœ‰å•é¡Œï¼Œæ‡‰è©²ä¹Ÿæ˜¯é›†ä¸­åœ¨å®‰è£èˆ‡è¨­å®šéšæ®µï¼Œæœ¬æ–‡å…¶é¤˜éƒ¨åˆ†ä»å¯é©ç”¨ã€‚</p>
<h2 id="å®‰è£-poetry"><a class="header" href="#å®‰è£-poetry">å®‰è£ Poetry</a></h2>
<p>Poetry å’Œ pipã€gitã€pyenv ç­‰å·¥å…·ä¸€æ¨£ï¼Œéƒ½æ˜¯å…¸å‹çš„<strong>å‘½ä»¤åˆ—å·¥å…·</strong>ï¼Œéœ€è¦å…ˆå®‰è£æ‰èƒ½ä¸‹é”æŒ‡ä»¤â€”â€”<code>poetry</code>ã€‚</p>
<h3 id="å®‰è£æ–¹å¼é¸æ“‡"><a class="header" href="#å®‰è£æ–¹å¼é¸æ“‡">å®‰è£æ–¹å¼é¸æ“‡</a></h3>
<p>Poetry ä¸»è¦æä¾›äº†<a href="https://python-poetry.org/docs/#installation">å…©ç¨®å®‰è£æ–¹å¼</a>ï¼š</p>
<ol>
<li><strong>å…¨åŸŸå®‰è£</strong>è‡³ä½¿ç”¨è€…çš„å®¶ç›®éŒ„ã€‚</li>
<li><strong>pip å®‰è£</strong>è‡³å°ˆæ¡ˆä½¿ç”¨çš„ Pythonï¼ˆè™›æ“¬ï¼‰ç’°å¢ƒï¼Œå³<code>pip install poetry</code>ã€‚</li>
</ol>
<p><strong>å€‹äººæ¨è–¦ä½¿ç”¨å…¨åŸŸå®‰è£</strong>ï¼Œå®˜æ–¹æ–‡ä»¶ä¹Ÿè¡¨ç¤º<a href="https://python-poetry.org/docs/#alternative-installation-methods-not-recommended">ä¸æ¨è–¦ä½¿ç”¨ pip å®‰è£</a>ã€‚</p>
<p>å› ç‚º pip å®‰è£æ˜¯ç›´æ¥å®‰è£åˆ°ã€Œ<strong>å°ˆæ¡ˆæ‰€å±¬çš„ Python è™›æ“¬ç’°å¢ƒ</strong>ã€è£¡ï¼Œè€Œ Poetry æ‰€ä¾è³´çš„å¥—ä»¶éå¸¸å¤šï¼Œ<strong>ç¸½è¨ˆè¶…é 30 å€‹ï¼Œæœƒåš´é‡å½±éŸ¿å°ˆæ¡ˆè™›æ“¬ç’°å¢ƒçš„æ•´æ½”åº¦</strong>ã€‚æ–‡ä»¶ä¸­ä¹Ÿè­¦å‘Šé€™äº›ä¾è³´å¥—ä»¶å¯èƒ½å’Œå°ˆæ¡ˆæœ¬èº«çš„å¥—ä»¶<strong>ç™¼ç”Ÿè¡çª</strong>ï¼š</p>
<blockquote>
<p>Be aware that it will also install Poetryâ€™s dependencies which <strong>might cause conflicts with other packages.</strong></p>
</blockquote>
<h3 id="å…¨åŸŸå®‰è£-poetry-è‡³å®¶ç›®éŒ„"><a class="header" href="#å…¨åŸŸå®‰è£-poetry-è‡³å®¶ç›®éŒ„">å…¨åŸŸå®‰è£ Poetry è‡³å®¶ç›®éŒ„</a></h3>
<p>æ‰€ä»¥æˆ‘å€‘å°±ä½¿ç”¨å…¨åŸŸå®‰è£å§ï¼</p>
<h4 id="macos--linux--wslwindows-subsystem-for-linux"><a class="header" href="#macos--linux--wslwindows-subsystem-for-linux">macOS / Linux / WSLï¼ˆWindows Subsystem for Linuxï¼‰</a></h4>
<pre><code>curl -sSL https://install.python-poetry.org | python3 -
</code></pre>
<p>æˆ–</p>
<pre><code>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python -
</code></pre>
<h4 id="windows"><a class="header" href="#windows">Windows</a></h4>
<pre><code>(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python -
</code></pre>
<p>Poetry å¯¦éš›å®‰è£è·¯å¾‘å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>The installer installs the <code>poetry</code> tool to Poetryâ€™s <code>bin</code> directory. This location depends on your system:</p>
</blockquote>
<ul>
<li><code>$HOME/.local/bin</code> for Unix</li>
<li><code>%APPDATA%\Python\Scripts</code> on Windows</li>
</ul>
<p>ä»¥ macOS ç‚ºä¾‹ï¼Œå¦‚æœè¦ä¸‹<code>poetry</code>æŒ‡ä»¤ï¼Œå°±éœ€è¦æ‰“å®Œæ•´è·¯å¾‘<code>$HOME/.local/bin/poetry</code>ï¼Œé¡¯ç„¶ä¸å¤ªæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘å€‘éœ€è¦è¨­å®š PATHã€‚</p>
<h3 id="è¨­å®š-path"><a class="header" href="#è¨­å®š-path">è¨­å®š PATH</a></h3>
<p>æ–°å¢<code>poetry</code>æŒ‡ä»¤åŸ·è¡Œæª”æ‰€åœ¨çš„è·¯å¾‘è‡³ PATHã€‚</p>
<p>åœ¨<code>.zshrc</code>æˆ–<code>.bashrc</code>æˆ–<code>.bash_profile</code>æ–°å¢ï¼š</p>
<pre><code>export PATH=$PATH:$HOME/.local/bin
</code></pre>
<p>å­˜æª”å¾Œé‡å•Ÿ shell å³å¯ä½¿ç”¨ã€‚ç›´æ¥åœ¨å‘½ä»¤åˆ—æ‰“ä¸Š<code>poetry</code>æŒ‡ä»¤æ¸¬è©¦ï¼š</p>
<pre><code>â¯ poetry
Poetry version 1.1.13

USAGE
  poetry [-h] [-q] [-v [&lt;...&gt;]] [-V] [--ansi] [--no-ansi] [-n] &lt;command&gt; [&lt;arg1&gt;] ... [&lt;argN&gt;]

...
</code></pre>
<h3 id="è¨­å®š-alias"><a class="header" href="#è¨­å®š-alias">è¨­å®š alias</a></h3>
<p>æ¯”èµ·<code>pip</code>ï¼Œ<code>poetry</code>é€™å€‹æŒ‡ä»¤å¯¦åœ¨å¤ªå†—é•·äº†ï¼æˆ‘å€‘é‚„æ˜¯çµ¦å®ƒä¸€å€‹ alias å§ï¼</p>
<p>åŸºæ–¼å®ƒæ˜¯æˆ‘æ¥µç‚ºå¸¸ç”¨çš„æŒ‡ä»¤ï¼Œæˆ‘é¡˜æ„è³¦èˆ‡å®ƒ**ã€Œå–®å­—æ¯ã€çš„ alias ç‰¹æ¬Š**ï¼Œæˆ‘ä½¿ç”¨<code>p</code>ï¼š</p>
<pre><code>alias p='poetry'
</code></pre>
<p>æ¸¬è©¦çµæœï¼š</p>
<pre><code>â¯ p
Poetry version 1.1.13

USAGE
  poetry [-h] [-q] [-v [&lt;...&gt;]] [-V] [--ansi] [--no-ansi] [-n] &lt;command&gt; [&lt;arg1&gt;] ... [&lt;argN&gt;]
</code></pre>
<p>alias æ˜¯æ–¹ä¾¿è‡ªå·±ä½¿ç”¨ï¼Œä½†æœ¬æ–‡åŸºæ–¼è¡¨é”æ¸…æ™°è€ƒé‡ï¼Œä¸‹é¢çš„è§£èªªé™¤äº†åœ–ç‰‡å¤–ï¼ŒåŸå‰‡ä¸Šä¸¦ä¸æœƒä½¿ç”¨ alias è¡¨ç¤ºã€‚</p>
<hr />
<h2 id="åˆå§‹åŒ–-poetry-å°ˆæ¡ˆ"><a class="header" href="#åˆå§‹åŒ–-poetry-å°ˆæ¡ˆ">åˆå§‹åŒ– Poetry å°ˆæ¡ˆ</a></h2>
<p>ç‚ºäº†æ–¹ä¾¿è§£èªªï¼Œæˆ‘å€‘å…ˆå»ºç«‹ä¸€å€‹å…¨æ–°çš„å°ˆæ¡ˆï¼Œåç‚º<code>poetry-demo</code>ã€‚</p>
<p>æŒ‡ä»¤éƒ½å¾ˆç°¡å–®ï¼Œä½†é‚„æ˜¯å»ºè­°å¯ä»¥ä¸€æ­¥ä¸€æ­¥è·Ÿè‘—æ“ä½œã€‚</p>
<p>å°±åƒ git å°ˆæ¡ˆéœ€è¦åˆå§‹åŒ–ï¼ŒPoetry ä¹Ÿéœ€è¦ï¼Œå› ç‚ºæ¯ä¸€å€‹ä½¿ç”¨äº† Poetry çš„å°ˆæ¡ˆä¸­ä¸€å®šè¦æœ‰ä¸€å€‹<code>pyproject.toml</code>ä½œç‚ºå®ƒçš„<strong>è¨­å®šæª”</strong>ã€‚å¦å‰‡ç›´æ¥ä½¿ç”¨<code>poetry</code>ç›¸é—œæŒ‡ä»¤å°±æœƒå‡ºç¾ä¸‹åˆ—éŒ¯èª¤è¨Šæ¯ï¼š</p>
<blockquote>
<p>Poetry could not find a pyproject.toml file in {cwd} or its parents</p>
</blockquote>
<p>æ‰€ä»¥ä¸€å®šå…ˆåˆå§‹åŒ–ï¼Œä½¿ç”¨<code>poetry init</code>ï¼š</p>
<pre><code>mkdir poetry-demo
cd poetry-demo
poetry init
</code></pre>
<p>æ­¤æ™‚æœƒè·³å‡ºä¸€é€£ä¸²çš„äº’å‹•å°è©±ï¼Œå”åŠ©ä½ å»ºç«‹å°ˆæ¡ˆçš„è³‡æ–™ï¼Œå¤§éƒ¨åˆ†å¯ä»¥ç›´æ¥<code>enter</code>è·³éï¼š</p>
<pre><code>This command will guide you through creating your pyproject.toml config.

Package name [poetry-demo]:
Version [0.1.0]:
Description []:
Author [kyo &lt;odinxp@gmail.com&gt;, n to skip]:
License []:
Compatible Python versions [^3.8]:

Would you like to define your main dependencies interactively? (yes/no) [yes]
</code></pre>
<p>ç›´åˆ°å‡ºç¾ã€Œ<code>Would you like to define your main dependencies interactively? (yes/no) [yes]</code>ã€ï¼Œæˆ‘å€‘å…ˆé¸æ“‡ã€Œ<strong>no</strong>ã€å¾Œï¼Œæœƒè®“ä½ ç¢ºèªæœ¬æ¬¡ç”¢ç”Ÿçš„<code>toml</code>æª”å…§å®¹ï¼š</p>
<pre><code>Would you like to define your development dependencies interactively? (yes/no) [yes] no
Generated file

[tool.poetry]
name = "poetry-demo"
version = "0.1.0"
description = ""
authors = ["kyo &lt;odinxp@gmail.com&gt;"]

[tool.poetry.dependencies]
python = "^3.8"

[tool.poetry.dev-dependencies]

[build-system]
requires = ["poetry-core&gt;=1.0.0"]
build-backend = "poetry.core.masonry.api"
</code></pre>
<p>ä¸¦è©¢å•ä½ ã€Œ<code>Do you confirm generation? (yes/no) [yes]</code>ã€ï¼ŒæŒ‰<code>enter</code>ä½¿ç”¨é è¨­é¸é …ã€Œyesã€æˆ–ç›´æ¥å›ç­”ã€Œyesã€ï¼Œå‰‡<code>pyproject.toml</code>å»ºç«‹å®Œæˆã€‚</p>
<p>æ­¤æ™‚å°ˆæ¡ˆç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p>
<pre><code>poetry-demo
â””â”€â”€ pyproject.toml

0 directories, 1 file
</code></pre>
<h2 id="ç®¡ç†-poetry-è™›æ“¬ç’°å¢ƒ"><a class="header" href="#ç®¡ç†-poetry-è™›æ“¬ç’°å¢ƒ">ç®¡ç† Poetry è™›æ“¬ç’°å¢ƒ</a></h2>
<p>æˆ‘è¦ºå¾—å­¸ç¿’ Poetry çš„<strong>ç¬¬ä¸€é“é—œå¡</strong>ï¼Œå°±æ˜¯å®ƒå°æ–¼è™›æ“¬ç’°å¢ƒçš„ç®¡ç†ã€‚</p>
<h3 id="å¼·åˆ¶è™›æ“¬ç’°å¢ƒ"><a class="header" href="#å¼·åˆ¶è™›æ“¬ç’°å¢ƒ">ã€Œå¼·åˆ¶ã€è™›æ“¬ç’°å¢ƒ</a></h3>
<p>Poetry é è¨­ä¸Šï¼ˆå¯é€é<code>poetry config</code>ä¿®æ”¹ï¼‰æœƒå¼·åˆ¶å¥—ä»¶éƒ½è¦å®‰è£åœ¨è™›æ“¬ç’°å¢ƒä¸­ï¼Œä»¥å…æ±™æŸ“å…¨åŸŸï¼Œæ‰€ä»¥å®ƒæ•´åˆäº†<code>virtualenv</code>ã€‚</p>
<p>æ‰€ä»¥åœ¨åŸ·è¡Œ<code>poetry addã€install</code>ç­‰æŒ‡ä»¤æ™‚ï¼ŒPoetry éƒ½æœƒè‡ªå‹•æª¢æŸ¥<strong>ç•¶ä¸‹æ˜¯å¦æ­£åœ¨ä½¿ç”¨è™›æ“¬ç’°å¢ƒï¼š</strong></p>
<ul>
<li>å¦‚æœ<strong>æ˜¯</strong>ï¼Œå‰‡æœƒç›´æ¥å®‰è£å¥—ä»¶è‡³<strong>ç•¶å‰</strong>çš„è™›æ“¬ç’°å¢ƒã€‚</li>
<li>å¦‚æœ<strong>å¦</strong>ï¼Œå‰‡æœƒè‡ªå‹•å¹«ä½ å»ºç«‹ä¸€å€‹<strong>æ–°çš„</strong>è™›æ“¬ç’°å¢ƒï¼Œå†é€²è¡Œå¥—ä»¶å®‰è£ã€‚</li>
</ul>
<h3 id="å®¹æ˜“æ··æ·†çš„è™›æ“¬ç’°å¢ƒ"><a class="header" href="#å®¹æ˜“æ··æ·†çš„è™›æ“¬ç’°å¢ƒ">å®¹æ˜“æ··æ·†çš„è™›æ“¬ç’°å¢ƒ</a></h3>
<p>Poetry ä¸»å‹•ç´å…¥è™›æ“¬ç’°å¢ƒç®¡ç†ç®—æ˜¯ç«‹æ„è‰¯å–„ï¼Œç›¸ç•¶æ–¼æŠŠ<code>pip</code>+<code>venv</code>å…©è€…çš„åŠŸèƒ½ç›´æ¥æ•´åˆåœ¨ä¸€èµ·ï¼Œ<strong>ä½†ä¹Ÿå¸¶ä¾†ä¸€å®šçš„è¤‡é›œåº¦</strong>ï¼Œå°¤å…¶åœ¨ä½ å·²ç¶“è‡ªè¡Œä½¿ç”¨äº†<code>venv</code>ã€<code>virtualenv</code>æˆ– <code>pyenv-virtualenv</code>æˆ–<code>conda</code>ç­‰å·¥å…·ä¾†ç®¡ç†è™›æ“¬ç’°å¢ƒçš„æƒ…æ³ä¸‹ï¼</p>
<p><strong>æ²’éŒ¯ï¼ŒPython çš„è™›æ“¬ç’°å¢ƒç®¡ç†å°±æ˜¯é€™éº¼éº»ç…©ï¼</strong></p>
<p>å€‹äººå»ºè­°ï¼Œå°æ–°æ‰‹è€Œè¨€ï¼Œæ–¼ Poetry çš„å°ˆæ¡ˆä¸­ï¼Œ<strong>ä¸€å¾‹ä½¿ç”¨ Poetry</strong> ä¾†ç®¡ç†è™›æ“¬ç’°å¢ƒå³å¯ã€‚æˆ‘ç›®å‰ä¹Ÿæ˜¯é€™æ¨£ï¼Œçœå¾—éº»ç…©ã€‚</p>
<h3 id="ä»¥æŒ‡ä»¤å»ºç«‹è™›æ“¬ç’°å¢ƒ"><a class="header" href="#ä»¥æŒ‡ä»¤å»ºç«‹è™›æ“¬ç’°å¢ƒ">ä»¥æŒ‡ä»¤å»ºç«‹è™›æ“¬ç’°å¢ƒ</a></h3>
<p>ä½¿ç”¨æŒ‡ä»¤<code>poetry env use python</code>ï¼š</p>
<pre><code>â¯ poetry env use python
Creating virtualenv poetry-demo-IEWSZKSE-py3.8 in /Users/kyo/Library/Caches/pypoetry/virtualenvs
Using virtualenv: /Users/kyo/Library/Caches/pypoetry/virtualenvs/poetry-demo-IEWSZKSE-py3.8
</code></pre>
<p>å¯ä»¥çœ‹å‡º Poetry ç‚ºæˆ‘å€‘å»ºç«‹äº†åç‚º<code>poetry-demo-IEWSZKSE-py3.8</code>çš„è™›æ“¬ç’°å¢ƒã€‚</p>
<h3 id="é‡é»èªªæ˜"><a class="header" href="#é‡é»èªªæ˜">é‡é»èªªæ˜</a></h3>
<ul>
<li><code>poetry env use python</code>å»ºç«‹è™›æ“¬ç’°å¢ƒæ‰€ä½¿ç”¨çš„ Python ç‰ˆæœ¬ï¼Œå–æ±ºæ–¼<code>python</code>æŒ‡ä»¤åœ¨ä½ çš„ PATH æ˜¯é€£çµåˆ°å“ªå€‹ç‰ˆæœ¬ã€‚åŒç†ï¼Œä½ ä¹Ÿå¯ä»¥å°‡æŒ‡ä»¤æ˜ç¤ºç‚º<code>use python3</code>æˆ–<code>use python3.8</code>ï¼Œåªè¦é€™äº›æŒ‡ä»¤ç¢ºå¯¦å­˜åœ¨ PATH ä¸­ã€‚</li>
<li>é è¨­ä¸Šï¼ŒPoetry æœƒçµ±ä¸€å°‡è™›æ“¬ç’°å¢ƒå»ºç«‹åœ¨ã€Œ<strong>ç‰¹å®šç›®éŒ„</strong>ã€è£¡ï¼Œæ¯”å¦‚æœ¬ä¾‹ä¸­å­˜æ”¾çš„è·¯å¾‘æ˜¯<code>/Users/kyo/Library/Caches/pypoetry/virtualenvs</code>ã€‚</li>
<li>è™›æ“¬ç’°å¢ƒçš„<strong>å‘½åæ¨¡å¼ç‚º<code>å°ˆæ¡ˆåç¨±-äº‚æ•¸-Pythonç‰ˆæœ¬</code>ã€‚</strong></li>
</ul>
<p>è€å¯¦èªªæˆ‘å€‹äººä¸æ˜¯å¾ˆå–œæ­¡é€™æ¨£çš„åšæ³•ï¼Œå› ç‚ºé€™æ„å‘³è‘—å–®ä¸€å°ˆæ¡ˆå…è¨±å»ºç«‹è¤‡æ•¸å€‹è™›æ“¬ç’°å¢ƒï¼ˆæ¯”å¦‚ Python 3.7ã€3.8ã€3.9 å¯ä»¥å„ä¾†ä¸€å€‹ï¼‰ï¼Œ<strong>å½ˆæ€§ä¹‹é¤˜ä¹Ÿå¢åŠ äº†æ··äº‚çš„å¯èƒ½</strong>ï¼Œè€Œä¸”é€™å‘½åæ¨¡å¼æˆ‘ä¹Ÿä¸å¤ªæ¬£è³ï¼Œé¡¯å¾—éæ–¼åƒµåŒ–ä¸”å†—é•·ã€‚</p>
<p>æ—¢ç„¶ Python çš„è™›æ“¬ç’°å¢ƒç†è«–ä¸Šéƒ½æ˜¯<strong>é«˜åº¦ç¶å®šå°ˆæ¡ˆæœ¬èº«</strong>çš„ï¼Œæˆ‘æ›´åå¥½<code>venv</code>å¼çš„åšæ³•ï¼Œä¹Ÿå°±æ˜¯<strong>æŠŠè™›æ“¬ç’°å¢ƒæ”¾åˆ°å°ˆæ¡ˆç›®éŒ„å…§</strong>ï¼Œè€Œéçµ±ä¸€æ”¾åœ¨ç¨ç«‹çš„ç›®éŒ„ï¼Œè®“è™›æ“¬ç’°å¢ƒèˆ‡å°ˆæ¡ˆå‘ˆç¾<strong>ç›´è§€çš„ä¸€å°ä¸€é—œä¿‚</strong>ã€‚</p>
<p>æ‰€å¹¸ï¼ŒPoetry å…·å‚™é€™æ¨£çš„é¸é …ã€‚</p>
<hr />
<h3 id="ä¿®æ”¹configå»ºç«‹å°ˆæ¡ˆå…§çš„venvè™›æ“¬ç’°å¢ƒ"><a class="header" href="#ä¿®æ”¹configå»ºç«‹å°ˆæ¡ˆå…§çš„venvè™›æ“¬ç’°å¢ƒ">ä¿®æ”¹<code>config</code>ï¼Œå»ºç«‹å°ˆæ¡ˆå…§çš„<code>.venv</code>è™›æ“¬ç’°å¢ƒ</a></h3>
<p>æˆ‘å€‘å…ˆä½¿ç”¨<code>poetry config</code>æŒ‡ä»¤ä¾†æŸ¥çœ‹ Poetry ç›®å‰å¹¾å€‹ä¸»è¦çš„è¨­å®šï¼Œéœ€è¦<code>--list</code>é€™å€‹åƒæ•¸ï¼š</p>
<pre><code>â¯ poetry config --list
cache-dir = "/Users/kyo/Library/Caches/pypoetry"
experimental.new-installer = true
installer.parallel = true
virtualenvs.create = true
virtualenvs.in-project = false
virtualenvs.path = "{cache-dir}/virtualenvs"
</code></pre>
<p>å…¶ä¸­<code>virtualenvs.create = true</code>è‹¥æ”¹æˆ<code>false</code>ï¼Œå‰‡å¯ä»¥åœæ­¢ Poetry åœ¨ã€Œåµæ¸¬ä¸åˆ°è™›æ“¬ç’°å¢ƒæ™‚æœƒè‡ªè¡Œå»ºç«‹ã€çš„è¡Œç‚ºæ¨¡å¼ï¼Œä½†å»ºè­°é‚„æ˜¯ä¸è¦æ›´å‹•ã€‚</p>
<p>è€Œ<code>virtualenvs.in-project = false</code>å°±æ˜¯æˆ‘å€‘è¦ä¿®æ”¹çš„ç›®æ¨™ï¼Œä½¿ç”¨æŒ‡ä»¤ï¼š</p>
<pre><code>poetry config virtualenvs.in-project true
</code></pre>
<p>å¥½ï¼Œæˆ‘å€‘å…ˆæŠŠä¹‹å‰å»ºç«‹çš„è™›æ“¬ç’°å¢ƒåˆªé™¤ï¼š</p>
<pre><code>â¯ poetry env remove python
Deleted virtualenv: /Users/kyo/Library/Caches/pypoetry/virtualenvs/poetry-demo-IEWSZKSE-py3.8
</code></pre>
<p>é‡æ–°å»ºç«‹ï¼Œçœ‹çœ‹è¡Œç‚ºæœ‰ä½•å·®ç•°ï¼š</p>
<pre><code>â¯ poetry env use python
Creating virtualenv poetry-demo in /Users/kyo/Documents/code/poetry-demo/.venv
Using virtualenv: /Users/kyo/Documents/code/poetry-demo/.venv
</code></pre>
<p>å¯ä»¥çœ‹å‡ºï¼š</p>
<ul>
<li>è™›æ“¬ç’°å¢ƒçš„è·¯å¾‘æ”¹ç‚ºã€Œ<strong>å°ˆæ¡ˆçš„æ ¹ç›®éŒ„</strong>ã€ã€‚</li>
<li>åç¨±å›ºå®šç‚º<code>.venv</code>ã€‚</li>
</ul>
<p>æˆ‘è¦ºå¾—é€™æ¨£çš„è¨­å®šæ›´åŠ ç°¡æ½”ã€‚</p>
<h3 id="å•Ÿå‹•èˆ‡é€€å‡ºè™›æ“¬ç’°å¢ƒ"><a class="header" href="#å•Ÿå‹•èˆ‡é€€å‡ºè™›æ“¬ç’°å¢ƒ">å•Ÿå‹•èˆ‡é€€å‡ºè™›æ“¬ç’°å¢ƒ</a></h3>
<p>å•Ÿå‹•è™›æ“¬ç’°å¢ƒï¼Œéœ€ç§»è‡³å°ˆæ¡ˆç›®éŒ„åº•ä¸‹ï¼Œä½¿ç”¨æŒ‡ä»¤<code>poetry shell</code>ï¼š</p>
<pre><code>â¯ poetry shell
Spawning shell within /Users/kyo/Documents/code/poetry-demo/.venv
â¯ . /Users/kyo/Documents/code/poetry-demo/.venv/bin/activate
</code></pre>
<p><code>poetry shell</code>æŒ‡ä»¤æœƒåµæ¸¬ç•¶å‰ç›®éŒ„æˆ–æ‰€å±¬ä¸Šå±¤ç›®éŒ„æ˜¯å¦å­˜åœ¨<code>pyproject.toml</code>ä¾†ç¢ºå®šæ‰€è¦å•Ÿå‹•çš„è™›æ“¬ç’°å¢ƒï¼Œæ‰€ä»¥å¦‚æœä¸ç§»è‡³å°ˆæ¡ˆç›®éŒ„ï¼Œå‰‡æœƒå‡ºç¾ä¸‹åˆ—éŒ¯èª¤ï¼š</p>
<pre><code>â¯ poetry shell

  RuntimeError

  Poetry could not find a pyproject.toml file in /Users/kyo/Documents/code or its parents

  at ~/Library/Application Support/pypoetry/venv/lib/python3.8/site-packages/poetry/core/factory.py:369 in locate
      365â”‚             if poetry_file.exists():
      366â”‚                 return poetry_file
      367â”‚
      368â”‚         else:
    â†’ 369â”‚             raise RuntimeError(
      370â”‚                 "Poetry could not find a pyproject.toml file in {} or its parents".format(
      371â”‚                     cwd
      372â”‚                 )
      373â”‚             )
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPoetry çš„éŒ¯èª¤è¨Šæ¯éå¸¸æ¸…æ¥šï¼Œè®“ä½ å¾ˆå®¹æ˜“çŸ¥æ›‰ä¿®æ­£çš„æ–¹å‘ï¼Œé€™æ˜¯ä½œç‚ºä¸€å€‹å„ªç§€å‘½ä»¤åˆ—å·¥å…·çš„å¿…è¦æ¢ä»¶ã€‚</p>
<p>é€€å‡ºå°±ç°¡å–®å¤šäº†ï¼Œåªéœ€è¦<code>exit</code>å³å¯ã€‚</p>
<hr />
<h2 id="poetry-å¸¸ç”¨æŒ‡ä»¤"><a class="header" href="#poetry-å¸¸ç”¨æŒ‡ä»¤">Poetry å¸¸ç”¨æŒ‡ä»¤</a></h2>
<p>Poetry æ˜¯ä¸€å€‹ç¨ç«‹çš„å‘½ä»¤åˆ—å·¥å…·ï¼Œå°±åƒ pyenvï¼Œå®ƒæœ‰è‡ªå·±çš„æŒ‡ä»¤ï¼Œéœ€è¦èŠ±è²»é¡å¤–çš„å¿ƒåŠ›å­¸ç¿’ï¼Œä¸”è¼ƒ pip æ›´åŠ è¤‡é›œï¼Œé€™å¯èƒ½æ˜¯ä½¿ç”¨ Poetry çš„<strong>ç¬¬äºŒé“é—œå¡</strong>ã€‚å¥½åœ¨å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œå…¶å¯¦ä¹Ÿä¸è¶…é 10 å€‹ï¼Œä¸‹é¢å°±ä¾†ä¸€ä¸€ä»‹ç´¹ã€‚</p>
<p>åœ¨æ­¤æˆ‘å€‘ç¹¼çºŒä½¿ç”¨å‰é¢æéçš„ Flask å’Œ Black å¥—ä»¶ï¼Œä¾†ç¤ºç¯„ä¸¦èªªæ˜ Poetry çš„å„ªå‹¢ä»¥åŠå®ƒå’Œ pip çš„ä¸åŒä¹‹è™•ã€‚</p>
<h2 id="poetry-æ–°å¢å¥—ä»¶"><a class="header" href="#poetry-æ–°å¢å¥—ä»¶">Poetry æ–°å¢å¥—ä»¶</a></h2>
<p>ä½¿ç”¨æŒ‡ä»¤ï¼š</p>
<pre><code>poetry add
</code></pre>
<p>ç›¸ç•¶æ–¼<code>pip install</code>ï¼Œæˆ‘å€‘ä¾†è©¦è‘—å®‰è£ Flask çœ‹çœ‹æœƒæœ‰ä»€éº¼è®ŠåŒ–ï¼š</p>
<p><a href="https://i.imgur.com/H7pPtsk.png"><img src="https://i.imgur.com/H7pPtsk.png" alt="img" /></a></p>
<p>åœ–ä¸­å¯ä»¥çœ‹å‡º Poetry æ¼‚äº®çš„å‘½ä»¤åˆ—è³‡è¨Šå‘ˆç¾ï¼Œæœƒæ¸…æ¥šå‘ŠçŸ¥ç¸½å…±æ–°å¢äº†å¹¾å€‹å¥—ä»¶ã€‚</p>
<p>æ­¤æ™‚å°ˆæ¡ˆä¸­çš„<code>pyproject.toml</code>ä¹Ÿæœƒç™¼ç”Ÿè®ŠåŒ–ï¼š</p>
<pre><code>...
[tool.poetry.dependencies]
python = "^3.8"
Flask = "^2.1.1"  # æ–°å¢éƒ¨åˆ†

[tool.poetry.dev-dependencies]

[build-system]
...
</code></pre>
<p>é€™è£¡è¦èªªæ˜ï¼Œå®‰è£ Flaskï¼Œå‰‡<code>pyproject.toml</code>å°±åªæœƒæ–°å¢è¨˜è¼‰<code>Flask = "^2.1.1"</code>é€™å€‹ <strong>top-level</strong> çš„ package é …ç›®ï¼Œå…¶é¤˜çš„ä¾è³´å¥—ä»¶<strong>ä¸æœƒ</strong>ç›´æ¥è¨˜éŒ„åœ¨<code>toml</code>æª”ä¸­ã€‚</p>
<p>æˆ‘è¦ºå¾—é€™æ˜¯ä¸€å¤§å„ªé»ï¼Œæ–¹ä¾¿å€åˆ†å“ªäº›æ˜¯ä½ <strong>ä¸»å‹•å®‰è£</strong>çš„ä¸»è¦å¥—ä»¶ï¼Œè€Œå“ªäº›åˆæ˜¯åŸºæ–¼å¥—ä»¶çš„ä¾è³´é—œä¿‚è€Œä¸€ä½µå®‰è£çš„ä¾è³´å¥—ä»¶ã€‚</p>
<h3 id="poetrylock-èˆ‡æ›´æ–°é †åº"><a class="header" href="#poetrylock-èˆ‡æ›´æ–°é †åº">poetry.lock èˆ‡æ›´æ–°é †åº</a></h3>
<p>é™¤äº†æ›´æ–°<code>pyproject.toml</code>ï¼Œæ­¤æ™‚å°ˆæ¡ˆä¸­é‚„æœƒæ–°å¢ä¸€å€‹æª”æ¡ˆï¼Œåç‚º<code>poetry.lock</code>ï¼Œå®ƒå¯¦éš›ä¸Šå°±ç›¸ç•¶æ–¼ pip çš„<code>requirements.txt</code>ï¼Œè©³ç´°è¨˜è¼‰äº†æ‰€æœ‰å®‰è£çš„å¥—ä»¶èˆ‡ç‰ˆæœ¬ã€‚</p>
<p>ç•¶ä½ ä½¿ç”¨<code>poetry add</code>æŒ‡ä»¤æ™‚ï¼ŒPoetry æœƒ<strong>è‡ªå‹•ä¾åº</strong>å¹«ä½ åšå®Œé€™ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>æ›´æ–°<code>pyproject.toml</code>ã€‚</li>
<li>ä¾ç…§<code>pyproject.toml</code>çš„å…§å®¹ï¼Œæ›´æ–°<code>poetry.lock</code>ã€‚</li>
<li>ä¾ç…§<code>poetry.lock</code>çš„å…§å®¹ï¼Œæ›´æ–°è™›æ“¬ç’°å¢ƒã€‚</li>
</ol>
<p>ç”±æ­¤å¯è¦‹ï¼Œ<code>poetry.lock</code>çš„å…§å®¹æ˜¯å–æ±ºæ–¼<code>pyproject.toml</code>ï¼Œä½†å…©è€…ä¸¦ä¸æœƒè‡ªå·±é€£å‹•ï¼Œä¸€å®šè¦åŸºæ–¼ç‰¹å®šæŒ‡ä»¤æ‰æœƒé€²è¡ŒåŒæ­¥èˆ‡æ›´æ–°ï¼Œ<code>poetry add</code>å°±æ˜¯ä¸€å€‹å…¸å‹æ¡ˆä¾‹ã€‚</p>
<p>æ­¤æ™‚å°ˆæ¡ˆç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p>
<pre><code>poetry-demo
â”œâ”€â”€ poetry.lock
â””â”€â”€ pyproject.toml

0 directories, 2 files
</code></pre>
<h3 id="æ›´æ–°-poetrylock"><a class="header" href="#æ›´æ–°-poetrylock">æ›´æ–° poetry.lock</a></h3>
<p>ç•¶ä½ è‡ªè¡Œä¿®æ”¹äº†<code>pyproject.toml</code>å…§å®¹ï¼Œæ¯”å¦‚è®Šæ›´ç‰¹å®šå¥—ä»¶çš„ç‰ˆæœ¬ï¼ˆé€™æ˜¯æœ‰å¯èƒ½çš„ï¼Œå°¤å…¶åœ¨æ‰‹å‹•è™•ç†ç‰ˆæœ¬è¡çªçš„æ™‚å€™ï¼‰ï¼Œæ­¤æ™‚<code>poetry.lock</code>çš„å…§å®¹èˆ‡<code>pyproject.toml</code>å‡ºç¾äº†ã€Œ<strong>è„«é‰¤</strong>ã€ï¼Œå¿…é ˆè®“å®ƒä¾ç…§æ–°çš„<code>pyproject.toml</code>å…§å®¹æ›´æ–°ã€åŒæ­¥ï¼Œä½¿ç”¨æŒ‡ä»¤ï¼š</p>
<pre><code>poetry lock
</code></pre>
<p>å¦‚æ­¤ä¸€ä¾†ï¼Œæ‰èƒ½ç¢ºä¿æ‰‹å‹•ä¿®æ”¹çš„å…§å®¹ï¼Œä¹Ÿæ›´æ–°åˆ°<code>poetry.lock</code>ä¸­ï¼Œç•¢ç«Ÿè™›æ“¬ç’°å¢ƒå¦‚æœè¦é‡æ–°å»ºç«‹ï¼Œæ˜¯åŸºæ–¼<code>poetry.lock</code>çš„å…§å®¹ä¾†å®‰è£å¥—ä»¶ï¼Œè€Œé<code>pyproject.toml</code>ã€‚</p>
<p>é‚„æ˜¯é‚£å¥è©±ï¼š<code>poetry.lock</code>ç›¸ç•¶æ–¼ Poetry çš„<code>requirements.txt</code>ã€‚</p>
<hr />
<h3 id="å®‰è£å¥—ä»¶è‡³-dev-dependencies"><a class="header" href="#å®‰è£å¥—ä»¶è‡³-dev-dependencies">å®‰è£å¥—ä»¶è‡³ dev-dependencies</a></h3>
<p>æœ‰äº›å¥—ä»¶ï¼Œæ¯”å¦‚<code>pytest</code>ã€<code>flake8</code>ç­‰ç­‰ï¼Œ<strong>åªæœƒåœ¨é–‹ç™¼ç’°å¢ƒä¸­ä½¿ç”¨</strong>ï¼Œç”¢å“çš„<strong>éƒ¨ç½²ç’°å¢ƒ</strong>ä¸¦ä¸éœ€è¦ã€‚</p>
<p>Poetry å…è¨±ä½ <strong>å€åˆ†</strong>é€™å…©è€…ï¼Œå°‡ä¸Šè¿°çš„å¥—ä»¶å®‰è£è‡³<code>dev-dependencies</code>å€å¡Šï¼Œæ–¹ä¾¿è®“ä½ <strong>è¼•é¬†å»ºç«‹ä¸€ä»½ã€Œä¸åŒ…å«ã€<code>dev-dependencies</code>é–‹ç™¼å¥—ä»¶çš„å®‰è£æ¸…å–®</strong>ã€‚</p>
<p>åœ¨æ­¤ä»¥ Black ç‚ºä¾‹ï¼Œå®‰è£æ–¹å¼å¦‚ä¸‹ï¼š</p>
<pre><code>poetry add black -D
</code></pre>
<p>æˆ–</p>
<pre><code>poetry add black --dev
</code></pre>
<p>çµæœçš„å€åˆ¥é¡¯ç¤ºåœ¨<code>pyproject.toml</code>è£¡ï¼š</p>
<pre><code>...
[tool.poetry.dependencies]
python = "^3.8"
Flask = "^2.1.1"

[tool.poetry.dev-dependencies]
black = "^22.3.0"
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°<code>black</code>è¢«åˆ—åœ¨ä¸åŒå€å¡Šï¼š<code>tool.poetry.dev-dependencies</code>ã€‚</p>
<h3 id="å¼·çƒˆå»ºè­°å–„ç”¨-dev-dependencies"><a class="header" href="#å¼·çƒˆå»ºè­°å–„ç”¨-dev-dependencies">å¼·çƒˆå»ºè­°ï¼šå–„ç”¨ dev-dependencies</a></h3>
<p>å–„ç”¨<code>-D</code>åƒæ•¸ï¼Œæ˜ç¢ºå€åˆ†<strong>é–‹ç™¼ç’°å¢ƒå°ˆç”¨</strong>çš„å¥—ä»¶ï¼Œæˆ‘èªç‚º<strong>éå¸¸å¿…è¦</strong>ã€‚</p>
<p>é¦–å…ˆï¼Œé€™äº›å¥—ä»¶å¸¸å¸¸å±¬æ–¼ã€Œ<strong>æª¢æ¸¬å‹</strong>ã€å·¥å…·ï¼Œç›¸é—œçš„<strong>ä¾è³´å¥—ä»¶</strong>è‘—å¯¦ä¸å°‘ï¼æ¯”å¦‚<code>flake8</code>ï¼Œå®ƒä¾è³´äº†<code>pycodestyle</code>ã€<code>pyflakes</code>ã€<code>mccabe</code>ç­‰ç­‰ï¼Œé‚„æœ‰<code>black</code>ã€<code>pre-commit</code>ï¼Œä¾è³´å¥—ä»¶æ•¸é‡ä¹Ÿéƒ½å¾ˆå¯è§€ã€‚</p>
<p>å…¶æ¬¡ï¼Œæ—¢ç„¶å®ƒå€‘éƒ½åªåœ¨é–‹ç™¼éšæ®µæ‰éœ€è¦ï¼Œå‰‡å®Œå…¨å¯ä»¥å¾éƒ¨ç½²ç’°å¢ƒä¸­<strong>ç¼ºå¸­</strong>ã€‚å¦‚æœä¸åˆ†é’ç´…çš‚ç™½ä¸€å¾‹å®‰è£åˆ°<code>dependencies</code>å€å¡Šï¼Œéƒ¨ç½²ç’°å¢ƒå®¹æ˜“é¡¯å¾—éæ–¼<strong>è‡ƒè…«</strong>ã€‚</p>
<p>å¸¸è¦‹çš„<code>dev-dependencies</code>å€å¡Šé …ç›®ï¼Œä¾‹ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code>[tool.poetry.dev-dependencies]
flake8 = "4.0.1"
yapf = "0.32.0"
pytest = "7.1.2"
pytest-django = "4.5.2"
pytest-cov = "3.0.0"
pytest-env = "0.6.2"
pytest-sugar = "0.9.4"
pre-commit = "2.20.0"
</code></pre>
<hr />
<h2 id="åˆ—å‡ºå…¨éƒ¨å¥—ä»¶æ¸…å–®"><a class="header" href="#åˆ—å‡ºå…¨éƒ¨å¥—ä»¶æ¸…å–®">åˆ—å‡ºå…¨éƒ¨å¥—ä»¶æ¸…å–®</a></h2>
<p>é¡ä¼¼<code>pip list</code>ï¼Œé€™è£¡è¦ä½¿ç”¨<code>poetry show</code>ï¼š</p>
<pre><code>â¯ poetry show
black              22.3.0 The uncompromising code formatter.
click              8.1.3  Composable command line interface toolkit
flask              2.1.2  A simple framework for building complex web applications.
importlib-metadata 4.11.4 Read metadata from Python packages
itsdangerous       2.1.2  Safely pass data to untrusted environments and back.
jinja2             3.1.2  A very fast and expressive template engine.
markupsafe         2.1.1  Safely add untrusted strings to HTML/XML markup.
mypy-extensions    0.4.3  Experimental type system extensions for programs checked...
pathspec           0.9.0  Utility library for gitignore style pattern matching of ...
platformdirs       2.5.2  A small Python module for determining appropriate platfo...
...
</code></pre>
<p>ç‰¹åˆ¥æé†’çš„æ˜¯ï¼Œé€™è£¡çš„æ¸…å–®å…§å®¹<strong>ä¸¦ä¸æ˜¯ä¾†è‡ªæ–¼è™›æ“¬ç’°å¢ƒ</strong>ï¼Œé€™é»å’Œ pip ä¸åŒï¼Œè€Œæ˜¯ä¾†è‡ªæ–¼<code>poetry.lock</code>çš„å…§å®¹ã€‚</p>
<p>ä½ å¯èƒ½æœƒæƒ³ï¼Œä¾†è‡ªæ–¼<code>poetry.lock</code>æˆ–è™›æ“¬ç’°å¢ƒï¼Œæœ‰å·®å—ï¼Ÿå…©è€…ä¸æ˜¯æ‡‰è©²è¦ä¸€è‡´ï¼Ÿ</p>
<p>æ²’éŒ¯ï¼Œç†è«–ä¸Šæ˜¯ï¼Œä½†ä¹Ÿæœ‰ä¸ä¸€è‡´çš„æ™‚å€™ï¼Œæ¯”å¦‚ä½ ä½¿ç”¨äº†<code>pip install</code>æŒ‡ä»¤å®‰è£å¥—ä»¶ï¼Œå°±ä¸æœƒè¨˜è¼‰åœ¨<code>poetry.lock</code>ä¸­ï¼Œé‚£<code>poetry show</code>è‡ªç„¶ä¹Ÿä¸æœƒé¡¯ç¤ºã€‚</p>
<h3 id="æ¨¹ç‹€é¡¯ç¤ºå¥—ä»¶ä¾è³´å±¤ç´š"><a class="header" href="#æ¨¹ç‹€é¡¯ç¤ºå¥—ä»¶ä¾è³´å±¤ç´š">ã€Œæ¨¹ç‹€ã€é¡¯ç¤ºå¥—ä»¶ä¾è³´å±¤ç´š</a></h3>
<p>Poetry æœ€ç‚ºäººæ´¥æ´¥æ¨‚é“çš„å°±æ˜¯å®ƒçš„æ¨¹ç‹€é¡¯ç¤ºâ€”â€”<code>poetry show --tree</code>ã€‚</p>
<pre><code>â¯ poetry show --tree
flask 2.1.1 A simple framework for building complex web applications.
â”œâ”€â”€ click &gt;=8.0
â”‚   â””â”€â”€ colorama *
â”œâ”€â”€ importlib-metadata &gt;=3.6.0
â”‚   â””â”€â”€ zipp &gt;=0.5
â”œâ”€â”€ itsdangerous &gt;=2.0
â”œâ”€â”€ jinja2 &gt;=3.0
â”‚   â””â”€â”€ markupsafe &gt;=2.0
â””â”€â”€ werkzeug &gt;=2.0
black 22.3.0 The uncompromising code formatter.
â”œâ”€â”€ click &gt;=8.0.0
â”‚   â””â”€â”€ colorama *
â”œâ”€â”€ mypy-extensions &gt;=0.4.3
â”œâ”€â”€ pathspec &gt;=0.9.0
â”œâ”€â”€ platformdirs &gt;=2
â”œâ”€â”€ tomli &gt;=1.1.0
â””â”€â”€ typing-extensions &gt;=3.10.0.0
</code></pre>
<p>è®“ä¸»è¦å¥—ä»¶èˆ‡å…¶ä¾è³´å¥—ä»¶çš„<strong>é—œä¿‚èˆ‡å±¤æ¬¡ï¼Œä¸€ç›®ç­ç„¶</strong>ã€‚</p>
<p>è€Œä¸”å¾ˆè²¼å¿ƒçš„æ˜¯ï¼Œå®ƒä¹Ÿå¯ä»¥**åªé¡¯ç¤ºã€ŒæŒ‡å®šå¥—ä»¶ã€**çš„ä¾è³´å±¤ç´šï¼Œä»¥<code>celery</code>ç‚ºä¾‹ï¼š</p>
<pre><code>â¯ poetry show celery --tree
celery 4.4.0 Distributed Task Queue.
â”œâ”€â”€ billiard &gt;=3.6.1,&lt;4.0
â”œâ”€â”€ kombu &gt;=4.6.7,&lt;4.7
â”‚   â”œâ”€â”€ amqp &gt;=2.6.0,&lt;2.7
â”‚   â”‚   â””â”€â”€ vine &gt;=1.1.3,&lt;5.0.0a1
â”‚   â””â”€â”€ importlib-metadata &gt;=0.18
â”‚       â”œâ”€â”€ typing-extensions &gt;=3.6.4
â”‚       â””â”€â”€ zipp &gt;=0.5
â”œâ”€â”€ pytz &gt;0.0-dev
â””â”€â”€ vine 1.3.0
</code></pre>
<hr />
<h2 id="poetry-ç§»é™¤å¥—ä»¶"><a class="header" href="#poetry-ç§»é™¤å¥—ä»¶">Poetry ç§»é™¤å¥—ä»¶</a></h2>
<p>ä½¿ç”¨<code>poetry remove</code>æŒ‡ä»¤ã€‚å’Œ<code>poetry add</code>ä¸€æ¨£ï¼Œå¯ä»¥åŠ ä¸Š<code>-D</code>åƒæ•¸ä¾†ç§»é™¤ç½®æ–¼é–‹ç™¼å€çš„å¥—ä»¶ã€‚</p>
<p>è€Œç§»é™¤å¥—ä»¶æ™‚çš„ã€Œ<strong>ä¾è³´è§£æï¼ˆç›¸ä¾æ€§ç®¡ç†ï¼‰</strong>ã€èƒ½åŠ›ï¼Œæ­£æ˜¯ Poetry é å„ªæ–¼ pip çš„ä¸»è¦ç’°ç¯€ï¼Œå› ç‚º pip æ²’æœ‰å˜›ï¼ä¹Ÿæ˜¯æˆ‘æè­°æ”¹ç”¨ Poetry çš„é—œéµç†ç”±â€”â€”<strong>ç‚ºäº†é †åˆ©ç§»é™¤å¥—ä»¶</strong>ã€‚</p>
<p>å‰é¢å·²ç¶“æéï¼Œpip çš„<code>pip uninstall</code>åªæœƒç§»é™¤ä½ æ‰€æŒ‡å®šçš„å¥—ä»¶ï¼Œè€Œä¸æœƒé€£åŒä¾è³´å¥—ä»¶ä¸€èµ·ç§»é™¤ã€‚</p>
<p>é€™æ˜¯åŸºæ–¼å®‰å…¨è€ƒé‡ï¼Œå› ç‚º pip æ²’æœ‰ã€Œä¾è³´è§£æã€åŠŸèƒ½ã€‚å¦‚æœè²¿ç„¶ç§»é™¤æ‰€æœ‰ã€Œå®‰è£æ™‚ä¸€ä½µå®‰è£ã€çš„ä¾è³´å¥—ä»¶ï¼Œå¯èƒ½æœƒé€ æˆå·¨å¤§ç½é›£ï¼Œè®“åˆ¥çš„å¥—ä»¶å¤±å»æ•ˆç”¨ã€‚</p>
<p>å‰é¢ä¹Ÿèˆ‰äº† Flask å’Œ Black éƒ½å…±åŒä¾è³´<code>click</code>é€™å€‹å¥—ä»¶çš„ä¾‹å­ï¼Œåœ¨æ‰‹å‹•ç§»é™¤å¥—ä»¶çš„æƒ…æ³ä¸‹ï¼Œä½ å¯èƒ½æœªæ›¾æ³¨æ„ Black ä¹Ÿä¾è³´äº†<code>click</code>ï¼Œçµæœç‚ºäº†ã€Œå¾¹åº•ç§»é™¤ã€Flask çš„æ‰€æœ‰ç›¸é—œå¥—ä»¶ï¼Œä¸å°å¿ƒæŠŠ<code>click</code>ä¹Ÿç§»é™¤æ‰äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œä½¿ç”¨ pip æ™‚ï¼Œæˆ‘å€‘é®®å°‘æœƒå»ç§»é™¤å·²ç¶“ä¸å†ä½¿ç”¨çš„å¥—ä»¶ã€‚ç•¢ç«Ÿ<strong>ä¾è³´é—œä¿‚éŒ¯ç¶œè¤‡é›œ</strong>ï¼Œç§»é™¤å¥—ä»¶å¯èƒ½é€ æˆè¨±å¤šã€Œ<strong>å‰¯ä½œç”¨</strong>ã€ï¼Œå¯¦åœ¨æ˜¯å¤ªéº»ç…©äº†ã€‚</p>
<h3 id="poetry-removeçš„ä¾è³´è§£æ"><a class="header" href="#poetry-removeçš„ä¾è³´è§£æ"><code>poetry remove</code>çš„ä¾è³´è§£æ</a></h3>
<p>å¥½ï¼Œè§£é‡‹äº†å¾ˆå¤šï¼Œæ¥ä¸‹ä¾†å°±æ˜¯ Poetry çš„è¡¨æ¼”äº†ï¼Œå®ƒæœƒå¹«ä½ è™•ç†é€™äº›æ£˜æ‰‹çš„ã€Œå¥—ä»¶ç›¸ä¾æ€§ã€é›£é¡Œï¼Œè®“ä½ è¼•é¬†ç§»é™¤ Flask è€Œä¸å½±éŸ¿ Blackï¼š</p>
<p><a href="https://i.imgur.com/79TycuL.png"><img src="https://i.imgur.com/79TycuL.png" alt="poetry remove flask" /></a>poetry remove flask</p>
<p>å¯ä»¥å°æ¯”ä¸Šé¢å®‰è£ Flask æ™‚çš„æˆªåœ–ï¼Œé‚£æ™‚ç¸½å…±å®‰è£äº† 8 å€‹å¥—ä»¶ï¼Œä½†ç¾åœ¨ç§»é™¤çš„å»åªæœ‰ 7 å€‹â€”â€”æ²’éŒ¯ï¼Œå› ç‚ºæœ‰ä¾è³´è§£æï¼Œ<strong>Poetry çŸ¥é“ Black é‚„éœ€è¦</strong><code>click</code>ï¼æ‰€ä»¥ä¸èƒ½ç§»é™¤ï¼š</p>
<pre><code>â¯ poetry show --tree
black 22.3.0 The uncompromising code formatter.
â”œâ”€â”€ click &gt;=8.0.0
â”‚   â””â”€â”€ colorama *
â”œâ”€â”€ mypy-extensions &gt;=0.4.3
â”œâ”€â”€ pathspec &gt;=0.9.0
â”œâ”€â”€ platformdirs &gt;=2
â”œâ”€â”€ tomli &gt;=1.1.0
â””â”€â”€ typing-extensions &gt;=3.10.0.0
</code></pre>
<p>ä¸€å€‹å¥—ä»¶ç›´åˆ°ç’°å¢ƒä¸­çš„<strong>å…¶é¤˜å¥—ä»¶éƒ½ä¸å†ä¾è³´å®ƒ</strong>ï¼ŒPoetry æ‰æœƒå®‰å¿ƒè®“å®ƒè¢«ç§»é™¤ã€‚</p>
<hr />
<h2 id="è¼¸å‡º-poetry-è™›æ“¬ç’°å¢ƒçš„-requirementstxt"><a class="header" href="#è¼¸å‡º-poetry-è™›æ“¬ç’°å¢ƒçš„-requirementstxt">è¼¸å‡º Poetry è™›æ“¬ç’°å¢ƒçš„ requirements.txt</a></h2>
<p>ç†è«–ä¸Šï¼Œå…¨é¢æ”¹ç”¨ Poetry å¾Œï¼Œå°ˆæ¡ˆä¸­æ˜¯ä¸éœ€è¦å­˜åœ¨<code>requirements.txt</code>ï¼Œå› ç‚ºå®ƒçš„è§’è‰²å·²ç¶“å®Œå…¨è¢«<code>poetry.lock</code>æ‰€å–ä»£ã€‚</p>
<p>ä½†äº‹å¯¦æ˜¯ï¼Œä½ å¯èƒ½<strong>é‚„æ˜¯éœ€è¦å®ƒ</strong>ï¼Œç”šè‡³å¸Œæœ›å®ƒéš¨è‘—<code>poetry.lock</code>çš„å…§å®¹æ›´æ–°ï¼è‡³å°‘å°æˆ‘è€Œè¨€å°±æ˜¯å¦‚æ­¤ï¼Œæˆ‘åœ¨ Docker éƒ¨ç½²ç’°å¢ƒä¸­ä¸¦ä¸ä½¿ç”¨ Poetryï¼Œæ‰€ä»¥æˆ‘éœ€è¦ä¸€ä»½å®Œå…¨ç­‰åƒ¹æ–¼<code>poetry.lock</code>çš„<code>requirements.txt</code>ï¼Œç”¨æ–¼ Docker éƒ¨ç½²ã€‚</p>
<p>ä½ å¯èƒ½æƒ³èªªï¼Œé‚£æˆ‘å°±åœ¨ Poetry çš„è™›æ“¬ç’°å¢ƒä¸‹ï¼Œä½¿ç”¨ä»¥å¾€ç†Ÿæ‚‰çš„æŒ‡ä»¤<code>pip freeze &gt; requirements.txt</code>ä¾†ç”¢ç”Ÿä¸€ä»½å°±å¯ä»¥äº†å§ï¼Ÿæˆ‘æœ¬ä¾†ä¹Ÿæ˜¯é€™éº¼æƒ³ï¼Œä½†å¯¦éš›çš„ç”¢å‡ºå»æ˜¯å¦‚æ­¤ï¼šï¼ˆæé†’ï¼šç›®å‰ poetry-demo å°ˆæ¡ˆä¸­<strong>åƒ…å‰©ä¸‹ Black å’Œå®ƒçš„ä¾è³´å¥—ä»¶</strong>ï¼‰</p>
<pre><code>black @ file:///Users/kyo/Library/Caches/pypoetry/artifacts/11/4c/fc/cd6d885e9f5be135b161e365b11312cff5920d7574c8446833d7a9b1a3/black-22.3.0-cp38-cp38-macosx_10_9_x86_64.whl
click @ file:///Users/kyo/Library/Caches/pypoetry/artifacts/f0/23/09/b13d61d1fa8b3cd7c26f67505638d55002e7105849de4c4432c28e1c0d/click-8.1.2-py3-none-any.whl
mypy-extensions @ file:///Users/kyo/Library/Caches/pypoetry/artifacts/b6/a0/b0/a5dc9acd6fd12aba308634f21bb7cf0571448f20848797d7ecb327aa12/mypy_extensions-0.4.3-py2.py3-none-any.whl
...
</code></pre>
<p>é€™å‘ˆç¾å¥½åƒä¸æ˜¯æˆ‘å€‘ä»¥å‰ç†Ÿæ‚‰çš„é‚£æ¨£ï¼š</p>
<pre><code>black==22.3.0
click==8.1.2
mypy_extensions==0.4.3
...
</code></pre>
<p>æ²’éŒ¯ï¼Œåªè¦æ˜¯ä½¿ç”¨<code>poetry add</code>å®‰è£çš„å¥—ä»¶ï¼Œåœ¨<code>pip freeze</code>å°±æœƒè®Šæˆé€™æ¨£ã€‚æ­¤æ™‚æƒ³è¼¸å‡ºé¡ä¼¼<code>requirements.txt</code>çš„æ ¼å¼ï¼Œéœ€è¦ä½¿ç”¨<code>poetry export</code>ã€‚</p>
<p>é è¨­çš„è¼¸å‡ºçµæœæœƒæœ‰ hash å€¼ï¼Œå¾ˆä¹¾æ“¾é–±è®€ã€‚ä¸æƒ³ç´å…¥ hash å‰‡è¦<strong>åŠ ä¸Šåƒæ•¸</strong>å»é™¤ã€‚<strong>ä»¥ä¸‹å°±æ˜¯æˆ‘å›ºå®šç”¨ä¾†è¼¸å‡º<code>requirements.txt</code>çš„æŒ‡ä»¤èˆ‡åƒæ•¸ï¼š</strong></p>
<pre><code>poetry export -f requirements.txt -o requirements.txt --without-hashes
</code></pre>
<p><code>2022/08/24</code>è£œå……ï¼šç¶²å‹æé†’ï¼Œ<strong>hash æœ‰å…¶åƒ¹å€¼ï¼Œä¸¦å»ºè­°ä¿ç•™</strong>ï¼Œè©³è¦‹<a href="https://github.com/kyomind/blog-reply/issues/5#issuecomment-1195904820">ç•™è¨€å€</a>ã€‚</p>
<p>æˆ‘å€‘å†çœ‹ä¸€ä¸‹è¼¸å‡ºçµæœï¼Œé›–ç„¶ä¸ç›¡ç›¸åŒï¼Œä½†ä¹Ÿç›¸å»ä¸é äº†â€¦â€¦å—ï¼Ÿç­‰ç­‰ï¼Œæ€éº¼æ˜¯ç©ºç™½ï¼Ÿ</p>
<h3 id="è¼¸å‡º-dev-dependencies"><a class="header" href="#è¼¸å‡º-dev-dependencies">è¼¸å‡º dev-dependencies</a></h3>
<p>å› ç‚º<code>poetry export</code><strong>é è¨­</strong>åªæœƒè¼¸å‡º<code>toml</code>ä¸­çš„<code>[tool.poetry.dependencies]</code>å€å¡Šçš„å¥—ä»¶ï¼é‚„è¨˜å¾—ä¸Šé¢æˆ‘å€‘æŠŠ Black å®‰è£åˆ°<code>[tool.poetry.dev-dependencies]</code>äº†å—ï¼Ÿ</p>
<p>é¡¯ç„¶ Poetry èªç‚ºä½  export åŸºæœ¬ä¸Šå°±ç‚ºäº†éƒ¨ç½²ï¼Œä¸¦ä¸éœ€è¦é–‹ç™¼å€çš„å¥—ä»¶ã€‚</p>
<p>é€™å€’æ˜¯æ²’éŒ¯ï¼Œä¸éåŸºæ–¼æ¼”ç¤ºéœ€æ±‚ï¼Œæˆ‘å€‘å¿…é ˆè¼¸å‡º<code>[tool.poetry.dev-dependencies]</code>çš„å¥—ä»¶ï¼Œæ‰èƒ½çœ‹åˆ° Blackã€‚</p>
<p>åŠ ä¸Š<code>--dev</code>åƒæ•¸å³å¯ï¼š</p>
<pre><code>poetry export -f requirements.txt -o requirements.txt --without-hashes --dev
</code></pre>
<p>è¼¸å‡ºçš„<code>requirements.txt</code>å…§å®¹ï¼š</p>
<pre><code>black==22.3.0; python_full_version &gt;= "3.6.2"
click==8.1.2; python_version &gt;= "3.7" and python_full_version &gt;= "3.6.2"
colorama==0.4.4; python_version &gt;= "3.7" and python_full_version &gt;= "3.6.2" and platform_system == "Windows"
...
</code></pre>
<p>é›–ç„¶é•·å¾—æœ‰é»ä¸ä¸€æ¨£ï¼Œä½†é€™å€‹æª”æ¡ˆç¢ºå¯¦æ˜¯å¯ä»¥<code>pip install</code>çš„ã€‚</p>
<p>å¾é€™è£¡ä¹Ÿå¯ä»¥çœ‹å‡ºå…ˆå‰ä¸€å†æåŠã€Œ<strong>å€åˆ†é–‹ç™¼ã€éƒ¨ç½²å¥—ä»¶</strong>ã€çš„åƒ¹å€¼â€”â€”å¤§éƒ¨åˆ†æ™‚å€™æˆ‘å€‘ä¸¦ä¸éœ€è¦è¼¸å‡ºé–‹ç™¼ç”¨å¥—ä»¶ã€‚</p>
<p><code>poetry export</code>æ‰€æœ‰åƒæ•¸ç”¨æ³•èˆ‡èªªæ˜ï¼Œè«‹åƒè€ƒ<a href="https://python-poetry.org/docs/cli/#export">æ–‡ä»¶</a>ã€‚</p>
<p>æ­¤æ™‚å°ˆæ¡ˆç›®éŒ„çµæ§‹å¦‚ä¸‹ï¼š</p>
<pre><code>poetry-demo
â”œâ”€â”€ poetry.lock
â”œâ”€â”€ pyproject.toml
â””â”€â”€ requirements.txt

0 directories, 3 files
</code></pre>
<hr />
<h2 id="poetry-å¸¸ç”¨æŒ‡ä»¤æ¸…å–®"><a class="header" href="#poetry-å¸¸ç”¨æŒ‡ä»¤æ¸…å–®">Poetry å¸¸ç”¨æŒ‡ä»¤æ¸…å–®</a></h2>
<p>ç®—ä¾†ç®—å»ï¼ŒPoetry çš„å¸¸ç”¨æŒ‡ä»¤ä¸»è¦æœ‰ä¸‹é¢å¹¾å€‹ï¼š</p>
<ul>
<li><code>poetry add</code></li>
<li><code>poetry remove</code></li>
<li><code>poetry export</code></li>
<li><code>poetry env use</code></li>
<li><code>poetry shell</code></li>
<li><code>poetry show</code></li>
<li><code>poetry init</code></li>
<li><code>poetry install</code></li>
</ul>
<p>å…¶ä¸­ä¸€åŠï¼Œå–®ä¸€å°ˆæ¡ˆå¯èƒ½åªæœƒç”¨å€‹ä¸€å…©æ¬¡è€Œå·²ï¼Œæ¯”å¦‚<code>init</code>ã€<code>install</code>å’Œ<code>env use</code>ï¼Œå¯¦éš›ä¸Šéœ€è¦å­¸ç¿’çš„æŒ‡ä»¤ä¸¦ä¸å¤šã€‚</p>
<p>é‚£éº¼ï¼Œåªè¦çŸ¥æ›‰é€™äº›æŒ‡ä»¤ï¼Œå°±å¯ä»¥é †åˆ©é‹ç”¨ Poetry äº†å—ï¼Ÿå¯èƒ½æ˜¯ï¼Œä¹Ÿå¯èƒ½å¦ï¼Œæ‰€ä»¥æˆ‘ä¸‹é¢é‚„æœƒå†è£œå…… Poetry çš„å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒèˆ‡æ“ä½œæ–¹å¼ï¼Œè®“ä½ æ¥ç´ Poetry çš„é˜»åŠ›å¯ä»¥é€²ä¸€æ­¥ä¸‹é™ï¼</p>
<hr />
<h2 id="poetry-å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒèˆ‡æ“ä½œ-qa"><a class="header" href="#poetry-å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒèˆ‡æ“ä½œ-qa">Poetry å¸¸è¦‹ä½¿ç”¨æƒ…å¢ƒèˆ‡æ“ä½œ QA</a></h2>
<p>é€™éƒ¨åˆ†æœƒä»¥ã€Œ<strong>ä½¿ç”¨å ´æ™¯</strong>ã€çš„è§’åº¦åˆ‡å…¥ï¼Œä»‹ç´¹ Poetry æ‡‰ç”¨æƒ…å¢ƒèˆ‡æ“ä½œèªªæ˜ï¼Œé‚„åŒ…æ‹¬ä¸€äº›è‡ªå•è‡ªç­”ï¼š</p>
<ol>
<li><a href="https://blog.kyomind.tw/python-poetry/#%E4%B8%80%E3%80%81%E6%96%B0%E5%A2%9E%E5%B0%88%E6%A1%88%E4%B8%A6%E4%BD%BF%E7%94%A8-Poetry">æ–°å¢å°ˆæ¡ˆä¸¦ä½¿ç”¨ Poetry</a></li>
<li><a href="https://blog.kyomind.tw/python-poetry/#%E4%BA%8C%E3%80%81%E7%8F%BE%E6%9C%89%E5%B0%88%E6%A1%88%E6%94%B9%E7%94%A8-Poetry">ç¾æœ‰å°ˆæ¡ˆæ”¹ç”¨ Poetry</a></li>
<li><a href="https://blog.kyomind.tw/python-poetry/#%E4%B8%89%E3%80%81%E5%9C%A8%E5%88%A5%E8%87%BA%E4%B8%BB%E6%A9%9F%E5%9B%9E%E5%BE%A9%E5%B0%88%E6%A1%88%E7%8B%80%E6%85%8B">åœ¨åˆ¥è‡ºä¸»æ©Ÿå›å¾©å°ˆæ¡ˆç‹€æ…‹</a></li>
<li><a href="https://blog.kyomind.tw/python-poetry/#%E5%9B%9B%E3%80%81%E6%88%91%E6%83%B3%E8%A6%81%E9%87%8D%E5%BB%BA%E8%99%9B%E6%93%AC%E7%92%B0%E5%A2%83">æˆ‘æƒ³è¦é‡å»ºè™›æ“¬ç’°å¢ƒ</a></li>
<li><a href="https://blog.kyomind.tw/python-poetry/#%E4%BA%94%E3%80%81%E7%82%BA%E4%BB%80%E9%BA%BC%E6%88%91%E4%B8%8D%E5%9C%A8-Docker-%E7%92%B0%E5%A2%83%E4%B8%AD%E4%BD%BF%E7%94%A8-Poetry%EF%BC%9F">ç‚ºä»€éº¼æˆ‘ä¸åœ¨ Docker ç’°å¢ƒä¸­ä½¿ç”¨ Poetryï¼Ÿ</a></li>
<li><a href="https://blog.kyomind.tw/python-poetry/#%E5%85%AD%E3%80%81%E6%88%91%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B7%B1%E7%BF%92%E6%85%A3%E7%9A%84-virtualenv-%E5%97%8E%EF%BC%9F">æˆ‘å¯ä»¥ä½¿ç”¨è‡ªå·±ç¿’æ…£çš„ virtualenv å—ï¼Ÿ</a></li>
</ol>
<h3 id="ä¸€æ–°å¢å°ˆæ¡ˆä¸¦ä½¿ç”¨-poetry"><a class="header" href="#ä¸€æ–°å¢å°ˆæ¡ˆä¸¦ä½¿ç”¨-poetry">ä¸€ã€æ–°å¢å°ˆæ¡ˆä¸¦ä½¿ç”¨ Poetry</a></h3>
<p>é€™æ˜¯æœ€ç†æƒ³çš„ç‹€æ…‹ï¼Œæ²’æœ‰éå»çš„ã€ŒåŒ…è¢±ã€ï¼Œå¯è¬‚æ˜¯æœ€èƒ½è¼•é¬†æ¡ç”¨ Poetry çš„æƒ…å¢ƒã€‚</p>
<p>ä½¿ç”¨é †åºä¸å¤–ä¹æ˜¯ï¼š</p>
<ol>
<li><code>poetry init</code>ï¼šåˆå§‹åŒ–ï¼Œå»ºç«‹<code>pyproject.toml</code>ã€‚</li>
<li><code>poetry env use python</code>ï¼šå»ºç«‹å°ˆæ¡ˆè™›æ“¬ç’°å¢ƒä¸¦ä½¿ç”¨ã€‚</li>
<li><code>poetry shell</code>ï¼šé€²å…¥å°ˆæ¡ˆä½†è™›æ“¬ç’°å¢ƒé‚„æœªå•Ÿå‹•ï¼Œä»¥é€™å€‹æŒ‡ä»¤å•Ÿå‹•ã€‚å¦‚æœä½¿ç”¨æœ¬æŒ‡ä»¤æ™‚è™›æ“¬ç’°å¢ƒ<strong>å°šæœªå»ºç«‹æˆ–å·²ç§»é™¤</strong>ï¼Œå‰‡æœƒ<strong>ç›´æ¥è‡ªå‹•å¹«ä½ å»ºç«‹è™›æ“¬ç’°å¢ƒ</strong>ä¸¦ä½¿ç”¨ã€‚</li>
<li><code>poetry add</code>ï¼šæ–°å¢å¥—ä»¶ä¸¦å¯«å…¥è™›æ“¬ç’°å¢ƒã€‚å¿…è¦æ™‚ä½¿ç”¨<code>-D</code>åƒæ•¸æ–°å¢è‡³ dev å€å¡Šã€‚</li>
<li><code>poetry remove</code>ï¼šç§»é™¤å¥—ä»¶ï¼Œè‹¥æ˜¯ç§»é™¤ dev å€å¡Šçš„å¥—ä»¶ï¼Œéœ€è¦åŠ ä¸Š<code>-D</code>åƒæ•¸ã€‚</li>
</ol>
<p>é€™éƒ¨åˆ†å’Œå‰é¢å…§å®¹æ²’æœ‰å·®åˆ¥ï¼Œå› ç‚ºå‰é¢å…§å®¹å°±æ˜¯ä»¥å…¨æ–°å°ˆæ¡ˆä½œç‚ºåŸºç¤ã€‚</p>
<h3 id="äºŒç¾æœ‰å°ˆæ¡ˆæ”¹ç”¨-poetry"><a class="header" href="#äºŒç¾æœ‰å°ˆæ¡ˆæ”¹ç”¨-poetry">äºŒã€ç¾æœ‰å°ˆæ¡ˆæ”¹ç”¨ Poetry</a></h3>
<p>æ¥µç‚ºå¸¸è¦‹çš„éœ€æ±‚ï¼Œä½†ä¸¦æ²’æœ‰å¾ˆæ­£å¼çš„åšæ³•ï¼Œå› ç‚ºä¸å­˜åœ¨<code>poetry import</code>ä¹‹é¡çš„æŒ‡ä»¤ã€‚</p>
<p>é¦–å…ˆè¦è€ƒé‡çš„å°±æ˜¯ï¼šè¦æ€éº¼æŠŠ<code>requirements.txt</code>çš„æ‰€æœ‰é …ç›®åŠ åˆ°<code>pyproject.toml</code>ä¸­å‘¢ï¼Ÿç¶“éä¸€ç•ª Googleï¼ŒåŸºæœ¬ä¸Š<a href="https://stackoverflow.com/questions/62764148/how-to-import-requirements-txt-from-an-existing-project-using-poetry">åªèƒ½åœŸæ³•ç…‰é‹¼</a>ï¼š</p>
<pre><code>cat requirements.txt | xargs poetry add
</code></pre>
<p>ç„¶è€Œé€™æ¨£åšæ˜¯æœ‰å¯èƒ½é‡åˆ°ä¸€äº›å•é¡Œçš„ï¼Œå› ç‚º Poetry <strong>å°å¥—ä»¶çš„ç‰ˆæœ¬è¡çªæ¯”è¼ƒæ•æ„Ÿ</strong>ï¼Œæ‰€ä»¥å³ä¾¿ç”¨<code>pip install -r requirements.txt</code>éƒ½èƒ½æ­£å¸¸å®‰è£ï¼Œé€éä¸Šè¿°æŒ‡ä»¤çš„é·ç§»éç¨‹å»ä»æœ‰æ©Ÿæœƒå‡ºç¾éŒ¯èª¤ã€‚</p>
<p>é‚£æ€éº¼è¾¦ï¼Ÿåªèƒ½ç…§è‘—éŒ¯èª¤è¨Šæ¯æ‰‹å‹•ä¿®æ­£<code>requirements.txt</code>ä¸­çš„å¥—ä»¶ç‰ˆæœ¬ã€‚</p>
<p>åªèƒ½èªªé€™å€‹ã€Œ<strong>æ‰‹å‹• import</strong>ã€åšæ³•å¯¦åœ¨æ˜¯ä¸å¾—å·²ï¼Œå› ç‚ºæˆ‘å€‘æœ€æ—©ä»‹ç´¹<code>pyproject.toml</code>æ™‚æœ‰æåˆ°ï¼Œ<code>poetry add</code>åªæœƒåœ¨<code>pyproject.toml</code>ä¸­å¯«å…¥ã€Œä¸»å¥—ä»¶ã€ï¼Œä½†é€™æ¨£çš„ import æ–¹å¼ç›¸ç•¶æ–¼æŠŠ<code>requirements.txt</code>ä¸­çš„<strong>æ‰€æœ‰å¥—ä»¶ï¼Œéƒ½ç•¶ä½œä¸»å¥—ä»¶</strong>ä¾†<code>add</code>äº†ï¼</p>
<p>ç•¢ç«Ÿåœ¨<code>requirements.txt</code>ä¸­<strong>ç„¡å¾å€åˆ†</strong>ä¸»å¥—ä»¶èˆ‡ä¾è³´å¥—ä»¶ï¼Œéƒ½æ˜¯ã€Œä¸€è¦–åŒä»ã€åœ°åˆ—å‡ºã€‚</p>
<p>ä½†å¦‚æ­¤åšæ³•ä¹Ÿè®“å°ˆæ¡ˆçš„å¥—ä»¶<strong>å¤±å»ä¸»å¾ä¹‹åˆ†</strong>ï¼Œé€™æ¨£æœƒæœ‰ä»€éº¼<strong>å£è™•</strong>ï¼Ÿæ—¥å¾Œè¦ç§»é™¤ä¸»å¥—ä»¶æ™‚ï¼Œ<strong>éœ€è¦èŠ±é¡å¤–çš„å¿ƒåŠ›å»å€åˆ†ä¸»å¾</strong>ï¼ˆå› ç‚ºåƒ…åƒ…ç§»é™¤ä¾è³´å¥—ä»¶<strong>ä¸¦ä¸æœƒæœ‰ç§»é™¤æ•ˆæœ</strong>ï¼‰ï¼Œæ¯”å¦‚ä½¿ç”¨<code>poetry show --tree</code>å»ä¸€å€‹ä¸€å€‹æª¢è¦–ï¼Œçµ‚ç©¶æ˜¯ä»¶éº»ç…©äº‹ã€‚</p>
<p>å®Œæˆè½‰æ›å¾Œï¼Œç‚ºä¿éšªèµ·è¦‹ï¼Œå»ºè­°é€éæ–°çš„<code>pyproject.toml</code>ä¾†é‡å»ºä¸€å€‹è™›æ“¬ç’°å¢ƒã€‚</p>
<h3 id="ä¸‰åœ¨åˆ¥è‡ºä¸»æ©Ÿä¸Šé‡ç¾å°ˆæ¡ˆçš„-poetry-è™›æ“¬ç’°å¢ƒ"><a class="header" href="#ä¸‰åœ¨åˆ¥è‡ºä¸»æ©Ÿä¸Šé‡ç¾å°ˆæ¡ˆçš„-poetry-è™›æ“¬ç’°å¢ƒ">ä¸‰ã€åœ¨åˆ¥è‡ºä¸»æ©Ÿä¸Šé‡ç¾å°ˆæ¡ˆçš„ Poetry è™›æ“¬ç’°å¢ƒ</a></h3>
<p>é€™ä¹Ÿæ˜¯éå¸¸å¸¸è¦‹çš„éœ€æ±‚ã€‚</p>
<p>ç¬¬ä¸€æ­¥ç•¶ç„¶æ˜¯<code>git clone</code>å°ˆæ¡ˆï¼Œæ­¤æ™‚å°ˆæ¡ˆä¸­å·²ç¶“æœ‰ Poetry æ‰€éœ€çš„å¿…è¦è³‡è¨Šäº†â€”â€”ä¹Ÿå°±æ˜¯<code>pyproject.toml</code>å’Œ<code>poetry.lock</code>ã€‚</p>
<p>ä½ é‚„ç¼ºå°‘çš„åƒ…åƒ…æ˜¯è™›æ“¬ç’°å¢ƒã€‚å¦‚æœæ˜¯å…¨æ–°çš„ä¸»æ©Ÿï¼Œå‰‡é‚„å¾—å…ˆå®‰è£ã€è¨­å®šå¥½ Poetryã€‚</p>
<p>ç¢ºå®š Poetry å¯æ­£å¸¸ä½¿ç”¨å¾Œï¼Œç§»è‡³å°ˆæ¡ˆç›®éŒ„åº•ä¸‹ï¼Œä¾åºåŸ·è¡ŒæŒ‡ä»¤ï¼š</p>
<ol>
<li><code>poetry env use python</code>ï¼šå»ºç«‹å°ˆæ¡ˆè™›æ“¬ç’°å¢ƒä¸¦ä½¿ç”¨ã€‚å¦‚æœä½ æ‡¶å¾—æ‰“é€™éº¼é•·çš„æŒ‡ä»¤ï¼Œç›´æ¥<code>poetry shell</code>ä¹Ÿæ˜¯å¯ä»¥ã€‚æ­¤æ™‚æˆ‘å€‘æœƒæœ‰ä¸€å€‹ã€Œ<strong>ç©ºçš„</strong>ã€è™›æ“¬ç’°å¢ƒã€‚</li>
<li><code>poetry install</code>ï¼šå› ç‚ºæ˜¯èˆŠå°ˆæ¡ˆï¼Œä¸éœ€è¦<code>init</code>ï¼Œæœƒç›´æ¥ä¾<code>poetry.lock</code>è¨˜è¼‰çš„å¥—ä»¶ç‰ˆæœ¬å®‰è£åˆ°è™›æ“¬ç’°å¢ƒä¸­ï¼é¡ä¼¼<code>npm install</code>ã€‚</li>
</ol>
<h3 id="å››æˆ‘æƒ³è¦é‡å»ºè™›æ“¬ç’°å¢ƒ"><a class="header" href="#å››æˆ‘æƒ³è¦é‡å»ºè™›æ“¬ç’°å¢ƒ">å››ã€æˆ‘æƒ³è¦é‡å»ºè™›æ“¬ç’°å¢ƒ</a></h3>
<p>åœ¨ä½¿ç”¨å°ˆæ¡ˆå…§è™›æ“¬ç’°å¢ƒæ–¹æ¡ˆï¼Œä¹Ÿå°±æ˜¯<code>.venv</code>çš„å‰æä¸‹ï¼Œæƒ³è¦åˆªé™¤é€™å€‹è™›æ“¬ç’°å¢ƒä¸¦åŠ ä»¥é‡å»ºï¼Œä¹Ÿä¸éœ€è¦ä½¿ç”¨<code>poetry env remove python</code>æŒ‡ä»¤äº†ï¼Œå› ç‚ºæœƒå‡ºéŒ¯ã€‚</p>
<p>é‚„æœ‰æ›´ç°¡å–®æš´åŠ›çš„æ–¹å¼ï¼Œæ˜¯ä»€éº¼å‘¢ï¼Ÿâ€”â€”ç›´æ¥åˆªé™¤<code>.venv</code>è³‡æ–™å¤¾å³å¯ã€‚</p>
<p>ç„¶å¾Œå†<code>poetry env use python</code>æˆ–<code>poetry shell</code>å»ºä¸€å€‹æ–°çš„å°±å¥½ã€‚</p>
<h3 id="äº”ç‚ºä»€éº¼æˆ‘ä¸åœ¨-docker-ç’°å¢ƒä¸­ä½¿ç”¨-poetry"><a class="header" href="#äº”ç‚ºä»€éº¼æˆ‘ä¸åœ¨-docker-ç’°å¢ƒä¸­ä½¿ç”¨-poetry">äº”ã€ç‚ºä»€éº¼æˆ‘ä¸åœ¨ Docker ç’°å¢ƒä¸­ä½¿ç”¨ Poetryï¼Ÿ</a></h3>
<p>å› ç‚ºå•Ÿå‹•å®¹å™¨å¾Œéœ€è¦å…ˆå®‰è£ Poetry åˆ°å…¨åŸŸï¼Œæˆ–æ‰“åŒ…ä¸€å€‹å¸¶æœ‰ Poetry çš„ imageï¼Œå…©è€…éƒ½æœƒ<strong>å¢åŠ æ–°çš„è€¦åˆèˆ‡ä¾è³´</strong>ï¼Œæˆ‘è¦ºå¾—ä¸¦ä¸å¦¥ç•¶ã€‚</p>
<p>æ‰€å¹¸ Poetry ä¾èˆŠå¯ä»¥è¼¸å‡º<code>requirements.txt</code>ï¼ŒDocker éƒ¨ç½²ç’°å¢ƒå°±ç¹¼çºŒä½¿ç”¨é€™å€‹èˆŠæ–¹æ¡ˆå³å¯ï¼Œè€Œä¸” Poetry æœ¬ä¾†ä¸»è¦å°±æ˜¯ç”¨æ–¼ã€Œé–‹ç™¼ã€æ™‚çš„å¥—ä»¶ç®¡ç†ï¼Œå°éƒ¨ç½²å·®åˆ¥ä¸å¤§ã€‚</p>
<h3 id="å…­æˆ‘å¯ä»¥ä½¿ç”¨è‡ªå·±ç¿’æ…£çš„-virtualenv-å—"><a class="header" href="#å…­æˆ‘å¯ä»¥ä½¿ç”¨è‡ªå·±ç¿’æ…£çš„-virtualenv-å—">å…­ã€æˆ‘å¯ä»¥ä½¿ç”¨è‡ªå·±ç¿’æ…£çš„ virtualenv å—ï¼Ÿ</a></h3>
<p>ç•¶ç„¶å¯ä»¥ã€‚</p>
<p>ä¸éæˆ‘æœ¬ä¾†ä¹Ÿç¹¼çºŒä½¿ç”¨<code>pyenv</code>çš„<code>virtualenv</code>ï¼Œä½†å…©è€…æœ‰æ™‚å€™ä¹Ÿæ˜¯æœƒå°å°æ‰“æ¶ï¼Œå¾Œä¾†é‚„æ˜¯ç´¢æ€§ç”¨ Poetry çš„è™›æ“¬ç’°å¢ƒå°±å¥½ã€‚</p>
<p>ä¸€å€‹å°ˆæ¡ˆå°æ‡‰ä¸€å€‹è™›æ“¬ç’°å¢ƒï¼Œæ‡‰è©²é‚„æ˜¯æ¯”è¼ƒç°¡æ½”çš„åšæ³•ï¼Œæˆ‘çš„è§€å¯Ÿå•¦ï¼ğŸ˜</p>
<hr />
<h2 id="çµèªäº•ç„¶æœ‰åºçš„è¤‡é›œ"><a class="header" href="#çµèªäº•ç„¶æœ‰åºçš„è¤‡é›œ">çµèªï¼šäº•ç„¶æœ‰åºçš„è¤‡é›œ</a></h2>
<p>ç¸½çš„ä¾†èªªï¼ŒPoetry æ˜¯ä¸€æ¬¾å„ªç§€çš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œä½†ä¸¦ä¸åƒ pip é‚£èˆ¬ç°¡å–®ã€å¥½ä¸Šæ‰‹ã€‚</p>
<p>ä½¿ç”¨ Poetry ä¾†ç®¡ç†å°ˆæ¡ˆçš„å¥—ä»¶èˆ‡è™›æ“¬ç’°å¢ƒï¼Œéœ€è¦ä¸€å®šçš„å­¸ç¿’æˆæœ¬ï¼Œä½†å¸¶ä¾†çš„æ•ˆç›Šé‚„æ˜¯ç›¸ç•¶å¯è§€çš„ï¼Œå°¤å…¶åœ¨ä½ å¸Œæœ›èƒ½å¤ ä¹¾æ·¨ä¸”å®‰å¿ƒåœ°ç§»é™¤å¥—ä»¶ä¹‹éš›ï¼Œå¯è¬‚è«å®ƒè«å±¬ã€‚</p>
<p>æ‰€ä»¥ï¼Œåˆ¥å†çŒ¶è±«ï¼Œå¾ä»Šå¤©èµ·ï¼ŒåŠ å…¥ Poetry çš„è¡Œåˆ—å§ï¼</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../python/import-concept.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../python/Poetryå®Œå…¨å…¥é–€æŒ‡å—.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../python/import-concept.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../python/Poetryå®Œå…¨å…¥é–€æŒ‡å—.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
