練習
================================================

.. toctree::
   :hidden:
   :maxdepth: 4


課後練習
-------------------------------

編程題
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. `***` 在Linux的字符（命令行）模式下，編寫貪吃蛇小遊戲應用程序。

問答題
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1. `*` 字符設備的特點是什麼？
2. `*` 塊設備的特點是什麼？
3. `*` 網絡設備的特點是什麼？
4. `*` 阻塞I/O、非阻塞I/O、多路複用 I/O、信號驅動 I/O、異步I/O這幾種I/O方式的特點和區別是？
5. `*` IO數據傳輸有哪幾種？各自的特徵是什麼？
6. `*` 描述磁盤I/O操作時間組成。其中的瓶頸是哪部分？
7. `**` RISC-V中的異常，中斷的區別是啥？有幾類中斷？每類中斷有哪些具體的常見中斷實例？PLIC/CLINT的具體功能是啥？中斷可否從M態響應委託給S態響應？S態響應可否委託給U態響應？與中斷相關的M態/S態寄存器有哪些，這些寄存器的功能是啥？外設產生一箇中斷後，PLIC/CPU/OS如何協同進行響應處理的？
8. `**` 是否可以把設備抽象為文件？如果可以，那用戶進程對設備發出IO控制命令，如何通過系統調用實現？
9. `**` GPU是外設嗎？GPU與CPU交互和數據傳輸的方式是什麼？（需要查看一下相關GPU工作過程的信息）


實驗練習
-------------------------------

實驗練習包括實踐作業和問答作業兩部分。本次難度： **中** 

實踐作業
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

支持圖形顯示的應用
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

本章雖然講述了virtio-gpu設備驅動，且可以直接進行圖形顯示，但這個設備驅動並沒有加入到操作系統中，使得應用程序無法進行圖形顯示。lab8 的練習要求操作系統支持有彩色圖形顯示的應用，使得我們可以從單調的字符交互界跳入到多彩的圖形界面中。


實驗要求
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
- 實現分支：ch9-lab
- 實驗目錄要求不變
- 在裸機上讓操作系統支持“貪吃蛇”遊戲應用

   需要在操作系統中加入virtio-gpu設備驅動程序；需要實現設備文件 ``/dev/fb0`` 和相關操作，用於應用訪問顯存。

   可以正確執行“貪吃蛇”遊戲應用。


問答作業
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


1. 通過閱讀和運行試驗等分析，你認為在目前的操作系統中，如果運行在用戶態，可以響應哪些中斷？如果運行在內核態，可以響應哪些中斷？請簡要描述分析經過。

2. 對於串口驅動程序，在RustSBI中有具體的實現，請問它與本章講的串口驅動有何異同之處？

3. 對於目前操作系統中的 ``virtio-blk`` 設備驅動程序，存在哪些可以改進的地方來提升性能？

實驗練習的提交報告要求
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


- 簡單總結本次實驗你編程的內容。（控制在5行以內，不要貼代碼）
- 完成問答問題。
- (optional) 你對本次實驗設計及難度/工作量的看法，以及有哪些需要改進的地方，歡迎暢所欲言。
