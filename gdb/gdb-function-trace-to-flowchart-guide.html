<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>å‡½æ•¸è¿½è¹¤è½‰æµç¨‹åœ– - Jason&#x27;s Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason&#x27;s Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="gdbå‡½æ•¸èª¿ç”¨è»Œè·¡åˆ†æèˆ‡æµç¨‹åœ–ç”Ÿæˆå®Œæ•´æŒ‡å—"><a class="header" href="#gdbå‡½æ•¸èª¿ç”¨è»Œè·¡åˆ†æèˆ‡æµç¨‹åœ–ç”Ÿæˆå®Œæ•´æŒ‡å—">GDBå‡½æ•¸èª¿ç”¨è»Œè·¡åˆ†æèˆ‡æµç¨‹åœ–ç”Ÿæˆå®Œæ•´æŒ‡å—</a></h1>
<blockquote>
<p>æœ¬æŒ‡å—ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ GDB è¨˜éŒ„ç¨‹å¼åŸ·è¡Œéç¨‹ä¸­çš„å‡½æ•¸èª¿ç”¨è»Œè·¡ï¼Œä¸¦å°‡å…¶è½‰æ›ç‚ºè¦–è¦ºåŒ–æµç¨‹åœ–ï¼Œé©ç”¨æ–¼ç¨‹å¼åˆ†æã€èª¿è©¦å’Œæ–‡æª”è£½ä½œã€‚</p>
</blockquote>
<h2 id="æ–¹æ³•ä¸€ä½¿ç”¨-gdb-è…³æœ¬è¨˜éŒ„å‡½æ•¸èª¿ç”¨"><a class="header" href="#æ–¹æ³•ä¸€ä½¿ç”¨-gdb-è…³æœ¬è¨˜éŒ„å‡½æ•¸èª¿ç”¨">æ–¹æ³•ä¸€ï¼šä½¿ç”¨ GDB è…³æœ¬è¨˜éŒ„å‡½æ•¸èª¿ç”¨</a></h2>
<h3 id="1-å‰µå»º-gdb-è¿½è¹¤è…³æœ¬"><a class="header" href="#1-å‰µå»º-gdb-è¿½è¹¤è…³æœ¬">1. å‰µå»º GDB è¿½è¹¤è…³æœ¬</a></h3>
<pre><code class="language-bash"># trace_functions.gdb
set logging file function_trace.txt
set logging on

# è¨­ç½®åœ¨æ¯å€‹å‡½æ•¸å…¥å£è™•çš„æ–·é»
define trace_function
    if $argc == 1
        break $arg0
        commands
            silent
            printf "ENTER: %s at %s:%d\n", $arg0, __FILE__, __LINE__
            bt 1
            continue
        end
    end
end

# è¨­ç½®åœ¨å‡½æ•¸é€€å‡ºè™•çš„æ–·é»
define trace_return
    if $argc == 1
        break $arg0
        commands
            silent
            printf "EXIT: %s\n", $arg0
            continue
        end
    end
end

# è¿½è¹¤ç‰¹å®šå‡½æ•¸
trace_function main.main
trace_function your_target_function

# é–‹å§‹åŸ·è¡Œ
run
</code></pre>
<h3 id="2-ä½¿ç”¨è…³æœ¬é‹è¡Œ"><a class="header" href="#2-ä½¿ç”¨è…³æœ¬é‹è¡Œ">2. ä½¿ç”¨è…³æœ¬é‹è¡Œ</a></h3>
<pre><code class="language-bash">gdb -x trace_functions.gdb ./your_program
</code></pre>
<h2 id="æ–¹æ³•äºŒä½¿ç”¨-gdb-python-è…³æœ¬è‡ªå‹•åŒ–"><a class="header" href="#æ–¹æ³•äºŒä½¿ç”¨-gdb-python-è…³æœ¬è‡ªå‹•åŒ–">æ–¹æ³•äºŒï¼šä½¿ç”¨ GDB Python è…³æœ¬è‡ªå‹•åŒ–</a></h2>
<h3 id="1-python-è…³æœ¬è¨˜éŒ„èª¿ç”¨è»Œè·¡"><a class="header" href="#1-python-è…³æœ¬è¨˜éŒ„èª¿ç”¨è»Œè·¡">1. Python è…³æœ¬è¨˜éŒ„èª¿ç”¨è»Œè·¡</a></h3>
<pre><code class="language-python"># function_tracer.py
import gdb
import json
from datetime import datetime

class FunctionTracer:
    def __init__(self):
        self.call_stack = []
        self.function_calls = []
        self.depth = 0
    
    def trace_function_entry(self, function_name):
        timestamp = datetime.now().isoformat()
        call_info = {
            'type': 'enter',
            'function': function_name,
            'depth': self.depth,
            'timestamp': timestamp,
            'stack': list(self.call_stack)
        }
        self.function_calls.append(call_info)
        self.call_stack.append(function_name)
        self.depth += 1
        print(f"{'  ' * (self.depth-1)}â†’ {function_name}")
    
    def trace_function_exit(self, function_name):
        timestamp = datetime.now().isoformat()
        if self.call_stack and self.call_stack[-1] == function_name:
            self.call_stack.pop()
            self.depth -= 1
        
        call_info = {
            'type': 'exit',
            'function': function_name,
            'depth': self.depth,
            'timestamp': timestamp
        }
        self.function_calls.append(call_info)
        print(f"{'  ' * self.depth}â† {function_name}")
    
    def save_trace(self, filename):
        with open(filename, 'w') as f:
            json.dump(self.function_calls, f, indent=2)

# å‰µå»ºå…¨å±€è¿½è¹¤å™¨
tracer = FunctionTracer()

class FunctionBreakpoint(gdb.Breakpoint):
    def __init__(self, function_name, is_entry=True):
        super().__init__(function_name)
        self.function_name = function_name
        self.is_entry = is_entry
    
    def stop(self):
        if self.is_entry:
            tracer.trace_function_entry(self.function_name)
        else:
            tracer.trace_function_exit(self.function_name)
        return False  # ä¸åœæ­¢åŸ·è¡Œ

# è¨­ç½®è¦è¿½è¹¤çš„å‡½æ•¸
functions_to_trace = [
    'main.main',
    'your_target_function',
    'another_function'
]

for func in functions_to_trace:
    FunctionBreakpoint(func, True)

# åŸ·è¡Œå®Œç•¢å¾Œä¿å­˜
def save_and_exit():
    tracer.save_trace('function_trace.json')
    print("Trace saved to function_trace.json")

# è¨»å†Šé€€å‡ºè™•ç†
gdb.events.exited.connect(save_and_exit)
</code></pre>
<h3 id="2-ä½¿ç”¨-python-è…³æœ¬"><a class="header" href="#2-ä½¿ç”¨-python-è…³æœ¬">2. ä½¿ç”¨ Python è…³æœ¬</a></h3>
<pre><code class="language-bash">gdb -x function_tracer.py ./your_program
</code></pre>
<h2 id="æ–¹æ³•ä¸‰ä½¿ç”¨å¤–éƒ¨å·¥å…·--gdb"><a class="header" href="#æ–¹æ³•ä¸‰ä½¿ç”¨å¤–éƒ¨å·¥å…·--gdb">æ–¹æ³•ä¸‰ï¼šä½¿ç”¨å¤–éƒ¨å·¥å…· + GDB</a></h2>
<h3 id="1-ä½¿ç”¨-ltrace-å’Œ-strace-çµåˆ"><a class="header" href="#1-ä½¿ç”¨-ltrace-å’Œ-strace-çµåˆ">1. ä½¿ç”¨ <code>ltrace</code> å’Œ <code>strace</code> çµåˆ</a></h3>
<pre><code class="language-bash"># è¨˜éŒ„å‡½æ•¸èª¿ç”¨
ltrace -f -o function_calls.txt ./your_program

# æˆ–è€…ä½¿ç”¨ strace è¨˜éŒ„ç³»çµ±èª¿ç”¨
strace -f -o system_calls.txt ./your_program
</code></pre>
<h3 id="2-ä½¿ç”¨-perf-è¨˜éŒ„èª¿ç”¨åœ–"><a class="header" href="#2-ä½¿ç”¨-perf-è¨˜éŒ„èª¿ç”¨åœ–">2. ä½¿ç”¨ <code>perf</code> è¨˜éŒ„èª¿ç”¨åœ–</a></h3>
<pre><code class="language-bash"># è¨˜éŒ„èª¿ç”¨åœ–
perf record -g ./your_program
perf report --stdio &gt; call_graph.txt

# ç”Ÿæˆèª¿ç”¨åœ–
perf script | python /usr/share/perf-core/scripts/python/flamegraph.py &gt; flamegraph.svg
</code></pre>
<h2 id="æ–¹æ³•å››è½‰æ›æˆæµç¨‹åœ–"><a class="header" href="#æ–¹æ³•å››è½‰æ›æˆæµç¨‹åœ–">æ–¹æ³•å››ï¼šè½‰æ›æˆæµç¨‹åœ–</a></h2>
<h3 id="1-python-è…³æœ¬è½‰æ›-json-ç‚º-mermaid"><a class="header" href="#1-python-è…³æœ¬è½‰æ›-json-ç‚º-mermaid">1. Python è…³æœ¬è½‰æ› JSON ç‚º Mermaid</a></h3>
<pre><code class="language-python"># json_to_mermaid.py
import json
import sys

def generate_mermaid_flowchart(trace_file):
    with open(trace_file, 'r') as f:
        calls = json.load(f)
    
    mermaid = ["graph TD"]
    
    # æå–å‡½æ•¸èª¿ç”¨é—œä¿‚
    call_stack = []
    edges = set()
    
    for call in calls:
        if call['type'] == 'enter':
            if call_stack:
                parent = call_stack[-1]
                child = call['function']
                edges.add((parent, child))
            call_stack.append(call['function'])
        elif call['type'] == 'exit' and call_stack:
            call_stack.pop()
    
    # ç”Ÿæˆç¯€é»
    functions = set()
    for parent, child in edges:
        functions.add(parent)
        functions.add(child)
    
    # æ¸…ç†å‡½æ•¸åä½œç‚ºç¯€é» ID
    def clean_name(name):
        return name.replace('.', '_').replace(':', '_')
    
    # æ·»åŠ ç¯€é»å®šç¾©
    for func in functions:
        clean_func = clean_name(func)
        mermaid.append(f"    {clean_func}[\"{func}\"]")
    
    # æ·»åŠ é‚Š
    for parent, child in edges:
        clean_parent = clean_name(parent)
        clean_child = clean_name(child)
        mermaid.append(f"    {clean_parent} --&gt; {clean_child}")
    
    return '\n'.join(mermaid)

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: python json_to_mermaid.py function_trace.json")
        sys.exit(1)
    
    mermaid_code = generate_mermaid_flowchart(sys.argv[1])
    
    with open('function_flowchart.mmd', 'w') as f:
        f.write(mermaid_code)
    
    print("Mermaid flowchart saved to function_flowchart.mmd")
    print("\nMermaid code:")
    print(mermaid_code)
</code></pre>
<h3 id="2-è½‰æ›ç‚º-graphviz-dot-æ ¼å¼"><a class="header" href="#2-è½‰æ›ç‚º-graphviz-dot-æ ¼å¼">2. è½‰æ›ç‚º Graphviz DOT æ ¼å¼</a></h3>
<pre><code class="language-python"># json_to_dot.py
import json
import sys

def generate_dot_graph(trace_file):
    with open(trace_file, 'r') as f:
        calls = json.load(f)
    
    dot = ['digraph FunctionCalls {']
    dot.append('    rankdir=TD;')
    dot.append('    node [shape=box];')
    
    call_stack = []
    edges = set()
    
    for call in calls:
        if call['type'] == 'enter':
            if call_stack:
                parent = call_stack[-1]
                child = call['function']
                edges.add((parent, child))
            call_stack.append(call['function'])
        elif call['type'] == 'exit' and call_stack:
            call_stack.pop()
    
    # æ·»åŠ é‚Š
    for parent, child in edges:
        dot.append(f'    "{parent}" -&gt; "{child}";')
    
    dot.append('}')
    return '\n'.join(dot)

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: python json_to_dot.py function_trace.json")
        sys.exit(1)
    
    dot_code = generate_dot_graph(sys.argv[1])
    
    with open('function_graph.dot', 'w') as f:
        f.write(dot_code)
    
    print("DOT graph saved to function_graph.dot")
    print("Generate PNG with: dot -Tpng function_graph.dot -o function_graph.png")
</code></pre>
<h2 id="æ–¹æ³•äº”ä½¿ç”¨-valgrind-callgrind"><a class="header" href="#æ–¹æ³•äº”ä½¿ç”¨-valgrind-callgrind">æ–¹æ³•äº”ï¼šä½¿ç”¨ Valgrind Callgrind</a></h2>
<h3 id="1-ç”Ÿæˆèª¿ç”¨åœ–"><a class="header" href="#1-ç”Ÿæˆèª¿ç”¨åœ–">1. ç”Ÿæˆèª¿ç”¨åœ–</a></h3>
<pre><code class="language-bash"># ä½¿ç”¨ Valgrind ç”Ÿæˆèª¿ç”¨åœ–
valgrind --tool=callgrind ./your_program

# æŸ¥çœ‹èª¿ç”¨åœ–
callgrind_annotate callgrind.out.*

# ç”Ÿæˆå¯è¦–åŒ–èª¿ç”¨åœ–
gprof2dot -f callgrind callgrind.out.* | dot -Tpng -o callgraph.png
</code></pre>
<h2 id="å®Œæ•´å·¥ä½œæµç¨‹"><a class="header" href="#å®Œæ•´å·¥ä½œæµç¨‹">å®Œæ•´å·¥ä½œæµç¨‹</a></h2>
<h3 id="1-è¨˜éŒ„å‡½æ•¸èª¿ç”¨"><a class="header" href="#1-è¨˜éŒ„å‡½æ•¸èª¿ç”¨">1. è¨˜éŒ„å‡½æ•¸èª¿ç”¨</a></h3>
<pre><code class="language-bash"># 1. ç·¨è­¯ç¨‹å¼ï¼ˆä¿ç•™ debug symbolï¼‰
go build -gcflags="-N -l" -o myprogram main.go

# 2. ä½¿ç”¨ GDB Python è…³æœ¬è¨˜éŒ„
gdb -x function_tracer.py ./myprogram

# 3. æˆ–è€…ä½¿ç”¨ç°¡å–®çš„ ltrace
ltrace -f -o calls.txt ./myprogram
</code></pre>
<h3 id="2-è½‰æ›ç‚ºæµç¨‹åœ–"><a class="header" href="#2-è½‰æ›ç‚ºæµç¨‹åœ–">2. è½‰æ›ç‚ºæµç¨‹åœ–</a></h3>
<pre><code class="language-bash"># è½‰æ› JSON ç‚º Mermaid
python json_to_mermaid.py function_trace.json

# æˆ–è½‰æ›ç‚º DOT æ ¼å¼
python json_to_dot.py function_trace.json
dot -Tpng function_graph.dot -o flowchart.png
</code></pre>
<h3 id="3-åœ¨ç·šå¯è¦–åŒ–"><a class="header" href="#3-åœ¨ç·šå¯è¦–åŒ–">3. åœ¨ç·šå¯è¦–åŒ–</a></h3>
<ul>
<li><strong>Mermaid</strong>ï¼šè²¼åˆ° <a href="https://mermaid.live">mermaid.live</a></li>
<li><strong>Graphviz</strong>ï¼šä½¿ç”¨ <a href="https://dreampuf.github.io/GraphvizOnline/">Graphviz Online</a></li>
</ul>
<h2 id="å¯¦ç”¨è…³æœ¬ä¸€éµç”Ÿæˆæµç¨‹åœ–"><a class="header" href="#å¯¦ç”¨è…³æœ¬ä¸€éµç”Ÿæˆæµç¨‹åœ–">å¯¦ç”¨è…³æœ¬ï¼šä¸€éµç”Ÿæˆæµç¨‹åœ–</a></h2>
<pre><code class="language-bash">#!/bin/bash
# generate_flowchart.sh

PROGRAM=$1
if [ -z "$PROGRAM" ]; then
    echo "Usage: $0 &lt;program_path&gt;"
    exit 1
fi

echo "ğŸ” åˆ†æç¨‹å¼: $PROGRAM"

# 1. æª¢æŸ¥ debug symbol
if ! file "$PROGRAM" | grep -q "not stripped"; then
    echo "âŒ ç¨‹å¼æ²’æœ‰ debug symbolï¼Œè«‹é‡æ–°ç·¨è­¯"
    exit 1
fi

# 2. ä½¿ç”¨ ltrace è¨˜éŒ„å‡½æ•¸èª¿ç”¨
echo "ğŸ“Š è¨˜éŒ„å‡½æ•¸èª¿ç”¨..."
timeout 30 ltrace -f -o function_calls.txt "$PROGRAM" 2&gt;/dev/null

# 3. è§£æä¸¦ç”Ÿæˆ DOT æ ¼å¼
echo "ğŸ¨ ç”Ÿæˆæµç¨‹åœ–..."
python3 -c "
import re
calls = []
with open('function_calls.txt', 'r') as f:
    for line in f:
        match = re.search(r'(\w+)\(', line)
        if match:
            calls.append(match.group(1))

# ç”Ÿæˆç°¡å–®çš„èª¿ç”¨é—œä¿‚
with open('flowchart.dot', 'w') as f:
    f.write('digraph G {\\n')
    f.write('  rankdir=TD;\\n')
    for i in range(len(calls)-1):
        f.write(f'  \"{calls[i]}\" -&gt; \"{calls[i+1]}\";\\n')
    f.write('}\\n')
"

# 4. ç”Ÿæˆ PNG
if command -v dot &gt;/dev/null; then
    dot -Tpng flowchart.dot -o flowchart.png
    echo "âœ… æµç¨‹åœ–å·²ç”Ÿæˆ: flowchart.png"
else
    echo "âœ… DOT æª”æ¡ˆå·²ç”Ÿæˆ: flowchart.dot"
    echo "ğŸ“ å®‰è£ graphviz å¾ŒåŸ·è¡Œ: dot -Tpng flowchart.dot -o flowchart.png"
fi
</code></pre>
<h2 id="ç¸½çµ"><a class="header" href="#ç¸½çµ">ç¸½çµ</a></h2>
<p>é›–ç„¶ GDB æœ¬èº«ä¸èƒ½ç›´æ¥ç”Ÿæˆæµç¨‹åœ–ï¼Œä½†å¯ä»¥é€éï¼š</p>
<ol>
<li><strong>è¨˜éŒ„å‡½æ•¸èª¿ç”¨è»Œè·¡</strong> (GDB è…³æœ¬/Python/ltrace)</li>
<li><strong>è§£æèª¿ç”¨é—œä¿‚</strong> (Python è…³æœ¬)</li>
<li><strong>è½‰æ›ç‚ºåœ–å½¢æ ¼å¼</strong> (Mermaid/Graphviz/D3.js)</li>
</ol>
<p>é€™æ¨£çš„çµ„åˆå¯ä»¥æœ‰æ•ˆåœ°å°‡ç¨‹å¼åŸ·è¡Œæµç¨‹å¯è¦–åŒ–ï¼</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../gdb/gdb-tips-complete.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../gdb/program_trace_guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../gdb/gdb-tips-complete.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../gdb/program_trace_guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
