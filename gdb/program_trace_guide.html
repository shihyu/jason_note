<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ç¨‹å¼è¿½è¹¤æŒ‡å— - Jason&#x27;s Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason&#x27;s Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ç¨‹å¼åŸ·è¡Œæµç¨‹è¿½è¹¤èˆ‡è¦–è¦ºåŒ–æŒ‡å—"><a class="header" href="#ç¨‹å¼åŸ·è¡Œæµç¨‹è¿½è¹¤èˆ‡è¦–è¦ºåŒ–æŒ‡å—">ç¨‹å¼åŸ·è¡Œæµç¨‹è¿½è¹¤èˆ‡è¦–è¦ºåŒ–æŒ‡å—</a></h1>
<blockquote>
<p><strong>å°ˆæ¡ˆç‹€æ…‹</strong>: âœ… 95% å®Œæˆï¼ˆæœ€å¾Œæ›´æ–°ï¼š2024-09-29ï¼‰
<strong>ç‰ˆæœ¬</strong>: 1.1.0
<strong>ç’°å¢ƒ</strong>: Linux/Ubuntu æ¸¬è©¦é€šé</p>
</blockquote>
<h2 id="-å¿«é€Ÿé–‹å§‹"><a class="header" href="#-å¿«é€Ÿé–‹å§‹">ğŸ¯ å¿«é€Ÿé–‹å§‹</a></h2>
<pre><code class="language-bash"># å¿«é€Ÿæ¸¬è©¦æ‰€æœ‰åŠŸèƒ½
make quick-start  # éœ€è¦ sudo æ¬Šé™

# æˆ–åˆ†æ­¥åŸ·è¡Œ
make build        # ç·¨è­¯ç¨‹å¼
make trace-all    # åŸ·è¡Œæ‰€æœ‰è¿½è¹¤
make graphs       # ç”¢ç”Ÿè¦–è¦ºåŒ–åœ–è¡¨
</code></pre>
<h2 id="-æœ€æ–°æ”¹é€²-2024-09-29"><a class="header" href="#-æœ€æ–°æ”¹é€²-2024-09-29">ğŸ“Š æœ€æ–°æ”¹é€² (2024-09-29)</a></h2>
<h3 id="-å·²ä¿®æ­£å•é¡Œ"><a class="header" href="#-å·²ä¿®æ­£å•é¡Œ">âœ… å·²ä¿®æ­£å•é¡Œ</a></h3>
<ul>
<li><strong>Makefile é¡è‰²é¡¯ç¤º</strong>ï¼šæ‰€æœ‰ <code>echo</code> æ”¹ç‚º <code>printf</code> æ”¯æ´ ANSI é¡è‰²ç¢¼</li>
<li><strong>GDB logging è¡çª</strong>ï¼šä¿®æ­£ <code>test.log</code> èˆ‡ <code>gdb_trace.log</code> æª”åè¡çª</li>
<li><strong>Heredoc èªæ³•éŒ¯èª¤</strong>ï¼šæ”¹ç”¨æª”æ¡ˆè¤‡è£½æ–¹å¼å»ºç«‹æ¸¬è©¦ç¨‹å¼</li>
<li><strong>é‡è¤‡ç›®æ¨™è­¦å‘Š</strong>ï¼šèª¿æ•´ Makefile ä¾è³´é—œä¿‚</li>
</ul>
<h3 id="-æ¸¬è©¦çµæœ"><a class="header" href="#-æ¸¬è©¦çµæœ">âœ… æ¸¬è©¦çµæœ</a></h3>
<ul>
<li><strong>GDB è¿½è¹¤</strong>ï¼šæˆåŠŸè¿½è¹¤ 48 å€‹å‡½æ•¸å‘¼å«</li>
<li><strong>uftrace è¿½è¹¤</strong>ï¼šç”¢ç”Ÿå®Œæ•´æ™‚é–“çµ±è¨ˆå ±å‘Š</li>
<li><strong>è¦–è¦ºåŒ–è¼¸å‡º</strong>ï¼š5 ç¨®æ ¼å¼ï¼ˆSVG, PNG, JSON, Chrome Trace, FlameGraphï¼‰</li>
<li><strong>Makefile targets</strong>ï¼š9/10 é€šéæ¸¬è©¦</li>
</ul>
<h2 id="ç›®éŒ„"><a class="header" href="#ç›®éŒ„">ç›®éŒ„</a></h2>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li>
<li><a href="#%E6%B8%AC%E8%A9%A6%E7%A8%8B%E5%BC%8F%E6%BA%96%E5%82%99">æ¸¬è©¦ç¨‹å¼æº–å‚™</a></li>
<li><a href="#%E6%96%B9%E6%B3%95%E4%B8%80gdb-%E8%BF%BD%E8%B9%A4">æ–¹æ³•ä¸€ï¼šGDB è¿½è¹¤</a></li>
<li><a href="#%E6%96%B9%E6%B3%95%E4%BA%8Cuftrace-%E8%BF%BD%E8%B9%A4">æ–¹æ³•äºŒï¼šuftrace è¿½è¹¤</a></li>
<li><a href="#rust-%E6%94%AF%E6%8F%B4">Rust æ”¯æ´</a></li>
<li><a href="#%E6%AF%94%E8%BC%83%E8%88%87%E9%81%B8%E6%93%87">æ¯”è¼ƒèˆ‡é¸æ“‡</a></li>
<li><a href="#%E5%B8%B8%E8%A6%8B%E5%95%8F%E9%A1%8C">å¸¸è¦‹å•é¡Œ</a></li>
</ul>
<h2 id="æ¦‚è¿°"><a class="header" href="#æ¦‚è¿°">æ¦‚è¿°</a></h2>
<p>æœ¬æŒ‡å—ä»‹ç´¹å¦‚ä½•è¿½è¹¤ç¨‹å¼åŸ·è¡Œæµç¨‹ï¼Œè¨˜éŒ„æ¯å€‹å‡½æ•¸çš„æª”æ¡ˆã€å‡½æ•¸åã€è¡Œè™Ÿï¼Œä¸¦è½‰æ›æˆè¦–è¦ºåŒ–æµç¨‹åœ–ã€‚æ”¯æ´ C/C++ å’Œ Rustã€‚</p>
<h3 id="éœ€æ±‚å·¥å…·"><a class="header" href="#éœ€æ±‚å·¥å…·">éœ€æ±‚å·¥å…·</a></h3>
<ul>
<li>GDB (GNU Debugger)</li>
<li>uftrace</li>
<li>Python 3 + Graphviz</li>
<li>gcc/g++ æˆ– rustc</li>
</ul>
<h3 id="å®‰è£ä¾è³´"><a class="header" href="#å®‰è£ä¾è³´">å®‰è£ä¾è³´</a></h3>
<pre><code class="language-bash"># Ubuntu/Debian
sudo apt update
sudo apt install gdb uftrace python3-pip graphviz
pip3 install graphviz

# Arch Linux
sudo pacman -S gdb graphviz python-pip
yay -S uftrace
pip3 install graphviz

# macOS
brew install gdb graphviz
# uftrace éœ€è¦å¾æºç¢¼ç·¨è­¯
git clone https://github.com/namhyung/uftrace
cd uftrace &amp;&amp; make &amp;&amp; sudo make install
</code></pre>
<h2 id="æ¸¬è©¦ç¨‹å¼æº–å‚™"><a class="header" href="#æ¸¬è©¦ç¨‹å¼æº–å‚™">æ¸¬è©¦ç¨‹å¼æº–å‚™</a></h2>
<h3 id="c-æ¸¬è©¦ç¨‹å¼"><a class="header" href="#c-æ¸¬è©¦ç¨‹å¼">C++ æ¸¬è©¦ç¨‹å¼</a></h3>
<pre><code class="language-cpp">// test_program.cpp
#include &lt;iostream&gt;
#include &lt;cmath&gt;

class Calculator {
public:
    int add(int a, int b) {
        return a + b;
    }
    
    int multiply(int a, int b) {
        return a * b;
    }
};

int fibonacci(int n) {
    if (n &lt;= 1) return n;
    return fibonacci(n-1) + fibonacci(n-2);
}

void process_data() {
    Calculator calc;
    int result = calc.add(5, 3);
    std::cout &lt;&lt; "Add result: " &lt;&lt; result &lt;&lt; std::endl;
    
    result = calc.multiply(4, 7);
    std::cout &lt;&lt; "Multiply result: " &lt;&lt; result &lt;&lt; std::endl;
}

int main() {
    std::cout &lt;&lt; "Program started" &lt;&lt; std::endl;
    
    process_data();
    
    int fib = fibonacci(5);
    std::cout &lt;&lt; "Fibonacci(5) = " &lt;&lt; fib &lt;&lt; std::endl;
    
    return 0;
}
</code></pre>
<h3 id="rust-æ¸¬è©¦ç¨‹å¼"><a class="header" href="#rust-æ¸¬è©¦ç¨‹å¼">Rust æ¸¬è©¦ç¨‹å¼</a></h3>
<pre><pre class="playground"><code class="language-rust">// test_program.rs
use std::fmt::Debug;

struct Calculator;

impl Calculator {
    fn add(&amp;self, a: i32, b: i32) -&gt; i32 {
        a + b
    }
    
    fn multiply(&amp;self, a: i32, b: i32) -&gt; i32 {
        a * b
    }
}

fn fibonacci(n: i32) -&gt; i32 {
    if n &lt;= 1 {
        return n;
    }
    fibonacci(n - 1) + fibonacci(n - 2)
}

fn process_data() {
    let calc = Calculator;
    let result = calc.add(5, 3);
    println!("Add result: {}", result);
    
    let result = calc.multiply(4, 7);
    println!("Multiply result: {}", result);
}

fn main() {
    println!("Program started");
    
    process_data();
    
    let fib = fibonacci(5);
    println!("Fibonacci(5) = {}", fib);
}</code></pre></pre>
<h2 id="æ–¹æ³•ä¸€gdb-è¿½è¹¤"><a class="header" href="#æ–¹æ³•ä¸€gdb-è¿½è¹¤">æ–¹æ³•ä¸€ï¼šGDB è¿½è¹¤</a></h2>
<h3 id="11-gdb-è‡ªå‹•è¿½è¹¤è…³æœ¬"><a class="header" href="#11-gdb-è‡ªå‹•è¿½è¹¤è…³æœ¬">1.1 GDB è‡ªå‹•è¿½è¹¤è…³æœ¬</a></h3>
<pre><code class="language-bash">#!/bin/bash
# gdb_trace.sh

# æª¢æŸ¥åƒæ•¸
if [ $# -eq 0 ]; then
    echo "Usage: $0 &lt;program_name&gt;"
    exit 1
fi

PROGRAM=$1

# å»ºç«‹ GDB å‘½ä»¤æª”
cat &gt; trace_commands.gdb &lt;&lt; 'EOF'
set pagination off
set logging file gdb_trace.log
set logging overwrite on
set logging on
set print thread-events off

# ä½¿ç”¨ Python ä¾†è¿½è¹¤æ‰€æœ‰å‡½æ•¸
python
import gdb
import re

class TraceFunctions(gdb.Command):
    def __init__(self):
        super(TraceFunctions, self).__init__("trace-all", gdb.COMMAND_USER)
        self.call_depth = 0
        self.trace_data = []
        
    def invoke(self, arg, from_tty):
        # å°æ‰€æœ‰å‡½æ•¸è¨­å®šä¸­æ–·é»
        gdb.execute("rbreak .*")
        
        # è¨­å®šä¸­æ–·é»çš„è¡Œç‚º
        for bp in gdb.breakpoints():
            bp.silent = True
            bp.commands = "py trace_hit()\ncontinue"

def trace_hit():
    frame = gdb.newest_frame()
    sal = frame.find_sal()
    
    func_name = frame.name() or "??"
    if sal and sal.symtab:
        filename = sal.symtab.filename.split('/')[-1]
        line = sal.line
    else:
        filename = "??"
        line = 0
    
    # æ‰“å°è¿½è¹¤è¨Šæ¯
    print(f"TRACE|{func_name}|{filename}|{line}")
    
    # ä¹Ÿå¯ä»¥æ‰“å°å‘¼å«å †ç–Šæ·±åº¦
    depth = 0
    f = frame
    while f:
        depth += 1
        f = f.older()
    print(f"DEPTH|{depth}")

# è¨»å†Šå‘½ä»¤
TraceFunctions()

# åŸ·è¡Œè¿½è¹¤
trace-all
run
end

quit
EOF

# åŸ·è¡Œ GDB
echo "Starting GDB trace for $PROGRAM..."
gdb -batch -x trace_commands.gdb ./$PROGRAM 2&gt;/dev/null

echo "GDB trace completed. Check gdb_trace.log"
</code></pre>
<h3 id="12-gdb-è¼¸å‡ºè½‰æ›ç‚ºåœ–è¡¨"><a class="header" href="#12-gdb-è¼¸å‡ºè½‰æ›ç‚ºåœ–è¡¨">1.2 GDB è¼¸å‡ºè½‰æ›ç‚ºåœ–è¡¨</a></h3>
<pre><code class="language-python">#!/usr/bin/env python3
# gdb_to_graph.py

import re
import sys
from graphviz import Digraph

def parse_gdb_trace(filename='gdb_trace.log'):
    """è§£æ GDB è¿½è¹¤æª”æ¡ˆ"""
    traces = []
    
    with open(filename, 'r') as f:
        for line in f:
            if line.startswith('TRACE|'):
                parts = line.strip().split('|')
                if len(parts) &gt;= 4:
                    func = parts[1]
                    file = parts[2]
                    line_no = parts[3]
                    traces.append({
                        'func': func,
                        'file': file,
                        'line': line_no
                    })
    
    return traces

def create_flow_graph(traces, output='gdb_flow'):
    """å»ºç«‹æµç¨‹åœ–"""
    dot = Digraph(comment='GDB Program Flow')
    dot.attr(rankdir='TB')
    dot.attr('node', shape='box', style='rounded,filled', fillcolor='lightblue')
    
    # å»ºç«‹ç¯€é»
    for i, trace in enumerate(traces):
        node_id = str(i)
        label = f"{trace['func']}\\n{trace['file']}:{trace['line']}"
        
        # ç‰¹æ®Šé¡è‰²æ¨™è¨˜
        if trace['func'] == 'main':
            dot.node(node_id, label, fillcolor='lightgreen')
        elif 'Calculator' in trace['func']:
            dot.node(node_id, label, fillcolor='lightyellow')
        elif 'fibonacci' in trace['func']:
            dot.node(node_id, label, fillcolor='lightcoral')
        else:
            dot.node(node_id, label)
        
        # å»ºç«‹é‚Š
        if i &gt; 0:
            dot.edge(str(i-1), node_id)
    
    # è¼¸å‡º
    dot.render(output, format='svg', cleanup=True)
    dot.render(output, format='png', cleanup=True)
    print(f"Generated {output}.svg and {output}.png")
    
    # ç”¢ç”Ÿçµ±è¨ˆè³‡è¨Š
    print(f"\nTrace Statistics:")
    print(f"Total function calls: {len(traces)}")
    func_count = {}
    for trace in traces:
        func = trace['func']
        func_count[func] = func_count.get(func, 0) + 1
    
    print("\nFunction call frequency:")
    for func, count in sorted(func_count.items(), key=lambda x: x[1], reverse=True):
        print(f"  {func}: {count} times")

if __name__ == "__main__":
    traces = parse_gdb_trace()
    if traces:
        create_flow_graph(traces)
    else:
        print("No traces found in gdb_trace.log")
</code></pre>
<h2 id="æ–¹æ³•äºŒuftrace-è¿½è¹¤"><a class="header" href="#æ–¹æ³•äºŒuftrace-è¿½è¹¤">æ–¹æ³•äºŒï¼šuftrace è¿½è¹¤</a></h2>
<h3 id="21-uftrace-è¿½è¹¤è…³æœ¬"><a class="header" href="#21-uftrace-è¿½è¹¤è…³æœ¬">2.1 uftrace è¿½è¹¤è…³æœ¬</a></h3>
<pre><code class="language-bash">#!/bin/bash
# uftrace_trace.sh

# æª¢æŸ¥åƒæ•¸
if [ $# -eq 0 ]; then
    echo "Usage: $0 &lt;program_name&gt;"
    exit 1
fi

PROGRAM=$1
PROGRAM_BASE="${PROGRAM%.*}"

# æª¢æŸ¥ uftrace æ˜¯å¦å®‰è£
if ! command -v uftrace &amp;&gt; /dev/null; then
    echo "uftrace is not installed. Please install it first."
    exit 1
fi

# å°æ–¼ C/C++ ç¨‹å¼ï¼Œéœ€è¦é‡æ–°ç·¨è­¯
if [[ $PROGRAM == *.cpp ]] || [[ $PROGRAM == *.c ]]; then
    echo "Recompiling with instrumentation..."
    if [[ $PROGRAM == *.cpp ]]; then
        g++ -pg -g -O0 $PROGRAM -o ${PROGRAM_BASE}_traced
    else
        gcc -pg -g -O0 $PROGRAM -o ${PROGRAM_BASE}_traced
    fi
    EXEC_PROGRAM="${PROGRAM_BASE}_traced"
else
    EXEC_PROGRAM=$PROGRAM
fi

# åŸ·è¡Œ uftrace è¿½è¹¤
echo "=== Running uftrace ==="
uftrace record -d uftrace_data ./$EXEC_PROGRAM

# ç”¢ç”Ÿå„ç¨®è¼¸å‡ºæ ¼å¼
echo -e "\n=== Text Report ==="
uftrace report -d uftrace_data | head -20

echo -e "\n=== Call Graph ==="
uftrace graph -d uftrace_data | head -30

echo -e "\n=== Detailed Trace ==="
uftrace replay -d uftrace_data --no-pager &gt; uftrace_trace.txt

# è¼¸å‡ºç‚º Chrome Tracing æ ¼å¼
uftrace dump -d uftrace_data --chrome &gt; trace.json 2&gt;/dev/null
echo "Chrome trace saved to trace.json (view at chrome://tracing)"

# è¼¸å‡ºç‚º FlameGraph æ ¼å¼
uftrace dump -d uftrace_data --flame-graph &gt; flame.txt 2&gt;/dev/null
echo "FlameGraph data saved to flame.txt"

# ç”¢ç”Ÿæ™‚é–“çµ±è¨ˆ
echo -e "\n=== Time Statistics ==="
uftrace report -d uftrace_data -s total,self,call | head -20
</code></pre>
<h3 id="22-uftrace-è¼¸å‡ºè½‰æ›ç‚ºåœ–è¡¨"><a class="header" href="#22-uftrace-è¼¸å‡ºè½‰æ›ç‚ºåœ–è¡¨">2.2 uftrace è¼¸å‡ºè½‰æ›ç‚ºåœ–è¡¨</a></h3>
<pre><code class="language-python">#!/usr/bin/env python3
# uftrace_to_graph.py

import re
import json
from graphviz import Digraph

def parse_uftrace_replay(filename='uftrace_trace.txt'):
    """è§£æ uftrace replay è¼¸å‡º"""
    traces = []
    call_stack = []
    time_pattern = r'\[([\d.]+)\s*us\]'
    
    with open(filename, 'r') as f:
        for line in f:
            # è§£ææ™‚é–“æˆ³è¨˜
            time_match = re.search(time_pattern, line)
            timestamp = time_match.group(1) if time_match else None
            
            # è§£æå‡½æ•¸é€²å…¥
            enter_match = re.search(r'\|\s*([\w:]+)\(\)', line)
            if enter_match and '{' in line:
                func = enter_match.group(1)
                indent = line.count(' ') - len(line.lstrip())
                
                traces.append({
                    'type': 'enter',
                    'func': func,
                    'depth': len(call_stack),
                    'time': timestamp
                })
                call_stack.append(func)
            
            # è§£æå‡½æ•¸é€€å‡º
            elif '}' in line:
                if call_stack:
                    func = call_stack.pop()
                    # æå–åŸ·è¡Œæ™‚é–“
                    time_match = re.search(r'([\d.]+)\s*us', line)
                    exec_time = time_match.group(1) if time_match else None
                    
                    traces.append({
                        'type': 'exit',
                        'func': func,
                        'depth': len(call_stack),
                        'exec_time': exec_time
                    })
    
    return traces

def create_uftrace_graph(traces, output='uftrace_flow'):
    """å»ºç«‹ uftrace æµç¨‹åœ–"""
    dot = Digraph(comment='uftrace Program Flow')
    dot.attr(rankdir='TB')
    dot.attr('graph', splines='ortho')
    
    # è¨˜éŒ„å‡½æ•¸å‘¼å«é—œä¿‚
    edges = set()
    call_stack = []
    node_counter = {}
    exec_times = {}
    
    for trace in traces:
        func = trace['func']
        
        if trace['type'] == 'enter':
            # ç‚ºæ¯å€‹å‡½æ•¸å‘¼å«å»ºç«‹å”¯ä¸€ç¯€é»
            if func not in node_counter:
                node_counter[func] = 0
            node_counter[func] += 1
            
            node_id = f"{func}_{node_counter[func]}"
            
            # è¨­å®šç¯€é»æ¨£å¼
            if func == 'main':
                color = 'lightgreen'
            elif 'fibonacci' in func:
                color = 'lightcoral'
            elif 'Calculator' in func or 'add' in func or 'multiply' in func:
                color = 'lightyellow'
            else:
                color = 'lightblue'
            
            # ç¯€é»æ¨™ç±¤
            label = func
            if trace.get('time'):
                label += f"\\n@{trace['time']}us"
            
            dot.node(node_id, label, shape='box', 
                    style='rounded,filled', fillcolor=color)
            
            # å»ºç«‹é‚Š
            if call_stack:
                parent = call_stack[-1]
                edge = (parent, node_id)
                if edge not in edges:
                    dot.edge(parent, node_id)
                    edges.add(edge)
            
            call_stack.append(node_id)
            exec_times[node_id] = None
            
        elif trace['type'] == 'exit' and call_stack:
            node_id = call_stack.pop()
            if trace.get('exec_time'):
                exec_times[node_id] = trace['exec_time']
    
    # è¼¸å‡ºåœ–è¡¨
    dot.render(output, format='svg', cleanup=True)
    dot.render(output, format='png', cleanup=True)
    print(f"Generated {output}.svg and {output}.png")
    
    return exec_times

def create_summary_graph(filename='uftrace_trace.txt', output='uftrace_summary'):
    """å»ºç«‹å‡½æ•¸å‘¼å«çµ±è¨ˆåœ–"""
    dot = Digraph(comment='Function Call Summary')
    dot.attr(rankdir='LR')
    
    # çµ±è¨ˆå‡½æ•¸å‘¼å«æ¬¡æ•¸å’Œæ™‚é–“
    call_count = {}
    call_relations = {}
    exec_times = {}
    
    with open(filename, 'r') as f:
        current_caller = None
        for line in f:
            match = re.search(r'\|\s*([\w:]+)\(\)', line)
            if match:
                func = match.group(1)
                call_count[func] = call_count.get(func, 0) + 1
                
                # æå–åŸ·è¡Œæ™‚é–“
                time_match = re.search(r'([\d.]+)\s*us', line)
                if time_match and '}' in line:
                    time = float(time_match.group(1))
                    if func not in exec_times:
                        exec_times[func] = []
                    exec_times[func].append(time)
                
                if current_caller and current_caller != func:
                    key = (current_caller, func)
                    call_relations[key] = call_relations.get(key, 0) + 1
                
                if '{' in line:
                    current_caller = func
    
    # å»ºç«‹ç¯€é»ï¼ˆé¡¯ç¤ºå‘¼å«æ¬¡æ•¸å’Œå¹³å‡æ™‚é–“ï¼‰
    for func, count in call_count.items():
        label = f"{func}\\n(called {count}x)"
        if func in exec_times and exec_times[func]:
            avg_time = sum(exec_times[func]) / len(exec_times[func])
            label += f"\\navg: {avg_time:.2f}us"
        
        dot.node(func, label, shape='box', style='filled', 
                fillcolor='lightblue')
    
    # å»ºç«‹é‚Šï¼ˆé¡¯ç¤ºå‘¼å«é—œä¿‚ï¼‰
    for (caller, callee), count in call_relations.items():
        label = f"{count}x" if count &gt; 1 else ""
        dot.edge(caller, callee, label=label)
    
    dot.render(output, format='svg', cleanup=True)
    print(f"Generated {output}.svg")

if __name__ == "__main__":
    # è§£æä¸¦ç”¢ç”Ÿæµç¨‹åœ–
    traces = parse_uftrace_replay()
    if traces:
        exec_times = create_uftrace_graph(traces)
        create_summary_graph()
        
        # æ‰“å°åŸ·è¡Œæ™‚é–“çµ±è¨ˆ
        print("\nExecution Time Statistics:")
        func_times = {}
        for trace in traces:
            if trace['type'] == 'exit' and trace.get('exec_time'):
                func = trace['func']
                if func not in func_times:
                    func_times[func] = []
                func_times[func].append(float(trace['exec_time']))
        
        for func, times in sorted(func_times.items()):
            avg = sum(times) / len(times)
            total = sum(times)
            print(f"  {func}: avg={avg:.2f}us, total={total:.2f}us, calls={len(times)}")
    else:
        print("No traces found in uftrace_trace.txt")
</code></pre>
<h2 id="rust-æ”¯æ´"><a class="header" href="#rust-æ”¯æ´">Rust æ”¯æ´</a></h2>
<h3 id="rust-èˆ‡-gdb"><a class="header" href="#rust-èˆ‡-gdb">Rust èˆ‡ GDB</a></h3>
<p>Rust å®Œå…¨æ”¯æ´ GDB é™¤éŒ¯ï¼š</p>
<pre><code class="language-bash"># ç·¨è­¯ Rust ç¨‹å¼ï¼ˆåŒ…å«é™¤éŒ¯ç¬¦è™Ÿï¼‰
rustc -g test_program.rs -o test_program

# æˆ–ä½¿ç”¨ cargo
cargo build

# ä½¿ç”¨ GDB è¿½è¹¤ï¼ˆåŒæ¨£çš„è…³æœ¬ï¼‰
./gdb_trace.sh test_program
</code></pre>
<p><strong>æ³¨æ„äº‹é …ï¼š</strong></p>
<ul>
<li>Rust å‡½æ•¸åæœƒè¢« mangleï¼Œçœ‹èµ·ä¾†åƒ <code>_ZN4test11process_data17h...</code></li>
<li>å¯ä»¥ä½¿ç”¨ <code>rust-gdb</code> ç²å¾—æ›´å¥½çš„æ”¯æ´</li>
<li>åœ¨ GDB ä¸­ä½¿ç”¨ <code>set print demangle on</code> é¡¯ç¤ºå¯è®€åç¨±</li>
</ul>
<h3 id="rust-èˆ‡-uftrace"><a class="header" href="#rust-èˆ‡-uftrace">Rust èˆ‡ uftrace</a></h3>
<p>Rust å° uftrace çš„æ”¯æ´è¼ƒç‚ºæœ‰é™ï¼š</p>
<pre><code class="language-bash"># æ–¹æ³• 1ï¼šä½¿ç”¨ -C instrument-coverage
rustc -C instrument-coverage -g test_program.rs -o test_program

# æ–¹æ³• 2ï¼šä½¿ç”¨ -Z instrument-mcount (éœ€è¦ nightly)
rustc +nightly -Z instrument-mcount -g test_program.rs -o test_program

# æ–¹æ³• 3ï¼šä½¿ç”¨ cargo-flamegraph (æ¨è–¦)
cargo install flamegraph
cargo flamegraph
</code></pre>
<h3 id="rust-å°ˆç”¨å·¥å…·"><a class="header" href="#rust-å°ˆç”¨å·¥å…·">Rust å°ˆç”¨å·¥å…·</a></h3>
<h4 id="1-cargo-profiling"><a class="header" href="#1-cargo-profiling">1. cargo-profiling</a></h4>
<pre><code class="language-bash">cargo install cargo-profiling
cargo profiling callgrind
cargo profiling cachegrind
</code></pre>
<h4 id="2-tokio-console-for-async"><a class="header" href="#2-tokio-console-for-async">2. tokio-console (for async)</a></h4>
<pre><code class="language-toml"># Cargo.toml
[dependencies]
tokio = { version = "1", features = ["full", "tracing"] }
console-subscriber = "0.1"
</code></pre>
<pre><pre class="playground"><code class="language-rust">#[tokio::main]
async fn main() {
    console_subscriber::init();
    // your async code
}</code></pre></pre>
<h4 id="3-tracing-crate"><a class="header" href="#3-tracing-crate">3. tracing crate</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tracing::{info, instrument};

#[instrument]
fn process_data() {
    info!("Processing data");
    // ...
}
<span class="boring">}</span></code></pre></pre>
<h2 id="å®Œæ•´åŸ·è¡Œè…³æœ¬"><a class="header" href="#å®Œæ•´åŸ·è¡Œè…³æœ¬">å®Œæ•´åŸ·è¡Œè…³æœ¬</a></h2>
<pre><code class="language-bash">#!/bin/bash
# run_all_traces.sh

echo "========================================="
echo "Program Flow Tracing Tool"
echo "========================================="

# æª¢æŸ¥åƒæ•¸
if [ $# -eq 0 ]; then
    echo "Usage: $0 &lt;source_file&gt;"
    echo "Example: $0 test_program.cpp"
    echo "         $0 test_program.rs"
    exit 1
fi

SOURCE_FILE=$1
FILE_EXT="${SOURCE_FILE##*.}"
BASE_NAME="${SOURCE_FILE%.*}"

# ç·¨è­¯ç¨‹å¼
echo "Compiling $SOURCE_FILE..."
case $FILE_EXT in
    cpp|cc|cxx)
        g++ -g -O0 -pg $SOURCE_FILE -o $BASE_NAME
        ;;
    c)
        gcc -g -O0 -pg $SOURCE_FILE -o $BASE_NAME
        ;;
    rs)
        rustc -g $SOURCE_FILE -o $BASE_NAME
        ;;
    *)
        echo "Unsupported file type: $FILE_EXT"
        exit 1
        ;;
esac

# æ–¹æ³• 1: GDB
echo -e "\n[1] Running GDB trace..."
./gdb_trace.sh $BASE_NAME
python3 gdb_to_graph.py

# æ–¹æ³• 2: uftrace (C/C++ only)
if [[ $FILE_EXT != "rs" ]]; then
    echo -e "\n[2] Running uftrace..."
    ./uftrace_trace.sh $SOURCE_FILE
    python3 uftrace_to_graph.py
else
    echo -e "\n[2] uftrace not fully supported for Rust"
fi

# ç”¢ç”Ÿç«ç„°åœ– (if available)
if [ -f flame.txt ]; then
    echo -e "\n[3] Generating FlameGraph..."
    if [ ! -d FlameGraph ]; then
        git clone https://github.com/brendangregg/FlameGraph 2&gt;/dev/null
    fi
    cat flame.txt | ./FlameGraph/flamegraph.pl &gt; flamegraph.svg
    echo "FlameGraph saved to flamegraph.svg"
fi

echo -e "\n========================================="
echo "Completed! Generated files:"
ls -la *.svg *.png *.json 2&gt;/dev/null | grep -E "\.(svg|png|json)$"
echo "========================================="
</code></pre>
<h2 id="æ¯”è¼ƒèˆ‡é¸æ“‡"><a class="header" href="#æ¯”è¼ƒèˆ‡é¸æ“‡">æ¯”è¼ƒèˆ‡é¸æ“‡</a></h2>
<div class="table-wrapper"><table><thead><tr><th>ç‰¹æ€§</th><th>GDB</th><th>uftrace</th></tr></thead><tbody>
<tr><td><strong>èªè¨€æ”¯æ´</strong></td><td>C/C++/Rust/Go ç­‰</td><td>ä¸»è¦ C/C++</td></tr>
<tr><td><strong>æ•ˆèƒ½é–‹éŠ·</strong></td><td>é«˜ï¼ˆä¸­æ–·é»ï¼‰</td><td>ä½ï¼ˆinstrumentationï¼‰</td></tr>
<tr><td><strong>åŸ·è¡Œæ™‚é–“</strong></td><td>æœ‰</td><td>æœ‰ï¼ˆç²¾ç¢ºï¼‰</td></tr>
<tr><td><strong>ç·¨è­¯éœ€æ±‚</strong></td><td>-gï¼ˆé™¤éŒ¯ç¬¦è™Ÿï¼‰</td><td>-pg æˆ– -finstrument-functions</td></tr>
<tr><td><strong>å³æ™‚è¿½è¹¤</strong></td><td>æ˜¯</td><td>æ˜¯</td></tr>
<tr><td><strong>è¼¸å‡ºæ ¼å¼</strong></td><td>è‡ªè¨‚</td><td>å¤šç¨®ï¼ˆChromeã€Flameã€æ–‡å­—ï¼‰</td></tr>
<tr><td><strong>å­¸ç¿’æ›²ç·š</strong></td><td>é™¡å³­</td><td>å¹³ç·©</td></tr>
<tr><td><strong>é©ç”¨å ´æ™¯</strong></td><td>é™¤éŒ¯ã€æ·±å…¥åˆ†æ</td><td>æ•ˆèƒ½åˆ†æã€æµç¨‹è¿½è¹¤</td></tr>
</tbody></table>
</div>
<h3 id="å»ºè­°é¸æ“‡"><a class="header" href="#å»ºè­°é¸æ“‡">å»ºè­°é¸æ“‡</a></h3>
<ul>
<li><strong>ç°¡å–®æµç¨‹è¿½è¹¤</strong>ï¼šuftrace</li>
<li><strong>è©³ç´°é™¤éŒ¯åˆ†æ</strong>ï¼šGDB</li>
<li><strong>æ•ˆèƒ½åˆ†æ</strong>ï¼šuftrace + FlameGraph</li>
<li><strong>Rust å°ˆæ¡ˆ</strong>ï¼šGDB æˆ– cargo-flamegraph</li>
<li><strong>ç”Ÿç”¢ç’°å¢ƒ</strong>ï¼šuftraceï¼ˆé–‹éŠ·è¼ƒå°ï¼‰</li>
</ul>
<h2 id="å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ"><a class="header" href="#å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ">å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ</a></h2>
<h3 id="-å·²è§£æ±ºå•é¡Œ-2024-09-29"><a class="header" href="#-å·²è§£æ±ºå•é¡Œ-2024-09-29">âœ… å·²è§£æ±ºå•é¡Œ (2024-09-29)</a></h3>
<h4 id="q1-makefile-é¡è‰²ç¢¼ä¸é¡¯ç¤ºé¡¯ç¤º-033032m"><a class="header" href="#q1-makefile-é¡è‰²ç¢¼ä¸é¡¯ç¤ºé¡¯ç¤º-033032m">Q1: Makefile é¡è‰²ç¢¼ä¸é¡¯ç¤ºï¼ˆé¡¯ç¤º <code>\033[0;32m</code>ï¼‰</a></h4>
<p><strong>è§£æ±ºæ–¹æ¡ˆ</strong>ï¼šå°‡æ‰€æœ‰ <code>echo</code> æ”¹ç‚º <code>printf</code></p>
<pre><code class="language-makefile"># éŒ¯èª¤å¯«æ³•
@echo "$(GREEN)å®Œæˆ$(NC)"

# æ­£ç¢ºå¯«æ³•
@printf "$(GREEN)å®Œæˆ$(NC)\n"
</code></pre>
<h4 id="q2-gdb-logging-æª”åè¡çª"><a class="header" href="#q2-gdb-logging-æª”åè¡çª">Q2: GDB logging æª”åè¡çª</a></h4>
<p><strong>è§£æ±ºæ–¹æ¡ˆ</strong>ï¼šåœ¨è¨­å®šæ–°çš„ log æª”æ¡ˆå‰å…ˆé—œé–‰ logging</p>
<pre><code class="language-gdb">set logging enabled off
set logging file gdb_trace.log
set logging overwrite on
set logging enabled on
</code></pre>
<h4 id="q3-makefile-heredoc-èªæ³•éŒ¯èª¤"><a class="header" href="#q3-makefile-heredoc-èªæ³•éŒ¯èª¤">Q3: Makefile heredoc èªæ³•éŒ¯èª¤</a></h4>
<p><strong>è§£æ±ºæ–¹æ¡ˆ</strong>ï¼šæ”¹ç”¨æª”æ¡ˆè¤‡è£½æˆ– echo é€è¡Œå¯«å…¥</p>
<pre><code class="language-makefile"># æ”¹ç‚ºç›´æ¥è¤‡è£½å·²å­˜åœ¨çš„æª”æ¡ˆ
@cp test_program.cpp $(CPP_SOURCE)
</code></pre>
<h3 id="-å¸¸è¦‹æŠ€è¡“å•é¡Œ"><a class="header" href="#-å¸¸è¦‹æŠ€è¡“å•é¡Œ">ğŸ“‹ å¸¸è¦‹æŠ€è¡“å•é¡Œ</a></h3>
<h4 id="q1-gdb-è¿½è¹¤å¤ªæ…¢æ€éº¼è¾¦"><a class="header" href="#q1-gdb-è¿½è¹¤å¤ªæ…¢æ€éº¼è¾¦">Q1: GDB è¿½è¹¤å¤ªæ…¢æ€éº¼è¾¦ï¼Ÿ</a></h4>
<p>å¯ä»¥åªè¿½è¹¤ç‰¹å®šå‡½æ•¸ï¼š</p>
<pre><code class="language-gdb">rbreak ^process_.*  # åªè¿½è¹¤ process_ é–‹é ­çš„å‡½æ•¸
break main
break fibonacci
</code></pre>
<h4 id="q2-uftrace-æ²’æœ‰è¼¸å‡º"><a class="header" href="#q2-uftrace-æ²’æœ‰è¼¸å‡º">Q2: uftrace æ²’æœ‰è¼¸å‡ºï¼Ÿ</a></h4>
<p>æª¢æŸ¥ç·¨è­¯é¸é …ï¼š</p>
<pre><code class="language-bash"># ç¢ºä¿ä½¿ç”¨äº† -pg æˆ– -finstrument-functions
nm your_program | grep mcount  # æ‡‰è©²è¦çœ‹åˆ° mcount
</code></pre>
<h4 id="q3-rust-å‡½æ•¸åå¤ªé•·"><a class="header" href="#q3-rust-å‡½æ•¸åå¤ªé•·">Q3: Rust å‡½æ•¸åå¤ªé•·ï¼Ÿ</a></h4>
<p>ä½¿ç”¨ rustfilt å·¥å…·ï¼š</p>
<pre><code class="language-bash">cargo install rustfilt
cat trace.log | rustfilt
</code></pre>
<h4 id="q4-å¦‚ä½•éæ¿¾ç³»çµ±å‡½æ•¸"><a class="header" href="#q4-å¦‚ä½•éæ¿¾ç³»çµ±å‡½æ•¸">Q4: å¦‚ä½•éæ¿¾ç³»çµ±å‡½æ•¸ï¼Ÿ</a></h4>
<p>GDB:</p>
<pre><code class="language-gdb">rbreak ^[^_].*  # æ’é™¤ _ é–‹é ­çš„å‡½æ•¸
</code></pre>
<p>uftrace:</p>
<pre><code class="language-bash">uftrace record -F main -F process_data ./program  # åªè¿½è¹¤ç‰¹å®šå‡½æ•¸
uftrace record -N printf -N malloc ./program      # æ’é™¤ç‰¹å®šå‡½æ•¸
</code></pre>
<h4 id="q5-åœ–è¡¨å¤ªè¤‡é›œæ€éº¼ç°¡åŒ–"><a class="header" href="#q5-åœ–è¡¨å¤ªè¤‡é›œæ€éº¼ç°¡åŒ–">Q5: åœ–è¡¨å¤ªè¤‡é›œæ€éº¼ç°¡åŒ–ï¼Ÿ</a></h4>
<p>ä¿®æ”¹ Python è…³æœ¬ï¼ŒåŠ å…¥éæ¿¾ï¼š</p>
<pre><code class="language-python"># åªé¡¯ç¤ºåŸ·è¡Œè¶…é N æ¬¡çš„å‡½æ•¸
MIN_CALLS = 2
filtered = [t for t in traces if call_count[t['func']] &gt;= MIN_CALLS]
</code></pre>
<h2 id="é€²éšæŠ€å·§"><a class="header" href="#é€²éšæŠ€å·§">é€²éšæŠ€å·§</a></h2>
<h3 id="çµåˆ-perf-ä½¿ç”¨"><a class="header" href="#çµåˆ-perf-ä½¿ç”¨">çµåˆ perf ä½¿ç”¨</a></h3>
<pre><code class="language-bash"># è¨˜éŒ„
perf record -g ./program

# ç”¢ç”Ÿç«ç„°åœ–
perf script | ./FlameGraph/stackcollapse-perf.pl | ./FlameGraph/flamegraph.pl &gt; perf.svg
</code></pre>
<h3 id="è‡ªå‹•åŒ–-cicd-æ•´åˆ"><a class="header" href="#è‡ªå‹•åŒ–-cicd-æ•´åˆ">è‡ªå‹•åŒ– CI/CD æ•´åˆ</a></h3>
<pre><code class="language-yaml"># .github/workflows/trace.yml
name: Trace Analysis
on: [push]
jobs:
  trace:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y gdb graphviz
          pip install graphviz
      - name: Build and trace
        run: |
          make build
          ./run_all_traces.sh main.cpp
      - name: Upload artifacts
        uses: actions/upload-artifact@v2
        with:
          name: trace-graphs
          path: "*.svg"
</code></pre>
<h3 id="å³æ™‚ç›£æ§"><a class="header" href="#å³æ™‚ç›£æ§">å³æ™‚ç›£æ§</a></h3>
<pre><code class="language-bash"># ä½¿ç”¨ watch å³æ™‚æ›´æ–°
watch -n 1 'uftrace report -d uftrace_data | head -20'

# ä½¿ç”¨ tail è¿½è¹¤æ—¥èªŒ
tail -f gdb_trace.log | grep "TRACE"
</code></pre>
<h2 id="åƒè€ƒè³‡æº"><a class="header" href="#åƒè€ƒè³‡æº">åƒè€ƒè³‡æº</a></h2>
<ul>
<li><a href="https://www.gnu.org/software/gdb/documentation/">GDB Documentation</a></li>
<li><a href="https://github.com/namhyung/uftrace">uftrace GitHub</a></li>
<li><a href="https://github.com/brendangregg/FlameGraph">Flamegraph</a></li>
<li><a href="https://nnethercote.github.io/perf-book/">Rust Profiling Book</a></li>
<li><a href="chrome://tracing">Chrome Tracing</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../gdb/gdb-function-trace-to-flowchart-guide.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../gdb/gdb-so-analysis-guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../gdb/gdb-function-trace-to-flowchart-guide.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../gdb/gdb-so-analysis-guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
