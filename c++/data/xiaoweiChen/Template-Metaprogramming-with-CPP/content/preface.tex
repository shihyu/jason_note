\begin{flushright}
  \zihao{1} 前言
\end{flushright}

历经数十载，C++已经成为适用范围广泛的编程语言之一。它的成功不仅是因为其性能或易用性(有人会反对)，而且是因为其的多功能性。C++是一种通用的、多范式的编程语言，混合了过程式、函数式和泛型编程。

泛型编程是一种编写代码的方式，例如：函数和类等实体为根据之后指定的类型编写。这些泛型实体仅在指参数指定为特定类型需要时才进行实例化，这些泛型实体在C++中称为模板。

元编程是一种编程技术，使用模板(和C++中的constexpr函数)可在编译时生成代码，然后与其余源代码合并，最终用于编译程序。元编程需要(至少)指定一个输入或输出的类型。

C++的模板可谓是声名狼藉，如同《C++核心指南》(Bjarne Stroustrup和Herb Sutter维护的一份关于该做什么和不该做什么的文档)中所描述的那样。不过，模板可用来实现泛型库，就如同C++开发人员会一直使用的C++标准库一样。无论是自己编写模板，还是使用他人编写的模板(如标准容器或算法)，模板很可能是日常编码的一部分。

本书的目的是为让读者更加容易理解C++模板(从基本语法到C++20中的概念)，这是本书前两部分的重点内容。第三部分(也是最后一部分)将使用前面了解到的知识付诸实践，并使用模板进行元编程。

\hspace*{\fill} \\ %插入空行
\noindent
\textbf{适读人群}

这本书是为初学者到中级C++开发人员(想要学习和了解模板元编程的人员)，以及高级C++开发人员(希望了解与模板相关的新C++20特性和各种习语和模式)。阅读这本书之前，需要有基本的C++编程经验。

\hspace*{\fill} \\ %插入空行
\noindent
\textbf{本书内容}

\textit{第1章，模板简介。}通过几个简单的例子介绍C++中模板元编程的概念，讨论为什么需要模板，以及模板的优缺点。

\textit{第2章，了解模板。}探讨了C++中所有形式的模板:函数模板、类模板、变量模板和别名模板。每一个都会讨论其语法和工作方式等细节，这里还讨论了模板实例化和特化的关键概念。

\textit{第3章，可变参数模板。}专注于可变参数模板，将详细讨论可变参数函数模板、可变参数类模板、可变参数别名模板、可变参数变量模板、参数包及其展开方式，以及如何编写可变参数模板的折叠表达式。

\textit{第4章，高级模板概念。}汇集了一系列高级模板概念，如名称依赖和名称查找、模板参数推导、模板递归、完美转发、泛型和模板Lambda。通过理解这些内容，读者将能够极大地扩展阅读或编写的模板的种类。

\textit{第5章，类型特征和条件编译。}专注于讨论类型特征，将了解类型特征，标准库提供了哪些特征，以及如何使用它们解决不同的问题。

\textit{第6章，概念和约束。}介绍了C++20的新机制，使用概念和约束定义模板参数的需求，可以了解指定约束的方法。此外，这里还概述了C++20标准概念库的内容。

\textit{第7章，模式和习语。}探讨了一系列独立的高级主题，如何实现各种模式。我们将探讨静态多态性、类型擦除、标记分派和模式(例如奇异迭代模板模式、表达式模板、混入和类型列表)的概念。

\textit{第8章，范围和算法。}容器、迭代器和算法是标准模板库的核心组件，将学习如何为其编写泛型容器和迭代器类型，以及通用算法。

\textit{第9章，范围库。}探讨了C++20中新添加的范围库的关键特性，如范围、范围适配器和约束算法，可使我们能够编写更简单的代码来使用范围，还有如何编写自定义范围适配器。

附录是一个简短的结尾，对本书进行了总结。

习题解答包含了所有章节中所有习题的答案.

\hspace*{\fill} \\ %插入空行
\noindent
\textbf{环境配置}

阅读这本书时，需要具备基础的C++编程知识。需要了解类、函数、操作符、函数重载、继承、虚函数等的语法和基础知识。若对模板不是很了解也没关系，因为本书将从零开始帮助读者了解模板。

本书中的所有代码示例都是跨平台的，可以使用任何编译器来构建和运行。但许多示例使用需要使用C++11，但也有一些示例需要支持C++17或C++20兼容的编译器，建议您使用支持C++20的编译器版本，这样就可以运行本书所有示例。书中的示例都使用MSVC 19.30 (Visual Studio 2022)、GCC 12.1/13和Clang 13/14进行过测试。若机器上没有兼容C++20的编译器，可以在Web上试试。这里推荐几个平台:

\begin{itemize}
\item
Compiler Explorer (\url{https://godbolt.org/})

\item
Wandbox (\url{https://wandbox.org/})

\item
C++ Insights (\url{https://cppinsights.io/})
\end{itemize}

本书将多次引用C++ Insights在线工具来分析编译器生成的代码。

若想了解编译器对不同C++标准的支持程度，可以参考\url{https://en.cppreference.com/w/cpp/compiler\_support}。

\textbf{
如果正在使用本书的数字版本，我们建议您自己输入代码或通过GitHub访问代码(下一节提供链接)，将避免复制和粘贴代码。
}

\hspace*{\fill} \\ %插入空行
\noindent
\textbf{扩展阅读}

本书中，我们会多次提到C++标准，其文件版权归国际标准化组织所有。官方的C++标准文档可以从这里购买:\url{https://www.iso.org/standard/79358.html}。C++标准的多个草案，以及相应源码都可以在GitHub上的\url{https://github.com/cplusplus/draft}免费获得。并且，可以在\url{https://isocpp.org/std/the-standard}上找到关于C++标准的更多信息。

cppreference网站\url{https://en.cppreference.com/}，是一个很好的在线资源，提供了直接从C++标准派生的C++语言的详尽文档。本书多次引用了cppreference中的内容。cppreference的内容基于CC-BY-SA协议，\url{https://en.cppreference.com/w/Cppreference:Copyright/CC-BY-SA}。

每一章的末尾的“扩展阅读”部分，包含了一份参考书目，相关条目中的具体内容，可用于加深对所介绍主题的理解。

\hspace*{\fill} \\ %插入空行
\noindent
\textbf{下载例程}

可以从GitHub上的\url{https:// github.com/PacktPublishing/Template-Metaprogramming-with-CPP}下载这本书的示例代码文件。若代码有更新，将会体现在GitHub的库中。

我们还有其他的代码包，还有丰富的书籍和视频目录，都在\url{https://github.com/PacktPublishing/}。去看看吧!


\hspace*{\fill} \\ %插入空行
\noindent
\textbf{下载彩图}

我们还提供了一个PDF文件，其中有本书中使用的屏幕截图和图表的彩色图。可以在这里下载:\url{https://packt.link/Un8j5}。








