<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Claude Code 完整自動化開發指南 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="claude-code-完整自動化開發指南"><a class="header" href="#claude-code-完整自動化開發指南">Claude Code 完整自動化開發指南</a></h1>
<h2 id="目錄"><a class="header" href="#目錄">目錄</a></h2>
<ol>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5">基本概念</a></li>
<li><a href="#%E5%AE%89%E8%A3%9D%E8%88%87%E8%A8%AD%E7%BD%AE">安裝與設置</a></li>
<li><a href="#%E5%91%BD%E4%BB%A4%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F">命令使用方式</a></li>
<li><a href="#%E8%87%AA%E5%8B%95%E5%8C%96%E6%A8%A1%E5%BC%8F%E8%A9%B3%E8%A7%A3">自動化模式詳解</a></li>
<li><a href="#%E5%A4%9C%E9%96%93%E8%87%AA%E5%8B%95%E5%8C%96%E8%A8%AD%E7%BD%AE">夜間自動化設置</a></li>
<li><a href="#token-%E7%AE%A1%E7%90%86%E8%88%87%E7%9B%A3%E6%8E%A7">Token 管理與監控</a></li>
<li><a href="#claudemd-%E5%84%AA%E5%8C%96%E5%AF%A6%E6%88%B0">CLAUDE.md 優化實戰</a></li>
<li><a href="#token-%E7%AF%80%E7%9C%81%E6%94%BB%E7%95%A5">Token 節省攻略</a></li>
<li><a href="#%E6%95%88%E7%8E%87%E6%8F%90%E5%8D%87%E6%8A%80%E5%B7%A7">效率提升技巧</a></li>
<li><a href="#%E9%AB%98%E7%B4%9A%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">高級工作流程</a></li>
<li><a href="#%E5%90%B3%E6%81%A9%E9%81%94-x-anthropic-%E5%AE%98%E6%96%B9%E5%85%8D%E8%B2%BB%E8%AA%B2%E7%A8%8B">吳恩達 x Anthropic 官方免費課程</a></li>
<li><a href="#%E9%80%B2%E9%9A%8E%E6%95%B4%E5%90%88%E6%8A%80%E5%B7%A7">進階整合技巧</a></li>
<li><a href="#%E7%A4%BE%E7%BE%A4%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90">社群最佳實踐</a></li>
<li><a href="#%E5%AF%A6%E6%88%B0%E5%BB%BA%E8%AD%B0">實戰建議</a></li>
<li><a href="#%E5%AF%A6%E7%94%A8%E8%85%B3%E6%9C%AC%E7%AF%84%E4%BE%8B">實用腳本範例</a></li>
<li><a href="#%E5%AE%89%E5%85%A8%E8%80%83%E9%87%8F%E8%88%87%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90">安全考量與最佳實踐</a></li>
<li><a href="#%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4">故障排除</a></li>
</ol>
<hr />
<h2 id="基本概念"><a class="header" href="#基本概念">基本概念</a></h2>
<p>Claude Code 是 Anthropic 的命令行工具，讓開發者可以直接在終端中與 Claude 協作進行編程任務。</p>
<h3 id="主要特性"><a class="header" href="#主要特性">主要特性</a></h3>
<ul>
<li><strong>完整代碼庫感知</strong>：理解整個項目結構和模式</li>
<li><strong>直接文件操作</strong>：編輯文件、執行命令、管理 git 操作</li>
<li><strong>自主執行</strong>：可執行複雜的多步驟工作流程</li>
<li><strong>上下文保持</strong>：維持項目慣例的長期記憶</li>
<li><strong>確定性自動化</strong>：使用 hooks 保證特定動作總是發生</li>
</ul>
<hr />
<h2 id="安裝與設置"><a class="header" href="#安裝與設置">安裝與設置</a></h2>
<h3 id="安裝步驟"><a class="header" href="#安裝步驟">安裝步驟</a></h3>
<pre><code class="language-bash"># 通過 npm 安裝
npm install -g @anthropic-ai/claude-code

# 驗證安裝
claude --version

# 設置 API 密鑰
export ANTHROPIC_API_KEY="your-api-key-here"

# 或者初次使用時會提示輸入
claude auth
</code></pre>
<h3 id="環境變數設置"><a class="header" href="#環境變數設置">環境變數設置</a></h3>
<pre><code class="language-bash"># 添加到 ~/.bashrc 或 ~/.zshrc
export ANTHROPIC_API_KEY="your-api-key-here"

# 設置常用別名
alias cc="claude --dangerously-skip-permissions"
alias claude-auto="claude --dangerously-skip-permissions"
</code></pre>
<hr />
<h2 id="命令使用方式"><a class="header" href="#命令使用方式">命令使用方式</a></h2>
<h3 id="基本命令格式"><a class="header" href="#基本命令格式">基本命令格式</a></h3>
<pre><code class="language-bash"># 命令名稱是 claude（不是 claude-code）
claude [選項] [提示]

# 查看所有可用選項
claude --help
claude -h
</code></pre>
<h3 id="常用命令選項"><a class="header" href="#常用命令選項">常用命令選項</a></h3>
<pre><code class="language-bash"># 互動模式（預設）
claude

# 單次任務模式
claude -p "修復所有 lint 錯誤"

# 跳過權限確認
claude --dangerously-skip-permissions

# JSON 輸出格式
claude -p "分析代碼品質" --output-format json

# 詳細模式（調試用）
claude --verbose

# Headless 模式（CI/CD 用）
claude -p "執行測試" --output-format stream-json
</code></pre>
<hr />
<h2 id="自動化模式詳解"><a class="header" href="#自動化模式詳解">自動化模式詳解</a></h2>
<h3 id="1-預設模式有權限確認"><a class="header" href="#1-預設模式有權限確認">1. 預設模式（有權限確認）</a></h3>
<pre><code class="language-bash">claude
</code></pre>
<p><strong>特點：</strong></p>
<ul>
<li>每個操作都需要確認</li>
<li>安全性最高</li>
<li>適合精確控制場景</li>
<li>會中斷工作流程</li>
</ul>
<h3 id="2-完全自動化模式"><a class="header" href="#2-完全自動化模式">2. 完全自動化模式</a></h3>
<pre><code class="language-bash">claude --dangerously-skip-permissions
</code></pre>
<p><strong>特點：</strong></p>
<ul>
<li>繞過所有權限檢查</li>
<li>不間斷執行直到完成</li>
<li>類似 "yolo 模式"</li>
<li>適合夜間自動化</li>
</ul>
<h3 id="3-auto-accept-模式"><a class="header" href="#3-auto-accept-模式">3. Auto-Accept 模式</a></h3>
<pre><code class="language-bash"># 啟動後按 Shift+Tab 切換
claude
# 然後按 Shift+Tab 進入自動接受模式
</code></pre>
<p><strong>特點：</strong></p>
<ul>
<li>部分自動化</li>
<li>可隨時切換</li>
<li>保持一定控制權</li>
</ul>
<h3 id="4-print-模式單次任務"><a class="header" href="#4-print-模式單次任務">4. Print 模式（單次任務）</a></h3>
<pre><code class="language-bash">claude -p "具體任務描述"
</code></pre>
<p><strong>特點：</strong></p>
<ul>
<li>非互動式</li>
<li>適合腳本化</li>
<li>執行完就結束</li>
</ul>
<h3 id="5-任務排隊系統"><a class="header" href="#5-任務排隊系統">5. 任務排隊系統</a></h3>
<pre><code class="language-bash"># 啟動自動化模式後，可連續輸入多個任務
claude --dangerously-skip-permissions

# 然後輸入一系列任務（Claude 會智能排序執行）
"修復所有 lint 錯誤"
"運行完整測試套件並修復失敗測試"
"重構重複代碼"
"添加缺失的註解和文檔"
"優化性能瓶頸"
</code></pre>
<hr />
<h2 id="夜間自動化設置"><a class="header" href="#夜間自動化設置">夜間自動化設置</a></h2>
<h3 id="適合夜間運行的任務類型"><a class="header" href="#適合夜間運行的任務類型">適合夜間運行的任務類型</a></h3>
<h4 id="bug-修復和建構問題"><a class="header" href="#bug-修復和建構問題">Bug 修復和建構問題</a></h4>
<ul>
<li>修復編譯錯誤</li>
<li>解決依賴衝突</li>
<li>修復測試失敗</li>
<li>處理 lint 警告</li>
<li>解決類型錯誤</li>
</ul>
<h4 id="代碼品質改善"><a class="header" href="#代碼品質改善">代碼品質改善</a></h4>
<ul>
<li>重構重複代碼</li>
<li>添加單元測試</li>
<li>更新過時文檔</li>
<li>優化性能</li>
<li>改善錯誤處理</li>
</ul>
<h4 id="自動化維護"><a class="header" href="#自動化維護">自動化維護</a></h4>
<ul>
<li>更新依賴版本</li>
<li>清理無用代碼</li>
<li>格式化代碼風格</li>
<li>生成 API 文檔</li>
<li>整理 git 歷史</li>
</ul>
<h3 id="夜間自動化啟動方式"><a class="header" href="#夜間自動化啟動方式">夜間自動化啟動方式</a></h3>
<h4 id="方式一直接啟動"><a class="header" href="#方式一直接啟動">方式一：直接啟動</a></h4>
<pre><code class="language-bash"># 睡前執行（在專案目錄中）
cd /path/to/your/project
claude --dangerously-skip-permissions
</code></pre>
<p>然後輸入任務清單：</p>
<pre><code>檢查並修復所有建構錯誤
運行完整測試套件，修復所有失敗的測試
處理所有 ESLint 和 TypeScript 警告
重構重複代碼並提高可讀性
添加缺失的單元測試，確保覆蓋率達到 80%
更新依賴到最新穩定版本
生成或更新 API 文檔
優化數據庫查詢和 API 響應時間
添加錯誤處理和日誌記錄
清理無用的註解和死代碼
</code></pre>
<h4 id="方式二單行命令啟動"><a class="header" href="#方式二單行命令啟動">方式二：單行命令啟動</a></h4>
<pre><code class="language-bash">claude --dangerously-skip-permissions -p "執行完整的夜間維護：修復所有 bug、運行測試、重構代碼、更新文檔、優化性能"
</code></pre>
<hr />
<h2 id="token-管理與監控"><a class="header" href="#token-管理與監控">Token 管理與監控</a></h2>
<h3 id="token-使用監控工具"><a class="header" href="#token-使用監控工具">Token 使用監控工具</a></h3>
<h4 id="安裝監控工具"><a class="header" href="#安裝監控工具">安裝監控工具</a></h4>
<pre><code class="language-bash"># CC Usage - CLI 工具用於管理和分析 Claude Code 使用情況
npm install -g cc-usage

# Claude Code Usage Monitor - 實時終端監控工具
npm install -g claude-code-usage-monitor
</code></pre>
<h4 id="使用監控工具"><a class="header" href="#使用監控工具">使用監控工具</a></h4>
<pre><code class="language-bash"># 查看 token 使用情況
cc-usage dashboard

# 實時監控
claude-code-usage-monitor
</code></pre>
<h3 id="節省-token-的策略"><a class="header" href="#節省-token-的策略">節省 Token 的策略</a></h3>
<h4 id="1-代碼優化"><a class="header" href="#1-代碼優化">1. 代碼優化</a></h4>
<ul>
<li>使用簡潔變數名稱（i, j, e, el）</li>
<li>避免過長的函數和類名</li>
<li>刪除不必要的註解</li>
</ul>
<h4 id="2-分階段執行"><a class="header" href="#2-分階段執行">2. 分階段執行</a></h4>
<pre><code class="language-bash"># 階段性執行而非一次性大任務
claude -p "階段1：只修復編譯錯誤"
# 完成後
claude -p "階段2：只運行並修復測試"
# 完成後  
claude -p "階段3：只重構重複代碼"
</code></pre>
<h4 id="3-使用壓縮指令"><a class="header" href="#3-使用壓縮指令">3. 使用壓縮指令</a></h4>
<pre><code class="language-bash"># 當對話接近上下文限制時
/compact
</code></pre>
<h3 id="token-耗盡自動重啟機制"><a class="header" href="#token-耗盡自動重啟機制">Token 耗盡自動重啟機制</a></h3>
<h4 id="監控腳本"><a class="header" href="#監控腳本">監控腳本</a></h4>
<pre><code class="language-bash">#!/bin/bash
# token-monitor.sh

PROJECT_PATH="/path/to/your/project"
LOG_FILE="/tmp/claude-auto.log"

check_tokens() {
    # 檢查 token 使用情況（需要配合監控工具）
    remaining=$(cc-usage check-remaining)
    echo "剩餘 tokens: $remaining"
    
    if [ "$remaining" -lt 1000 ]; then
        return 1  # token 不足
    else
        return 0  # token 充足
    fi
}

while true; do
    if check_tokens; then
        echo "$(date): Tokens 充足，啟動 Claude..." | tee -a $LOG_FILE
        cd $PROJECT_PATH
        
        timeout 4h claude --dangerously-skip-permissions -p "
        繼續開發任務：
        1. 檢查並修復任何建構問題
        2. 運行測試並修復失敗項目
        3. 改善代碼品質
        4. 更新文檔
        完成後進入待機模式
        " | tee -a $LOG_FILE
        
    else
        echo "$(date): Token 不足，等待補充..." | tee -a $LOG_FILE
        sleep 3600  # 等待1小時
    fi
    
    sleep 300  # 5分鐘後再檢查
done
</code></pre>
<hr />
<h2 id="claudemd-優化實戰"><a class="header" href="#claudemd-優化實戰">CLAUDE.md 優化實戰</a></h2>
<h3 id="您的精簡理念是對的"><a class="header" href="#您的精簡理念是對的">您的精簡理念是對的</a></h3>
<p>官方初始化產生的 CLAUDE.md 確實冗長，建議精簡至：</p>
<pre><code class="language-markdown"># 核心指令
請務必測試。
指定修改檔案：編輯 src/components/Button.tsx
使用專案既有架構模式
錯誤必須印 log 才處理
避免 over-engineering

# 工作流程
- 先討論方案再寫程式
- 每次修改後執行測試
- 提交前檢查 linting
</code></pre>
<h3 id="更進階的-claudemd-技巧"><a class="header" href="#更進階的-claudemd-技巧">更進階的 CLAUDE.md 技巧</a></h3>
<ul>
<li><strong>分層管理</strong>：在不同目錄放置不同的 CLAUDE.md
<ul>
<li>專案根目錄：全域規則</li>
<li>各子模組：特定規則</li>
</ul>
</li>
<li><strong>動態更新</strong>：使用 <code>#</code> 鍵讓 Claude 自動更新 CLAUDE.md</li>
</ul>
<hr />
<h2 id="token-節省攻略"><a class="header" href="#token-節省攻略">Token 節省攻略</a></h2>
<h3 id="模型切換策略"><a class="header" href="#模型切換策略">模型切換策略</a></h3>
<pre><code class="language-bash">/model haiku    # 基礎操作（成本僅 Opus 的 5.3%）
/model sonnet   # 中等複雜任務
/model opus     # 複雜架構設計
</code></pre>
<p><strong>智能切換建議：</strong></p>
<ul>
<li>讀檔案、簡單修改 → Haiku</li>
<li>程式邏輯、重構 → Sonnet</li>
<li>架構設計、複雜 debug → Opus</li>
</ul>
<h3 id="上下文管理精髓"><a class="header" href="#上下文管理精髓">上下文管理精髓</a></h3>
<pre><code class="language-bash">/clear          # 每完成一個任務就清空
/compact        # 保留重要資訊的壓縮
/cost           # 隨時監控使用量
/resume         # 從歷史恢復（省去重複輸入）
</code></pre>
<h3 id="省-token-的指令技巧"><a class="header" href="#省-token-的指令技巧">省 Token 的指令技巧</a></h3>
<p><strong>精簡指令模式：</strong></p>
<pre><code class="language-bash"># 壞習慣：冗長描述
請幫我分析這個檔案的程式碼結構，然後告訴我有什麼問題...

# 好習慣：直接指令
分析 src/utils.js 找出效能問題
</code></pre>
<p><strong>批次操作：</strong></p>
<pre><code class="language-bash"># 一次處理多個任務
修正 src/*.ts 的型別錯誤 + 執行測試 + 更新文件
</code></pre>
<p><strong>使用檔案路徑：</strong></p>
<pre><code class="language-bash"># 直接指定不用讓 Claude 搜尋
編輯 src/components/Button.tsx line 45-60
</code></pre>
<h3 id="快取利用技巧"><a class="header" href="#快取利用技巧">快取利用技巧</a></h3>
<p><strong>重複使用相同文件結構：</strong></p>
<ul>
<li>Claude 會快取讀過的檔案</li>
<li>重新開啟專案時先讀取主要檔案</li>
<li>使用 <code>@filename</code> 快速引用</li>
</ul>
<p><strong>記憶管理：</strong></p>
<pre><code class="language-bash"># 建立專案記憶快照
/remember 專案架構使用 React + TypeScript + Vite

# 引用記憶避免重複說明
使用已記住的架構新增登入功能
</code></pre>
<h3 id="ccusage-監控神器"><a class="header" href="#ccusage-監控神器">ccusage 監控神器</a></h3>
<pre><code class="language-bash">npm install -g ccusage
ccusage daily               # 查看每日用量
ccusage blocks --live       # 實時監控
ccusage summary            # 週/月度報告
ccusage alerts             # 設定用量警告
</code></pre>
<hr />
<h2 id="效率提升技巧"><a class="header" href="#效率提升技巧">效率提升技巧</a></h2>
<h3 id="plan-mode-工作流程"><a class="header" href="#plan-mode-工作流程">Plan Mode 工作流程</a></h3>
<pre><code class="language-bash">think hard 如何重構這個模組？
ultrathink 設計這個功能的最佳架構
</code></pre>
<h3 id="多工處理技巧"><a class="header" href="#多工處理技巧">多工處理技巧</a></h3>
<pre><code class="language-bash"># 創建獨立工作樹（吳恩達課程推薦）
git worktree add ../project-feature-a feature-a
# 在不同工作樹同時運行多個 Claude Code
</code></pre>
<p><strong>課程實戰技巧：</strong></p>
<ul>
<li>每個功能分支使用獨立工作樹</li>
<li>並行開發不同模組避免衝突</li>
<li>使用不同的 CLAUDE.md 管理各工作樹</li>
</ul>
<h3 id="權限管理優化"><a class="header" href="#權限管理優化">權限管理優化</a></h3>
<pre><code class="language-bash">claude --dangerously-skip-permissions
alias claude='claude --dangerously-skip-permissions'
</code></pre>
<hr />
<h2 id="高級工作流程"><a class="header" href="#高級工作流程">高級工作流程</a></h2>
<h3 id="測試驅動開發tdd"><a class="header" href="#測試驅動開發tdd">測試驅動開發（TDD）</a></h3>
<p>在 CLAUDE.md 中強制執行 TDD：</p>
<pre><code class="language-markdown">MUST: 先寫測試再寫程式碼
MUST: 每次修改後執行完整測試
MUST: 所有測試必須通過才能提交
</code></pre>
<h3 id="自動化指令"><a class="header" href="#自動化指令">自動化指令</a></h3>
<pre><code class="language-bash"># .claude/commands/refactor.md
重構指定檔案：
1. 分析現有程式碼結構
2. 識別改進機會
3. 保持 API 相容性
4. 執行完整測試
</code></pre>
<h3 id="超級省-token-密技"><a class="header" href="#超級省-token-密技">超級省 Token 密技</a></h3>
<h4 id="使用簡潔符號"><a class="header" href="#使用簡潔符號">使用簡潔符號</a></h4>
<pre><code class="language-bash"># 標準指令
check src/api.js for bugs

# 符號簡化  
chk src/api.js bugs

# 極簡模式
fix: api.js:42 TypeError
</code></pre>
<h4 id="預設模板指令"><a class="header" href="#預設模板指令">預設模板指令</a></h4>
<p><strong>在 CLAUDE.md 中定義縮寫：</strong></p>
<pre><code class="language-markdown"># 快捷指令
- `rf` = 重構檔案保持 API 不變
- `tdd` = 先寫測試再實作
- `perf` = 效能分析和優化
- `docs` = 更新 README 和註解
</code></pre>
<h4 id="多檔案操作技巧"><a class="header" href="#多檔案操作技巧">多檔案操作技巧</a></h4>
<pre><code class="language-bash"># 一次處理相關檔案
同時修改 Button.tsx + Button.test.tsx + Button.stories.tsx

# 使用 glob 模式
更新所有 components/**/*.tsx 的 props 介面
</code></pre>
<h4 id="上下文切割策略"><a class="header" href="#上下文切割策略">上下文切割策略</a></h4>
<p><strong>功能拆分：</strong></p>
<ul>
<li>每個功能一個 session</li>
<li>完成後立即 <code>/clear</code></li>
<li>用 <code>/resume</code> 連接相關 session</li>
</ul>
<p><strong>檔案分組：</strong></p>
<ul>
<li>前端 session：只處理 UI 相關</li>
<li>後端 session：只處理 API/DB</li>
<li>測試 session：專門寫測試</li>
</ul>
<h4 id="快速除錯模式"><a class="header" href="#快速除錯模式">快速除錯模式</a></h4>
<pre><code class="language-bash"># 直接貼錯誤訊息
TypeError: Cannot read property 'map' of undefined at line 42

# 不用多說，Claude 會自動定位和修復
</code></pre>
<h4 id="利用-git-歷史"><a class="header" href="#利用-git-歷史">利用 Git 歷史</a></h4>
<pre><code class="language-bash"># 讓 Claude 從 commit 學習
基於最近 3 個 commits 的模式修改登入功能
</code></pre>
<h3 id="成本效益分析"><a class="header" href="#成本效益分析">成本效益分析</a></h3>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">使用類型</th><th style="text-align: left">日均成本</th><th style="text-align: left">備註</th></tr></thead><tbody>
<tr><td style="text-align: left">中型專案</td><td style="text-align: left">$20–50</td><td style="text-align: left">常規開發</td></tr>
<tr><td style="text-align: left">大型專案</td><td style="text-align: left">$100–200</td><td style="text-align: left">重度使用</td></tr>
<tr><td style="text-align: left">Max Plan</td><td style="text-align: left">$200/月</td><td style="text-align: left">無限用量</td></tr>
</tbody></table>
</div>
<ul>
<li><strong>輸入幾乎免費</strong>：大量上下文成本極低</li>
<li><strong>輸出計價</strong>：實際產出越多花費越高</li>
<li><strong>快取機制</strong>：重複內容可節省約 90% 成本</li>
</ul>
<hr />
<h2 id="吳恩達-x-anthropic-官方免費課程"><a class="header" href="#吳恩達-x-anthropic-官方免費課程">吳恩達 x Anthropic 官方免費課程</a></h2>
<h3 id="課程概況"><a class="header" href="#課程概況">課程概況</a></h3>
<p><strong>課程名稱</strong>：Claude Code: A Highly Agentic Coding Assistant<br />
<strong>合作方</strong>：DeepLearning.AI（吳恩達創辦）x Anthropic<br />
<strong>講師</strong>：Elie Schoppik（Anthropic 技術教育主管）<br />
<strong>時長</strong>：1小時50分鐘（共10個課程單元）<br />
<strong>費用</strong>：完全免費<br />
<strong>課程連結</strong>：https://www.deeplearning.ai/short-courses/claude-code-a-highly-agentic-coding-assistant/</p>
<h3 id="完整教學大綱"><a class="header" href="#完整教學大綱">完整教學大綱</a></h3>
<p><strong>學習目標</strong></p>
<ul>
<li>使用 Claude Code 探索、開發、測試、重構和除錯程式碼庫</li>
<li>透過 MCP 伺服器擴展 Claude Code 功能</li>
<li>在三個實務專案中應用最佳實踐</li>
</ul>
<p><strong>核心技能培養</strong></p>
<ul>
<li>理解 Claude Code 的架構設計</li>
<li>建立 CLAUDE.md 專案文檔管理</li>
<li>使用 escape/clear 指令管理上下文</li>
<li>利用 git worktrees 進行並行開發</li>
<li>GitHub 整合和 Issues 管理</li>
<li>MCP 伺服器連接（Figma、Playwright）</li>
</ul>
<h3 id="三大實戰專案"><a class="header" href="#三大實戰專案">三大實戰專案</a></h3>
<p><strong>專案一：RAG 聊天機器人</strong></p>
<ul>
<li>探索前後端架構設計</li>
<li>新增功能模組</li>
<li>撰寫完整測試套件</li>
<li>程式碼重構優化</li>
</ul>
<p><strong>專案二：電商數據分析</strong></p>
<ul>
<li>Jupyter notebook 重構</li>
<li>轉換為互動式儀表板</li>
<li>數據視覺化優化</li>
</ul>
<p><strong>專案三：Web 應用開發</strong></p>
<ul>
<li>基於 Figma 設計稿建立 Web 界面</li>
<li>使用 Playwright 進行 UI 設計改進</li>
<li>響應式界面開發</li>
</ul>
<h3 id="吳恩達的-ai-民主化願景"><a class="header" href="#吳恩達的-ai-民主化願景">吳恩達的 AI 民主化願景</a></h3>
<blockquote>
<p>"AI 教育應該是大眾化、通識化，而不是只屬於少數精英"</p>
</blockquote>
<p>這門課程體現了吳恩達的核心理念：</p>
<ul>
<li><strong>普及化學習</strong>：讓任何人都能掌握 AI 工具</li>
<li><strong>實務導向</strong>：專注於真實工作場景應用</li>
<li><strong>全球培育</strong>：已培育超過 700 萬名 AI 人才</li>
</ul>
<h3 id="課程亮點特色"><a class="header" href="#課程亮點特色">課程亮點特色</a></h3>
<p><strong>高度自主性</strong></p>
<ul>
<li>Claude Code 能以最少人工輸入自主規劃、執行、改進程式碼</li>
<li>跨會話記憶和協作能力</li>
<li>通過 hooks 調用外部工具</li>
</ul>
<p><strong>企業級應用</strong></p>
<ul>
<li>真實專案案例研究</li>
<li>團隊協作工作流程</li>
<li>生產環境最佳實踐</li>
</ul>
<p><strong>前瞻技術整合</strong></p>
<ul>
<li>MCP（Model Context Protocol）伺服器</li>
<li>GitHub Issues 自動化</li>
<li>Figma 設計稿直接轉程式碼</li>
</ul>
<hr />
<h2 id="進階整合技巧"><a class="header" href="#進階整合技巧">進階整合技巧</a></h2>
<h3 id="ide-協同作業"><a class="header" href="#ide-協同作業">IDE 協同作業</a></h3>
<ul>
<li>與 Cursor 無縫整合</li>
<li>支援 VS Code、JetBrains 系列</li>
</ul>
<h3 id="mcp-工具擴展"><a class="header" href="#mcp-工具擴展">MCP 工具擴展</a></h3>
<pre><code class="language-bash">npm install context7 browsermcp puppeteer
</code></pre>
<p><strong>吳恩達課程重點 MCP 伺服器：</strong></p>
<ul>
<li><strong>Figma MCP</strong>：直接從設計稿生成程式碼</li>
<li><strong>Playwright MCP</strong>：自動化 UI 測試和改進</li>
<li><strong>GitHub MCP</strong>：Issues 管理和自動化</li>
</ul>
<p><strong>實戰應用場景：</strong></p>
<pre><code class="language-bash"># Figma 設計稿轉程式碼
使用 Figma MCP 將設計稿轉換為 React 元件

# 自動化測試
通過 Playwright MCP 建立完整的 E2E 測試
</code></pre>
<h3 id="git-整合工作流程"><a class="header" href="#git-整合工作流程">Git 整合工作流程</a></h3>
<ul>
<li>自動分析 commit 歷史</li>
<li>整合 GitHub Issues</li>
<li>生成週報摘要</li>
<li>自動化 PR 審查</li>
</ul>
<hr />
<h2 id="社群最佳實踐"><a class="header" href="#社群最佳實踐">社群最佳實踐</a></h2>
<h3 id="新手建議"><a class="header" href="#新手建議">新手建議</a></h3>
<ol>
<li>從 Codebase Q&amp;A 開始</li>
<li>逐步導入程式碼編輯功能</li>
<li>善用內建工具（bash、測試等）</li>
<li>建立專案特定的工具清單</li>
</ol>
<h3 id="團隊協作"><a class="header" href="#團隊協作">團隊協作</a></h3>
<ul>
<li>共享 CLAUDE.md 設定檔</li>
<li>建立統一的提示詞模板</li>
<li>制定一致的程式碼風格規範</li>
<li>撰寫專案專屬最佳實踐文件</li>
</ul>
<h3 id="超省錢使用模式"><a class="header" href="#超省錢使用模式">超省錢使用模式</a></h3>
<p><strong>學生/個人開發者</strong></p>
<ul>
<li>95% 使用 Haiku 模式</li>
<li>只有卡關才切換 Sonnet</li>
<li>善用 <code>/compact</code> 和 <code>/clear</code></li>
<li>月花費控制在 $10 以下</li>
</ul>
<p><strong>小團隊策略</strong></p>
<ul>
<li>一人主導 Claude Code 操作</li>
<li>其他人提供需求和驗收</li>
<li>共享一個付費帳號降低成本</li>
<li>建立內部知識庫減少重複查詢</li>
</ul>
<p><strong>企業級使用</strong></p>
<ul>
<li>採用 Max Plan 無限制方案</li>
<li>建立企業級 CLAUDE.md 模板</li>
<li>整合 CI/CD 自動化流程</li>
<li>定期檢討和優化使用模式</li>
</ul>
<hr />
<h2 id="實戰建議"><a class="header" href="#實戰建議">實戰建議</a></h2>
<p><strong>適合</strong></p>
<ul>
<li>大型程式碼重構</li>
<li>新功能快速原型</li>
<li>Bug 調查與修復</li>
<li>程式碼審查與優化</li>
<li>自動化腳本開發</li>
</ul>
<p><strong>不適合</strong></p>
<ul>
<li>極度複雜的演算法設計</li>
<li>需大量人工判斷的 UI/UX</li>
<li>高度安全敏感的程式碼</li>
</ul>
<h3 id="終極省-token-檢查清單"><a class="header" href="#終極省-token-檢查清單">終極省 Token 檢查清單</a></h3>
<h4 id="開始前檢查"><a class="header" href="#開始前檢查">開始前檢查</a></h4>
<ul>
<li><input disabled="" type="checkbox"/>
選對模型（90% 任務用 Haiku）</li>
<li><input disabled="" type="checkbox"/>
清空上次的 context（<code>/clear</code>）</li>
<li><input disabled="" type="checkbox"/>
準備好檔案路徑和行數</li>
<li><input disabled="" type="checkbox"/>
寫好精簡的指令</li>
</ul>
<h4 id="進行中優化"><a class="header" href="#進行中優化">進行中優化</a></h4>
<ul>
<li><input disabled="" type="checkbox"/>
避免讓 Claude 解釋或總結</li>
<li><input disabled="" type="checkbox"/>
用符號和縮寫替代長句</li>
<li><input disabled="" type="checkbox"/>
批次處理相關任務</li>
<li><input disabled="" type="checkbox"/>
直接貼錯誤訊息不要描述</li>
</ul>
<h4 id="完成後清理"><a class="header" href="#完成後清理">完成後清理</a></h4>
<ul>
<li><input disabled="" type="checkbox"/>
立即 <code>/clear</code> 釋放 context</li>
<li><input disabled="" type="checkbox"/>
更新 CLAUDE.md 避免重複</li>
<li><input disabled="" type="checkbox"/>
檢查 <code>/cost</code> 確認花費</li>
<li><input disabled="" type="checkbox"/>
記錄高效的指令模式</li>
</ul>
<h4 id="月度回顧"><a class="header" href="#月度回顧">月度回顧</a></h4>
<ul>
<li><input disabled="" type="checkbox"/>
分析 <code>ccusage</code> 報告</li>
<li><input disabled="" type="checkbox"/>
調整模型使用比例</li>
<li><input disabled="" type="checkbox"/>
優化 CLAUDE.md 模板</li>
<li><input disabled="" type="checkbox"/>
分享團隊最佳實踐</li>
</ul>
<p><strong>記住：輸入便宜、輸出昂貴。讓 Claude 少說話、多做事！</strong> 💪</p>
<h3 id="延伸學習資源"><a class="header" href="#延伸學習資源">延伸學習資源</a></h3>
<h4 id="官方推薦課程"><a class="header" href="#官方推薦課程">官方推薦課程</a></h4>
<ul>
<li>
<p>🎓 <strong>吳恩達 x Anthropic 免費課程</strong><br />
https://www.deeplearning.ai/short-courses/claude-code-a-highly-agentic-coding-assistant/</p>
</li>
<li>
<p>📚 <strong>Claude Code 官方文件</strong><br />
https://docs.anthropic.com/en/docs/claude-code</p>
</li>
<li>
<p>🛠 <strong>MCP 伺服器生態系統</strong><br />
https://github.com/anthropic/mcp-servers</p>
</li>
</ul>
<h4 id="社群資源"><a class="header" href="#社群資源">社群資源</a></h4>
<ul>
<li>
<p>💬 <strong>DeepLearning.AI 社群討論</strong><br />
課程相關問題解答和經驗分享</p>
</li>
<li>
<p>🔧 <strong>GitHub Claude Code 整合範例</strong><br />
實際專案應用案例和最佳實踐</p>
</li>
</ul>
<h4 id="持續學習建議"><a class="header" href="#持續學習建議">持續學習建議</a></h4>
<ol>
<li>完成吳恩達免費課程（1小時50分鐘）</li>
<li>實際應用三大專案模式到自己的工作</li>
<li>參與 DeepLearning.AI 社群討論</li>
<li>定期關注 Anthropic 和 Claude Code 更新</li>
</ol>
<blockquote>
<p>"AI 的未來在於讓每個人都能成為更好的開發者" —— Andrew Ng</p>
</blockquote>
<blockquote>
<p>"每次都要糾正 AI 的就放進 CLAUDE.md" —— 迭代優化，是發揮 Claude Code 最大價值的關鍵。</p>
</blockquote>
<hr />
<h2 id="實用腳本範例"><a class="header" href="#實用腳本範例">實用腳本範例</a></h2>
<h3 id="1-基本夜間自動化腳本"><a class="header" href="#1-基本夜間自動化腳本">1. 基本夜間自動化腳本</a></h3>
<pre><code class="language-bash">#!/bin/bash
# basic-auto-dev.sh

PROJECT_PATH="/path/to/your/project"
LOG_FILE="/tmp/claude-dev-$(date +%Y%m%d).log"

echo "$(date): 開始夜間自動化開發" | tee -a $LOG_FILE

cd $PROJECT_PATH

# 啟動完全自動化模式，設置最大6小時執行時間
timeout 6h claude --dangerously-skip-permissions -p "
🌙 夜間自動化開發任務清單：

## 第一優先級（必須完成）
1. 檢查並修復所有編譯錯誤
2. 解決建構失敗問題
3. 修復所有測試失敗

## 第二優先級（代碼品質）  
4. 處理所有 lint 警告和錯誤
5. 修復 TypeScript 類型錯誤
6. 重構重複代碼

## 第三優先級（改善和優化）
7. 添加缺失的單元測試
8. 更新過時的註解和文檔
9. 優化性能瓶頸
10. 清理死代碼和無用導入

## 第四優先級（維護）
11. 更新依賴到最新穩定版本
12. 生成 API 文檔
13. 整理 git 提交歷史

請按優先級順序執行，完成一個階段後報告進度。
如果遇到需要人工決策的問題，請詳細記錄並繼續下一個任務。
" | tee -a $LOG_FILE

exit_code=$?

if [ $exit_code -eq 124 ]; then
    echo "$(date): 6小時超時完成" | tee -a $LOG_FILE
elif [ $exit_code -eq 0 ]; then
    echo "$(date): 所有任務完成" | tee -a $LOG_FILE
else
    echo "$(date): 執行中斷，錯誤代碼: $exit_code" | tee -a $LOG_FILE
fi

echo "$(date): 夜間自動化結束，檢查日誌: $LOG_FILE" | tee -a $LOG_FILE
</code></pre>
<h3 id="2-循環重啟腳本"><a class="header" href="#2-循環重啟腳本">2. 循環重啟腳本</a></h3>
<pre><code class="language-bash">#!/bin/bash
# continuous-auto-dev.sh

PROJECT_PATH="/path/to/your/project"
LOG_FILE="/tmp/claude-continuous.log"
MAX_CYCLES=5  # 最多重啟5次

cd $PROJECT_PATH

for i in $(seq 1 $MAX_CYCLES); do
    echo "$(date): 開始第 $i/$MAX_CYCLES 輪開發循環" | tee -a $LOG_FILE
    
    timeout 2h claude --dangerously-skip-permissions -p "
    開發循環 $i：
    1. 檢查項目狀態
    2. 修復發現的問題  
    3. 改善代碼品質
    4. 如果沒有明顯問題，進行優化工作
    
    報告這輪完成的工作和發現的問題。
    " | tee -a $LOG_FILE
    
    echo "$(date): 第 $i 輪完成，休息5分鐘..." | tee -a $LOG_FILE
    sleep 300
done

echo "$(date): 所有循環完成" | tee -a $LOG_FILE
</code></pre>
<h3 id="3-cron-定時任務設置"><a class="header" href="#3-cron-定時任務設置">3. Cron 定時任務設置</a></h3>
<pre><code class="language-bash"># 編輯 crontab
crontab -e

# 添加以下任務：

# 每晚10點啟動夜間開發
0 22 * * * cd /path/to/project &amp;&amp; /path/to/basic-auto-dev.sh

# 每6小時檢查一次（適合長期項目）
0 */6 * * * cd /path/to/project &amp;&amp; claude --dangerously-skip-permissions -p "快速檢查並修復緊急問題" &gt;&gt; /tmp/claude-check.log 2&gt;&amp;1

# 每天早上8點生成開發報告
0 8 * * * cd /path/to/project &amp;&amp; claude -p "生成昨夜開發工作摘要報告" &gt; /tmp/daily-report-$(date +\%Y\%m\%d).txt

# 週末進行深度重構（每週六凌晨2點）
0 2 * * 6 cd /path/to/project &amp;&amp; timeout 8h claude --dangerously-skip-permissions -p "執行深度代碼重構和架構優化"
</code></pre>
<h3 id="4-項目特定配置腳本"><a class="header" href="#4-項目特定配置腳本">4. 項目特定配置腳本</a></h3>
<pre><code class="language-bash">#!/bin/bash
# project-specific-setup.sh

PROJECT_PATH="/path/to/your/project"
cd $PROJECT_PATH

# 創建 CLAUDE.md 配置文件
cat &gt; CLAUDE.md &lt;&lt; 'EOF'
# 項目開發指南

## 技術棧
- Frontend: React + TypeScript + Tailwind CSS
- Backend: Node.js + Express + PostgreSQL  
- Testing: Jest + React Testing Library
- Build: Vite + ESBuild

## 代碼風格
- 使用 TypeScript 嚴格模式
- 遵循 ESLint + Prettier 規則
- 函數命名使用 camelCase
- 組件命名使用 PascalCase
- 常量使用 UPPER_CASE

## 測試要求
- 每個 API 端點都要有測試
- React 組件需要渲染測試
- 工具函數需要單元測試  
- 總覆蓋率需達到 80% 以上

## 常見任務命令
- 安裝依賴：`npm install`
- 啟動開發：`npm run dev`
- 運行測試：`npm test`
- 代碼檢查：`npm run lint`
- 代碼格式化：`npm run format` 
- 建構項目：`npm run build`
- 類型檢查：`npm run type-check`

## 部署流程
1. 確保所有測試通過
2. 更新版本號
3. 建構生產版本
4. 部署到 staging 環境測試
5. 部署到 production 環境

## 已知問題
- [ ] API 響應時間偶爾較慢
- [ ] 某些組件的 TypeScript 類型定義不完整
- [ ] 測試覆蓋率還未達到目標

## 優化目標
- [ ] 改善 API 性能
- [ ] 完善類型定義
- [ ] 增加測試覆蓋率
- [ ] 重構重複代碼
- [ ] 更新過時文檔
EOF

echo "CLAUDE.md 配置文件已創建"

# 設置 hooks（如果需要）
mkdir -p .claude/hooks

# 創建自動格式化 hook
cat &gt; .claude/hooks/post-edit &lt;&lt; 'EOF'
#!/bin/bash
# 文件編輯後自動格式化
if [[ "$CLAUDE_TOOL_OUTPUT" == *.js ]] || [[ "$CLAUDE_TOOL_OUTPUT" == *.ts ]] || [[ "$CLAUDE_TOOL_OUTPUT" == *.tsx ]]; then
    npm run format "$CLAUDE_TOOL_OUTPUT"
fi
EOF

chmod +x .claude/hooks/post-edit

echo "項目配置完成，可以開始使用 Claude Code"
</code></pre>
<hr />
<h2 id="安全考量與最佳實踐"><a class="header" href="#安全考量與最佳實踐">安全考量與最佳實踐</a></h2>
<h3 id="安全措施"><a class="header" href="#安全措施">安全措施</a></h3>
<h4 id="1-備份策略"><a class="header" href="#1-備份策略">1. 備份策略</a></h4>
<pre><code class="language-bash"># 設置自動備份
# 在啟動 Claude 前執行備份
git add . &amp;&amp; git commit -m "Pre-Claude backup $(date)"

# 使用專用分支進行 AI 開發
git checkout -b ai-development-$(date +%Y%m%d)
</code></pre>
<h4 id="2-容器化隔離推薦"><a class="header" href="#2-容器化隔離推薦">2. 容器化隔離（推薦）</a></h4>
<pre><code class="language-dockerfile"># Dockerfile for safe Claude development
FROM node:18-alpine

WORKDIR /app
COPY . .

# 安裝 Claude Code
RUN npm install -g @anthropic-ai/claude-code

# 限制網路存取（可選）
# RUN apk add --no-cache iptables

CMD ["claude", "--dangerously-skip-permissions"]
</code></pre>
<pre><code class="language-bash"># 使用 Docker 運行
docker build -t claude-dev .
docker run -it -v $(pwd):/app claude-dev
</code></pre>
<h4 id="3-權限配置替代方案"><a class="header" href="#3-權限配置替代方案">3. 權限配置替代方案</a></h4>
<pre><code class="language-json">// ~/.claude.json - 較安全的權限設置
{
  "allowedTools": [
    "Read(*)",
    "Write(*.js,*.ts,*.tsx,*.json,*.md)",
    "Bash(npm *)",
    "Bash(git add *)",
    "Bash(git commit *)",
    "Edit(*)"
  ],
  "deniedTools": [
    "Bash(rm *)",
    "Bash(sudo *)", 
    "Bash(curl *)",
    "Bash(wget *)"
  ]
}
</code></pre>
<h3 id="風險控制"><a class="header" href="#風險控制">風險控制</a></h3>
<h4 id="風險評估"><a class="header" href="#風險評估">風險評估</a></h4>
<ul>
<li><strong>高風險</strong>：系統文件被誤刪</li>
<li><strong>中風險</strong>：重要代碼被錯誤修改</li>
<li><strong>低風險</strong>：配置文件被更改</li>
</ul>
<h4 id="預防措施"><a class="header" href="#預防措施">預防措施</a></h4>
<pre><code class="language-bash"># 1. 定期備份
alias backup-before-claude="git add . &amp;&amp; git commit -m 'Backup before Claude $(date)'"

# 2. 監控文件變化
alias show-claude-changes="git diff HEAD~1"

# 3. 快速回滾
alias undo-claude="git reset --hard HEAD~1"
</code></pre>
<hr />
<h2 id="故障排除"><a class="header" href="#故障排除">故障排除</a></h2>
<h3 id="常見問題與解決方案"><a class="header" href="#常見問題與解決方案">常見問題與解決方案</a></h3>
<h4 id="1-token-用完"><a class="header" href="#1-token-用完">1. Token 用完</a></h4>
<pre><code class="language-bash"># 檢查使用量
claude --version  # 查看配額信息

# 等待重置或升級計劃
# 設置監控腳本自動重試
</code></pre>
<h4 id="2-權限問題"><a class="header" href="#2-權限問題">2. 權限問題</a></h4>
<pre><code class="language-bash"># 檢查權限設置
claude --help | grep permission

# 重新設置權限
/permissions  # 在 Claude 內部使用
</code></pre>
<h4 id="3-任務中斷"><a class="header" href="#3-任務中斷">3. 任務中斷</a></h4>
<pre><code class="language-bash"># 使用 /compact 壓縮上下文
/compact

# 重新啟動並要求繼續
claude --dangerously-skip-permissions -p "繼續之前未完成的開發任務"
</code></pre>
<h4 id="4-性能問題"><a class="header" href="#4-性能問題">4. 性能問題</a></h4>
<pre><code class="language-bash"># 清理 Claude 緩存
rm -rf ~/.claude/cache/*

# 重新啟動 Claude
</code></pre>
<h3 id="調試技巧"><a class="header" href="#調試技巧">調試技巧</a></h3>
<h4 id="1-詳細模式"><a class="header" href="#1-詳細模式">1. 詳細模式</a></h4>
<pre><code class="language-bash"># 啟用詳細日誌
claude --verbose --dangerously-skip-permissions
</code></pre>
<h4 id="2-日誌分析"><a class="header" href="#2-日誌分析">2. 日誌分析</a></h4>
<pre><code class="language-bash"># 查看 Claude 日誌
tail -f ~/.claude/logs/claude.log

# 分析錯誤模式
grep "ERROR" ~/.claude/logs/* | head -20
</code></pre>
<h4 id="3-逐步調試"><a class="header" href="#3-逐步調試">3. 逐步調試</a></h4>
<pre><code class="language-bash"># 分步執行任務
claude -p "只檢查項目狀態，不要修改任何文件"
claude -p "只修復編譯錯誤，一次一個文件"
claude -p "只運行測試，報告結果"
</code></pre>
<hr />
<h2 id="總結"><a class="header" href="#總結">總結</a></h2>
<p>Claude Code 可以實現真正的「睡覺前啟動，早上看結果」的自動化開發工作流程。關鍵要素：</p>
<h3 id="-成功要素"><a class="header" href="#-成功要素">✅ 成功要素</a></h3>
<ol>
<li><strong>正確使用命令</strong>：<code>claude</code>（不是 claude-code）</li>
<li><strong>完全自動化</strong>：<code>--dangerously-skip-permissions</code></li>
<li><strong>任務排隊</strong>：一次性輸入多個相關任務</li>
<li><strong>Token 管理</strong>：監控使用量，設置自動重啟</li>
<li><strong>安全備份</strong>：使用 git 和定期備份</li>
<li><strong>腳本化</strong>：使用 shell 腳本或 cron 自動化</li>
</ol>
<h3 id="-最佳實踐"><a class="header" href="#-最佳實踐">🚀 最佳實踐</a></h3>
<ul>
<li>在專用分支進行 AI 開發</li>
<li>設置 CLAUDE.md 項目配置文件</li>
<li>使用容器隔離提高安全性</li>
<li>定期監控和調整自動化腳本</li>
<li>保持任務具體明確，避免模糊指令</li>
</ul>
<h3 id="-注意事項"><a class="header" href="#-注意事項">⚠️ 注意事項</a></h3>
<ul>
<li><code>--dangerously-skip-permissions</code> 有風險，需要適當預防措施</li>
<li>Token 使用量需要監控，避免超額</li>
<li>複雜任務可能需要分階段執行</li>
<li>定期檢查和調整自動化策略</li>
</ul>
<p>這樣的設置特別適合處理重複性維護任務、bug 修復、代碼品質改善和日常開發工作。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tools/changedetection-setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../tools/claude_code_best_practices.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tools/changedetection-setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../tools/claude_code_best_practices.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
