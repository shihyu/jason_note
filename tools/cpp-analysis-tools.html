<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>程式分析與效能工具完整指南 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="程式分析工具完整指南---多語言版"><a class="header" href="#程式分析工具完整指南---多語言版">程式分析工具完整指南 - 多語言版</a></h1>
<h2 id="目錄"><a class="header" href="#目錄">目錄</a></h2>
<ul>
<li><a href="#cc-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">C/C++ 分析工具</a></li>
<li><a href="#python-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">Python 分析工具</a></li>
<li><a href="#java-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">Java 分析工具</a></li>
<li><a href="#go-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">Go 分析工具</a></li>
<li><a href="#rust-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">Rust 分析工具</a></li>
<li><a href="#javascriptnodejs-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">JavaScript/Node.js 分析工具</a></li>
<li><a href="#netc-%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7">.NET/C# 分析工具</a></li>
<li><a href="#%E8%B7%A8%E8%AA%9E%E8%A8%80%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7">跨語言通用工具</a></li>
<li><a href="#%E8%A6%96%E8%A6%BA%E5%8C%96%E5%B7%A5%E5%85%B7">視覺化工具</a></li>
</ul>
<hr />
<h2 id="cc-分析工具"><a class="header" href="#cc-分析工具">C/C++ 分析工具</a></h2>
<h3 id="記憶體分析"><a class="header" href="#記憶體分析">記憶體分析</a></h3>
<h4 id="valgrind-linuxmacos"><a class="header" href="#valgrind-linuxmacos">Valgrind (Linux/macOS)</a></h4>
<pre><code class="language-bash">valgrind --leak-check=full --show-leak-kinds=all ./program
valgrind --tool=massif ./program  # heap profiling
</code></pre>
<h4 id="addresssanitizer-asan"><a class="header" href="#addresssanitizer-asan">AddressSanitizer (ASan)</a></h4>
<pre><code class="language-bash">g++ -fsanitize=address -g program.cpp
clang++ -fsanitize=address -g program.cpp
</code></pre>
<h4 id="memory-sanitizer-msan"><a class="header" href="#memory-sanitizer-msan">Memory Sanitizer (MSan)</a></h4>
<pre><code class="language-bash">clang++ -fsanitize=memory -fPIE -pie -g program.cpp
</code></pre>
<h4 id="dr-memory-跨平台"><a class="header" href="#dr-memory-跨平台">Dr. Memory (跨平台)</a></h4>
<pre><code class="language-bash">drmemory -- ./program
</code></pre>
<h3 id="效能分析"><a class="header" href="#效能分析">效能分析</a></h3>
<h4 id="perf-linux"><a class="header" href="#perf-linux">perf (Linux)</a></h4>
<pre><code class="language-bash">perf record -g ./program
perf report
perf stat ./program
</code></pre>
<h4 id="gprof"><a class="header" href="#gprof">gprof</a></h4>
<pre><code class="language-bash">g++ -pg program.cpp -o program
./program
gprof program gmon.out &gt; analysis.txt
</code></pre>
<h4 id="intel-vtune-profiler"><a class="header" href="#intel-vtune-profiler">Intel VTune Profiler</a></h4>
<ul>
<li>CPU Hotspots</li>
<li>Memory Access</li>
<li>Threading Analysis</li>
<li>Microarchitecture Analysis</li>
</ul>
<h4 id="gperftools"><a class="header" href="#gperftools">gperftools</a></h4>
<pre><code class="language-bash">LD_PRELOAD=/usr/lib/libprofiler.so CPUPROFILE=prof.out ./program
google-pprof --pdf program prof.out &gt; profile.pdf
</code></pre>
<hr />
<h2 id="python-分析工具"><a class="header" href="#python-分析工具">Python 分析工具</a></h2>
<h3 id="記憶體分析-1"><a class="header" href="#記憶體分析-1">記憶體分析</a></h3>
<h4 id="memory_profiler"><a class="header" href="#memory_profiler">memory_profiler</a></h4>
<pre><code class="language-python"># 安裝: pip install memory-profiler
# 使用裝飾器
@profile
def my_func():
    pass

# 執行
python -m memory_profiler script.py
</code></pre>
<h4 id="tracemalloc-內建"><a class="header" href="#tracemalloc-內建">tracemalloc (內建)</a></h4>
<pre><code class="language-python">import tracemalloc
tracemalloc.start()
# ... code ...
snapshot = tracemalloc.take_snapshot()
top_stats = snapshot.statistics('lineno')
</code></pre>
<h4 id="objgraph"><a class="header" href="#objgraph">objgraph</a></h4>
<pre><code class="language-python"># 視覺化物件引用
import objgraph
objgraph.show_most_common_types()
objgraph.show_refs(obj, filename='refs.png')
</code></pre>
<h4 id="pympler"><a class="header" href="#pympler">pympler</a></h4>
<pre><code class="language-python">from pympler import tracker
tr = tracker.SummaryTracker()
tr.print_diff()
</code></pre>
<h3 id="效能分析-1"><a class="header" href="#效能分析-1">效能分析</a></h3>
<h4 id="cprofile-內建"><a class="header" href="#cprofile-內建">cProfile (內建)</a></h4>
<pre><code class="language-python">python -m cProfile -s cumulative script.py
python -m cProfile -o output.prof script.py
</code></pre>
<h4 id="line_profiler"><a class="header" href="#line_profiler">line_profiler</a></h4>
<pre><code class="language-python"># 安裝: pip install line_profiler
@profile
def slow_function():
    pass

# 執行
kernprof -l -v script.py
</code></pre>
<h4 id="py-spy"><a class="header" href="#py-spy">py-spy</a></h4>
<pre><code class="language-bash"># 不需修改程式碼的 profiler
py-spy record -o profile.svg -- python script.py
py-spy top -- python script.py
py-spy dump --pid $PID
</code></pre>
<h4 id="pyflame-已停止維護"><a class="header" href="#pyflame-已停止維護">Pyflame (已停止維護)</a></h4>
<pre><code class="language-bash">pyflame -s 3600 -r 0.01 -o profile.svg $PID
</code></pre>
<h4 id="austin"><a class="header" href="#austin">Austin</a></h4>
<pre><code class="language-bash">austin python script.py
austin -i 100 python script.py  # 100 微秒採樣間隔
</code></pre>
<h4 id="scalene"><a class="header" href="#scalene">Scalene</a></h4>
<pre><code class="language-bash"># 高效能 CPU+GPU+記憶體 profiler
scalene script.py
</code></pre>
<hr />
<h2 id="java-分析工具"><a class="header" href="#java-分析工具">Java 分析工具</a></h2>
<h3 id="記憶體分析-2"><a class="header" href="#記憶體分析-2">記憶體分析</a></h3>
<h4 id="eclipse-memory-analyzer-mat"><a class="header" href="#eclipse-memory-analyzer-mat">Eclipse Memory Analyzer (MAT)</a></h4>
<ul>
<li>Heap dump 分析</li>
<li>Memory leak 偵測</li>
<li>Dominator tree 分析</li>
</ul>
<h4 id="jmap-jdk-內建"><a class="header" href="#jmap-jdk-內建">jmap (JDK 內建)</a></h4>
<pre><code class="language-bash">jmap -heap $PID
jmap -dump:format=b,file=heap.bin $PID
</code></pre>
<h4 id="jhat-jdk-內建"><a class="header" href="#jhat-jdk-內建">jhat (JDK 內建)</a></h4>
<pre><code class="language-bash">jhat heap.bin
</code></pre>
<h4 id="visualvm"><a class="header" href="#visualvm">VisualVM</a></h4>
<ul>
<li>GUI 工具</li>
<li>Heap/Thread dump</li>
<li>Memory/CPU profiling</li>
</ul>
<h3 id="效能分析-2"><a class="header" href="#效能分析-2">效能分析</a></h3>
<h4 id="jprofiler"><a class="header" href="#jprofiler">JProfiler</a></h4>
<ul>
<li>商業工具</li>
<li>CPU/Memory/Thread profiling</li>
<li>Database/Web 請求分析</li>
</ul>
<h4 id="yourkit-java-profiler"><a class="header" href="#yourkit-java-profiler">YourKit Java Profiler</a></h4>
<ul>
<li>商業工具</li>
<li>低開銷</li>
<li>生產環境可用</li>
</ul>
<h4 id="java-flight-recorder-jfr"><a class="header" href="#java-flight-recorder-jfr">Java Flight Recorder (JFR)</a></h4>
<pre><code class="language-bash"># JDK 11+ 免費
java -XX:StartFlightRecording=duration=60s,filename=recording.jfr MyApp
jcmd $PID JFR.start duration=60s filename=recording.jfr
</code></pre>
<h4 id="async-profiler"><a class="header" href="#async-profiler">async-profiler</a></h4>
<pre><code class="language-bash"># 低開銷的採樣 profiler
./profiler.sh -d 30 -f flamegraph.html $PID
</code></pre>
<h4 id="jstack-jdk-內建"><a class="header" href="#jstack-jdk-內建">jstack (JDK 內建)</a></h4>
<pre><code class="language-bash">jstack $PID &gt; thread_dump.txt
</code></pre>
<hr />
<h2 id="go-分析工具"><a class="header" href="#go-分析工具">Go 分析工具</a></h2>
<h3 id="內建-pprof"><a class="header" href="#內建-pprof">內建 pprof</a></h3>
<h4 id="cpu-profiling"><a class="header" href="#cpu-profiling">CPU Profiling</a></h4>
<pre><code class="language-go">import _ "net/http/pprof"
go func() {
    log.Println(http.ListenAndServe("localhost:6060", nil))
}()
</code></pre>
<pre><code class="language-bash">go tool pprof http://localhost:6060/debug/pprof/profile?seconds=30
go tool pprof -http=:8080 profile.pb.gz
</code></pre>
<h4 id="memory-profiling"><a class="header" href="#memory-profiling">Memory Profiling</a></h4>
<pre><code class="language-bash">go tool pprof http://localhost:6060/debug/pprof/heap
go tool pprof -alloc_space profile.pb.gz
</code></pre>
<h4 id="goroutine-analysis"><a class="header" href="#goroutine-analysis">Goroutine Analysis</a></h4>
<pre><code class="language-bash">go tool pprof http://localhost:6060/debug/pprof/goroutine
</code></pre>
<h3 id="trace"><a class="header" href="#trace">trace</a></h3>
<pre><code class="language-go">import "runtime/trace"
trace.Start(os.Stderr)
defer trace.Stop()
</code></pre>
<pre><code class="language-bash">go tool trace trace.out
</code></pre>
<h3 id="go-torch-已整合到-pprof"><a class="header" href="#go-torch-已整合到-pprof">go-torch (已整合到 pprof)</a></h3>
<pre><code class="language-bash">go-torch -u http://localhost:6060/debug/pprof/profile
</code></pre>
<h3 id="goleak"><a class="header" href="#goleak">goleak</a></h3>
<pre><code class="language-go">// Goroutine leak 檢測
defer goleak.VerifyNone(t)
</code></pre>
<hr />
<h2 id="rust-分析工具"><a class="header" href="#rust-分析工具">Rust 分析工具</a></h2>
<h3 id="記憶體分析-3"><a class="header" href="#記憶體分析-3">記憶體分析</a></h3>
<h4 id="valgrind"><a class="header" href="#valgrind">Valgrind</a></h4>
<pre><code class="language-bash">cargo build --release
valgrind --leak-check=full target/release/program
</code></pre>
<h4 id="heaptrack"><a class="header" href="#heaptrack">heaptrack</a></h4>
<pre><code class="language-bash">heaptrack target/release/program
heaptrack_gui heaptrack.program.*.gz
</code></pre>
<h4 id="dhat"><a class="header" href="#dhat">dhat</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Rust 的 heap profiler
#[global_allocator]
static ALLOC: dhat::Alloc = dhat::Alloc;
<span class="boring">}</span></code></pre></pre>
<h3 id="效能分析-3"><a class="header" href="#效能分析-3">效能分析</a></h3>
<h4 id="cargo-flamegraph"><a class="header" href="#cargo-flamegraph">cargo-flamegraph</a></h4>
<pre><code class="language-bash">cargo install flamegraph
cargo flamegraph
</code></pre>
<h4 id="perf--flamegraph"><a class="header" href="#perf--flamegraph">perf + flamegraph</a></h4>
<pre><code class="language-bash">perf record --call-graph=dwarf target/release/program
perf script | flamegraph.pl &gt; flame.svg
</code></pre>
<h4 id="criterion"><a class="header" href="#criterion">criterion</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Benchmark 框架
use criterion::{black_box, criterion_group, criterion_main, Criterion};
<span class="boring">}</span></code></pre></pre>
<h4 id="pprof-rs"><a class="header" href="#pprof-rs">pprof-rs</a></h4>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// CPU/Memory profiling
use pprof::protos::Message;
<span class="boring">}</span></code></pre></pre>
<h4 id="cargo-profiling"><a class="header" href="#cargo-profiling">cargo-profiling</a></h4>
<pre><code class="language-bash">cargo install cargo-profiling
cargo profiling callgrind
cargo profiling cachegrind
</code></pre>
<hr />
<h2 id="javascriptnodejs-分析工具"><a class="header" href="#javascriptnodejs-分析工具">JavaScript/Node.js 分析工具</a></h2>
<h3 id="記憶體分析-4"><a class="header" href="#記憶體分析-4">記憶體分析</a></h3>
<h4 id="chrome-devtools"><a class="header" href="#chrome-devtools">Chrome DevTools</a></h4>
<ul>
<li>Heap Snapshot</li>
<li>Allocation Timeline</li>
<li>Memory Profiler</li>
</ul>
<h4 id="heapdump"><a class="header" href="#heapdump">heapdump</a></h4>
<pre><code class="language-javascript">const heapdump = require('heapdump');
heapdump.writeSnapshot((err, filename) =&gt; {
    console.log('Heap dump written to', filename);
});
</code></pre>
<h4 id="memwatch-next"><a class="header" href="#memwatch-next">memwatch-next</a></h4>
<pre><code class="language-javascript">const memwatch = require('memwatch-next');
memwatch.on('leak', (info) =&gt; {
    console.error('Memory leak detected:', info);
});
</code></pre>
<h3 id="效能分析-4"><a class="header" href="#效能分析-4">效能分析</a></h3>
<h4 id="nodejs-內建-profiler"><a class="header" href="#nodejs-內建-profiler">Node.js 內建 profiler</a></h4>
<pre><code class="language-bash">node --prof app.js
node --prof-process isolate-*.log &gt; processed.txt
</code></pre>
<h4 id="clinicjs"><a class="header" href="#clinicjs">clinic.js</a></h4>
<pre><code class="language-bash">npm install -g clinic
clinic doctor -- node app.js
clinic flame -- node app.js
clinic bubbleprof -- node app.js
</code></pre>
<h4 id="0x"><a class="header" href="#0x">0x</a></h4>
<pre><code class="language-bash">npm install -g 0x
0x app.js
</code></pre>
<h4 id="chrome-devtools-1"><a class="header" href="#chrome-devtools-1">Chrome DevTools</a></h4>
<pre><code class="language-bash">node --inspect app.js
node --inspect-brk app.js
</code></pre>
<hr />
<h2 id="netc-分析工具"><a class="header" href="#netc-分析工具">.NET/C# 分析工具</a></h2>
<h3 id="記憶體分析-5"><a class="header" href="#記憶體分析-5">記憶體分析</a></h3>
<h4 id="dotmemory-jetbrains"><a class="header" href="#dotmemory-jetbrains">dotMemory (JetBrains)</a></h4>
<ul>
<li>Memory snapshots</li>
<li>Memory traffic 分析</li>
<li>自動 leak 偵測</li>
</ul>
<h4 id="perfview"><a class="header" href="#perfview">PerfView</a></h4>
<pre><code class="language-bash">PerfView collect /MaxCollectSec:30 MyApp.exe
PerfView HeapDump MyApp.exe
</code></pre>
<h4 id="visual-studio-diagnostic-tools"><a class="header" href="#visual-studio-diagnostic-tools">Visual Studio Diagnostic Tools</a></h4>
<ul>
<li>整合在 IDE</li>
<li>Memory Usage</li>
<li>CPU Usage</li>
</ul>
<h3 id="效能分析-5"><a class="header" href="#效能分析-5">效能分析</a></h3>
<h4 id="benchmarkdotnet"><a class="header" href="#benchmarkdotnet">BenchmarkDotNet</a></h4>
<pre><code class="language-csharp">[Benchmark]
public void MyMethod() { }
</code></pre>
<h4 id="dottrace-jetbrains"><a class="header" href="#dottrace-jetbrains">dotTrace (JetBrains)</a></h4>
<ul>
<li>Performance profiler</li>
<li>Timeline profiling</li>
<li>SQL query 分析</li>
</ul>
<h4 id="application-insights"><a class="header" href="#application-insights">Application Insights</a></h4>
<ul>
<li>生產環境監控</li>
<li>自動效能追蹤</li>
</ul>
<hr />
<h2 id="跨語言通用工具"><a class="header" href="#跨語言通用工具">跨語言通用工具</a></h2>
<h3 id="系統層級分析"><a class="header" href="#系統層級分析">系統層級分析</a></h3>
<h4 id="dtrace-macossolarisbsd"><a class="header" href="#dtrace-macossolarisbsd">DTrace (macOS/Solaris/BSD)</a></h4>
<pre><code class="language-bash">sudo dtrace -n 'syscall:::entry { @[execname] = count(); }'
</code></pre>
<h4 id="systemtap-linux"><a class="header" href="#systemtap-linux">SystemTap (Linux)</a></h4>
<pre><code class="language-bash">stap -e 'probe timer.s(1) { print("Hello\n") }'
</code></pre>
<h4 id="ebpfbpftrace-linux"><a class="header" href="#ebpfbpftrace-linux">eBPF/bpftrace (Linux)</a></h4>
<pre><code class="language-bash">bpftrace -e 'tracepoint:syscalls:sys_enter_* { @[comm] = count(); }'
</code></pre>
<h4 id="straceltrace-linux"><a class="header" href="#straceltrace-linux">strace/ltrace (Linux)</a></h4>
<pre><code class="language-bash">strace -c ./program
ltrace -c ./program
</code></pre>
<h4 id="process-monitor-windows"><a class="header" href="#process-monitor-windows">Process Monitor (Windows)</a></h4>
<ul>
<li>GUI 工具</li>
<li>File/Registry/Network 活動</li>
</ul>
<h3 id="apm-application-performance-monitoring"><a class="header" href="#apm-application-performance-monitoring">APM (Application Performance Monitoring)</a></h3>
<h4 id="new-relic"><a class="header" href="#new-relic">New Relic</a></h4>
<ul>
<li>支援多語言</li>
<li>自動儀表化</li>
<li>分散式追蹤</li>
</ul>
<h4 id="datadog-apm"><a class="header" href="#datadog-apm">Datadog APM</a></h4>
<ul>
<li>全棧監控</li>
<li>自動追蹤</li>
<li>即時分析</li>
</ul>
<h4 id="appdynamics"><a class="header" href="#appdynamics">AppDynamics</a></h4>
<ul>
<li>企業級 APM</li>
<li>業務交易追蹤</li>
<li>AI 根因分析</li>
</ul>
<h4 id="elastic-apm"><a class="header" href="#elastic-apm">Elastic APM</a></h4>
<ul>
<li>開源方案</li>
<li>整合 ELK Stack</li>
<li>分散式追蹤</li>
</ul>
<hr />
<h2 id="視覺化工具"><a class="header" href="#視覺化工具">視覺化工具</a></h2>
<h3 id="火焰圖-flame-graphs"><a class="header" href="#火焰圖-flame-graphs">火焰圖 (Flame Graphs)</a></h3>
<h4 id="flamegraph"><a class="header" href="#flamegraph">FlameGraph</a></h4>
<pre><code class="language-bash">git clone https://github.com/brendangregg/FlameGraph
perf script | ./FlameGraph/stackcollapse-perf.pl | ./FlameGraph/flamegraph.pl &gt; flame.svg
</code></pre>
<h4 id="speedscope"><a class="header" href="#speedscope">Speedscope</a></h4>
<ul>
<li>Web-based viewer</li>
<li>支援多種格式</li>
<li>https://www.speedscope.app/</li>
</ul>
<h3 id="通用視覺化"><a class="header" href="#通用視覺化">通用視覺化</a></h3>
<h4 id="grafana--prometheus"><a class="header" href="#grafana--prometheus">Grafana + Prometheus</a></h4>
<ul>
<li>時序資料視覺化</li>
<li>監控 Dashboard</li>
</ul>
<h4 id="kcachegrindqcachegrind"><a class="header" href="#kcachegrindqcachegrind">kcachegrind/qcachegrind</a></h4>
<pre><code class="language-bash"># Callgrind 資料視覺化
kcachegrind callgrind.out.*
</code></pre>
<h4 id="google-perftools"><a class="header" href="#google-perftools">Google Perftools</a></h4>
<pre><code class="language-bash">google-pprof --web program profile.pb.gz
</code></pre>
<hr />
<h2 id="最佳實踐矩陣"><a class="header" href="#最佳實踐矩陣">最佳實踐矩陣</a></h2>
<div class="table-wrapper"><table><thead><tr><th>語言</th><th>開發時期</th><th>測試時期</th><th>生產環境</th></tr></thead><tbody>
<tr><td><strong>C/C++</strong></td><td>ASan + UBSan</td><td>Valgrind + perf</td><td>gperftools</td></tr>
<tr><td><strong>Python</strong></td><td>line_profiler</td><td>memory_profiler + cProfile</td><td>py-spy</td></tr>
<tr><td><strong>Java</strong></td><td>VisualVM</td><td>JProfiler</td><td>JFR + async-profiler</td></tr>
<tr><td><strong>Go</strong></td><td>pprof + race</td><td>pprof + trace</td><td>pprof (低採樣率)</td></tr>
<tr><td><strong>Rust</strong></td><td>cargo flamegraph</td><td>valgrind + criterion</td><td>perf</td></tr>
<tr><td><strong>Node.js</strong></td><td>Chrome DevTools</td><td>clinic.js</td><td>APM tools</td></tr>
<tr><td><strong>.NET</strong></td><td>VS Diagnostics</td><td>dotMemory + dotTrace</td><td>PerfView + App Insights</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="選擇指南"><a class="header" href="#選擇指南">選擇指南</a></h2>
<h3 id="依問題類型選擇"><a class="header" href="#依問題類型選擇">依問題類型選擇</a></h3>
<p><strong>Memory Leak</strong></p>
<ul>
<li>C/C++: Valgrind, ASan</li>
<li>Python: tracemalloc, memory_profiler</li>
<li>Java: MAT, VisualVM</li>
<li>Go: pprof heap</li>
<li>JavaScript: Chrome DevTools</li>
</ul>
<p><strong>CPU Hotspot</strong></p>
<ul>
<li>C/C++: perf, VTune</li>
<li>Python: py-spy, cProfile</li>
<li>Java: async-profiler, JProfiler</li>
<li>Go: pprof profile</li>
<li>Rust: flamegraph</li>
</ul>
<p><strong>Concurrency Issues</strong></p>
<ul>
<li>C/C++: ThreadSanitizer</li>
<li>Java: jstack, thread dumps</li>
<li>Go: race detector, trace</li>
<li>.NET: Concurrency Visualizer</li>
</ul>
<h3 id="依環境選擇"><a class="header" href="#依環境選擇">依環境選擇</a></h3>
<p><strong>開發環境</strong></p>
<ul>
<li>使用整合工具 (IDE profilers)</li>
<li>可接受高開銷工具</li>
</ul>
<p><strong>CI/CD</strong></p>
<ul>
<li>自動化工具</li>
<li>靜態分析</li>
<li>Benchmark 套件</li>
</ul>
<p><strong>生產環境</strong></p>
<ul>
<li>低開銷工具</li>
<li>APM 解決方案</li>
<li>採樣式 profiler</li>
</ul>
<hr />
<h2 id="參考資源"><a class="header" href="#參考資源">參考資源</a></h2>
<ul>
<li><a href="http://www.brendangregg.com/linuxperf.html">Brendan Gregg's Performance Tools</a></li>
<li><a href="https://wizardzines.com/">Julia Evans' Profiling Zines</a></li>
<li><a href="https://github.com/pditommaso/awesome-performance">Awesome Performance Tools</a></li>
<li><a href="https://github.com/gperftools/gperftools">Google Performance Tools</a></li>
<li><a href="http://www.brendangregg.com/linuxperf.html">Linux Performance</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tools/cross-compiler-llvm-gcc-guide.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../tools/function-tracing-cpp-rust.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tools/cross-compiler-llvm-gcc-guide.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../tools/function-tracing-cpp-rust.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
