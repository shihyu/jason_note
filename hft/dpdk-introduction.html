<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>DPDK 高性能網路框架介紹 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="dpdk-data-plane-development-kit-完整介紹"><a class="header" href="#dpdk-data-plane-development-kit-完整介紹">DPDK (Data Plane Development Kit) 完整介紹</a></h1>
<h2 id="目錄"><a class="header" href="#目錄">目錄</a></h2>
<ol>
<li><a href="#%E4%BB%80%E9%BA%BC%E6%98%AF-dpdk">什麼是 DPDK</a></li>
<li><a href="#%E7%82%BA%E4%BB%80%E9%BA%BC%E9%9C%80%E8%A6%81-dpdk">為什麼需要 DPDK</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E6%9E%B6%E6%A7%8B">核心架構</a></li>
<li><a href="#%E9%97%9C%E9%8D%B5%E6%8A%80%E8%A1%93">關鍵技術</a></li>
<li><a href="#%E4%B8%BB%E8%A6%81%E7%B5%84%E4%BB%B6">主要組件</a></li>
<li><a href="#%E6%87%89%E7%94%A8%E5%A0%B4%E6%99%AF">應用場景</a></li>
<li><a href="#%E6%95%88%E8%83%BD%E6%95%B8%E6%93%9A">效能數據</a></li>
<li><a href="#%E7%94%9F%E6%85%8B%E7%B3%BB%E7%B5%B1">生態系統</a></li>
<li><a href="#%E5%AD%B8%E7%BF%92%E8%B7%AF%E7%B7%9A">學習路線</a></li>
</ol>
<hr />
<h2 id="什麼是-dpdk"><a class="header" href="#什麼是-dpdk">什麼是 DPDK</a></h2>
<h3 id="定義"><a class="header" href="#定義">定義</a></h3>
<p><strong>DPDK (Data Plane Development Kit)</strong> 是一組用於快速封包處理的開源函式庫和驅動程式，讓使用者空間應用程式能夠繞過核心，直接處理網路封包。</p>
<h3 id="基本特徵"><a class="header" href="#基本特徵">基本特徵</a></h3>
<ul>
<li><strong>使用者空間運行</strong>：應用程式在使用者空間直接處理封包</li>
<li><strong>核心旁路</strong>：繞過 Linux 核心網路堆疊</li>
<li><strong>輪詢模式</strong>：使用 PMD (Poll Mode Driver) 而非中斷</li>
<li><strong>零拷貝</strong>：減少記憶體複製操作</li>
<li><strong>多核優化</strong>：充分利用多核心 CPU</li>
</ul>
<h3 id="發展歷史"><a class="header" href="#發展歷史">發展歷史</a></h3>
<pre><code>2010年 - Intel 發布第一版 DPDK
2013年 - 開源，6-WIND 加入貢獻
2014年 - 支援非 Intel 網卡（Mellanox、Broadcom）
2017年 - 成為 Linux Foundation 專案
2019年 - 支援 ARM、POWER 架構
2020年 - DPDK 20.11 LTS 發布
2023年 - DPDK 23.11 LTS 發布
</code></pre>
<hr />
<h2 id="為什麼需要-dpdk"><a class="header" href="#為什麼需要-dpdk">為什麼需要 DPDK</a></h2>
<h3 id="傳統-linux-網路堆疊的問題"><a class="header" href="#傳統-linux-網路堆疊的問題">傳統 Linux 網路堆疊的問題</a></h3>
<h4 id="1-傳統封包處理流程"><a class="header" href="#1-傳統封包處理流程">1. 傳統封包處理流程</a></h4>
<pre><code>網卡 → 中斷 → 核心 → 系統呼叫 → 使用者空間
     ↓        ↓       ↓           ↓
  硬體中斷  上下文切換  記憶體複製   應用處理
</code></pre>
<h4 id="2-效能瓶頸"><a class="header" href="#2-效能瓶頸">2. 效能瓶頸</a></h4>
<ul>
<li><strong>中斷開銷</strong>：每個封包都可能觸發中斷</li>
<li><strong>上下文切換</strong>：核心態與使用者態切換</li>
<li><strong>記憶體複製</strong>：資料在核心和使用者空間之間複製</li>
<li><strong>鎖競爭</strong>：多核心存取共享資源</li>
<li><strong>快取未命中</strong>：頻繁的記憶體存取</li>
</ul>
<h3 id="dpdk-解決方案"><a class="header" href="#dpdk-解決方案">DPDK 解決方案</a></h3>
<h4 id="dpdk-封包處理流程"><a class="header" href="#dpdk-封包處理流程">DPDK 封包處理流程</a></h4>
<pre><code>網卡 → DMA → 使用者空間記憶體 → 應用直接處理
     ↓           ↓                ↓
  無中斷      零拷貝          CPU 輪詢
</code></pre>
<h3 id="效能對比"><a class="header" href="#效能對比">效能對比</a></h3>
<div class="table-wrapper"><table><thead><tr><th>指標</th><th>傳統 Linux</th><th>DPDK</th><th>提升倍數</th></tr></thead><tbody>
<tr><td>小包處理 (64B)</td><td>1-2 Mpps</td><td>20-80 Mpps</td><td>10-40x</td></tr>
<tr><td>延遲</td><td>10-100 μs</td><td>1-5 μs</td><td>10-20x</td></tr>
<tr><td>CPU 效率</td><td>20-30%</td><td>80-95%</td><td>3-4x</td></tr>
<tr><td>吞吐量</td><td>1-10 Gbps</td><td>100-400 Gbps</td><td>10-40x</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="核心架構"><a class="header" href="#核心架構">核心架構</a></h2>
<h3 id="架構圖"><a class="header" href="#架構圖">架構圖</a></h3>
<pre><code>┌─────────────────────────────────────────────┐
│           使用者空間應用程式                  │
├─────────────────────────────────────────────┤
│              DPDK 函式庫                     │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐    │
│  │  Core   │  │  Ring   │  │ Memory  │    │
│  │Libraries│  │Libraries│  │  Pool   │    │
│  └─────────┘  └─────────┘  └─────────┘    │
├─────────────────────────────────────────────┤
│           環境抽象層 (EAL)                   │
├─────────────────────────────────────────────┤
│        輪詢模式驅動 (PMD)                    │
├─────────────────────────────────────────────┤
│             硬體 (NIC)                       │
└─────────────────────────────────────────────┘
</code></pre>
<h3 id="主要層級"><a class="header" href="#主要層級">主要層級</a></h3>
<h4 id="1-環境抽象層-eal---environment-abstraction-layer"><a class="header" href="#1-環境抽象層-eal---environment-abstraction-layer">1. 環境抽象層 (EAL - Environment Abstraction Layer)</a></h4>
<ul>
<li>硬體和作業系統抽象</li>
<li>記憶體管理（大頁支援）</li>
<li>CPU 親和性設定</li>
<li>多進程支援</li>
</ul>
<h4 id="2-核心函式庫-core-libraries"><a class="header" href="#2-核心函式庫-core-libraries">2. 核心函式庫 (Core Libraries)</a></h4>
<ul>
<li><strong>rte_ring</strong>: 無鎖環形緩衝區</li>
<li><strong>rte_mempool</strong>: 記憶體池管理</li>
<li><strong>rte_mbuf</strong>: 封包緩衝區管理</li>
<li><strong>rte_timer</strong>: 定時器服務</li>
<li><strong>rte_hash</strong>: 雜湊表實作</li>
</ul>
<h4 id="3-輪詢模式驅動-pmd---poll-mode-driver"><a class="header" href="#3-輪詢模式驅動-pmd---poll-mode-driver">3. 輪詢模式驅動 (PMD - Poll Mode Driver)</a></h4>
<ul>
<li>網卡驅動（ixgbe、i40e、mlx5 等）</li>
<li>虛擬設備驅動（virtio、vmxnet3）</li>
<li>加密設備驅動</li>
<li>事件設備驅動</li>
</ul>
<hr />
<h2 id="關鍵技術"><a class="header" href="#關鍵技術">關鍵技術</a></h2>
<h3 id="1-大頁記憶體-hugepages"><a class="header" href="#1-大頁記憶體-hugepages">1. 大頁記憶體 (Hugepages)</a></h3>
<h4 id="原理"><a class="header" href="#原理">原理</a></h4>
<pre><code>標準頁：4KB → TLB 項目多 → 未命中率高
大頁：2MB/1GB → TLB 項目少 → 未命中率低
</code></pre>
<h4 id="配置範例"><a class="header" href="#配置範例">配置範例</a></h4>
<pre><code class="language-bash"># 2MB 大頁
echo 1024 &gt; /sys/kernel/mm/hugepages/hugepages-2048kB/nr_hugepages

# 1GB 大頁
echo 4 &gt; /sys/kernel/mm/hugepages/hugepages-1048576kB/nr_hugepages
</code></pre>
<h3 id="2-cpu-親和性-cpu-affinity"><a class="header" href="#2-cpu-親和性-cpu-affinity">2. CPU 親和性 (CPU Affinity)</a></h3>
<h4 id="概念"><a class="header" href="#概念">概念</a></h4>
<p>將特定執行緒綁定到特定 CPU 核心，避免切換開銷</p>
<h4 id="實作"><a class="header" href="#實作">實作</a></h4>
<pre><code class="language-c">// DPDK 中設定 CPU 親和性
rte_eal_remote_launch(worker_thread, NULL, core_id);

// Linux 命令
taskset -c 2-5 ./dpdk-app
</code></pre>
<h3 id="3-numa-感知-numa-awareness"><a class="header" href="#3-numa-感知-numa-awareness">3. NUMA 感知 (NUMA Awareness)</a></h3>
<h4 id="numa-架構"><a class="header" href="#numa-架構">NUMA 架構</a></h4>
<pre><code>┌──────────┐      ┌──────────┐
│  CPU 0   │      │  CPU 1   │
│  Memory  │◄────►│  Memory  │
│  Node 0  │ QPI  │  Node 1  │
└──────────┘      └──────────┘
</code></pre>
<h4 id="最佳實踐"><a class="header" href="#最佳實踐">最佳實踐</a></h4>
<ul>
<li>封包處理執行緒綁定到網卡所在 NUMA 節點</li>
<li>記憶體分配使用本地 NUMA 節點</li>
</ul>
<h3 id="4-無鎖資料結構"><a class="header" href="#4-無鎖資料結構">4. 無鎖資料結構</a></h3>
<h4 id="rte-ring無鎖環形佇列"><a class="header" href="#rte-ring無鎖環形佇列">RTE Ring（無鎖環形佇列）</a></h4>
<pre><code class="language-c">// 生產者
rte_ring_enqueue_burst(ring, objs, n, NULL);

// 消費者
rte_ring_dequeue_burst(ring, objs, n, NULL);
</code></pre>
<h4 id="特點"><a class="header" href="#特點">特點</a></h4>
<ul>
<li>Compare-And-Swap (CAS) 操作</li>
<li>單/多生產者、單/多消費者模式</li>
<li>避免鎖競爭</li>
</ul>
<h3 id="5-向量化指令-simd"><a class="header" href="#5-向量化指令-simd">5. 向量化指令 (SIMD)</a></h3>
<h4 id="使用-sseavx-加速"><a class="header" href="#使用-sseavx-加速">使用 SSE/AVX 加速</a></h4>
<pre><code class="language-c">// 向量化記憶體複製
rte_memcpy(dst, src, len);  // 內部使用 AVX-512

// 批次處理
_mm256_load_si256()  // AVX2 載入
_mm512_load_si512()  // AVX-512 載入
</code></pre>
<h3 id="6-預取技術-prefetching"><a class="header" href="#6-預取技術-prefetching">6. 預取技術 (Prefetching)</a></h3>
<pre><code class="language-c">// 預取下一個封包到快取
rte_prefetch0(next_packet);

// 處理當前封包時預取下一個
while (packets_to_process) {
    rte_prefetch0(packet[i+1]);
    process_packet(packet[i]);
    i++;
}
</code></pre>
<hr />
<h2 id="主要組件"><a class="header" href="#主要組件">主要組件</a></h2>
<h3 id="1-封包處理相關"><a class="header" href="#1-封包處理相關">1. 封包處理相關</a></h3>
<h4 id="rte_mbuf---封包緩衝區"><a class="header" href="#rte_mbuf---封包緩衝區">rte_mbuf - 封包緩衝區</a></h4>
<pre><code class="language-c">struct rte_mbuf {
    void *buf_addr;           // 緩衝區地址
    uint16_t data_off;        // 資料偏移
    uint16_t refcnt;          // 引用計數
    uint16_t nb_segs;         // 分段數
    uint16_t port;            // 輸入埠
    uint32_t pkt_len;         // 封包長度
    uint16_t data_len;        // 資料長度
    uint32_t packet_type;     // 封包類型
    uint32_t ol_flags;        // Offload 標誌
    // ... 更多欄位
};
</code></pre>
<h4 id="rte_mempool---記憶體池"><a class="header" href="#rte_mempool---記憶體池">rte_mempool - 記憶體池</a></h4>
<pre><code class="language-c">// 建立記憶體池
struct rte_mempool *pool = rte_pktmbuf_pool_create(
    "mbuf_pool",      // 名稱
    8192,            // 元素數量
    256,             // 快取大小
    0,               // 私有資料大小
    RTE_MBUF_DEFAULT_BUF_SIZE,  // 資料緩衝區大小
    rte_socket_id()  // NUMA socket
);
</code></pre>
<h3 id="2-網路功能"><a class="header" href="#2-網路功能">2. 網路功能</a></h3>
<h4 id="流分類-rte_flow"><a class="header" href="#流分類-rte_flow">流分類 (rte_flow)</a></h4>
<pre><code class="language-c">// 建立流規則：將 TCP 80 埠流量導向佇列 1
struct rte_flow_attr attr = {.ingress = 1};
struct rte_flow_item pattern[] = {
    {.type = RTE_FLOW_ITEM_TYPE_ETH},
    {.type = RTE_FLOW_ITEM_TYPE_IPV4},
    {.type = RTE_FLOW_ITEM_TYPE_TCP,
     .spec = &amp;(struct rte_flow_item_tcp){.hdr = {.dst_port = rte_cpu_to_be_16(80)}}},
    {.type = RTE_FLOW_ITEM_TYPE_END}
};
struct rte_flow_action actions[] = {
    {.type = RTE_FLOW_ACTION_TYPE_QUEUE,
     .conf = &amp;(struct rte_flow_action_queue){.index = 1}},
    {.type = RTE_FLOW_ACTION_TYPE_END}
};
</code></pre>
<h4 id="網路協議函式庫"><a class="header" href="#網路協議函式庫">網路協議函式庫</a></h4>
<ul>
<li><strong>rte_ip</strong>: IPv4/IPv6 處理</li>
<li><strong>rte_tcp</strong>: TCP 標頭處理</li>
<li><strong>rte_udp</strong>: UDP 標頭處理</li>
<li><strong>rte_ether</strong>: 乙太網處理</li>
<li><strong>rte_arp</strong>: ARP 協議</li>
<li><strong>rte_icmp</strong>: ICMP 協議</li>
</ul>
<h3 id="3-加密功能-cryptodev"><a class="header" href="#3-加密功能-cryptodev">3. 加密功能 (Cryptodev)</a></h3>
<pre><code class="language-c">// 加密操作
struct rte_crypto_op *ops[MAX_OPS];
rte_cryptodev_enqueue_burst(dev_id, qp_id, ops, nb_ops);
rte_cryptodev_dequeue_burst(dev_id, qp_id, ops, nb_ops);
</code></pre>
<h3 id="4-事件框架-eventdev"><a class="header" href="#4-事件框架-eventdev">4. 事件框架 (Eventdev)</a></h3>
<pre><code class="language-c">// 事件驅動程式設計模型
struct rte_event ev;
rte_event_dequeue_burst(dev_id, port_id, &amp;ev, 1, timeout);
// 處理事件
rte_event_enqueue_burst(dev_id, port_id, &amp;ev, 1);
</code></pre>
<hr />
<h2 id="應用場景"><a class="header" href="#應用場景">應用場景</a></h2>
<h3 id="1-電信網路"><a class="header" href="#1-電信網路">1. 電信網路</a></h3>
<ul>
<li><strong>5G 核心網</strong>：UPF (User Plane Function)</li>
<li><strong>vRAN</strong>：虛擬化無線接入網</li>
<li><strong>MEC</strong>：多接入邊緣運算</li>
<li><strong>NFV</strong>：網路功能虛擬化</li>
</ul>
<h3 id="2-網路安全"><a class="header" href="#2-網路安全">2. 網路安全</a></h3>
<ul>
<li><strong>DDoS 防護</strong>：線速過濾攻擊流量</li>
<li><strong>IDS/IPS</strong>：入侵檢測/防禦系統</li>
<li><strong>防火牆</strong>：高效能狀態防火牆</li>
<li><strong>VPN 閘道</strong>：IPSec/SSL VPN</li>
</ul>
<h3 id="3-網路設備"><a class="header" href="#3-網路設備">3. 網路設備</a></h3>
<ul>
<li><strong>虛擬交換機</strong>：OVS-DPDK</li>
<li><strong>路由器</strong>：軟體路由器</li>
<li><strong>負載均衡器</strong>：L4/L7 負載均衡</li>
<li><strong>SDN 交換機</strong>：OpenFlow 交換機</li>
</ul>
<h3 id="4-雲端運算"><a class="header" href="#4-雲端運算">4. 雲端運算</a></h3>
<ul>
<li><strong>虛擬網路</strong>：Overlay 網路（VXLAN、GENEVE）</li>
<li><strong>容器網路</strong>：高效能 CNI 外掛</li>
<li><strong>服務網格</strong>：資料平面代理</li>
<li><strong>CDN 節點</strong>：內容分發加速</li>
</ul>
<h3 id="5-金融交易"><a class="header" href="#5-金融交易">5. 金融交易</a></h3>
<ul>
<li><strong>低延遲交易</strong>：微秒級延遲</li>
<li><strong>市場資料分發</strong>：組播優化</li>
<li><strong>風控系統</strong>：即時風險計算</li>
<li><strong>交易閘道</strong>：協議轉換</li>
</ul>
<h3 id="6-大數據處理"><a class="header" href="#6-大數據處理">6. 大數據處理</a></h3>
<ul>
<li><strong>封包捕獲</strong>：100Gbps+ 線速捕獲</li>
<li><strong>流量分析</strong>：DPI 深度封包檢測</li>
<li><strong>網路監控</strong>：即時流量統計</li>
<li><strong>資料採集</strong>：高速資料擷取</li>
</ul>
<hr />
<h2 id="效能數據"><a class="header" href="#效能數據">效能數據</a></h2>
<h3 id="測試環境"><a class="header" href="#測試環境">測試環境</a></h3>
<ul>
<li>CPU: Intel Xeon Gold 6248R (24 cores @ 3.0GHz)</li>
<li>記憶體: 192GB DDR4</li>
<li>網卡: Intel XXV710 25GbE</li>
<li>DPDK: 22.11 LTS</li>
</ul>
<h3 id="效能指標"><a class="header" href="#效能指標">效能指標</a></h3>
<h4 id="1-封包轉發效能"><a class="header" href="#1-封包轉發效能">1. 封包轉發效能</a></h4>
<div class="table-wrapper"><table><thead><tr><th>封包大小</th><th>單核效能</th><th>4核效能</th><th>8核效能</th></tr></thead><tbody>
<tr><td>64B</td><td>14.88 Mpps</td><td>59.52 Mpps</td><td>119.04 Mpps</td></tr>
<tr><td>128B</td><td>14.88 Mpps</td><td>59.52 Mpps</td><td>119.04 Mpps</td></tr>
<tr><td>256B</td><td>14.88 Mpps</td><td>59.52 Mpps</td><td>111.60 Mpps</td></tr>
<tr><td>512B</td><td>8.44 Mpps</td><td>33.76 Mpps</td><td>67.52 Mpps</td></tr>
<tr><td>1024B</td><td>4.39 Mpps</td><td>17.56 Mpps</td><td>35.12 Mpps</td></tr>
<tr><td>1518B</td><td>3.02 Mpps</td><td>12.08 Mpps</td><td>24.16 Mpps</td></tr>
</tbody></table>
</div>
<h4 id="2-延遲特性"><a class="header" href="#2-延遲特性">2. 延遲特性</a></h4>
<div class="table-wrapper"><table><thead><tr><th>百分位</th><th>延遲 (μs)</th></tr></thead><tbody>
<tr><td>50%</td><td>2.1</td></tr>
<tr><td>90%</td><td>3.5</td></tr>
<tr><td>99%</td><td>8.2</td></tr>
<tr><td>99.9%</td><td>15.3</td></tr>
<tr><td>99.99%</td><td>28.7</td></tr>
</tbody></table>
</div>
<h4 id="3-不同應用效能"><a class="header" href="#3-不同應用效能">3. 不同應用效能</a></h4>
<div class="table-wrapper"><table><thead><tr><th>應用類型</th><th>效能指標</th><th>數值</th></tr></thead><tbody>
<tr><td>L2 轉發</td><td>吞吐量</td><td>200 Gbps</td></tr>
<tr><td>L3 路由</td><td>查表速度</td><td>100 Mpps</td></tr>
<tr><td>IPSec</td><td>加密吞吐量</td><td>40 Gbps</td></tr>
<tr><td>負載均衡</td><td>連線數</td><td>10M CPS</td></tr>
<tr><td>DPI</td><td>檢測速度</td><td>20 Gbps</td></tr>
</tbody></table>
</div>
<hr />
<h2 id="生態系統"><a class="header" href="#生態系統">生態系統</a></h2>
<h3 id="1-相關專案"><a class="header" href="#1-相關專案">1. 相關專案</a></h3>
<h4 id="資料平面專案"><a class="header" href="#資料平面專案">資料平面專案</a></h4>
<ul>
<li><strong>FD.io VPP</strong>: 向量封包處理器</li>
<li><strong>OVS-DPDK</strong>: Open vSwitch with DPDK</li>
<li><strong>Tungsten Fabric</strong>: SDN 控制器</li>
<li><strong>Lagopus</strong>: OpenFlow 1.3 交換機</li>
</ul>
<h4 id="應用框架"><a class="header" href="#應用框架">應用框架</a></h4>
<ul>
<li><strong>Seastar</strong>: 高效能 C++ 框架</li>
<li><strong>F-Stack</strong>: 使用者態協議棧</li>
<li><strong>mTCP</strong>: 多核 TCP 堆疊</li>
<li><strong>TLDK</strong>: TCP/UDP 開發套件</li>
</ul>
<h3 id="2-商業產品"><a class="header" href="#2-商業產品">2. 商業產品</a></h3>
<h4 id="網路設備商"><a class="header" href="#網路設備商">網路設備商</a></h4>
<ul>
<li><strong>Cisco</strong>: 路由器和交換機</li>
<li><strong>Juniper</strong>: vMX、vSRX</li>
<li><strong>Nokia</strong>: 路由器平台</li>
<li><strong>Ericsson</strong>: 5G 解決方案</li>
</ul>
<h4 id="安全廠商"><a class="header" href="#安全廠商">安全廠商</a></h4>
<ul>
<li><strong>Fortinet</strong>: FortiGate 虛擬防火牆</li>
<li><strong>Palo Alto</strong>: 虛擬防火牆</li>
<li><strong>F5</strong>: 虛擬 ADC</li>
</ul>
<h3 id="3-雲服務商採用"><a class="header" href="#3-雲服務商採用">3. 雲服務商採用</a></h3>
<ul>
<li><strong>AWS</strong>: Nitro 系統</li>
<li><strong>Azure</strong>: 加速網路</li>
<li><strong>阿里雲</strong>: 神龍架構</li>
<li><strong>騰訊雲</strong>: 網路優化</li>
</ul>
<h3 id="4-硬體支援"><a class="header" href="#4-硬體支援">4. 硬體支援</a></h3>
<h4 id="網卡廠商"><a class="header" href="#網卡廠商">網卡廠商</a></h4>
<ul>
<li><strong>Intel</strong>: E810、XXV710、82599</li>
<li><strong>Mellanox/NVIDIA</strong>: ConnectX-4/5/6</li>
<li><strong>Broadcom</strong>: BCM57xxx</li>
<li><strong>Marvell</strong>: FastLinQ</li>
<li><strong>Huawei</strong>: Hi1822</li>
</ul>
<h4 id="cpu-架構"><a class="header" href="#cpu-架構">CPU 架構</a></h4>
<ul>
<li><strong>x86_64</strong>: Intel、AMD</li>
<li><strong>ARM</strong>: ThunderX2、Kunpeng</li>
<li><strong>POWER</strong>: IBM POWER9</li>
<li><strong>RISC-V</strong>: 實驗性支援</li>
</ul>
<hr />
<h2 id="學習路線"><a class="header" href="#學習路線">學習路線</a></h2>
<h3 id="初級階段1-2個月"><a class="header" href="#初級階段1-2個月">初級階段（1-2個月）</a></h3>
<h4 id="基礎知識"><a class="header" href="#基礎知識">基礎知識</a></h4>
<ol>
<li>
<p><strong>Linux 網路基礎</strong></p>
<ul>
<li>TCP/IP 協議棧</li>
<li>Linux 網路命令</li>
<li>網路程式設計（Socket）</li>
</ul>
</li>
<li>
<p><strong>C 語言程式設計</strong></p>
<ul>
<li>指標和記憶體管理</li>
<li>多執行緒程式設計</li>
<li>Makefile 和 GCC</li>
</ul>
</li>
<li>
<p><strong>DPDK 入門</strong></p>
<ul>
<li>環境搭建</li>
<li>Hello World 範例</li>
<li>基本 API 使用</li>
</ul>
</li>
</ol>
<h4 id="實踐專案"><a class="header" href="#實踐專案">實踐專案</a></h4>
<pre><code class="language-c">// 專案 1：簡單的 L2 轉發
int main(int argc, char *argv[]) {
    // 初始化 EAL
    rte_eal_init(argc, argv);
    // 配置埠
    // 主迴圈：接收和轉發
}
</code></pre>
<h3 id="中級階段2-3個月"><a class="header" href="#中級階段2-3個月">中級階段（2-3個月）</a></h3>
<h4 id="進階主題"><a class="header" href="#進階主題">進階主題</a></h4>
<ol>
<li>
<p><strong>效能優化</strong></p>
<ul>
<li>NUMA 優化</li>
<li>CPU 親和性</li>
<li>批次處理</li>
</ul>
</li>
<li>
<p><strong>進階功能</strong></p>
<ul>
<li>多佇列（RSS）</li>
<li>流分類（rte_flow）</li>
<li>QoS 實作</li>
</ul>
</li>
<li>
<p><strong>協議處理</strong></p>
<ul>
<li>VLAN 處理</li>
<li>IP 路由</li>
<li>TCP/UDP 處理</li>
</ul>
</li>
</ol>
<h4 id="實踐專案-1"><a class="header" href="#實踐專案-1">實踐專案</a></h4>
<ul>
<li>專案 2：簡單路由器</li>
<li>專案 3：負載均衡器</li>
<li>專案 4：封包過濾防火牆</li>
</ul>
<h3 id="高級階段3-6個月"><a class="header" href="#高級階段3-6個月">高級階段（3-6個月）</a></h3>
<h4 id="專業領域"><a class="header" href="#專業領域">專業領域</a></h4>
<ol>
<li>
<p><strong>虛擬化網路</strong></p>
<ul>
<li>SR-IOV</li>
<li>vhost-user</li>
<li>virtio-net</li>
</ul>
</li>
<li>
<p><strong>硬體加速</strong></p>
<ul>
<li>rte_flow 硬體卸載</li>
<li>加密卸載</li>
<li>Checksum 卸載</li>
</ul>
</li>
<li>
<p><strong>分散式系統</strong></p>
<ul>
<li>多進程架構</li>
<li>共享記憶體</li>
<li>分散式轉發</li>
</ul>
</li>
</ol>
<h4 id="實踐專案-2"><a class="header" href="#實踐專案-2">實踐專案</a></h4>
<ul>
<li>專案 5：DDoS 防護系統</li>
<li>專案 6：VPN 閘道</li>
<li>專案 7：SDN 交換機</li>
</ul>
<h3 id="專家階段6個月"><a class="header" href="#專家階段6個月">專家階段（6個月+）</a></h3>
<h4 id="深入研究"><a class="header" href="#深入研究">深入研究</a></h4>
<ol>
<li>
<p><strong>原始碼分析</strong></p>
<ul>
<li>PMD 驅動開發</li>
<li>EAL 實作原理</li>
<li>記憶體管理機制</li>
</ul>
</li>
<li>
<p><strong>效能調優</strong></p>
<ul>
<li>CPU 微架構優化</li>
<li>快取優化</li>
<li>SIMD 優化</li>
</ul>
</li>
<li>
<p><strong>創新應用</strong></p>
<ul>
<li>P4 可程式化資料平面</li>
<li>eBPF 整合</li>
<li>硬體加速器整合</li>
</ul>
</li>
</ol>
<hr />
<h2 id="學習資源"><a class="header" href="#學習資源">學習資源</a></h2>
<h3 id="官方資源"><a class="header" href="#官方資源">官方資源</a></h3>
<ul>
<li><a href="https://www.dpdk.org/">DPDK 官網</a></li>
<li><a href="https://doc.dpdk.org/">官方文件</a></li>
<li><a href="https://github.com/DPDK/dpdk/tree/main/examples">程式範例</a></li>
<li><a href="https://doc.dpdk.org/api/">API 參考</a></li>
</ul>
<h3 id="書籍推薦"><a class="header" href="#書籍推薦">書籍推薦</a></h3>
<ol>
<li><strong>《深入淺出 DPDK》</strong> - 朱河清</li>
<li><strong>《DPDK 應用基礎》</strong> - 朱永官</li>
<li><strong>《Network Programming with Go》</strong> - Adam Woodbeck</li>
<li><strong>《High Performance Packet Processing》</strong> - Multiple Authors</li>
</ol>
<h3 id="線上課程"><a class="header" href="#線上課程">線上課程</a></h3>
<ul>
<li>Linux Foundation: DPDK Course</li>
<li>Intel Network Builders University</li>
<li>YouTube: DPDK Summit 影片</li>
</ul>
<h3 id="社群資源"><a class="header" href="#社群資源">社群資源</a></h3>
<ul>
<li>DPDK Mailing List</li>
<li>DPDK Slack Channel</li>
<li>Stack Overflow DPDK Tag</li>
<li>Reddit r/dpdk</li>
</ul>
<h3 id="實驗環境"><a class="header" href="#實驗環境">實驗環境</a></h3>
<ol>
<li>
<p><strong>虛擬機方案</strong></p>
<ul>
<li>VirtualBox + Ubuntu</li>
<li>VMware + CentOS</li>
<li>QEMU/KVM</li>
</ul>
</li>
<li>
<p><strong>雲端方案</strong></p>
<ul>
<li>AWS EC2 (C5n instances)</li>
<li>Azure (F-series)</li>
<li>阿里雲 ECS</li>
</ul>
</li>
<li>
<p><strong>硬體方案</strong></p>
<ul>
<li>Intel NUC + USB 網卡</li>
<li>二手伺服器</li>
<li>DPDK 相容網卡</li>
</ul>
</li>
</ol>
<hr />
<h2 id="總結"><a class="header" href="#總結">總結</a></h2>
<h3 id="dpdk-的價值"><a class="header" href="#dpdk-的價值">DPDK 的價值</a></h3>
<ol>
<li><strong>極致效能</strong>：充分發揮硬體潛力</li>
<li><strong>靈活可程式</strong>：完全控制封包處理邏輯</li>
<li><strong>生態豐富</strong>：廣泛的產業支援</li>
<li><strong>持續演進</strong>：活躍的社群開發</li>
</ol>
<h3 id="適用場景判斷"><a class="header" href="#適用場景判斷">適用場景判斷</a></h3>
<h4 id="適合使用-dpdk"><a class="header" href="#適合使用-dpdk">適合使用 DPDK</a></h4>
<ul>
<li>需要處理 10Gbps+ 流量</li>
<li>延遲敏感（&lt; 10μs）</li>
<li>自定義協議處理</li>
<li>專用網路設備</li>
</ul>
<h4 id="不適合使用-dpdk"><a class="header" href="#不適合使用-dpdk">不適合使用 DPDK</a></h4>
<ul>
<li>流量小於 1Gbps</li>
<li>需要完整 Linux 網路功能</li>
<li>開發資源有限</li>
<li>通用伺服器應用</li>
</ul>
<h3 id="未來展望"><a class="header" href="#未來展望">未來展望</a></h3>
<ul>
<li><strong>智慧網卡整合</strong>：DPU、IPU 支援</li>
<li><strong>雲原生化</strong>：容器和 K8s 整合</li>
<li><strong>AI 加速</strong>：機器學習推理加速</li>
<li><strong>新協議支援</strong>：QUIC、SRv6</li>
</ul>
<p>DPDK 已經成為高效能網路處理的事實標準，掌握 DPDK 技術對於網路工程師和系統架構師來說越來越重要。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../tools/qemu-dpdk-test-guide.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../hft/DPDK_QEMU_GDB_Guide.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../tools/qemu-dpdk-test-guide.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../hft/DPDK_QEMU_GDB_Guide.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
