<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>網路優化完整指南 - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="高效能網路優化技術完整指南"><a class="header" href="#高效能網路優化技術完整指南">高效能網路優化技術完整指南</a></h1>
<h2 id="目錄"><a class="header" href="#目錄">目錄</a></h2>
<ol>
<li><a href="#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">核心概念</a></li>
<li><a href="#%E9%9B%B6%E6%8B%B7%E8%B2%9D%E6%8A%80%E8%A1%93">零拷貝技術</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E6%97%81%E8%B7%AF%E6%8A%80%E8%A1%93">核心旁路技術</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E9%AB%98%E6%95%88%E8%83%BD%E7%B6%B2%E8%B7%AF%E6%8A%80%E8%A1%93">其他高效能網路技術</a></li>
<li><a href="#%E5%AF%A6%E4%BD%9C%E7%AF%84%E4%BE%8B">實作範例</a></li>
<li><a href="#%E6%95%88%E8%83%BD%E6%B8%AC%E8%A9%A6%E8%88%87%E8%AA%BF%E5%84%AA">效能測試與調優</a></li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90">最佳實踐</a></li>
</ol>
<hr />
<h2 id="核心概念"><a class="header" href="#核心概念">核心概念</a></h2>
<h3 id="記憶體空間"><a class="header" href="#記憶體空間">記憶體空間</a></h3>
<ul>
<li><strong>使用者空間（User Space）</strong>：應用程式執行的記憶體區域</li>
<li><strong>核心空間（Kernel Space）</strong>：作業系統核心執行的記憶體區域</li>
<li><strong>上下文切換（Context Switch）</strong>：CPU 在使用者模式和核心模式之間切換</li>
</ul>
<h3 id="傳統網路-io-問題"><a class="header" href="#傳統網路-io-問題">傳統網路 I/O 問題</a></h3>
<ol>
<li><strong>多次資料複製</strong>：網卡 → 核心緩衝區 → 使用者緩衝區</li>
<li><strong>上下文切換開銷</strong>：每次系統呼叫都需要切換</li>
<li><strong>中斷處理開銷</strong>：每個封包都可能觸發中斷</li>
<li><strong>記憶體頻寬消耗</strong>：資料在記憶體間多次移動</li>
</ol>
<hr />
<h2 id="零拷貝技術"><a class="header" href="#零拷貝技術">零拷貝技術</a></h2>
<h3 id="1-sendfile"><a class="header" href="#1-sendfile">1. sendfile()</a></h3>
<pre><code class="language-c">#include &lt;sys/sendfile.h&gt;

// 直接從檔案傳送到 socket，無需使用者空間參與
ssize_t sendfile(int out_fd, int in_fd, off_t *offset, size_t count);
</code></pre>
<p><strong>優點</strong>：</p>
<ul>
<li>減少 2 次資料複製</li>
<li>減少上下文切換</li>
<li>適合靜態檔案服務</li>
</ul>
<h3 id="2-splice"><a class="header" href="#2-splice">2. splice()</a></h3>
<pre><code class="language-c">#include &lt;fcntl.h&gt;

// 在兩個檔案描述符之間移動資料
ssize_t splice(int fd_in, loff_t *off_in, int fd_out,
               loff_t *off_out, size_t len, unsigned int flags);
</code></pre>
<p><strong>使用場景</strong>：</p>
<ul>
<li>代理伺服器</li>
<li>管道資料傳輸</li>
</ul>
<h3 id="3-mmap"><a class="header" href="#3-mmap">3. mmap()</a></h3>
<pre><code class="language-c">#include &lt;sys/mman.h&gt;

// 將檔案映射到記憶體
void *mmap(void *addr, size_t length, int prot, int flags,
           int fd, off_t offset);
</code></pre>
<p><strong>特點</strong>：</p>
<ul>
<li>虛擬記憶體映射</li>
<li>懶載入（Lazy Loading）</li>
<li>適合大檔案處理</li>
</ul>
<h3 id="4-msg_zerocopy"><a class="header" href="#4-msg_zerocopy">4. MSG_ZEROCOPY</a></h3>
<pre><code class="language-c">// Linux 4.14+ 支援
int enable = 1;
setsockopt(fd, SOL_SOCKET, SO_ZEROCOPY, &amp;enable, sizeof(enable));

// 使用 MSG_ZEROCOPY flag
send(fd, buffer, length, MSG_ZEROCOPY);
</code></pre>
<h3 id="5-io_uring"><a class="header" href="#5-io_uring">5. io_uring</a></h3>
<pre><code class="language-c">#include &lt;liburing.h&gt;

struct io_uring ring;
io_uring_queue_init(QUEUE_DEPTH, &amp;ring, 0);

// 提交 I/O 請求
struct io_uring_sqe *sqe = io_uring_get_sqe(&amp;ring);
io_uring_prep_readv(sqe, fd, iovecs, nr_vecs, offset);
io_uring_submit(&amp;ring);
</code></pre>
<p><strong>優勢</strong>：</p>
<ul>
<li>異步 I/O</li>
<li>批次處理</li>
<li>減少系統呼叫</li>
</ul>
<hr />
<h2 id="核心旁路技術"><a class="header" href="#核心旁路技術">核心旁路技術</a></h2>
<h3 id="1-dpdk-data-plane-development-kit"><a class="header" href="#1-dpdk-data-plane-development-kit">1. DPDK (Data Plane Development Kit)</a></h3>
<p><strong>架構特點</strong>：</p>
<ul>
<li>輪詢模式驅動（PMD）</li>
<li>大頁記憶體（Hugepages）</li>
<li>CPU 親和性（CPU Affinity）</li>
<li>無鎖資料結構</li>
</ul>
<pre><code class="language-c">#include &lt;rte_eal.h&gt;
#include &lt;rte_ethdev.h&gt;

// 初始化 DPDK
rte_eal_init(argc, argv);

// 接收封包
uint16_t nb_rx = rte_eth_rx_burst(port_id, queue_id, 
                                   rx_pkts, MAX_PKT_BURST);

// 處理封包
for (int i = 0; i &lt; nb_rx; i++) {
    process_packet(rx_pkts[i]);
}

// 傳送封包
uint16_t nb_tx = rte_eth_tx_burst(port_id, queue_id,
                                   tx_pkts, nb_pkts);
</code></pre>
<h3 id="2-rdma-remote-direct-memory-access"><a class="header" href="#2-rdma-remote-direct-memory-access">2. RDMA (Remote Direct Memory Access)</a></h3>
<p><strong>協議類型</strong>：</p>
<ul>
<li><strong>InfiniBand</strong>：高效能運算</li>
<li><strong>RoCE (RDMA over Converged Ethernet)</strong>：資料中心</li>
<li><strong>iWARP</strong>：廣域網路</li>
</ul>
<pre><code class="language-c">#include &lt;rdma/rdma_cma.h&gt;

// 建立 RDMA 連線
struct rdma_cm_id *id;
rdma_create_id(event_channel, &amp;id, NULL, RDMA_PS_TCP);

// 註冊記憶體區域
struct ibv_mr *mr = ibv_reg_mr(pd, buffer, size, 
                                IBV_ACCESS_LOCAL_WRITE | 
                                IBV_ACCESS_REMOTE_WRITE);

// RDMA 寫入
struct ibv_send_wr wr = {
    .opcode = IBV_WR_RDMA_WRITE,
    .sg_list = &amp;sge,
    .num_sge = 1,
};
</code></pre>
<h3 id="3-xdp-express-data-path"><a class="header" href="#3-xdp-express-data-path">3. XDP (eXpress Data Path)</a></h3>
<pre><code class="language-c">#include &lt;linux/bpf.h&gt;
#include &lt;bpf/bpf_helpers.h&gt;

SEC("xdp")
int xdp_prog(struct xdp_md *ctx) {
    void *data_end = (void *)(long)ctx-&gt;data_end;
    void *data = (void *)(long)ctx-&gt;data;
    
    struct ethhdr *eth = data;
    if ((void *)(eth + 1) &gt; data_end)
        return XDP_DROP;
    
    // 封包處理邏輯
    if (should_drop_packet(eth))
        return XDP_DROP;
    
    return XDP_PASS;
}
</code></pre>
<h3 id="4-af_xdp"><a class="header" href="#4-af_xdp">4. AF_XDP</a></h3>
<pre><code class="language-c">#include &lt;linux/if_xdp.h&gt;

// 建立 AF_XDP socket
int xsk_fd = socket(AF_XDP, SOCK_RAW, 0);

// 設定 UMEM (User Memory)
struct xdp_umem_reg mr = {
    .addr = buffer,
    .len = buffer_size,
    .chunk_size = XSK_UMEM__DEFAULT_FRAME_SIZE,
};
setsockopt(xsk_fd, SOL_XDP, XDP_UMEM_REG, &amp;mr, sizeof(mr));
</code></pre>
<hr />
<h2 id="其他高效能網路技術"><a class="header" href="#其他高效能網路技術">其他高效能網路技術</a></h2>
<h3 id="1-rss-receive-side-scaling"><a class="header" href="#1-rss-receive-side-scaling">1. RSS (Receive Side Scaling)</a></h3>
<pre><code class="language-bash"># 設定網卡多佇列
ethtool -L eth0 combined 8

# 設定 RSS
ethtool -X eth0 equal 8
</code></pre>
<h3 id="2-rpsrfs-receive-packet-steeringflow-steering"><a class="header" href="#2-rpsrfs-receive-packet-steeringflow-steering">2. RPS/RFS (Receive Packet Steering/Flow Steering)</a></h3>
<pre><code class="language-bash"># 啟用 RPS
echo "ff" &gt; /sys/class/net/eth0/queues/rx-0/rps_cpus

# 設定 RFS
echo 32768 &gt; /proc/sys/net/core/rps_sock_flow_entries
</code></pre>
<h3 id="3-tsogso-tcp-segmentation-offload"><a class="header" href="#3-tsogso-tcp-segmentation-offload">3. TSO/GSO (TCP Segmentation Offload)</a></h3>
<pre><code class="language-bash"># 啟用 TSO
ethtool -K eth0 tso on

# 啟用 GSO
ethtool -K eth0 gso on
</code></pre>
<h3 id="4-napi-new-api"><a class="header" href="#4-napi-new-api">4. NAPI (New API)</a></h3>
<ul>
<li>中斷與輪詢混合模式</li>
<li>動態調整處理策略</li>
<li>減少中斷風暴</li>
</ul>
<h3 id="5-智慧網卡smart-nic"><a class="header" href="#5-智慧網卡smart-nic">5. 智慧網卡（Smart NIC）</a></h3>
<p><strong>功能卸載</strong>：</p>
<ul>
<li>封包分類</li>
<li>加密/解密</li>
<li>壓縮/解壓縮</li>
<li>協議處理</li>
</ul>
<p><strong>代表產品</strong>：</p>
<ul>
<li>Mellanox BlueField</li>
<li>Intel IPU (Infrastructure Processing Unit)</li>
<li>NVIDIA ConnectX</li>
</ul>
<hr />
<h2 id="實作範例"><a class="header" href="#實作範例">實作範例</a></h2>
<h3 id="高效能-http-伺服器配置"><a class="header" href="#高效能-http-伺服器配置">高效能 HTTP 伺服器配置</a></h3>
<p><strong>Nginx 零拷貝配置</strong>：</p>
<pre><code class="language-nginx">http {
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    
    # 啟用 aio
    aio threads;
    directio 512k;
    
    # 使用 io_uring (Nginx 1.19+)
    aio io_uring;
}
</code></pre>
<h3 id="dpdk-簡單轉發應用"><a class="header" href="#dpdk-簡單轉發應用">DPDK 簡單轉發應用</a></h3>
<pre><code class="language-c">static inline void
forward_packets(uint16_t port_id) {
    struct rte_mbuf *pkts_burst[MAX_PKT_BURST];
    uint16_t nb_rx, nb_tx;
    
    // 接收封包
    nb_rx = rte_eth_rx_burst(port_id, 0, pkts_burst, MAX_PKT_BURST);
    
    // 修改封包（如需要）
    for (int i = 0; i &lt; nb_rx; i++) {
        modify_packet(pkts_burst[i]);
    }
    
    // 轉發封包
    nb_tx = rte_eth_tx_burst(port_id ^ 1, 0, pkts_burst, nb_rx);
    
    // 釋放未傳送的封包
    if (unlikely(nb_tx &lt; nb_rx)) {
        for (uint16_t i = nb_tx; i &lt; nb_rx; i++) {
            rte_pktmbuf_free(pkts_burst[i]);
        }
    }
}
</code></pre>
<hr />
<h2 id="效能測試與調優"><a class="header" href="#效能測試與調優">效能測試與調優</a></h2>
<h3 id="測試工具"><a class="header" href="#測試工具">測試工具</a></h3>
<p><strong>網路效能測試</strong>：</p>
<ul>
<li><code>iperf3</code>：頻寬測試</li>
<li><code>netperf</code>：延遲和吞吐量</li>
<li><code>sockperf</code>：Socket 效能</li>
<li><code>pktgen</code>：封包產生器</li>
</ul>
<p><strong>系統監控</strong>：</p>
<pre><code class="language-bash"># CPU 使用率
mpstat -P ALL 1

# 中斷統計
watch -n 1 cat /proc/interrupts

# 網路統計
netstat -s
ss -s

# 封包統計
ethtool -S eth0
</code></pre>
<h3 id="核心參數調優"><a class="header" href="#核心參數調優">核心參數調優</a></h3>
<pre><code class="language-bash"># /etc/sysctl.conf

# 網路緩衝區
net.core.rmem_max = 134217728
net.core.wmem_max = 134217728
net.ipv4.tcp_rmem = 4096 87380 134217728
net.ipv4.tcp_wmem = 4096 65536 134217728

# 連線佇列
net.core.netdev_max_backlog = 5000
net.ipv4.tcp_max_syn_backlog = 8192

# TIME_WAIT 優化
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_fin_timeout = 30

# 啟用 BBR
net.core.default_qdisc = fq
net.ipv4.tcp_congestion_control = bbr
</code></pre>
<h3 id="cpu-親和性設定"><a class="header" href="#cpu-親和性設定">CPU 親和性設定</a></h3>
<pre><code class="language-bash"># 隔離 CPU 核心
isolcpus=2,3,4,5

# 綁定中斷
echo 2 &gt; /proc/irq/24/smp_affinity

# 綁定程序
taskset -c 2-5 ./application
</code></pre>
<hr />
<h2 id="最佳實踐"><a class="header" href="#最佳實踐">最佳實踐</a></h2>
<h3 id="選擇合適的技術"><a class="header" href="#選擇合適的技術">選擇合適的技術</a></h3>
<div class="table-wrapper"><table><thead><tr><th>場景</th><th>建議技術</th><th>原因</th></tr></thead><tbody>
<tr><td>Web 伺服器</td><td>sendfile + 零拷貝</td><td>平衡效能與複雜度</td></tr>
<tr><td>代理伺服器</td><td>splice + io_uring</td><td>高效轉發</td></tr>
<tr><td>金融交易</td><td>DPDK/RDMA</td><td>極低延遲需求</td></tr>
<tr><td>CDN 節點</td><td>XDP + 智慧網卡</td><td>線速處理</td></tr>
<tr><td>資料庫</td><td>RDMA + 持久記憶體</td><td>高吞吐量存取</td></tr>
<tr><td>視訊串流</td><td>零拷貝 + TSO</td><td>大量資料傳輸</td></tr>
</tbody></table>
</div>
<h3 id="開發建議"><a class="header" href="#開發建議">開發建議</a></h3>
<ol>
<li>
<p><strong>漸進式優化</strong></p>
<ul>
<li>先用標準 API 實作</li>
<li>識別效能瓶頸</li>
<li>逐步引入優化技術</li>
</ul>
</li>
<li>
<p><strong>效能監控</strong></p>
<ul>
<li>建立基準測試</li>
<li>持續監控關鍵指標</li>
<li>A/B 測試新優化</li>
</ul>
</li>
<li>
<p><strong>可維護性</strong></p>
<ul>
<li>文件化所有優化</li>
<li>保留降級方案</li>
<li>考慮團隊技術棧</li>
</ul>
</li>
<li>
<p><strong>硬體考量</strong></p>
<ul>
<li>網卡支援的功能</li>
<li>CPU 架構（NUMA）</li>
<li>記憶體頻寬</li>
</ul>
</li>
</ol>
<hr />
<h2 id="未來趨勢"><a class="header" href="#未來趨勢">未來趨勢</a></h2>
<h3 id="1-ebpf-生態系統"><a class="header" href="#1-ebpf-生態系統">1. eBPF 生態系統</a></h3>
<ul>
<li>可程式化核心</li>
<li>動態追蹤和優化</li>
<li>安全沙箱執行</li>
</ul>
<h3 id="2-硬體加速"><a class="header" href="#2-硬體加速">2. 硬體加速</a></h3>
<ul>
<li>DPU (Data Processing Unit)</li>
<li>可程式化交換機</li>
<li>CXL (Compute Express Link)</li>
</ul>
<h3 id="3-新協議"><a class="header" href="#3-新協議">3. 新協議</a></h3>
<ul>
<li>QUIC</li>
<li>HTTP/3</li>
<li>SRv6 (Segment Routing)</li>
</ul>
<h3 id="4-邊緣運算"><a class="header" href="#4-邊緣運算">4. 邊緣運算</a></h3>
<ul>
<li>5G MEC</li>
<li>分散式處理</li>
<li>低延遲要求</li>
</ul>
<hr />
<h2 id="參考資源"><a class="header" href="#參考資源">參考資源</a></h2>
<h3 id="文件與教程"><a class="header" href="#文件與教程">文件與教程</a></h3>
<ul>
<li><a href="https://doc.dpdk.org/">DPDK 官方文件</a></li>
<li><a href="https://www.kernel.org/doc/">Linux Kernel Documentation</a></li>
<li><a href="https://kernel.dk/io_uring.pdf">io_uring 指南</a></li>
<li><a href="https://github.com/xdp-project/xdp-tutorial">XDP 教程</a></li>
</ul>
<h3 id="開源專案"><a class="header" href="#開源專案">開源專案</a></h3>
<ul>
<li><a href="http://seastar.io/">Seastar Framework</a></li>
<li><a href="https://github.com/F-Stack/f-stack">F-Stack</a></li>
<li><a href="https://github.com/mtcp-stack/mtcp">mTCP</a></li>
<li><a href="https://fd.io/">VPP (Vector Packet Processing)</a></li>
</ul>
<h3 id="效能分析工具"><a class="header" href="#效能分析工具">效能分析工具</a></h3>
<ul>
<li><a href="https://github.com/iovisor/bpftrace">bpftrace</a></li>
<li><a href="https://perf.wiki.kernel.org/">perf</a></li>
<li><a href="https://sourceware.org/systemtap/">SystemTap</a></li>
<li><a href="https://software.intel.com/vtune">Intel VTune</a></li>
</ul>
<hr />
<h2 id="總結"><a class="header" href="#總結">總結</a></h2>
<p>高效能網路優化是一個持續演進的領域，從簡單的零拷貝技術到複雜的核心旁路實作，每種技術都有其適用場景。關鍵在於：</p>
<ol>
<li><strong>理解瓶頸</strong>：準確識別系統的效能瓶頸</li>
<li><strong>選擇合適技術</strong>：根據需求選擇適當的優化方案</li>
<li><strong>平衡取捨</strong>：在效能、複雜度和可維護性間找到平衡</li>
<li><strong>持續優化</strong>：隨著硬體和軟體發展不斷改進</li>
</ol>
<p>記住，過早優化是萬惡之源，但在正確的時機使用正確的技術，可以帶來數量級的效能提升。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../hft/02-system/hugepages-threading.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../hft/03-network/kernel-bypass.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../hft/02-system/hugepages-threading.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../hft/03-network/kernel-bypass.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../../ace.js"></script>
        <script src="../../mode-rust.js"></script>
        <script src="../../editor.js"></script>
        <script src="../../theme-dawn.js"></script>
        <script src="../../theme-tomorrow_night.js"></script>

        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../mermaid.min.js"></script>
        <script src="../../mermaid-init.js"></script>



    </div>
    </body>
</html>
