<!DOCTYPE HTML>
<html lang="zh" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Golang Note - Jason Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "rust";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jason Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/shihyu/jason_note" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="golang-note"><a class="header" href="#golang-note">Golang Note</a></h1>
<h2 id="modules-and-packages"><a class="header" href="#modules-and-packages">Modules and Packages</a></h2>
<p>ä¸è«–æ˜¯ module æˆ– packageï¼Œéƒ½å¯ä»¥åœ¨æœ¬åœ°åŒ¯å…¥ï¼Œä¸ä¸€å®šè¦ç™¼åˆ°é ç«¯ repositoryã€‚</p>
<pre><code class="language-go"># åœ¨ hello è³‡æ–™å¤¾ä¸­
$ go mod init example.com/user/hello        # å®£å‘Š module_pathï¼Œé€šå¸¸æœƒå’Œè©² repository çš„ url ä½ç½®ä¸€è‡´
$ go install .                      # ç·¨è­¯è©² module ä¸¦å°‡åŸ·è¡Œæª”æ”¾åˆ° GOBINï¼Œå› æ­¤åœ¨ GOBIN è³‡æ–™å¤¾ä¸­æœƒå‡ºç¾ hello çš„åŸ·è¡Œæª”

$ go mod tidy             # ç§»é™¤æ²’ç”¨åˆ°çš„å¥—ä»¶
$ go clean -modcache            # ç§»é™¤æ‰€æœ‰ä¸‹è¼‰ç¬¬ä¸‰æ–¹å¥—ä»¶çš„å…§å®¹
</code></pre>
<p>ğŸ’¡ å®‰è£åˆ° <code>GOBIN</code> è³‡æ–™å¤¾çš„æª”æ¡ˆåç¨±ï¼Œæœƒæ˜¯åœ¨ <code>go.mod</code> /æ¡ˆä¸­ç¬¬ä¸€è¡Œå®šç¾© <code>module path</code> ä¸­è·¯å¾‘çš„æœ€å¾Œä¸€å€‹ã€‚å› æ­¤è‹¥ module_path æ˜¯ <code>example.com/user/hello</code> å‰‡åœ¨ GOBIN ä¸­çš„æª”åæœƒæ˜¯ <code>hello</code>ï¼›è‹¥ module_path æ˜¯ <code>example/user</code> å‰‡åœ¨ GOBIN è³‡æ–™å¤¾ä¸­çš„æª”åæœƒæ˜¯ <code>user</code>ã€‚</p>
<p>è‹¥æˆ‘å€‘åœ¨ go module ä¸­æœ‰ä½¿ç”¨å…¶ä»–çš„é ç«¯ï¼ˆç¬¬ä¸‰æ–¹ï¼‰å¥—ä»¶ï¼Œç•¶åŸ·è¡Œ <code>go install</code>ã€<code>go build</code> æˆ– <code>go run</code> æ™‚ï¼Œgo æœƒè‡ªå‹•ä¸‹è¼‰è©² remote moduleï¼Œä¸¦è¨˜éŒ„åœ¨ <code>go.mod</code> æª”æ¡ˆä¸­ã€‚é€™äº›é ç«¯å¥—ä»¶æœƒè‡ªå‹•ä¸‹è¼‰åˆ° <code>$GOPATH/pkg/mod</code> çš„è³‡æ–™å¤¾ä¸­ã€‚ç•¶æœ‰ä¸åŒçš„ module ä¹‹é–“éœ€è¦ä½¿ç”¨ç›¸åŒç‰ˆæœ¬çš„ç¬¬ä¸‰æ–¹å¥—ä»¶æ™‚ï¼Œæœƒå…±ç”¨é€™äº›ä¸‹è¼‰çš„å…§å®¹ï¼Œå› æ­¤é€™äº›å…§å®¹æœƒæ˜¯ã€Œå”¯è®€ã€ã€‚è‹¥æƒ³è¦åˆªé™¤é€™äº›ç¬¬ä¸‰æ–¹å¥—ä»¶çš„å…§å®¹ï¼Œå¯ä»¥è¼¸å…¥ <code>go clean -modcache</code>ã€‚</p>
<h3 id="è¨­å®š-gopath"><a class="header" href="#è¨­å®š-gopath">è¨­å®š GOPATH</a></h3>
<pre><code class="language-shell"># ~/.zshrc
export GOPATH=$HOME/go
export PATH=$PATH:$GOPATH/bin
</code></pre>
<h3 id="packages"><a class="header" href="#packages">Packages</a></h3>
<ul>
<li>
<p>Go çš„ç¨‹å¼ç¢¼éƒ½æ˜¯ä»¥ <code>package</code> çš„æ–¹å¼åœ¨çµ„ç¹”ï¼Œä¸€å€‹ package å°±æ˜¯åœ¨åŒä¸€è³‡æ–™å¤¾ä¸­çš„è¨±å¤š GO æª”æ¡ˆã€‚</p>
</li>
<li>
<p><strong>åŒä¸€å€‹ package çš„æ‰€æœ‰ Go æª”æ¡ˆæœƒæ”¾åœ¨åŒä¸€å€‹è³‡æ–™å¤¾å…§ï¼›è€Œé€™å€‹è³‡æ–™å¤¾å…§çš„æ‰€æœ‰æª”æ¡ˆä¹Ÿéƒ½æœƒå±¬æ–¼åŒä¸€å€‹ packageï¼Œæœ‰ç›¸åŒçš„ package åç¨±</strong>ã€‚</p>
</li>
<li>
<p>å¦‚æœå¥—ä»¶æ˜¯åœ¨ module ä¸­ï¼Œgo import package çš„è·¯å¾‘æœƒæ˜¯ <code>module path</code> åŠ ä¸Š <code>subdirectory</code>ã€‚</p>
</li>
<li>
<p>é€šå¸¸ package çš„åç¨±æœƒè·Ÿè‘— folder çš„åç¨±ï¼Œèˆ‰ä¾‹ä¾†èªªï¼Œè‹¥æª”æ¡ˆæ”¾åœ¨ <code>math/rand</code> è³‡æ–™å¤¾ä¸­ï¼Œå‰‡è©²å¥—ä»¶æœƒç¨±ä½œ <code>rand</code>ã€‚</p>
</li>
<li>
<p>package scope</p>
<p>ï¼š</p>
<ul>
<li>åœ¨ Go èªè¨€ä¸­ï¼Œä¸¦æ²’æœ‰å€åˆ† <code>public</code>ã€<code>private</code> æˆ– <code>protected</code>ï¼Œè€Œæ˜¯æ ¹æ“šè®Šæ•¸åç¨±çš„ç¬¬ä¸€å€‹å­—æ¯å¤§å°å¯«ä¾†åˆ¤æ–·èƒ½å¦è¢«å¤–éƒ¨å¼•ç”¨ã€‚</li>
<li>åœ¨åŒä¸€å€‹ package ä¸­è®Šæ•¸ã€å‡½å¼ã€å¸¸æ•¸å’Œ typeï¼Œéƒ½éš¸å±¬æ–¼åŒä¸€å€‹ package scopeï¼Œå› æ­¤é›–ç„¶å¯èƒ½åœ¨ä¸åŒæ”¯æª”æ¡ˆå…§ï¼Œä½†åªè¦éš¸å±¬æ–¼åŒä¸€å€‹ packageï¼Œéƒ½å¯ä»¥ä½¿ç”¨ï¼ˆvisibleï¼‰ã€‚</li>
<li>å¦‚æœéœ€è¦è®“ package å…§çš„è®Šæ•¸æˆ–å‡½å¼ç­‰èƒ½å¤ åœ¨ package å¤–éƒ¨è¢«ä½¿ç”¨ï¼Œå‰‡<strong>è©²è®Šæ•¸çš„ç¬¬ä¸€å€‹å­—æ¯è¦å¤§å¯«æ‰èƒ½è®“å¤–éƒ¨å¼•ç”¨ï¼ˆExported namesï¼‰ï¼Œå¦å‰‡çš„è©±æœƒç„¡æ³•ä½¿ç”¨</strong></li>
</ul>
</li>
<li>
<p>æœ‰å…©ç¨®ä¸åŒé¡å‹çš„ packageï¼š</p>
<ul>
<li><strong>executable package</strong>ï¼šæ˜¯ç”¨ä¾†ç”¢ç”Ÿæˆ‘å€‘å¯ä»¥åŸ·è¡Œçš„æª”æ¡ˆï¼Œä¸€å®šæœƒåŒ…å« <code>package main</code> ä¸¦ä¸”å¸¶æœ‰åç‚º <code>main</code> çš„å‡½å¼ï¼Œåªæœ‰é€™å€‹æª”æ¡ˆå¯ä»¥è¢«åŸ·è¡Œï¼ˆrunï¼‰å’Œç·¨è­¯ï¼ˆbuildï¼‰ï¼Œä¸¦ä¸”ä¸èƒ½è¢«å…¶ä»–æª”æ¡ˆçµ¦åŒ¯å…¥ã€‚</li>
<li><strong>reusable package(library package)</strong>ï¼šé¡ä¼¼ "<strong>helpers</strong>" æˆ–å¸¸ç¨±ä½œ <strong>library / dependency</strong>ï¼Œç›®çš„æ˜¯å¯ä»¥æ”¾å…¥å¯é‡è¤‡ä½¿ç”¨çš„ç¨‹å¼é‚è¼¯ï¼Œå®ƒæ˜¯ä¸èƒ½è¢«ç›´æ¥åŸ·è¡Œçš„ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•çš„åç¨±ã€‚</li>
</ul>
</li>
</ul>
<p>åœ¨ Go è£¡é¢è¦å€åˆ¥é€™å…©ç¨® Package çš„ä¸»è¦æ–¹å¼å°±æ˜¯åˆ©ç”¨ã€Œ<strong>package åç¨±</strong>ã€ï¼Œç•¶ä½¿ç”¨ <code>main</code> ç•¶åš package åç¨±æ™‚ï¼Œå°±æœƒè¢«ç•¶ä½œ executable packageï¼Œå› æ­¤æ¥è‘—åŸ·è¡Œ <code>go build &lt;fileName&gt;</code> æ™‚ï¼Œ<strong>æœƒç”¢ç”Ÿä¸€æ”¯åŸ·è¡Œæª”</strong>ï¼›ä½†æ˜¯ç•¶ä½¿ç”¨ main ä»¥å¤–çš„åç¨±æ˜¯ï¼Œéƒ½æœƒè¢«ç•¶ä½œæ˜¯ reusable packageï¼Œå› æ­¤ç•¶ä½¿ç”¨ <code>go build</code> æŒ‡ä»¤æ™‚ï¼Œ<strong>ä¸æœƒç”¢ç”Ÿä»»ä½•æª”æ¡ˆ</strong>ã€‚</p>
<p>è¦åŒ¯å…¥ reusable package åªéœ€è¦ï¼š</p>
<pre><code class="language-go">// åŒ¯å…¥å–®ä¸€å€‹ package
import "fmt"

// åŒ¯å…¥å¤šå€‹ packagesï¼ˆä¸ç”¨é€—è™Ÿï¼‰
import (
  "fmt"
  "strings"
)
</code></pre>
<pre><code class="language-go">// go-hello-world/main.go
package main

import (
    "fmt"

    // æŠŠ foo é€™å€‹ package çš„æ–¹æ³•éƒ½æ”¾åˆ°é€™éš»æª”æ¡ˆä¸­ï¼Œå¦‚æ­¤ä¸ç”¨ä½¿ç”¨ foo.HelloWorldï¼ˆä¸å»ºè­°ï¼‰
    . "go-hello-world/foo"

    // å°‡æ¨¡çµ„è½‰æ›ç‚ºåˆ¥åï¼Œå¯ä»¥ä½¿ç”¨ bar.HelloWorld
    bar "go-hello-world/foo"

    // æ²’æœ‰ç”¨åˆ°é€™å€‹ packageï¼Œä½†è¦ init å®ƒ
    _ "go-hello-world/foo"
)

func main() {
    fmt.Println(bar.HelloWorld())
    fmt.Println("Hello main")
}
</code></pre>
<pre><code class="language-go">// go-hello-world/foo/helloworld.go

package foo

import "fmt"

func init() {
    fmt.Println("This is init of helloworld")
}

// HelloWorld ...
func HelloWorld() string {
    return "Hello World"
}
</code></pre>
<h3 id="package-name-coding-style-and-convention"><a class="header" href="#package-name-coding-style-and-convention">package name: coding style and convention</a></h3>
<blockquote>
<ul>
<li>ğŸ‘ <a href="https://blog.golang.org/package-names">package name</a> @ golang blog</li>
<li><a href="https://golang.org/doc/effective_go.html#package-names">package name</a> @ effective go</li>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments#package-names">package name</a> @ golang wiki &gt; code review comments</li>
</ul>
</blockquote>
<p>åœ¨ Go ä¸­ï¼Œpackage çš„åç¨±æ‡‰è©²æ˜¯çŸ­è€Œæ¸…æ¥šï¼Œ<strong>ä»¥å°å¯«ï¼ˆlower caseï¼‰å‘½åï¼ŒåŒæ™‚ä¸åŒ…å«åº•ç·šï¼ˆunder_scoresï¼‰æˆ–å°å¯«é§å³°ï¼ˆmixedCapsï¼‰ï¼Œä¸¦ä¸”é€šå¸¸æœƒæ˜¯åè©ï¼ˆnounï¼‰</strong>ï¼Œä¾‹å¦‚ <code>time</code>ã€<code>list</code>ã€æˆ– <code>http</code>ã€‚</p>
<blockquote>
<p>åœ¨å¹« package å‘½åçš„æ™‚å€™ï¼Œè©¦æƒ³è‡ªå·±å°±æ˜¯ä½¿ç”¨è©² pkg çš„é–‹ç™¼è€…ï¼Œç”¨é€™ç¨®è§’åº¦ä¾†æ›¿è‡ªå·±çš„ pkg å‘½åã€‚</p>
</blockquote>
<p>å¦å¤–ï¼Œç”±æ–¼ä½¿ç”¨è€…åœ¨åŒ¯å…¥è©² packageï¼Œå‡è¨­å¼•å…¥çš„ ä½¿ç”¨æ™‚ï¼Œä¸€å®šæœƒéœ€è¦ä½¿ç”¨è©² package çš„ name ä½œç‚ºå‰ç¶´ï¼Œå› æ­¤åœ¨ package ä¸­çš„è®Šæ•¸åç¨±ç›¡å¯èƒ½ä¸è¦å’Œ package name é‡è¤‡ï¼š</p>
<ul>
<li>
<p>åœ¨ <code>http</code> package ä¸­å¦‚æœè¦ä½¿ç”¨ Serverï¼Œä¸éœ€è¦ä½¿ç”¨ <code>http.HTTPServer</code>ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>http.Server</code></p>
</li>
<li>
<p>ç•¶åœ¨</p>
<p>uuid</p>
<p>çš„ package è¦ç”¢ç”Ÿä¸€çµ„</p>
<pre><code>uuid.UUID
</code></pre>
<p>æ™‚ï¼Œä¸éœ€è¦ä½¿ç”¨</p>
<pre><code>uuid.NewUUID()
</code></pre>
<p>çš„æ–¹æ³•ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<pre><code>uuid.New()
</code></pre>
<p>ï¼Œä¹Ÿå°±æ˜¯èªªå¦‚æœå›å‚³çš„å‹åˆ¥åç¨±ï¼ˆ</p>
<pre><code>UUID
</code></pre>
<p>ï¼‰å’Œè©² pkg çš„åç¨±ç›¸åŒæ™‚ï¼Œå¯ä»¥ç›´æ¥å°‡è©²æ–¹æ³•å‘½åæˆ</p>
<pre><code>New
</code></pre>
<p>ï¼Œè€Œä¸ç”¨æ˜¯</p>
<pre><code>NewOOO
</code></pre>
<ul>
<li><code>time.Now()</code> æœƒå›å‚³ <code>time.Time</code></li>
</ul>
</li>
<li>
<p>å¦‚æœ pkg æœƒå›å‚³çš„ struct åç¨±ä¸åŒæ–¼ package æœ¬èº«çš„åç¨±æ™‚ï¼Œå‰‡å¯ä»¥ä½¿ç”¨</p>
<pre><code>NewOOO
</code></pre>
<ul>
<li><code>time.NewTicker()</code></li>
<li><code>uuid.NewRandom()</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ’¡ é›–ç„¶ pkg ä¸­ variable name çš„å‰ç¶´æœƒç›¡é‡ä¸å’Œ package name é‡è¤‡ï¼Œä½†å¾ˆå¸¸è¦‹çš„æƒ…æ³æ˜¯åœ¨è©² pkg ä¸­æœ‰å…¶åŒåçš„ structï¼Œä¾‹å¦‚ time pkg ä¸­æœ‰åç‚º <code>Time</code> çš„ structï¼Œå› æ­¤å‹åˆ¥æœƒæ˜¯ <code>time.Time</code>ï¼Œ</p>
</blockquote>
<p>ä¸å¥½çš„ç”¨æ³•ï¼š</p>
<ul>
<li>ç›¡å¯èƒ½ä¸è¦ä½¿ç”¨ <code>util</code>, <code>common</code>, <code>misc</code> é€™é¡çš„åç¨±ä½œç‚º package nameï¼Œå› ç‚ºé€™å°ä½¿ç”¨è€…ä¾†èªªæ˜¯æ²’æœ‰æ„ç¾©çš„åå­—ï¼Œè€Œæ˜¯å»æƒ³ä½¿ç”¨è€…é€™å¦‚æœè¦ç”¨é€™äº›æ–¹æ³•çš„è©±ï¼Œæœ€æœ‰å¯èƒ½ä½¿ç”¨åˆ°çš„é—œéµå­—æ˜¯ä»€éº¼ã€‚</li>
<li>è¦‹ç¯„ä¾‹ã€Œ<a href="https://blog.golang.org/package-names">Break up generic packages</a>ã€</li>
</ul>
<h3 id="go-tool-æ‰¾-package-çš„é‚è¼¯"><a class="header" href="#go-tool-æ‰¾-package-çš„é‚è¼¯">go tool æ‰¾ package çš„é‚è¼¯</a></h3>
<p>go tool æœƒä½¿ç”¨ <code>$GOPATH</code> ä¾†æ‰¾å°æ‡‰çš„ packageï¼Œå‡è¨­å¼•å…¥çš„ package è·¯å¾‘æ˜¯ <code>"github.com/user/hello"</code>ï¼Œé‚£éº¼ go tool å°±æœƒå»æ‰¾ <code>$GOPATH/src/github.com/user/hello</code>ã€‚</p>
<h3 id="modules"><a class="header" href="#modules">Modules</a></h3>
<pre><code class="language-sh"># åˆå§‹åŒ– Go Module
$ export GO111MODULE=on  # åœ¨ GOPATH å¤–è¦ä½¿ç”¨ module éœ€è¦å•Ÿå‹•

# go mod init [module_path]
$ go mod init example.com/user/hello        # å®£å‘Š module path
$ go mod tidy        # ç§»é™¤æ²’ç”¨åˆ°çš„ library
$ go mod download    # ä¸‹è¼‰å¥—ä»¶ï¼ˆgo build å’Œ go test ä¹Ÿæœƒè‡ªå‹•ä¸‹è¼‰ï¼‰

$ go get [library]   # æ–°å¢æˆ–æ›´æ–° package åˆ° Module å…§
$ go get -u ./...    # ç­‰åŒæ–¼ï¼Œgo get -u=patch ./...
$ go get foo@master. # ä¸‹è¼‰ç‰¹å®šç‰ˆæœ¬çš„ go package

$ go list -m all      # å°å‡º module æ­£åœ¨ä½¿ç”¨çš„æ‰€æœ‰å¥—ä»¶
$ go list -m -versions [package]   # åˆ—å‡ºæ‰€æœ‰æ­¤å¥—ä»¶å¯ä¸‹è¼‰çš„ç‰ˆæœ¬
$ go list -u -m all   # æª¢è¦–æœ‰ç„¡ä»»ä½• minor æˆ– patch çš„æ›´æ–°
</code></pre>
<blockquote>
<ul>
<li><a href="https://github.com/golang/go/wiki/Modules">Modules</a> @ Golang Wiki</li>
<li><a href="https://blog.golang.org/using-go-modules">Using Go Modules</a> @ golang blog</li>
</ul>
</blockquote>
<ul>
<li>åœ¨ä¸€å€‹å°ˆæ¡ˆä¸­é€šå¸¸åªæœƒæœ‰ä¸€å€‹ moduleï¼ˆä½†ä¹Ÿå¯ä»¥æœ‰å¤šå€‹ï¼‰ï¼Œä¸¦ä¸”æ”¾åœ¨å°ˆæ¡ˆçš„æ ¹ç›®éŒ„ï¼Œmodule è£¡é¢æœƒé›†åˆæ‰€æœ‰ç›¸é—œè¯çš„ Go packagesã€‚åœ¨ <code>go.mod</code> ä¸­æœƒå®£å‘Š <code>module path</code>ï¼Œé€™æ˜¯ç”¨ä¾†åŒ¯å…¥æ‰€æœ‰åœ¨æ­¤ module ä¸­çš„è·¯å¾‘çš„å‰ç¶´ï¼ˆpath prefixï¼‰ï¼ŒåŒæ™‚å®ƒä¹Ÿè®“ go çš„å·¥å…·çŸ¥é“è¦å»å“ªè£¡ä¸‹è¼‰å®ƒã€‚</li>
<li>é€é Modules å¯ä»¥æº–ç¢ºç´€éŒ„ç›¸ä¾çš„å¥—ä»¶ï¼Œè®“ç¨‹å¼èƒ½å†æ¬¡è¢«ç·¨è­¯ã€‚</li>
<li>ç¸½çµä¾†èªªï¼š
<ul>
<li>ä¸€å€‹ repository æœƒåŒ…å«ä¸€å€‹æˆ–ä»¥ä¸Šçš„ Go modules</li>
<li>æ¯å€‹ module æœƒåŒ…å«ä¸€å€‹æˆ–ä»¥ä¸Šçš„ Go packages</li>
<li>æ¯å€‹ package æœƒåŒ…å«ä¸€å€‹æˆ–ä»¥ä¸Šçš„æª”æ¡ˆåœ¨å–®ä¸€è³‡æ–™å¤¾ä¸­</li>
</ul>
</li>
<li>åœ¨åŸ·è¡Œ <code>go build</code> æˆ– <code>go test</code> æ™‚ï¼Œæœƒæ ¹æ“š imports çš„å…§å®¹è‡ªå‹•æ·»åŠ å¥—ä»¶ï¼Œä¸¦æ›´æ–° <code>go.mod</code>ã€‚</li>
<li>ç•¶éœ€è¦çš„æ™‚å€™ï¼Œå¯ä»¥ç›´æ¥åœ¨ <code>go.mod</code> æŒ‡å®šç‰¹å®šçš„ç‰ˆæœ¬ï¼Œæˆ–ä½¿ç”¨ <code>go get</code>ï¼Œä¾‹å¦‚ <code>go get foo@v1.2.3</code>, <code>go get foo@master</code>, <code>go get foo@e3702bed2</code></li>
</ul>
<h3 id="gomod"><a class="header" href="#gomod">go.mod</a></h3>
<p>åœ¨ root directory ä¸­æœƒé€é <code>go.mod</code> ä¾†å®šç¾© Moduleï¼Œè€Œ Module çš„åŸå§‹ç¢¼å¯ä»¥æ”¾åœ¨ GOPATH å¤–ï¼Œæœ‰å››ç¨®æŒ‡ä»¤ <code>module</code>, <code>require</code>, <code>replace</code>, <code>exclude</code> å¯ä»¥ä½¿ç”¨ï¼š</p>
<pre><code class="language-go">// go.mod
// go.mod
module github.com/my/thing

require (
    github.com/some/dependency v1.2.3
    github.com/another/dependency/v4 v4.0.0
)
</code></pre>
<h3 id="module"><a class="header" href="#module">module</a></h3>
<p>ç”¨ä¾†å®£å‘Š Module çš„èº«ä»½ï¼Œä¸¦å¸¶å…¥ module çš„è·¯å¾‘ã€‚åœ¨é€™å€‹ module ä¸­æ‰€æœ‰åŒ¯å…¥çš„è·¯å¾‘éƒ½æœƒä»¥é€™å€‹ module path ç•¶ä½œå‰ç¶´ï¼ˆprefixï¼‰ã€‚é€é module çš„è·¯å¾‘ï¼Œä»¥åŠ go.mod åˆ° package's è³‡æ–™å¤¾çš„ç›¸å°è·¯å¾‘ï¼Œæœƒå…±åŒæ±ºå®š import package's æ™‚è¦ä½¿ç”¨çš„è·¯å¾‘ã€‚</p>
<h4 id="replace-and-execute"><a class="header" href="#replace-and-execute">replace and execute</a></h4>
<p>é€™å…©å€‹å‘½ä»¤éƒ½åªèƒ½ç”¨åœ¨ç•¶å‰æ¨¡çµ„ï¼ˆå³ï¼Œ <code>main</code>ï¼‰ï¼Œå¦å‰‡å°‡æœƒåœ¨ç·¨è­¯æ™‚è¢«å¿½ç•¥ã€‚</p>
<h2 id="å…¶ä»–"><a class="header" href="#å…¶ä»–">å…¶ä»–</a></h2>
<ul>
<li>éšå±¤é—œä¿‚ä¸Šï¼šModule &gt; Package &gt; Directory</li>
</ul>
<h3 id="è·¨æª”æ¡ˆå¼•ç”¨å‡½å¼"><a class="header" href="#è·¨æª”æ¡ˆå¼•ç”¨å‡½å¼">è·¨æª”æ¡ˆå¼•ç”¨å‡½å¼</a></h3>
<p>å¾ä¸‹é¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé›–ç„¶ <code>main.go</code> è£¡é¢æœ‰ä¸€å€‹å‡½å¼æ˜¯å®šç¾©åœ¨ <code>state.go</code> çš„æª”æ¡ˆä¸­ï¼Œä½†å› ç‚ºå®ƒå€‘å±¬æ–¼åŒä¸€å€‹ packageï¼Œæ‰€ä»¥ç•¶å¾ Terminal åŸ·è¡Œ <code>go run main.go state.go</code> æ™‚ï¼Œç¨‹å¼å¯ä»¥æ­£ç¢ºåŸ·è¡Œã€‚</p>
<p>æˆ–è€…ä¹Ÿå¯ä»¥è¼¸å…¥ <code>go run *.go</code>ï¼š</p>
<pre><code class="language-go">// main.go
package main

func main() {
  printState()
}
</code></pre>
<pre><code class="language-go">// state.go
package main

import "fmt"

func printState() {
  fmt.Println("California")
}
</code></pre>
<h3 id="å¥—ä»¶è¼‰å…¥çš„æµç¨‹"><a class="header" href="#å¥—ä»¶è¼‰å…¥çš„æµç¨‹">å¥—ä»¶è¼‰å…¥çš„æµç¨‹</a></h3>
<p>åœ¨ golang ä¸­ï¼Œä½¿ç”¨æŸä¸€å€‹å¥—ä»¶æ™‚ï¼Œgo æœƒå…ˆå» GOROOT æ‰¾çœ‹çœ‹æ˜¯ä¸æ˜¯å…§å»ºçš„å‡½å¼åº«ï¼Œå¦‚æœæ‰¾ä¸åˆ°çš„è©±ï¼Œæœƒå» GOPATH å…§æ‰¾ï¼Œå¦‚æœéƒ½æ‰¾ä¸åˆ°çš„è©±ï¼Œå°±ç„¡æ³•ä½¿ç”¨ã€‚</p>
<h2 id="è®Šæ•¸å®£å‘Švariables"><a class="header" href="#è®Šæ•¸å®£å‘Švariables">è®Šæ•¸å®£å‘Šï¼ˆvariablesï¼‰</a></h2>
<p>Go å±¬æ–¼å¼·å‹åˆ¥ï¼ˆStatic Typesï¼‰çš„èªè¨€ï¼Œå…¶ä¸­å¸¸è¦‹çš„åŸºæœ¬å‹åˆ¥åŒ…å« <code>bool</code>, <code>string</code>, <code>int</code>, <code>float64</code>, <code>map</code>ã€‚</p>
<h3 id="ç¬¬ä¸€ç¨®å®£å‘Šæ–¹å¼æœ€å¸¸ç”¨short-declaration"><a class="header" href="#ç¬¬ä¸€ç¨®å®£å‘Šæ–¹å¼æœ€å¸¸ç”¨short-declaration">ç¬¬ä¸€ç¨®å®£å‘Šæ–¹å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰ï¼šshort declaration</a></h3>
<p>ä½¿ç”¨ <code>:=</code> å®£å‘Šï¼Œè¡¨ç¤ºä¹‹å‰æ²’æœ‰é€²è¡Œå®£å‘Šéã€‚é€™æ˜¯åœ¨ go ä¸­æœ€å¸¸ä½¿ç”¨çš„è®Šæ•¸å®£å‘Šçš„æ–¹å¼ï¼Œå› ç‚ºå®ƒå¾ˆç°¡æ½”ã€‚ä½†å› ç‚ºåœ¨ package scope çš„è®Šæ•¸éƒ½æ˜¯ä»¥ keyword ä½œç‚ºé–‹é ­ï¼Œå› æ­¤ä¸èƒ½ä½¿ç”¨ç¸®å¯«çš„æ–¹å¼å®šç¾©è®Šæ•¸ï¼ˆ<code>foo := bar</code>ï¼‰ï¼Œåªèƒ½åœ¨ function ä¸­ä½¿ç”¨ï¼Œå…·æœ‰å€åŸŸæ€§ï¼ˆlocal variableï¼‰ï¼š</p>
<pre><code class="language-go">// ç¬¬ä¸€ç¨®å®£å‘Šæ–¹å¼
function main() {
    foo := "Hello"
    bar := 100

  // ä¹Ÿå¯ä»¥ç°¡å¯«æˆ
  foo, bar := "Hello", 100
}

// ç­‰åŒæ–¼
function main() {
    var foo string
    foo = "Hello"
}
</code></pre>
<h3 id="ç¬¬äºŒç¨®å®£å‘Šæ–¹å¼variable-declaration"><a class="header" href="#ç¬¬äºŒç¨®å®£å‘Šæ–¹å¼variable-declaration">ç¬¬äºŒç¨®å®£å‘Šæ–¹å¼ï¼švariable declaration</a></h3>
<p>ä½¿ç”¨æ™‚æ©Ÿä¸»è¦æ˜¯ï¼š</p>
<ul>
<li>ç•¶ä½ ä¸çŸ¥é“è®Šæ•¸çš„èµ·å§‹å€¼</li>
<li>éœ€è¦åœ¨ package scope å®£å‘Šè®Šæ•¸</li>
<li>ç•¶ç‚ºäº†ç¨‹å¼çš„é–±è®€æ€§ï¼Œå°‡è®Šæ•¸çµ„ç¹”åœ¨ä¸€èµ·æ™‚</li>
</ul>
<blockquote>
<p>âš ï¸ ç•™æ„ï¼šåœ¨ package scope å®£å‘Šçš„è®Šæ•¸æœƒä¸€ç›´ä¿å­˜åœ¨è¨˜æ†¶é«”ä¸­ï¼Œç›´åˆ°ç¨‹å¼çµæŸæ‰è¢«é‡‹æ”¾ï¼Œå› æ­¤æ‡‰è©²æ¸›å°‘åœ¨ package scopes å®£å‘Šè®Šæ•¸</p>
</blockquote>
<pre><code class="language-go">// ç¬¬äºŒç¨®å®£å‘Šæ–¹å¼ï¼Œåœ¨ main å¤–é¢å®£å‘Šï¼ˆå…¨åŸŸè®Šæ•¸ï¼‰ï¼Œä¸¦åœ¨ main å…§è³¦å€¼
var foo string
var bar int

// å¯ä»¥ç°¡å¯«æˆ
var (
    foo string
    bar int
)

function main() {
  foo = "Hello"
    bar = 100
}
</code></pre>
<blockquote>
<p><strong>ä¸å»ºè­°æŠŠè®Šæ•¸å®£å‘Šåœ¨å…¨åŸŸç’°å¢ƒ</strong></p>
</blockquote>
<p>å¦‚æœè®Šæ•¸å‹åˆ¥ä¸€æ¨£çš„è©±ï¼Œä¹Ÿå¯ä»¥ç°¡å¯«æˆé€™æ¨£ï¼š</p>
<pre><code class="language-go">func main() {
    var c, python, java bool
    fmt.Println(c, python, java)
}
</code></pre>
<h3 id="ç¬¬ä¸‰ç¨®å®£å‘Šæ–¹å¼"><a class="header" href="#ç¬¬ä¸‰ç¨®å®£å‘Šæ–¹å¼">ç¬¬ä¸‰ç¨®å®£å‘Šæ–¹å¼</a></h3>
<p>ç›´æ¥å®£å‘Šä¸¦è³¦å€¼ï¼š</p>
<pre><code class="language-go">// ç¬¬ä¸‰ç¨®å®£å‘Šæ–¹å¼ï¼Œç›´æ¥è³¦å€¼
var (
  foo string = "Hello"
    bar int = 100
)
</code></pre>
<h3 id="ä¸‰ç¨®æ–¹å¼æ˜¯ä¸€æ¨£çš„"><a class="header" href="#ä¸‰ç¨®æ–¹å¼æ˜¯ä¸€æ¨£çš„">ä¸‰ç¨®æ–¹å¼æ˜¯ä¸€æ¨£çš„</a></h3>
<p>ä¸‹é¢é€™å…©ç¨®å¯«æ³•æ˜¯å®Œå…¨ä¸€æ¨£çš„ï¼š</p>
<pre><code class="language-go">var &lt;name&gt; &lt;type&gt; = &lt;value&gt;
var &lt;name&gt; := &lt;value&gt;
</code></pre>
<pre><code class="language-go">// var card string = "Ace of Spades"
card := "Ace of Spades"
</code></pre>
<pre><code class="language-go">// var pi float = 3.14
pi := 3.14
</code></pre>
<p><strong>åªæœ‰åœ¨å®£å‘Šè®Šæ•¸çš„æ™‚å€™å¯ä»¥ä½¿ç”¨ <code>:=</code> çš„å¯«æ³•ï¼Œå¦‚æœè¦é‡æ–°è³¦å€¼çš„è©±åªéœ€è¦ä½¿ç”¨ <code>=</code>ã€‚</strong></p>
<h2 id="æ³¨æ„äº‹é …"><a class="header" href="#æ³¨æ„äº‹é …">æ³¨æ„äº‹é …</a></h2>
<h4 id="éŒ¯èª¤é‡è¤‡å®£å‘Šè®Šæ•¸"><a class="header" href="#éŒ¯èª¤é‡è¤‡å®£å‘Šè®Šæ•¸">éŒ¯èª¤ï¼šé‡è¤‡å®£å‘Šè®Šæ•¸</a></h4>
<pre><code class="language-go">// éŒ¯èª¤ï¼šé‡è¤‡å®£å‘Šè®Šæ•¸
paperColor := "Green"
paperColor := "Blue"
</code></pre>
<h4 id="æ­£ç¢ºæˆ‘å€‘å¯ä»¥åœ¨-main-å‡½å¼å¤–å®£å‘Šè®Šæ•¸ä½†ç„¡æ³•åœ¨-main-å‡½å¼å¤–è³¦å€¼"><a class="header" href="#æ­£ç¢ºæˆ‘å€‘å¯ä»¥åœ¨-main-å‡½å¼å¤–å®£å‘Šè®Šæ•¸ä½†ç„¡æ³•åœ¨-main-å‡½å¼å¤–è³¦å€¼">æ­£ç¢ºï¼šæˆ‘å€‘å¯ä»¥åœ¨ main å‡½å¼å¤–å®£å‘Šè®Šæ•¸ï¼Œä½†ç„¡æ³•åœ¨ main å‡½å¼å¤–è³¦å€¼</a></h4>
<pre><code class="language-go">// æ­£ç¢ºï¼šæˆ‘å€‘å¯ä»¥åœ¨ main å‡½å¼å¤–å®£å‘Šè®Šæ•¸ï¼Œä½†ç„¡æ³•åœ¨ main å‡½å¼å¤–è³¦å€¼
package main

import "fmt"

var deckSize int

func main() {
  deckSize = 50
  fmt.Println(deckSize)
}
</code></pre>
<h4 id="éŒ¯èª¤ç„¡æ³•åœ¨-main-å‡½å¼å¤–è³¦å€¼"><a class="header" href="#éŒ¯èª¤ç„¡æ³•åœ¨-main-å‡½å¼å¤–è³¦å€¼">éŒ¯èª¤ï¼šç„¡æ³•åœ¨ main å‡½å¼å¤–è³¦å€¼</a></h4>
<pre><code class="language-go">// éŒ¯èª¤ï¼šä½†ç„¡æ³•åœ¨ main å‡½å¼å¤–è³¦å€¼
package main

import "fmt"

// syntax error: non-declaration statement outside function body
deckSize := 20

func main() {
  fmt.Println(deckSize)
}
</code></pre>
<h4 id="éŒ¯èª¤è®Šæ•¸éœ€è¦å…ˆå®£å‘Šå®Œæ‰èƒ½ä½¿ç”¨"><a class="header" href="#éŒ¯èª¤è®Šæ•¸éœ€è¦å…ˆå®£å‘Šå®Œæ‰èƒ½ä½¿ç”¨">éŒ¯èª¤ï¼šè®Šæ•¸éœ€è¦å…ˆå®£å‘Šå®Œæ‰èƒ½ä½¿ç”¨</a></h4>
<pre><code class="language-go">// éŒ¯èª¤ï¼šè®Šæ•¸éœ€è¦å…ˆå®£å‘Šå®Œæ‰èƒ½ä½¿ç”¨
package main

import "fmt"

func main() {
  deckSize = 52            // undefined: deckSize
  fmt.Println(deckSize)    // undefined: deckSize
}
</code></pre>
<h2 id="å¸¸æ•¸constant"><a class="header" href="#å¸¸æ•¸constant">å¸¸æ•¸ï¼ˆconstantï¼‰</a></h2>
<h5 id="keywords-iota"><a class="header" href="#keywords-iota">keywords: <code>iota</code></a></h5>
<p>ä½¿ç”¨ <code>:=</code> æˆ– <code>var</code> æ‰€å®£å‘Šçš„æœƒæ˜¯è®Šæ•¸ï¼Œè‹¥éœ€è¦å®£å‘Šå¸¸æ•¸ï¼Œéœ€è¦ä½¿ç”¨ <code>const</code>ï¼š</p>
<pre><code class="language-go">const (
    Monday = 1
    Tuesday = 2
    Wednesday = 3
  // ...
)

// å¯ä»¥ç°¡å¯«æˆ
// iota é è¨­å¾ 0 é–‹å§‹ï¼Œå¾Œé¢çš„è®Šæ•¸è‡ªå‹•åŠ ä¸€
const (
    Monday = iota + 1
    Tuesday
    Wednesday
  // ...
)
</code></pre>
<p>Go èªè¨€è£¡é¢å®šç¾©è®Šæ•¸æœ‰å¤šç¨®æ–¹å¼ã€‚</p>
<p>ä½¿ç”¨ <code>var</code> é—œéµå­—æ˜¯ Go æœ€åŸºæœ¬çš„å®šç¾©è®Šæ•¸æ–¹å¼ï¼Œèˆ‡ C èªè¨€ä¸åŒçš„æ˜¯ Go æŠŠè®Šæ•¸å‹åˆ¥æ”¾åœ¨è®Šæ•¸åå¾Œé¢ï¼š</p>
<pre><code class="language-go">//å®šç¾©ä¸€å€‹åç¨±ç‚ºâ€œvariableNameâ€ï¼Œå‹åˆ¥ç‚º"type"çš„è®Šæ•¸
var variableName type
</code></pre>
<p>å®šç¾©è®Šæ•¸ä¸¦åˆå§‹åŒ–å€¼</p>
<pre><code class="language-go">//åˆå§‹åŒ–â€œvariableNameâ€çš„è®Šæ•¸ç‚ºâ€œvalueâ€å€¼ï¼Œå‹åˆ¥æ˜¯â€œtypeâ€
var variableName type = value
</code></pre>
<p>åŒæ™‚åˆå§‹åŒ–å¤šå€‹è®Šæ•¸</p>
<pre><code class="language-go">/*
    å®šç¾©ä¸‰å€‹å‹åˆ¥éƒ½æ˜¯"type"çš„è®Šæ•¸ï¼Œä¸¦ä¸”åˆ†åˆ¥åˆå§‹åŒ–ç‚ºç›¸æ‡‰çš„å€¼
    vname1 ç‚º v1ï¼Œvname2 ç‚º v2ï¼Œvname3 ç‚º v3
*/
var vname1, vname2, vname3 type= v1, v2, v3
</code></pre>
<p>ä½ æ˜¯ä¸æ˜¯è¦ºå¾—ä¸Šé¢é€™æ¨£çš„å®šç¾©æœ‰é»ç¹ç‘£ï¼Ÿæ²’é—œä¿‚ï¼Œå› ç‚º Go èªè¨€çš„è¨­è¨ˆè€…ä¹Ÿç™¼ç¾äº†ï¼Œæœ‰ä¸€ç¨®å¯«æ³•å¯ä»¥è®“å®ƒè®Šå¾—ç°¡å–®ä¸€é»ã€‚æˆ‘å€‘å¯ä»¥ç›´æ¥å¿½ç•¥å‹åˆ¥å®£å‘Šï¼Œé‚£éº¼ä¸Šé¢çš„ç¨‹å¼ç¢¼è®Šæˆé€™æ¨£äº†ï¼š</p>
<pre><code class="language-go">/*
    å®šç¾©ä¸‰å€‹è®Šæ•¸ï¼Œå®ƒå€‘åˆ†åˆ¥åˆå§‹åŒ–ç‚ºç›¸æ‡‰çš„å€¼
    vname1 ç‚º v1ï¼Œvname2 ç‚º v2ï¼Œvname3 ç‚º v3
    ç„¶å¾Œ Go æœƒæ ¹æ“šå…¶ç›¸æ‡‰å€¼çš„å‹åˆ¥ä¾†å¹«ä½ åˆå§‹åŒ–å®ƒå€‘
*/
var vname1, vname2, vname3 = v1, v2, v3
</code></pre>
<p>ç¾åœ¨æ˜¯ä¸æ˜¯çœ‹ä¸Šå»éå¸¸ç°¡æ½”äº†ï¼Ÿ<code>:=</code>é€™å€‹ç¬¦è™Ÿç›´æ¥å–ä»£äº† <code>var</code> å’Œ<code>type</code>ï¼Œé€™ç¨®å½¢å¼å«åšç°¡çŸ­å®£å‘Šã€‚ä¸éå®ƒæœ‰ä¸€å€‹é™åˆ¶ï¼Œé‚£å°±æ˜¯å®ƒåªèƒ½ç”¨åœ¨å‡½å¼å…§éƒ¨ï¼›åœ¨å‡½å¼å¤–éƒ¨ä½¿ç”¨å‰‡æœƒç„¡æ³•ç·¨è­¯é€éï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨ <code>var</code> æ–¹å¼ä¾†å®šç¾©å…¨åŸŸæ€§è®Šæ•¸ã€‚</p>
<pre><code class="language-go">/*
    å®šç¾©ä¸‰å€‹è®Šæ•¸ï¼Œå®ƒå€‘åˆ†åˆ¥åˆå§‹åŒ–ç‚ºç›¸æ‡‰çš„å€¼
    vname1 ç‚º v1ï¼Œvname2 ç‚º v2ï¼Œvname3 ç‚º v3
    ç·¨è­¯å™¨æœƒæ ¹æ“šåˆå§‹åŒ–çš„å€¼è‡ªå‹•æ¨åŒ¯å‡ºç›¸æ‡‰çš„å‹åˆ¥
*/
vname1, vname2, vname3 := v1, v2, v3
</code></pre>
<h2 id="å¸¸æ•¸"><a class="header" href="#å¸¸æ•¸">å¸¸æ•¸</a></h2>
<p>æ‰€è¬‚å¸¸æ•¸ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¨‹å¼ç·¨è­¯éšæ®µå°±ç¢ºå®šä¸‹ä¾†çš„å€¼ï¼Œè€Œç¨‹å¼åœ¨åŸ·è¡Œæ™‚ç„¡æ³•æ”¹è®Šè©²å€¼ã€‚åœ¨ Go ç¨‹å¼ä¸­ï¼Œå¸¸æ•¸å¯å®šç¾©ç‚ºæ•¸å€¼ã€å¸ƒæ—å€¼æˆ–å­—ä¸²ç­‰å‹åˆ¥ã€‚</p>
<pre><code class="language-go">const constantName = value
//å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥æ˜ç¢ºæŒ‡å®šå¸¸æ•¸çš„å‹åˆ¥ï¼š
const Pi float32 = 3.1415926
</code></pre>
<p>ä¸‹é¢æ˜¯ä¸€äº›å¸¸æ•¸å®£å‘Šçš„ä¾‹å­ï¼š</p>
<pre><code class="language-go">const Pi = 3.1415926
const i = 10000
const MaxThread = 10
const prefix = "astaxie_"
</code></pre>
<p>Go å¸¸æ•¸å’Œä¸€èˆ¬ç¨‹å¼èªè¨€ä¸åŒçš„æ˜¯ï¼Œå¯ä»¥æŒ‡å®šç›¸ç•¶å¤šçš„å°æ•¸ä½æ•¸(ä¾‹å¦‚ 200 ä½)ï¼Œ è‹¥æŒ‡å®šçµ¦ float32 è‡ªå‹•ç¸®çŸ­ç‚º 32bitï¼ŒæŒ‡å®šçµ¦ float64 è‡ªå‹•ç¸®çŸ­ç‚º 64bitï¼Œè©³æƒ…åƒè€ƒ <a href="http://golang.org/ref/spec#Constants"> é€£çµ</a></p>
<h2 id="æ•¸å€¼å‹åˆ¥"><a class="header" href="#æ•¸å€¼å‹åˆ¥">æ•¸å€¼å‹åˆ¥</a></h2>
<p>æ•´æ•¸å‹åˆ¥æœ‰ç„¡ç¬¦è™Ÿå’Œå¸¶ç¬¦è™Ÿå…©ç¨®ã€‚Go åŒæ™‚æ”¯æ´ <code>int</code> å’Œ<code>uint</code>ï¼Œé€™å…©ç¨®å‹åˆ¥çš„é•·åº¦ç›¸åŒï¼Œä½†å…·é«”é•·åº¦å–æ±ºæ–¼ä¸åŒç·¨è­¯å™¨çš„å¯¦ç¾ã€‚Go è£¡é¢ä¹Ÿæœ‰ç›´æ¥å®šç¾©å¥½ä½æ•¸çš„å‹åˆ¥ï¼š<code>rune</code>, <code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code>å’Œ<code>byte</code>, <code>uint8</code>, <code>uint16</code>, <code>uint32</code>, <code>uint64</code>ã€‚å…¶ä¸­ <code>rune</code> æ˜¯<code>int32</code>çš„åˆ¥ç¨±ï¼Œ<code>byte</code>æ˜¯ <code>uint8</code> çš„åˆ¥ç¨±ã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„ä¸€é»æ˜¯ï¼Œé€™äº›å‹åˆ¥çš„è®Šæ•¸ä¹‹é–“ä¸å…è¨±äº’ç›¸è³¦å€¼æˆ–æ“ä½œï¼Œä¸ç„¶æœƒåœ¨ç·¨è­¯æ™‚å¼•èµ·ç·¨è­¯å™¨å ±éŒ¯ã€‚</p>
<p>å¦‚ä¸‹çš„ç¨‹å¼ç¢¼æœƒç”¢ç”ŸéŒ¯èª¤ï¼šinvalid operation: a + b (mismatched types int8 and int32)</p>
<blockquote>
<p>var a int8</p>
<p>var b int32</p>
<p>c:=a + b</p>
</blockquote>
<p>å¦å¤–ï¼Œå„˜ç®¡ int çš„é•·åº¦æ˜¯ 32 bit, ä½† int èˆ‡ int32 ä¸¦ä¸å¯ä»¥äº’ç”¨ã€‚</p>
</blockquote>
<p>æµ®é»æ•¸çš„å‹åˆ¥æœ‰ <code>float32</code> å’Œ<code>float64</code>å…©ç¨®ï¼ˆæ²’æœ‰ <code>float</code> å‹åˆ¥ï¼‰ï¼Œé è¨­æ˜¯<code>float64</code>ã€‚</p>
<p>é€™å°±æ˜¯å…¨éƒ¨å—ï¼ŸNoï¼Go é‚„æ”¯æ´è¤‡æ•¸ã€‚å®ƒçš„é è¨­å‹åˆ¥æ˜¯<code>complex128</code>ï¼ˆ64 ä½å¯¦æ•¸+64 ä½è™›æ•¸ï¼‰ã€‚å¦‚æœéœ€è¦å°ä¸€äº›çš„ï¼Œä¹Ÿæœ‰<code>complex64</code>(32 ä½å¯¦æ•¸+32 ä½è™›æ•¸)ã€‚è¤‡æ•¸çš„å½¢å¼ç‚º<code>RE + IMi</code>ï¼Œå…¶ä¸­ <code>RE</code> æ˜¯å¯¦æ•¸éƒ¨åˆ†ï¼Œ<code>IM</code>æ˜¯è™›æ•¸éƒ¨åˆ†ï¼Œè€Œæœ€å¾Œçš„ <code>i</code> æ˜¯è™›æ•¸å–®ä½ã€‚ä¸‹é¢æ˜¯ä¸€å€‹ä½¿ç”¨è¤‡æ•¸çš„ä¾‹å­ï¼š</p>
<pre><code class="language-go">var c complex64 = 5+5i
//output: (5+5i)
fmt.Printf("Value is: %v", c)
</code></pre>
<h2 id="å­—ä¸²"><a class="header" href="#å­—ä¸²">å­—ä¸²</a></h2>
<p>æˆ‘å€‘åœ¨ä¸Šä¸€ç¯€ä¸­è¬›éï¼ŒGo ä¸­çš„å­—ä¸²éƒ½æ˜¯æ¡ç”¨<code>UTF-8</code>å­—ç¬¦é›†ç·¨ç¢¼ã€‚å­—ä¸²æ˜¯ç”¨ä¸€å°é›™å¼•è™Ÿï¼ˆ<code>""</code>ï¼‰æˆ–åå¼•è™Ÿï¼ˆ<code>`</code> <code>ï¼‰æ‹¬èµ·ä¾†å®šç¾©ï¼Œå®ƒçš„å‹åˆ¥æ˜¯</code>string`ã€‚</p>
<p>å¯¦éš›åœ¨ Go ä¸­ï¼Œå­—ä¸²æ˜¯ç”±å”¯è®€çš„ UTF-8 ç·¨ç¢¼ä½å…ƒçµ„æ‰€çµ„æˆã€‚</p>
<pre><code class="language-go">//ç¯„ä¾‹ç¨‹å¼ç¢¼
var frenchHello string  // å®£å‘Šè®Šæ•¸ç‚ºå­—ä¸²çš„ä¸€èˆ¬æ–¹æ³•
var emptyString string = ""  // å®£å‘Šäº†ä¸€å€‹å­—ä¸²è®Šæ•¸ï¼Œåˆå§‹åŒ–ç‚ºç©ºå­—ä¸²
func test() {
    no, yes, maybe := "no", "yes", "maybe"  // ç°¡çŸ­å®£å‘Šï¼ŒåŒæ™‚å®£å‘Šå¤šå€‹è®Šæ•¸
    japaneseHello := "Konichiwa"  // åŒä¸Š
    frenchHello = "Bonjour"  // å¸¸è¦è³¦å€¼
}
</code></pre>
<p>åœ¨ Go ä¸­å­—ä¸²æ˜¯ä¸å¯è®Šçš„ï¼Œä¾‹å¦‚ä¸‹é¢çš„ç¨‹å¼ç¢¼ç·¨è­¯æ™‚æœƒå ±éŒ¯ï¼šcannot assign to s[0]</p>
<pre><code class="language-go">var s string = "hello"
s[0] = 'c'
</code></pre>
<p>ä½†å¦‚æœçœŸçš„æƒ³è¦ä¿®æ”¹æ€éº¼è¾¦å‘¢ï¼Ÿä¸‹é¢çš„ç¨‹å¼ç¢¼å¯ä»¥å¯¦ç¾ï¼š</p>
<pre><code class="language-go">s := "hello"
c := []byte(s)  // å°‡å­—ä¸² s è½‰æ›ç‚º []byte å‹åˆ¥
c[0] = 'c'
s2 := string(c)  // å†è½‰æ›å› string å‹åˆ¥
fmt.Printf("%s\n", s2)
</code></pre>
<p>Go ä¸­å¯ä»¥ä½¿ç”¨<code>+</code>é‹ç®—å­ä¾†é€£ç·šå…©å€‹å­—ä¸²ï¼š</p>
<pre><code class="language-go">s := "hello,"
m := " world"
a := s + m
fmt.Printf("%s\n", a)
</code></pre>
<p>ä¿®æ”¹å­—ä¸²ä¹Ÿå¯å¯«ç‚ºï¼š</p>
<pre><code class="language-go">s := "hello"
s = "c" + s[1:] // å­—ä¸²é›–ä¸èƒ½æ›´æ”¹ï¼Œä½†å¯é€²è¡Œåˆ‡ç‰‡(slice)æ“ä½œ
fmt.Printf("%s\n", s)
</code></pre>
<p>å¦‚æœè¦å®£å‘Šä¸€å€‹å¤šè¡Œçš„å­—ä¸²æ€éº¼è¾¦ï¼Ÿå¯ä»¥é€é`` `ä¾†å®£å‘Šï¼š</p>
<pre><code class="language-go">m := `hello
    world`
</code></pre>
<p>`` ` æ‹¬èµ·çš„å­—ä¸²ç‚º Raw å­—ä¸²ï¼Œå³å­—ä¸²åœ¨ç¨‹å¼ç¢¼ä¸­çš„å½¢å¼å°±æ˜¯åˆ—å°æ™‚çš„å½¢å¼ï¼Œå®ƒæ²’æœ‰å­—å…ƒè½‰ç¾©ï¼Œæ›è¡Œä¹Ÿå°‡åŸæ¨£è¼¸å‡ºã€‚ä¾‹å¦‚æœ¬ä¾‹ä¸­æœƒè¼¸å‡ºï¼š</p>
<pre><code class="language-go">hello
    world
</code></pre>
<h2 id="éŒ¯èª¤å‹åˆ¥"><a class="header" href="#éŒ¯èª¤å‹åˆ¥">éŒ¯èª¤å‹åˆ¥</a></h2>
<p>Go å…§å»ºæœ‰ä¸€å€‹ <code>error</code> å‹åˆ¥ï¼Œå°ˆé–€ç”¨ä¾†è™•ç†éŒ¯èª¤è³‡è¨Šï¼ŒGo çš„ <code>package</code> è£¡é¢é‚„å°ˆé–€æœ‰ä¸€å€‹å¥—ä»¶ <code>errors</code> ä¾†è™•ç†éŒ¯èª¤ï¼š</p>
<pre><code class="language-go">err := errors.New("emit macho dwarf: elf header corrupted")
if err != nil {
    fmt.Print(err)
}
</code></pre>
<h2 id="æ˜ å°„-map"><a class="header" href="#æ˜ å°„-map">æ˜ å°„ Map</a></h2>
<p><code>map</code>æœ‰å¾ˆå¤šç¨®ç¿»è­¯ï¼Œåè©å«ä½œ<code>åœ°åœ–</code>ï¼Œå‹•è©æœ‰<code>æ˜ å°„</code>ã€<code>å°æ‡‰</code>ã€<code>å°ç…§</code>çš„æ„æ€ ï¼Œåœ¨ä¸€äº›ç¨‹å¼èªè¨€ä¸­å‰‡æœ‰<code>Key-Value</code>ä¸€å€‹é—œéµå­—å°æ‡‰ä¸€å€‹å€¼çš„ç”¨æ³•ã€‚</p>
<p><strong>var Variable = map[Type]Type{}</strong></p>
<blockquote>
<p>var a = map[int]string{}</p>
</blockquote>
<p>å¯ä»¥åƒé€™æ¨£<code>bool</code>å°æ‡‰åˆ°ä»»ä½•<code>string</code></p>
<pre><code class="language-go">var Male = map[bool]string{
	true:  "å…¬",
	false: "æ¯",
}
</code></pre>
<p>æˆ–æ˜¯è¨­å®š<code>string</code>å°æ‡‰åˆ°<code>int</code></p>
<pre><code class="language-go">var Number = map[string]int{
	"é›¶": 0,
	"å£¹": 1,
	"è²³": 2,
}
Number["åƒ"] = 3
</code></pre>
<p><code>string</code>å°æ‡‰åˆ°<code>string</code>ä¹Ÿå¯ä»¥ï¼Œ</p>
<pre><code class="language-go">var Size = map[string]string{
	"big":    "å¤§",
	"medium": "ä¸­",
	"small":  "å°",
}
</code></pre>
<p>åªè¦ä»»å…©ç¨®å‹æ…‹è¨­å®šå¥½ã€å°æ‡‰å¥½ä¹‹å¾Œå°±èƒ½ç”¨å“©ï¼Œ</p>
<p><code>string</code>çš„å‰å¾Œè¦åŠ é›™å¼•è™Ÿ<code>" "</code>ï¼Œä¾†è©¦è©¦æ•ˆæœå§ï¼</p>
<h4 id="å–map"><a class="header" href="#å–map">å–map</a></h4>
<pre><code class="language-go">fmt.Print(Male[true],Number["åƒ"])
/* result:
å…¬3
*/
</code></pre>
<h3 id="for-è¿­ä»£éæ­·"><a class="header" href="#for-è¿­ä»£éæ­·">ã€for è¿­ä»£éæ­·ã€‘</a></h3>
<p>é€é<code>for range</code>é—œéµå­—ï¼Œéæ­·é€ è¨ªçµæ§‹å…§çš„æ¯å€‹å…ƒç´ </p>
<pre><code class="language-go">for key, value := range Size {
	fmt.Println(key, value)
}
/* result:
big å¤§
medium ä¸­
small å°
*/
</code></pre>
<h2 id="çµæ§‹-struct"><a class="header" href="#çµæ§‹-struct">çµæ§‹ Struct</a></h2>
<h4 id="struct"><a class="header" href="#struct">ã€structã€‘</a></h4>
<p>çµæ§‹è£¡é¢å¯ä»¥æ”¾å¤šå€‹è®Šæ•¸ï¼ˆ<code>int</code>ã€<code>string</code>ã€<code>slice</code>ã€<code>map</code>ç­‰ç­‰ï¼‰ã€ç‰©ä»¶ã€ç”šè‡³æ˜¯çµæ§‹ã€‚
å®£å‘Šçµæ§‹<code>Struct</code>çš„å¹¾ç¨®æ–¹å¼ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Res struct {
	Status string     `json:"status"`
	Msg string        `json:"msg"`
}

func main()  {
	res1 := new(Res)

	var res2 = new(Res)

	var res3 *Res

	res4 := &amp;Res{
		Status: "failed",
	}

	fmt.Println(res1, res2, res3, res4)
	fmt.Printf("%+v %+v %+v %+v",res1, res2, res3, res4)
}

/* result:
&amp;{ } &amp;{ } &lt;nil&gt; &amp;{failed }
&amp;{Status: Msg:} &amp;{Status: Msg:} &lt;nil&gt; &amp;{Status:failed Msg:}
*/
</code></pre>
<h4 id="nested-structureå·¢ç‹€çµæ§‹"><a class="header" href="#nested-structureå·¢ç‹€çµæ§‹">ã€Nested Structureã€‘å·¢ç‹€çµæ§‹</a></h4>
<p><code>çµæ§‹ä¸­çš„çµæ§‹çš„çµæ§‹</code>ã€å¤§è…¸åŒ…å°è…¸å†åŒ…å°å°è…¸</p>
<pre><code class="language-go">type Wallet struct {
	Blue1000 int // è—è‰²å°æœ‹å‹
	Red100   int // ç´…è‰²åœ‹çˆ¶
	Card     string
}

type PencilBox struct {
	Pencil string
	Pen    string
}

type Bag struct {
	Wallet    // ç›´æ¥æ”¾å…¥çµæ§‹å°±å¥½
	PencilBox // ç›´æ¥æ”¾å…¥çµæ§‹å°±å¥½
	Books     string
}

type Person struct {
	Bag
	Name string
}

func main() {
	var bag = Bag{
		Wallet{Card: "ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡", Red100: 5},
		PencilBox{Pen: "Cross", Pencil: "Pentel"},
		"Goç¹ä¸åŠå‚™è¼‰", // Books
	}

	var Tommy = Person{}
	Tommy.Name = "Tommy"
	Tommy.Bag = bag

	fmt.Printf("%+v", Tommy)
}

/* result:
{Bag:{Wallet:{Blue1000:0 Red100:5 Card:ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡} PencilBox:{Pencil:Pentel Pen:Cross} Books:Goç¹ä¸åŠå‚™è¼‰} Name:Tommy}
*/
</code></pre>
<h2 id="æŒ‡æ¨™çµæ§‹ä½å€"><a class="header" href="#æŒ‡æ¨™çµæ§‹ä½å€">ã€æŒ‡æ¨™ã€çµæ§‹ã€ä½å€ã€‘</a></h2>
<p>é€™è£¡å°‡ä¸Šé¢çš„ä¾‹å­å–ä¸€éƒ¨åˆ†å‡ºä¾†ä¿®æ”¹ï¼Œ</p>
<p>å¦‚æœå°‡<code>main()</code>è£¡çš„<code>var Bag</code>æ•˜è¿°æ”¹æˆ <code>&amp;Bag</code>ï¼š</p>
<pre><code class="language-go">type Person struct {
	Bag  // æ”¾Bagé€™å€‹ç‰©ä»¶
	Name string
}

func main() {
	var bag = &amp;Bag{
		Wallet{Card: "ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡", Red100: 5},
		PencilBox{Pen: "Cross", Pencil: "Pentel"},
		"Goç¹ä¸åŠå‚™è¼‰",
	}

	var Tommy = Person{}
	Tommy.Name = "Tommy"
	Tommy.Bag = *bag // é€é`å–å€¼`ä¾†å–å‡ºbagä½å€è£¡é¢çš„æ±è¥¿

	fmt.Printf("%+v", Tommy)
}
/* result:
{Bag:{Wallet:{Blue1000:0 Red100:5 Card:ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡} PencilBox:{Pencil:Pentel Pen:Cross} Books:Goç¹ä¸åŠå‚™è¼‰} Name:Tommy}
*/
</code></pre>
<p>å°å‡ºbag å°±è¦é€é<code>*</code>ä¾†å–å€¼</p>
<hr />
<p>å¦‚æœå°‡<code>Person</code>è£¡çš„<code>Bag</code>æ”¹æˆ <code>*Bag</code>ï¼š</p>
<pre><code class="language-go">type Person struct {
	*Bag // æ”¾æŒ‡æ¨™
	Name string
}

func main() {
	var bag = &amp;Bag{ // æŒ‡åˆ°ä½å€
		Wallet{Card: "ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡", Red100: 5},
		PencilBox{Pen: "Cross", Pencil: "Pentel"},
		"Goç¹ä¸åŠå‚™è¼‰",
	}

	var Tommy = Person{}
	Tommy.Name = "Tommy"
	Tommy.Bag = bag // é€™è£¡å°±å°å‡ºbagä½å€

	fmt.Printf("%+v", Tommy)
}
/* result:
{Bag:0xc000048050 Name:Tommy}
*/
</code></pre>
<p>é€™æ¨£å­å°±æœƒå°å‡º<code>bag</code>çš„ä½å€</p>
<hr />
<p>é›–ç„¶æœ‰é»<strong>é•åç‰©ç†æ³•å‰‡åŠå¸¸è­˜</strong>ï¼Œä½†</p>
<h4 id="å°å‘å¦‚æœbagè£¡é¢æœ‰pencilboxpencilboxè£¡é¢åˆæœ‰bag"><a class="header" href="#å°å‘å¦‚æœbagè£¡é¢æœ‰pencilboxpencilboxè£¡é¢åˆæœ‰bag">ã€å°å‘ã€‘å¦‚æœBagè£¡é¢æœ‰PencilBoxï¼ŒPencilBoxè£¡é¢åˆæœ‰Bag</a></h4>
<p>æœƒæ€éº¼æ¨£å‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯å‡ºç¾ <code>invalid recursive type</code> çš„éŒ¯èª¤ã€‚</p>
<p>https://play.golang.org/p/KS5IvIgF1BQ</p>
<pre><code class="language-go">type PencilBox struct {
	Pencil string
	Pen    string
	Bag           // ä½ ä¸­æœ‰æˆ‘ æˆ‘ä¸­æœ‰ä½ 
}

type Bag struct {
	Wallet
	PencilBox
	Books     string
}
</code></pre>
<p>é›–ç„¶æ”¾ç‰©ä»¶æœƒå‡ºç¾éŒ¯èª¤ï¼Œä½†æ˜¯ <code>æ”¾æŒ‡é‡</code>ä¸æœƒ</p>
<p>https://play.golang.org/p/mXbp60WDXtR</p>
<pre><code class="language-go">type PencilBox struct {
	Pencil string
	Pen    string
	*Bag           // ä½ ä¸­æœ‰é‡
}

type Bag struct {
	Wallet
	PencilBox
	Books     string
}

func main() {
	var bag = Bag{
		Wallet{Card: "ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡", Red100: 5},
		PencilBox{Pen: "Cross", Pencil: "Pentel"},
		"Goç¹ä¸åŠå‚™è¼‰",
	}
	bag.PencilBox.Bag = &amp;bag // åŒ…åŒ…è£¡æ”¾é‡

	fmt.Printf("%+v", *bag.PencilBox.Bag)
}

/* result:
{Wallet:{Blue1000:0 Red100:5 Card:ä¸–è¯æ³°åœ‹ä¿¡ç”¨ç„¡åº•æ´å¡} PencilBox:{Pencil:Pentel Pen:Cross Bag:0xc000046060} Books:Goç¹ä¸åŠå‚™è¼‰}
*/
</code></pre>
<h2 id="åŸºæ–¼çµæ§‹å®šç¾©æ–°å‹æ…‹"><a class="header" href="#åŸºæ–¼çµæ§‹å®šç¾©æ–°å‹æ…‹">åŸºæ–¼çµæ§‹å®šç¾©æ–°å‹æ…‹</a></h2>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>type</code> åŸºæ–¼ <code>struct</code> ä¾†å®šç¾©æ–°å‹æ…‹ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

func main() {
    point1 := Point{10, 20}
    fmt.Println(point1) // {10 20}

    point2 := Point{Y: 20, X: 30}
    fmt.Println(point2) // {30 20}
} 
</code></pre>
<p>åœ¨ä¸Šé¢åŸºæ–¼çµæ§‹å®šç¾©äº†æ–°å‹æ…‹ <code>Point</code>ï¼Œç•™æ„åˆ°åç¨±é–‹é ­çš„å¤§å°å¯«ï¼Œ<strong>è‹¥æ˜¯å¤§å¯«çš„è©±ï¼Œå°±å¯ä»¥åœ¨å…¶ä»–å¥—ä»¶ä¸­å­˜å–ï¼Œé€™é»å°æ–¼çµæ§‹çš„å€¼åŸŸä¹Ÿæ˜¯æˆç«‹ï¼Œå¤§å¯«åç¨±çš„å€¼åŸŸï¼Œæ‰å¯ä»¥åœ¨å…¶ä»–å¥—ä»¶ä¸­å­˜å–</strong>ã€‚åœ¨ç¯„ä¾‹ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå»ºç«‹ä¸¦æŒ‡å®šçµæ§‹çš„å€¼åŸŸæ™‚ï¼Œå¯ä»¥ç›´æ¥æŒ‡å®šå€¼åŸŸåç¨±ï¼Œè€Œä¸ä¸€å®šè¦æŒ‰ç…§å®šç¾©æ™‚çš„é †åºã€‚</p>
<h3 id="åç¨±ç›¸åŒçš„æ–¹æ³•"><a class="header" href="#åç¨±ç›¸åŒçš„æ–¹æ³•">åç¨±ç›¸åŒçš„æ–¹æ³•</a></h3>
<p>Go èªè¨€ä¸­ä¸å…è¨±æ–¹æ³•é‡è¼‰ï¼ˆOverloadï¼‰ï¼Œå› æ­¤ï¼Œå°æ–¼ä»¥ä¸‹çš„ç¨‹å¼ï¼Œæ˜¯æœƒç™¼ç”Ÿ <code>String</code> é‡è¤‡å®£å‘Šçš„ç·¨è­¯éŒ¯èª¤ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Account struct {
    id      string
    name    string
    balance float64
}

func String(account *Account) string {
    return fmt.Sprintf("Account{%s %s %.2f}",
        account.id, account.name, account.balance)
}

type Point struct {
    x, y int
}

func String(point *Point) string { // String redeclared in this block çš„ç·¨è­¯éŒ¯èª¤
    return fmt.Sprintf("Point{%d %d}", point.x, point.y)
}

func main() {
    account := &amp;Account{"1234-5678", "Justin Lin", 1000}
    point := &amp;Point{10, 20}
    fmt.Println(account.String())
    fmt.Println(point.String())
}
</code></pre>
<p>ç„¶è€Œï¼Œ<strong>è‹¥æ˜¯å°‡å‡½å¼å®šç¾©ç‚ºæ–¹æ³•ï¼Œå°±ä¸æœƒæœ‰é€™å€‹å•é¡Œï¼ŒGo å¯ä»¥å¾æ–¹æ³•çš„æ¥æ”¶è€…è¾¨åˆ¥ï¼Œè©²ä½¿ç”¨å“ªå€‹ <code>String</code> æ–¹æ³•</strong>ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Account struct {
    id      string
    name    string
    balance float64
}

func (ac *Account) String() string {
    return fmt.Sprintf("Account{%s %s %.2f}",
        ac.id, ac.name, ac.balance)
}

type Point struct {
    x, y int
}

func (p *Point) String() string {
    return fmt.Sprintf("Point{%d %d}", p.x, p.y)
}

func main() {
    account := &amp;Account{"1234-5678", "Justin Lin", 1000}
    point := &amp;Point{10, 20}
    fmt.Println(account.String()) // Account{1234-5678 Justin Lin 1000.00}
    fmt.Println(point.String())   // Point{10 20}
}
</code></pre>
<ul>
<li>ä½¿ç”¨ <strong>new syntax</strong>ï¼šç¬¬äºŒç¨®å’Œç¬¬ä¸‰ç¨®å¯«æ³•æ˜¯ä¸€æ¨£çš„</li>
</ul>
<pre><code class="language-go">var user1 *Person       // nil
user2 := &amp;Person{}      // {}ï¼Œuser2.firstName æœƒæ˜¯ ""
user3 := new(Person)    // {}ï¼Œuser3.firstName æœƒæ˜¯ ""
</code></pre>
<pre><code class="language-go">// STEP 1ï¼šå»ºç«‹ä¸€å€‹ person å‹åˆ¥ï¼Œå®ƒæœ¬è³ªä¸Šæ˜¯ struct
type Person struct {
    firstName string
    lastName  string
}

// ç­‰åŒæ–¼
type Person struct {
  firstName, lastName string
}
</code></pre>
<p>æœ‰å¹¾ç¨®ä¸åŒçš„æ–¹å¼å¯ä»¥æ ¹æ“š struct ä¾†å»ºç«‹è®Šæ•¸çš„ï¼š</p>
<pre><code class="language-go">func main() {
    // æ–¹æ³•ä¸€ï¼šæ ¹æ“šè³‡æ–™è¼¸å…¥çš„é †åºæ±ºå®šèª°æ˜¯ firstName å’Œ lastName
  alex := Person{"Alex", "Anderson"}

  // ç›´æ¥å–å¾— struct çš„ pointer
  alex := &amp;Person{"Alex", "Anderson"}

    // æ–¹æ³•äºŒï¼ˆå»ºè­°ï¼‰
    alex := Person{
        firstName: "Alex",
        lastName:  "Anderson",
    }

  // æ–¹æ³•ä¸‰ï¼šå…ˆå®£å‘Šå†è³¦å€¼
  var alex Person
    alex.firstName = "Alex"
    alex.lastName = "Anderson"
}
</code></pre>
<h3 id="å®šç¾©åŒ¿åçš„-structanonymous-struct"><a class="header" href="#å®šç¾©åŒ¿åçš„-structanonymous-struct">å®šç¾©åŒ¿åçš„ structï¼ˆanonymous structï¼‰</a></h3>
<p>ä¹Ÿå¯ä»¥ä¸å…ˆå®£å‘Š struct ç›´æ¥å»ºç«‹å€‹ structï¼š</p>
<pre><code class="language-go">foo := struct {
  Hello string
}{
  Hello: "World",
}
</code></pre>
<h3 id="ç•¶-pointer-æŒ‡ç¨±åˆ°çš„æ˜¯-struct-æ™‚"><a class="header" href="#ç•¶-pointer-æŒ‡ç¨±åˆ°çš„æ˜¯-struct-æ™‚">ç•¶ pointer æŒ‡ç¨±åˆ°çš„æ˜¯ struct æ™‚</a></h3>
<p><strong>ç•¶ pointer æŒ‡ç¨±åˆ°çš„æ˜¯ struct æ™‚ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨é€™å€‹ pointer ä¾†å°è©² struct é€²è¡Œè¨­å€¼å’Œå–å€¼</strong>ã€‚åœ¨ golang ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ pointer ä¾†ä¿®æ”¹ struct ä¸­çš„æ¬„ä½ã€‚ä¸€èˆ¬ä¾†èªªï¼Œè‹¥æƒ³è¦é€é struct pointerï¼ˆ<code>&amp;v</code>ï¼‰ä¾†ä¿®æ”¹è©² struct ä¸­çš„å±¬æ€§ï¼Œéœ€è¦å…ˆè§£å‡ºå…¶å€¼ï¼ˆ<code>*p</code>ï¼‰å¾Œä½¿ç”¨ <code>(*p).X = 10</code>ï¼Œä½†é€™æ¨£åšå¤ªéº»ç…©äº†ï¼Œå› æ­¤åœ¨ golang ä¸­å…è¨±é–‹ç™¼è€…ç›´æ¥ä½¿ç”¨ <code>p.X</code> çš„æ–¹å¼ä¾†ä¿®æ”¹ï¼š</p>
<pre><code class="language-go">type Person struct {
    name string
    age  int32
}

func main() {
    p := &amp;Person{
        name: "Aaron",
    }

  // golang ä¸­å…è¨±é–‹ç™¼è€…ç›´æ¥ä½¿ç”¨ `p.age` çš„æ–¹å¼ä¾†è¨­å€¼èˆ‡å–å€¼
    p.age = 10  // åŸæœ¬æ‡‰è©²è¦å¯« (*p).X = 10
    fmt.Printf("%+v", p) // {name:Aaron age:10}

</code></pre>
<p>å¦å¤–ï¼Œä½¿ç”¨ struct pointer æ™‚æ‰å¯ä»¥ä¿®æ”¹åˆ°åŸæœ¬çš„ç‰©ä»¶ï¼Œå¦å‰‡æœƒè¤‡è£½ä¸€å€‹æ–°çš„ï¼š</p>
<pre><code class="language-go">func main() {
    r1 := rectangle{"Green"}

    // è¤‡è£½æ–°çš„ï¼ŒæŒ‡ç¨±åˆ°ä¸åŒä½ç½®
    r2 := r1
    r2.color = "Pink"
    fmt.Println(r2) // Pink
    fmt.Println(r1) // Green

    // æŒ‡ç¨±åˆ°ç›¸åŒä½ç½®
    r3 := &amp;r1
    r3.color = "Red"
    fmt.Println(r3) // Red
    fmt.Println(r1) // Red
}
</code></pre>
<h2 id="å»ºç«‹é¡åˆ¥-class-å’Œç‰©ä»¶-object"><a class="header" href="#å»ºç«‹é¡åˆ¥-class-å’Œç‰©ä»¶-object">å»ºç«‹é¡åˆ¥ (Class) å’Œç‰©ä»¶ (Object)</a></h2>
<h3 id="å»ºç«‹ç‰©ä»¶-object"><a class="header" href="#å»ºç«‹ç‰©ä»¶-object">å»ºç«‹ç‰©ä»¶ (Object)</a></h3>
<pre><code class="language-go">package main                                  /*  1 */

import (                                      /*  2 */
        "log"                                 /*  3 */
)                                             /*  4 */

// `X` and `Y` are public fields.             /*  5 */
type Point struct {                           /*  6 */
        X float64                             /*  7 */
        Y float64                             /*  8 */
}                                             /*  9 */

// Use an ordinary function as constructor    /* 10 */
func NewPoint(x float64, y float64) *Point {  /* 11 */
        p := new(Point)                       /* 12 */

        p.X = x                               /* 13 */
        p.Y = y                               /* 14 */

        return p                              /* 15 */
}                                             /* 16 */

func main() {                                 /* 17 */
        p := NewPoint(3, 4)                   /* 18 */

        if !(p.X == 3.0) {                    /* 19 */
                log.Fatal("Wrong value")      /* 20 */
        }                                     /* 21 */

        if !(p.Y == 4.0) {                    /* 22 */
                log.Fatal("Wrong value")      /* 23 */
        }                                     /* 24 */
}  
</code></pre>
<p>ç¬¬ 6 è¡Œè‡³ç¬¬ 9 è¡Œçš„éƒ¨åˆ†æ˜¯å½¢æ…‹å®£å‘Šã€‚Golang æ²¿ç”¨çµæ§‹é«”ç‚ºé¡åˆ¥çš„å‹æ…‹ï¼Œè€Œæ²’æœ‰ç”¨æ–°çš„ä¿ç•™å­—ã€‚</p>
<p>ç¬¬ 11 è¡Œè‡³ç¬¬ 16 è¡Œçš„éƒ¨åˆ†æ˜¯å»ºæ§‹å‡½å¼ã€‚åœ¨ä¸€äº›ç¨‹å¼èªè¨€ä¸­ï¼Œæœƒæœ‰ç‚ºäº†å»ºç«‹ç‰©ä»¶ä½¿ç”¨ç‰¹å®šçš„å»ºæ§‹å­ (constructor)ï¼Œè€Œ Golang æ²’æœ‰å¼•å…¥é¡å¤–çš„æ–°èªæ³•ï¼Œç›´æ¥ä»¥ä¸€èˆ¬çš„å‡½å¼å……ç•¶å»ºæ§‹å‡½å¼ä¾†å»ºç«‹ç‰©ä»¶å³å¯ã€‚</p>
<p>ç¬¬ 17 è¡Œè‡³ç¬¬ 25 è¡Œç‚ºå¤–éƒ¨ç¨‹å¼ã€‚åœ¨æˆ‘å€‘çš„ Point ç‰©ä»¶ <code>p</code> ä¸­ï¼Œæˆ‘å€‘ç›´æ¥å­˜å– <code>p</code> çš„å±¬æ€§ <code>X</code> å’Œ <code>Y</code>ï¼Œé€™åœ¨ç‰©ä»¶å°å‘ä¸Šä¸æ˜¯å¥½çš„ç¿’æ…£ï¼Œå› ç‚ºæˆ‘å€‘ç„¡æ³•æ§ç®¡å±¬æ€§ï¼Œç‰©ä»¶å¯èƒ½æœƒç”¢ç”Ÿé æœŸå¤–çš„è¡Œç‚ºï¼Œæ¯”è¼ƒå¥½çš„æ–¹æ³•ï¼Œæ˜¯å°‡å±¬æ€§éš±è—åœ¨ç‰©ä»¶å…§éƒ¨ï¼Œç”±å…¬é–‹æ–¹æ³•å»å­˜å–ã€‚æˆ‘å€‘åœ¨å¾Œæ–‡ä¸­æœƒè¨è«–ã€‚</p>
<h3 id="é¡åˆ¥å®£å‘Šä¸é™å®šæ–¼çµæ§‹é«”"><a class="header" href="#é¡åˆ¥å®£å‘Šä¸é™å®šæ–¼çµæ§‹é«”">é¡åˆ¥å®£å‘Šä¸é™å®šæ–¼çµæ§‹é«”</a></h3>
<p>é›–ç„¶å¤§éƒ¨åˆ†çš„ Golang é¡åˆ¥éƒ½ä½¿ç”¨çµæ§‹é«”ï¼Œä½†å…¶å¯¦ Golang é¡åˆ¥å…§éƒ¨å¯ç”¨å…¶ä»–çš„å‹åˆ¥ï¼Œå¦‚ä¸‹ä¾‹ï¼š</p>
<pre><code class="language-go">type Vector []float64                     /*  1 */

func NewVector(args ...float64) Vector {  /*  2 */
        return args                       /*  3 */
}                                         /*  4 */

func WithSize(s int) Vector {             /*  5 */
        v := make([]float64, s)           /*  6 */

        return v                          /*  7 */
}      
</code></pre>
<p>åœ¨ç¬¬ 1 è¡Œä¸­ï¼Œæˆ‘å€‘å®£å‘Š <code>Vector</code> å‹æ…‹ï¼Œè©²å‹æ…‹å…§éƒ¨ä¸æ˜¯ä½¿ç”¨çµæ§‹é«”ï¼Œè€Œæ˜¯ä½¿ç”¨é™£åˆ—ã€‚</p>
<p>æˆ‘å€‘åœ¨ç¬¬ 2 è¡Œè‡³ç¬¬ 4 è¡Œé–“åŠç¬¬ 5 è¡Œè‡³ç¬¬ 8 é–“å®£å‘Šäº†å…©å€‹å»ºæ§‹å‡½å¼ã€‚ç”±æ­¤ä¾‹å¯çŸ¥ï¼ŒGo ä¸é™å®šå»ºæ§‹å‡½å¼çš„æ•¸é‡ï¼Œæˆ‘å€‘å¯ä»¥è¦–éœ€æ±‚ä½¿ç”¨å¤šå€‹ä¸åŒçš„å»ºæ§‹å‡½å¼ã€‚</p>
<h3 id="æ’°å¯«æ–¹æ³•-method"><a class="header" href="#æ’°å¯«æ–¹æ³•-method">æ’°å¯«æ–¹æ³• (Method)</a></h3>
<p>åœ¨ç‰©ä»¶å°å‘ç¨‹å¼ä¸­ï¼Œæˆ‘å€‘å¾ˆå°‘ç›´æ¥æ“ä½œå±¬æ€§ (field)ï¼Œé€šå¸¸æœƒå°‡å±¬æ€§ç§æœ‰åŒ–ï¼Œå†åŠ å…¥ç›¸å°æ‡‰çš„å…¬é–‹æ–¹æ³• (method)ã€‚æˆ‘å€‘å°‡å…ˆå‰çš„ Point ç‰©ä»¶æ”¹å¯«å¦‚ä¸‹ï¼š</p>
<pre><code class="language-go">package main                                  /*  1 */

import (                                      /*  2 */
        "log"                                 /*  3 */
)                                             /*  4 */

// `x` and `y` are private fields.            /*  5 */
type Point struct {                           /*  6 */
        x float64                             /*  7 */
        y float64                             /*  8 */
}                                             /*  9 */

func NewPoint(x float64, y float64) *Point {  /* 10 */
        p := new(Point)                       /* 11 */

        p.SetX(x)                             /* 12 */
        p.SetY(y)                             /* 13 */

        return p                              /* 14 */
}                                             /* 15 */

// The getter of x                            /* 16 */
func (p *Point) X() float64 {                 /* 17 */
        return p.x                            /* 18 */
}                                             /* 19 */

// The getter of y                            /* 20 */
func (p *Point) Y() float64 {                 /* 21 */
        return p.y                            /* 22 */
}                                             /* 23 */

// The setter of x                            /* 24 */
func (p *Point) SetX(x float64) {             /* 25 */
        p.x = x                               /* 26 */
}                                             /* 27 */

// The setter of y                            /* 28 */
func (p *Point) SetY(y float64) {             /* 29 */
        p.y = y                               /* 30 */
}                                             /* 31 */

func main() {                                 /* 32 */
        p := NewPoint(0, 0)                   /* 33 */

        if !(p.X() == 0) {                    /* 34 */
                log.Fatal("Wrong value")      /* 35 */
        }                                     /* 36 */

        if !(p.Y() == 0) {                    /* 37 */
                log.Fatal("Wrong value")      /* 38 */
        }                                     /* 39 */

        p.SetX(3)                             /* 40 */
        p.SetY(4)                             /* 41 */

        if !(p.X() == 3.0) {                  /* 42 */
                log.Fatal("Wrong value")      /* 43 */
        }                                     /* 44 */

        if !(p.Y() == 4.0) {                  /* 45 */
                log.Fatal("Wrong value")      /* 46 */
        }                                     /* 47 */
}  
</code></pre>
<p>ç¬¬ 6 è¡Œè‡³ç¬¬ 9 è¡Œæ˜¯é¡åˆ¥å®£å‘Šçš„éƒ¨åˆ†ã€‚åœ¨é€™å€‹ç‰ˆæœ¬çš„å®£å‘Šä¸­ï¼Œæˆ‘å€‘å°‡ <code>x</code> å’Œ <code>y</code> æ”¹ç‚ºå°å¯«ï¼Œä»£è¡¨è©²å±¬æ€§æ˜¯ç§æœ‰å±¬æ€§ï¼Œå…¶å¯è¦–åº¦åƒ…é™æ–¼åŒä¸€ package ä¸­ã€‚</p>
<p>ç¬¬ 10 è¡Œè‡³ç¬¬ 15 è¡Œæ˜¯ <code>Point</code> é¡åˆ¥çš„å»ºæ§‹å‡½å¼ã€‚è«‹æ³¨æ„æˆ‘å€‘åˆ»æ„åœ¨ç¬¬ 12 è¡ŒåŠç¬¬ 13 è¡Œç”¨è©²é¡åˆ¥çš„ setters ä¾†åˆå§‹åŒ–å±¬æ€§ï¼Œé€™æ˜¯åˆ»æ„çš„å‹•ä½œã€‚å› ç‚ºæˆ‘å€‘è¦ç¢ºä¿åœ¨è¨­ç½®å±¬æ€§æ™‚çš„è¡Œç‚ºä¿æŒä¸€è‡´ã€‚</p>
<p>ç¬¬ 16 è¡Œè‡³ç¬¬ 31 è¡Œæ˜¯ <code>Point</code> é¡åˆ¥çš„ getters å’Œ settersã€‚æ‰€è¬‚çš„ getters å’Œ setters æ˜¯ç”¨ä¾†å­˜å–å…§éƒ¨å±¬æ€§çš„ methodã€‚æ¯”èµ·ç›´æ¥æš´éœ²å±¬æ€§ï¼Œä½¿ç”¨ getters å’Œ setters æœƒæœ‰æ¯”è¼ƒå¥½çš„æ§åˆ¶æ¬Šã€‚æ—¥å¾Œè¦ä¿®æ”¹ getters æˆ– setters çš„å¯¦ä½œæ™‚ï¼Œä¹Ÿåªè¦ä¿®æ”¹åŒä¸€å€‹åœ°æ–¹å³å¯ã€‚</p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œgetters å’Œ setters éƒ½æ˜¯å…¬é–‹ methodã€‚ä½† getters æˆ– setters ä¸ä¸€å®šå¿…ç‚ºå…¬é–‹ methodã€‚ä¾‹å¦‚ï¼Œæˆ‘å€‘æƒ³åšå”¯è®€çš„ <code>Point</code> ç‰©ä»¶æ™‚ï¼Œå°±å¯ä»¥æŠŠ setters çš„éƒ¨åˆ†è¨­ç‚ºç§æœ‰ methodï¼Œç•™çµ¦é¡åˆ¥å…§éƒ¨ä½¿ç”¨ã€‚</p>
<p>åœ¨ Go èªè¨€ä¸­ï¼Œæ²’æœ‰ <code>this</code> æˆ– <code>self</code> é€™ç¨®ä»£è¡¨ç‰©ä»¶çš„é—œéµå­—ï¼Œè€Œæ˜¯ç”±ç¨‹å¼è¨­è¨ˆè€…è‡ªè¨‚ä»£è¡¨ç‰©ä»¶çš„è®Šæ•¸ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘å€‘ç”¨ <code>p</code> è¡¨ç¤ºç‰©ä»¶æœ¬èº«ã€‚é€éé€™ç¨®å¸¶æœ‰ç‰©ä»¶çš„å‡½å¼å®£å‘Šå¾Œï¼Œå‡½å¼æœƒå’Œç‰©ä»¶é€£å‹•ï¼›åœ¨ç‰©ä»¶å°å‘ä¸­ï¼Œå°‡é€™ç¨®å’Œç‰©ä»¶é€£å‹•çš„å‡½å¼ç¨±ç‚ºæ–¹æ³• (method)ã€‚</p>
<p>é›–ç„¶åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œæš«æ™‚ç„¡æ³•ç›´æ¥çœ‹å‡ºä½¿ç”¨æ–¹æ³•çš„å¥½è™•ï¼Œæ¯”èµ·ç›´æ¥æ“ä½œå±¬æ€§ï¼Œé€éç§æœ‰å±¬æ€§æ­é…å…¬é–‹æ–¹æ³•å¸¶ä¾†è¨±å¤šçš„ç›Šè™•ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å€‘å¸Œæœ› Point åœ¨å»ºç«‹ä¹‹å¾Œæ˜¯å”¯è®€çš„ï¼Œæˆ‘å€‘åªè¦å°‡ <code>SetX</code> å’Œ <code>SetY</code> æ”¹ç‚ºç§æœ‰æ–¹æ³•å³å¯ã€‚æˆ–è€…ï¼Œæˆ‘å€‘å¸Œæœ›é™å®š Point æ‰€åœ¨çš„ç¯„åœç‚º 0.0 è‡³ 1000.0ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ <code>SetX</code> å’Œ <code>SetY</code> ä¸­æª¢æŸ¥åƒæ•¸æ˜¯å¦ç¬¦åˆæˆ‘å€‘çš„è¦æ±‚ã€‚</p>
<h3 id="éœæ…‹æ–¹æ³•-static-method"><a class="header" href="#éœæ…‹æ–¹æ³•-static-method">éœæ…‹æ–¹æ³• (Static Method)</a></h3>
<p>æœ‰äº›è®€è€…å­¸é Java æˆ– C#ï¼Œå¯èƒ½æœ‰è½éééœæ…‹æ–¹æ³• (static method)ã€‚é€™æ˜¯å› ç‚º Java å’Œ C# ç›´æ¥å°‡ç‰©ä»¶å°å‘çš„æ¦‚å¿µèå…¥å…¶èªæ³•ä¸­ï¼Œç„¶è€Œï¼Œç‚ºäº†è¦è®“æŸäº›æ–¹æ³•åœ¨ä¸å»ºç«‹ç‰©ä»¶æ™‚å³å¯ä½¿ç”¨ï¼Œæ‰€ä½¿ç”¨çš„ä¸€ç¨®è£œå„Ÿæ€§çš„èªæ³•æ©Ÿåˆ¶ã€‚ç”±æ–¼ Go èªè¨€æ²’æœ‰å°‡ç‰©ä»¶å°å‘çš„æ¦‚å¿µç›´æ¥åŠ åœ¨èªæ³•ä¸­ï¼Œä¸éœ€è¦ç”¨é€™ç¨®èªæ³•ï¼Œç›´æ¥ç”¨é ‚å±¤å‡½å¼å³å¯ã€‚</p>
<p>ä¾‹å¦‚ï¼šæˆ‘å€‘æ’°å¯«ä¸€å€‹è¨ˆç®—å…©é»é–“é•·åº¦çš„å‡½å¼ï¼š</p>
<pre><code class="language-go">package main                                   /*  1 */

import (                                       /*  2 */
        "log"                                  /*  3 */
        "math"                                 /*  4 */
)                                              /*  5 */

type Point struct {                            /*  6 */
        x float64                              /*  7 */
        y float64                              /*  8 */
}                                              /*  9 */

func NewPoint(x float64, y float64) *Point {   /* 10 */
        p := new(Point)                        /* 11 */

        p.SetX(x)                              /* 12 */
        p.SetY(y)                              /* 13 */

        return p                               /* 14 */
}                                              /* 15 */

func (p *Point) X() float64 {                  /* 16 */
        return p.x                             /* 17 */
}                                              /* 18 */

func (p *Point) Y() float64 {                  /* 19 */
        return p.y                             /* 20 */
}                                              /* 21 */

func (p *Point) SetX(x float64) {              /* 22 */
        p.x = x                                /* 23 */
}                                              /* 24 */

func (p *Point) SetY(y float64) {              /* 25 */
        p.y = y                                /* 26 */
}                                              /* 27 */

// Use an ordinary function as static method.  /* 28 */
func Dist(p1 *Point, p2 *Point) float64 {      /* 29 */
        xSqr := math.Pow(p1.X()-p2.X(), 2)     /* 30 */
        ySqr := math.Pow(p1.Y()-p2.Y(), 2)     /* 31 */

        return math.Sqrt(xSqr + ySqr)          /* 32 */
}                                              /* 33 */

func main() {                                  /* 34 */
        p1 := NewPoint(0, 0)                   /* 35 */
        p2 := NewPoint(3.0, 4.0)               /* 36 */

        if !(Dist(p1, p2) == 5.0) {            /* 37 */
                log.Fatal("Wrong value")       /* 38 */
        }                                      /* 39 */
}   
</code></pre>
<p>æœ¬ç¯„ä¾‹å’Œå‰ä¸€ç¯€çš„ç¯„ä¾‹å¤§åŒå°ç•°ã€‚ä¸»è¦çš„å·®åˆ¥åœ¨æ–¼ç¬¬ 29 è¡Œè‡³ç¬¬ 33 é–“å¤šäº†ä¸€å€‹ç”¨ä¾†è¨ˆç®—è·é›¢çš„å‡½å¼ã€‚è©²å‡½å¼ä¸ç¶å®šç‰¹å®šçš„ç‰©ä»¶ï¼Œç›¸ç•¶æ–¼ Java çš„éœæ…‹å‡½å¼ã€‚</p>
<p>å› ç‚º Golang ä¸æ˜¯ Java é€™ç¨®ç´”ç‰©ä»¶å°å‘èªè¨€ï¼Œè€Œæ˜¯æ··åˆå‘½ä»¤å¼å’Œç‰©ä»¶å¼å…©ç¨®èªæ³•ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨ç‰¹å®šçš„èªæ³•ä¾†å¯¦è¸éœæ…‹å‡½å¼ï¼Œä½¿ç”¨ä¸€èˆ¬çš„å‡½å¼å³å¯ã€‚</p>
<p>æˆ–è¨±æœ‰è®€è€…æœƒæ“”å¿ƒï¼Œä½¿ç”¨éå¤šçš„é ‚å±¤å‡½å¼æœƒé€ æˆå…¨åŸŸç©ºé–“çš„æ±™æŸ“å’Œè¡çªï¼›å¯¦éš›ä¸Šä¸éœ€æ“”å¿ƒï¼Œé›–ç„¶æˆ‘å€‘ç›®å‰å°‡ç‰©ä»¶å’Œä¸»ç¨‹å¼å¯«åœ¨ä¸€èµ·ï¼Œå¯¦å‹™ä¸Šï¼Œç‰©ä»¶æœƒå¯«åœ¨ç¨ç«‹çš„package ä¸­ï¼Œè—‰ç”± package å³å¯å¤§å¹…æ¸›ä½å‘½åç©ºé–“è¡çªçš„è­°é¡Œã€‚</p>
<h3 id="ä½¿ç”¨åµŒå…¥-embedding-å–ä»£ç¹¼æ‰¿-inheritance"><a class="header" href="#ä½¿ç”¨åµŒå…¥-embedding-å–ä»£ç¹¼æ‰¿-inheritance">ä½¿ç”¨åµŒå…¥ (Embedding) å–ä»£ç¹¼æ‰¿ (Inheritance)</a></h3>
<p>ç¹¼æ‰¿ (inheritance) æ˜¯ä¸€ç¨®é‡ç”¨ç¨‹å¼ç¢¼çš„æ–¹å¼ï¼Œé€éå¾çˆ¶é¡åˆ¥ (parent class) ç¹¼æ‰¿ç¨‹å¼ç¢¼ï¼Œå­é¡åˆ¥ (child class) å¯ä»¥å°‘å¯«ä¸€äº›ç¨‹å¼ç¢¼ã€‚æ­¤å¤–ï¼Œå°æ–¼éœæ…‹å‹åˆ¥èªè¨€ä¾†èªªï¼Œç¹¼æ‰¿ä¹Ÿæ˜¯å¯¦ç¾å¤šå‹ (polymorphism) çš„æ–¹å¼ã€‚ç„¶è€Œï¼ŒGo èªè¨€å»åˆ»æ„åœ°æ‹¿æ‰ç¹¼æ‰¿ï¼Œé€™æ˜¯å‡ºè‡ªæ–¼å…¶ä»–èªè¨€çš„ç¶“é©—ã€‚</p>
<p>ç¹¼æ‰¿é›–ç„¶å¥½ç”¨ï¼Œä½†ä¹Ÿå¼•èµ·è¨±å¤šçš„å•é¡Œã€‚åƒæ˜¯ C++ ç›¸å°è‡ªç”±ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å¤šé‡ç¹¼æ‰¿ï¼Œä½†é€™é …ç‰¹æ€§æœƒå¼•ä¾†è±å‹ç¹¼æ‰¿ (diamond inheritance) çš„è­°é¡Œï¼ŒJava å’Œ C# åˆ»æ„æŠŠé€™å€‹æ©Ÿåˆ¶å»æ‰ï¼Œæ”¹ä»¥ä»‹é¢ (interface) é€²è¡Œæœ‰é™åˆ¶çš„å¤šé‡ç¹¼æ‰¿ã€‚å¾éå¾€ç¶“é©—å¯çŸ¥éåº¦åœ°ä½¿ç”¨ç¹¼æ‰¿ï¼Œæœƒå¢åŠ ç¨‹å¼ç¢¼çš„è¤‡é›œåº¦ï¼Œä½¿å¾—å°ˆæ¡ˆé›£ä»¥ç¶­è­·ã€‚å‡ºè‡ªæ–¼å·¥ç¨‹ä¸Šçš„è€ƒé‡ï¼ŒGo æ¨å»ç¹¼æ‰¿é€™å€‹èªæ³•ç‰¹æ€§ã€‚</p>
<p>ç‚ºäº†è£œå„Ÿæ²’æœ‰ç¹¼æ‰¿çš„ç¼ºå¤±ï¼ŒGo åŠ å…¥äº†åµŒå…¥ (embedding) é€™å€‹æ–°çš„èªæ³•ç‰¹æ€§ï¼Œé€éåµŒå…¥ï¼Œä¹Ÿå¯ä»¥é”åˆ°ç¨‹å¼ç¢¼å…±äº«çš„åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘å€‘æ“´å±• Point é¡åˆ¥è‡³ä¸‰ç¶­ç©ºé–“ï¼š</p>
<pre><code class="language-go">package main                                                 /*  1 */

import (                                                     /*  2 */
        "log"                                                /*  3 */
)                                                            /*  4 */

type Point struct {                                          /*  5 */
        x float64                                            /*  6 */
        y float64                                            /*  7 */
}                                                            /*  8 */

func NewPoint(x float64, y float64) *Point {                 /*  9 */
        p := new(Point)                                      /* 10 */

        p.SetX(x)                                            /* 11 */
        p.SetY(y)                                            /* 12 */

        return p                                             /* 13 */
}                                                            /* 14 */

func (p *Point) X() float64 {                                /* 15 */
        return p.x                                           /* 16 */
}                                                            /* 17 */

func (p *Point) Y() float64 {                                /* 18 */
        return p.y                                           /* 19 */
}                                                            /* 20 */

func (p *Point) SetX(x float64) {                            /* 21 */
        p.x = x                                              /* 22 */
}                                                            /* 23 */

func (p *Point) SetY(y float64) {                            /* 24 */
        p.y = y                                              /* 25 */
}                                                            /* 26 */

type Point3D struct {                                        /* 27 */
        // Point is embedded                                 /* 28 */
        Point                                                /* 29 */
        z float64                                            /* 30 */
}                                                            /* 31 */

func NewPoint3D(x float64, y float64, z float64) *Point3D {  /* 32 */
        p := new(Point3D)                                    /* 33 */

        p.SetX(x)                                            /* 34 */
        p.SetY(y)                                            /* 35 */
        p.SetZ(z)                                            /* 36 */

        return p                                             /* 37 */
}                                                            /* 38 */

func (p *Point3D) Z() float64 {                              /* 39 */
        return p.z                                           /* 40 */
}                                                            /* 41 */

func (p *Point3D) SetZ(z float64) {                          /* 42 */
        p.z = z                                              /* 43 */
}                                                            /* 44 */

func main() {                                                /* 45 */
        p := NewPoint3D(1, 2, 3)                             /* 46 */

        // GetX method is from Point                         /* 47 */
        if !(p.X() == 1) {                                   /* 48 */
                log.Fatal("Wrong value")                     /* 49 */
        }                                                    /* 50 */

        // GetY method is from Point                         /* 51 */
        if !(p.Y() == 2) {                                   /* 52 */
                log.Fatal("Wrong value")                     /* 53 */
        }                                                    /* 54 */

        // GetZ method is from Point3D                       /* 55 */
        if !(p.Z() == 3) {                                   /* 56 */
                log.Fatal("Wrong value")                     /* 57 */
        }                                                    /* 58 */
}     
</code></pre>
<p>ç¬¬ 5 è¡Œè‡³ç¬¬ 26 è¡Œæ˜¯åŸæœ¬çš„ <code>Point</code> é¡åˆ¥ï¼Œé€™å’Œå…ˆå‰çš„å¯¦ä½œæ˜¯é›·åŒçš„ï¼Œä¸å¤šåšèªªæ˜ã€‚</p>
<p>ç¬¬ 27 è¡Œè‡³ç¬¬ 44 è¡Œæ˜¯ <code>Point3D</code> é¡åˆ¥ï¼Œæˆ‘å€‘ä¾†çœ‹ä¸€ä¸‹é€™å€‹é¡åˆ¥ã€‚</p>
<p>ç¬¬ 27 è¡Œè‡³ç¬¬ 31 è¡Œæ˜¯ <code>Point3D</code> çš„é¡åˆ¥å®£å‘Šã€‚è«‹æ³¨æ„æˆ‘å€‘åœ¨ç¬¬ 29 è¡ŒåµŒå…¥äº† <code>Point</code> é¡åˆ¥ã€‚</p>
<p>ç¬¬ 32 è¡Œè‡³ç¬¬ 38 è¡Œæ˜¯ <code>Point3d</code> çš„å»ºæ§‹å‡½å¼ã€‚é›–ç„¶æˆ‘å€‘æ²’æœ‰ç‚º <code>Point3D</code> å®£å‘Š <code>SetX()</code> åŠ <code>SetY()</code> methodï¼Œä½†æˆ‘å€‘æœ‰åµŒå…¥ <code>Point</code> é¡åˆ¥ï¼Œæ‰€ä»¥æˆ‘å€‘åœ¨ç¬¬ 34 è¡ŒåŠç¬¬ 35 è¡Œå¯ä»¥ç›´æ¥ä½¿ç”¨é€™äº› methodã€‚</p>
<p>ç¬¬ 45 è¡Œè‡³ç¬¬ 59 è¡Œæ˜¯å¤–éƒ¨ç¨‹å¼çš„éƒ¨åˆ†ã€‚ç”±æ–¼æˆ‘å€‘çš„ <code>Point3D</code> å…§åµŒäº† <code>Point</code>ï¼Œé›–ç„¶ <code>Point3D</code> æ²’æœ‰è‡ªå·±å¯¦ä½œ <code>X()</code> å’Œ <code>Y()</code> methodï¼Œæˆ‘å€‘åœ¨ç¬¬ 48 è¡ŒåŠç¬¬ 52 è¡Œå¯ç›´æ¥å‘¼å«é€™äº› methodã€‚</p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘å€‘é‡ç”¨äº† <code>Point</code> çš„æ–¹æ³•ï¼Œå†åŠ å…¥ <code>Point3D</code> ç‰¹æœ‰çš„æ–¹æ³•ã€‚å¯¦éš›ä¸Šçš„æ•ˆæœç­‰åŒæ–¼ç¹¼æ‰¿ã€‚</p>
<p>ç„¶è€Œï¼Œ<code>Point</code> å’Œ <code>Point3D</code> å…©è€…åœ¨é¡åˆ¥é—œä¿‚ä¸Šå»æ˜¯ä¸ç›¸å¹²çš„ç¨ç«‹ç‰©ä»¶ã€‚åœ¨ä»¥ä¸‹ä¾‹å­ä¸­ï¼Œæˆ‘å€‘æƒ³å°‡ <code>Point3D</code> åŠ å…¥ <code>Point</code> ç‰©ä»¶çµ„æˆçš„åˆ‡ç‰‡ï¼Œè€Œå¼•ç™¼ç¨‹å¼çš„éŒ¯èª¤ï¼š</p>
<pre><code class="language-go">// Declare Point and Point3D as above.
 
func main() {
    points := make([]*Point, 0)
 
    p1 := NewPoint(3, 4)
    p2 := NewPoint3D(1, 2, 3)
 
    // Error!
    points = append(points, p1, p2)
}
</code></pre>
<p>åœ¨ Go èªè¨€ä¸­ï¼Œéœ€è¦ä½¿ç”¨ä»‹é¢ (interface) ä¾†è§£æ±ºé€™å€‹è­°é¡Œï¼Œé€™å°±æ˜¯æˆ‘å€‘ä¸‹ä¸€ç¯‡æ–‡ç« æ‰€è¦æ¢è¨çš„ä¸»é¡Œã€‚</p>
<h3 id="åµŒå…¥æŒ‡æ¨™"><a class="header" href="#åµŒå…¥æŒ‡æ¨™">åµŒå…¥æŒ‡æ¨™</a></h3>
<p>é™¤äº†åµŒå…¥å…¶ä»–çµæ§‹å¤–ï¼Œçµæ§‹ä¹Ÿå¯ä»¥åµŒå…¥æŒ‡æ¨™ã€‚æˆ‘å€‘å°‡ä¸Šä¾‹æ”¹å¯«å¦‚ä¸‹ï¼š</p>
<pre><code class="language-go">package main
 
import (
    "log"
)
 
type Point struct {
    x float64
    y float64
}
 
func NewPoint(x float64, y float64) *Point {
    p := new(Point)
 
    p.SetX(x)
    p.SetY(y)
 
    return p
}
 
func (p *Point) X() float64 {
    return p.x
}
 
func (p *Point) Y() float64 {
    return p.y
}
 
func (p *Point) SetX(x float64) {
    p.x = x
}
 
func (p *Point) SetY(y float64) {
    p.y = y
}
 
type Point3D struct {
    // Point is embedded as a pointer
    *Point
    z float64
}
 
func NewPoint3D(x float64, y float64, z float64) *Point3D {
    p := new(Point3D)
 
    // Forward promotion
    p.Point = NewPoint(x, y)
 
    // Forward promotion
    p.Point.SetX(x)
    p.Point.SetY(y)
 
    p.SetZ(z)
 
    return p
}
 
func (p *Point3D) Z() float64 {
    return p.z
}
 
func (p *Point3D) SetZ(z float64) {
    p.z = z
}
 
func main() {
    p := NewPoint3D(1, 2, 3)
 
    // GetX method is from Point
    if !(p.X() == 1) {
        log.Fatal("Wrong value")
    }
 
    // GetY method is from Point
    if !(p.Y() == 2) {
        log.Fatal("Wrong value")
    }
 
    // GetZ method is from Point3D
    if !(p.Z() == 3) {
        log.Fatal("Wrong value")
    }
}
</code></pre>
<p>åŒæ¨£åœ°ï¼Œä»ç„¶ä¸èƒ½é€éåµŒå…¥æŒ‡æ¥†è®“å‹åˆ¥ç›´æ¥äº’é€šï¼Œè€Œéœ€è¦é€éä»‹é¢ (interface)ã€‚</p>
<h2 id="arrayå’Œsliceçš„å€åˆ¥"><a class="header" href="#arrayå’Œsliceçš„å€åˆ¥">Arrayå’ŒSliceçš„å€åˆ¥</a></h2>
<h3 id="array"><a class="header" href="#array">Array</a></h3>
<p>Goèªè¨€ä¸­çš„Arrayå³ç‚ºè³‡æ–™çš„ä¸€ç¨®é›†åˆï¼Œéœ€è¦åœ¨å®£å‘Šæ™‚æŒ‡å®šå®¹é‡å’Œåˆå€¼ï¼Œä¸”ä¸€æ—¦å®£å‘Šå°±<strong>é•·åº¦å›ºå®š</strong>äº†ï¼Œè¨ªå•æ™‚æŒ‰ç…§ç´¢å¼•é€²è¡Œè¨ªå•ã€‚é€šéå…§å»ºå‡½å¼<code>len</code>å¯ä»¥ç²å–é™£åˆ—ä¸­çš„å…ƒç´ å€‹æ•¸ã€‚</p>
<p>é™£åˆ—åœ¨åˆå§‹åŒ–æ™‚å¿…é ˆæŒ‡å®šå¤§å°å’Œåˆå€¼ï¼Œä¸éGoèªè¨€ç‚ºæˆ‘å€‘æä¾›äº†ä¸€äº›æ›´ç‚ºéˆæ´»çš„æ–¹å¼é€²è¡Œåˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨<code>...</code>ä¾†è‡ªå‹•ç²å–é•·åº¦ï¼›æœªæŒ‡å®šå€¼æ™‚ï¼Œç”¨0è³¦äºˆåˆå€¼ï¼›æŒ‡å®šæŒ‡å®šå…ƒç´ çš„åˆå€¼ç­‰ã€‚ä¸‹é¢çµ¦å‡ºä¸€äº›é™£åˆ—åˆå§‹åŒ–çš„æ–¹å¼ç¤ºä¾‹ã€‚</p>
<pre><code class="language-go">var arr [5]int	//è²æ˜ç­ä¸€å€‹å¤§å°ç‚º5çš„é™£åˆ—ï¼Œé è¨­åˆå§‹åŒ–å€¼ç‚º[0,0,0,0,0]
arr := [5]int{1}	//å®£å‘Šä¸¦åˆå§‹åŒ–äº†ä¸€å€‹å¤§å°ç‚º5çš„é™£åˆ—çš„ç¬¬ä¸€å€‹å…ƒç´ ï¼Œåˆå§‹åŒ–å¾Œå€¼ç‚º[1,0,0,0,0]
arr := [...]int{1,2,3}	//é€šé...è‡ªå‹•ç²å–é™£åˆ—é•·åº¦ï¼Œæ ¹æ“šåˆå§‹åŒ–çš„å€¼çš„æ•¸é‡å°‡å¤§å°åˆå§‹åŒ–ç‚º3ï¼Œåˆå§‹åŒ–å¾Œå€¼ç‚º[1,2,3]
arr := [...]int{4:1}	//æŒ‡å®šåºè™Ÿç‚º4çš„å…ƒç´ çš„å€¼ç‚º1ï¼Œé€šé...è‡ªå‹•ç²å–é•·åº¦ç‚º5ï¼Œåˆå§‹åŒ–å¾Œå€¼ç‚º[0,0,0,0,1]
</code></pre>
<h4 id="å‡½å¼å¼•æ•¸"><a class="header" href="#å‡½å¼å¼•æ•¸">å‡½å¼å¼•æ•¸</a></h4>
<p>Goèªè¨€é™£åˆ—ä½œç‚ºå‡½å¼å¼•æ•¸æ™‚ï¼Œå¿…é ˆæŒ‡å®šå¼•æ•¸é™£åˆ—çš„å¤§å°ï¼Œä¸”å‚³å…¥çš„é™£åˆ—å¤§å°å¿…é ˆèˆ‡æŒ‡å®šçš„å¤§å°ä¸€è‡´ï¼Œé™£åˆ—ç‚º<strong>æŒ‰å€¼å‚³é</strong>çš„ï¼Œå‡½å¼å…§å°é™£åˆ—çš„å€¼çš„æ”¹è®Šä¸å½±éŸ¿åˆå§‹é™£åˆ—:</p>
<pre><code class="language-go">package main

import "fmt"

//PrintArray print the value of array
func PrintArray(arr [5]int) {
    arr[0] = 5
	fmt.Println(arr)
}

func main() {
	a := [...]int{4:1}
	PrintArray(a)	// [5,0,0,0,1]
    fmt.Println(a)	// [0,0,0,0,1]
}
</code></pre>
<h3 id="slice"><a class="header" href="#slice">Slice</a></h3>
<p>åˆ‡ç‰‡æ˜¯Goèªè¨€ä¸­æ¥µç‚ºé‡è¦çš„ä¸€ç¨®è³‡æ–™å‹åˆ¥ï¼Œå¯ä»¥ç†è§£ç‚º<strong>å‹•æ…‹é•·åº¦</strong>çš„é™£åˆ—ï¼ˆé›–ç„¶å¯¦éš›ä¸ŠSliceçµæ§‹å…§åŒ…å«äº†ä¸€å€‹æ•¸çµ„ï¼‰ï¼Œè¨ªå•æ™‚å¯ä»¥æŒ‰ç…§é™£åˆ—çš„æ–¹å¼è¨ªå•ï¼Œä¹Ÿå¯ä»¥é€šé<code>åˆ‡ç‰‡</code>æ“ä½œè¨ªå•ã€‚Sliceæœ‰ä¸‰å€‹å±¬æ€§ï¼šæŒ‡æ¨™ã€é•·åº¦å’Œå®¹é‡ã€‚æŒ‡æ¨™å³Sliceåï¼ŒæŒ‡å‘çš„ç‚ºé™£åˆ—ä¸­ç¬¬ä¸€å€‹å¯ä»¥ç”±Sliceè¨ªå•çš„å…ƒç´ ï¼›é•·åº¦æŒ‡ç•¶å‰sliceä¸­çš„å…ƒç´ å€‹æ•¸ï¼Œä¸èƒ½è¶…ésliceçš„å®¹é‡ï¼›å®¹é‡ç‚ºsliceèƒ½åŒ…å«çš„æœ€å¤§å…ƒç´ æ•¸é‡ï¼Œä½†å¯¦éš›ä¸Šç•¶å®¹é‡ä¸è¶³æ™‚ï¼Œæœƒè‡ªå‹•æ“´å……ç‚ºåŸä¾†çš„å…©å€ã€‚é€šéå…§å»ºå‡½å¼<code>len</code>å’Œ<code>cap</code>å¯ä»¥ç²å–sliceçš„é•·åº¦å’Œå®¹é‡ã€‚</p>
<p>Sliceåœ¨åˆå§‹åŒ–æ™‚éœ€è¦åˆå§‹åŒ–æŒ‡æ¨™ï¼Œé•·åº¦å’Œå®¹é‡ï¼Œå®¹é‡æœªæŒ‡å®šæ™‚å°‡è‡ªå‹•åˆå§‹åŒ–ç‚ºé•·åº¦çš„å¤§å°ã€‚å¯ä»¥é€šéç›´æ¥ç²å–é™£åˆ—çš„å¼•ç”¨ã€ç²å–é™£åˆ—/sliceçš„åˆ‡ç‰‡æ§‹å»ºæˆ–æ˜¯makeå‡½å¼åˆå§‹åŒ–é™£åˆ—ã€‚ä¸‹é¢çµ¦å‡ºä¸€äº›sliceåˆå§‹åŒ–çš„æ–¹å¼ç¤ºä¾‹ã€‚</p>
<pre><code class="language-go">s := []int{1,2,3}	//é€šéé™£åˆ—çš„å¼•ç”¨åˆå§‹åŒ–ï¼Œå€¼ç‚º[1,2,3],é•·åº¦å’Œå®¹é‡ç‚º3

arr := [5]int{1,2,3,4,5}
s := arr[0:3]	//é€šéé™£åˆ—çš„åˆ‡ç‰‡åˆå§‹åŒ–ï¼Œå€¼ç‚º[1,2,3]ï¼Œé•·åº¦ç‚º3ï¼Œå®¹é‡ç‚º5

s := make([]int, 3)	//é€šémakeå‡½å¼åˆå§‹åŒ–ï¼Œå€¼ç‚º[0,0,0]ï¼Œé•·åº¦å’Œå®¹é‡ç‚º3

s := make([]int, 3, 5)	//é€šémakeå‡½å¼åˆå§‹åŒ–ï¼Œå€¼ç‚º[0,0,0]ï¼Œé•·åº¦ç‚º3ï¼Œå®¹é‡ç‚º5
</code></pre>
<p>å…¶ä¸­ç‰¹åˆ¥éœ€è¦æ³¨æ„çš„æ˜¯é€šéåˆ‡ç‰‡æ–¹å¼åˆå§‹åŒ–ã€‚è‹¥æ˜¯é€šéå°sliceçš„åˆ‡ç‰‡é€²è¡Œåˆå§‹åŒ–ï¼Œå¯¦éš›ä¸Šåˆå§‹åŒ–ä¹‹å¾Œçš„çµæ§‹å¦‚ä¸‹åœ–æ‰€ç¤ºï¼š</p>
<p><img src="images/a0eca91a66cd494d966e8882b1817243_tplv-k3u1fbpfcp-zoom-1.image" alt="" /></p>
<p>æ­¤æ™‚xçš„å€¼ç‚º[2,3,5,7,11]ï¼Œyçš„å€¼ç‚º[3,5,7]ï¼Œä¸”å…©å€‹sliceçš„æŒ‡æ¨™æŒ‡å‘çš„æ˜¯<strong>åŒä¸€å€‹é™£åˆ—</strong>ï¼Œä¹Ÿå³xä¸­çš„å…ƒç´ çš„å€¼çš„æ”¹è®Šå°‡æœƒå°è‡´yä¸­çš„å€¼ä¹Ÿä¸€èµ·æ”¹è®Šã€‚</p>
<blockquote>
<p><em>é€™æ¨£çš„åˆå§‹åŒ–æ–¹å¼å¯èƒ½æœƒå°è‡´è¨˜æ†¶é«”è¢«<strong>éåº¦ä½”ç”¨</strong>ï¼Œå¦‚åªéœ€è¦ä½¿ç”¨ä¸€å€‹æ¥µå¤§çš„é™£åˆ—ä¸­çš„å¹¾å€‹å…ƒç´ ï¼Œä½†æ˜¯ç”±æ–¼éœ€è¦æŒ‡å‘æ•´å€‹é™£åˆ—ï¼Œæ‰€ä»¥æ•´å€‹é™£åˆ—åœ¨GCæ™‚éƒ½ç„¡æ³•è¢«é‡‹æ”¾ï¼Œä¸€ç›´ä½”ç”¨è¨˜æ†¶é«”ç©ºé–“ã€‚æ•…ä½¿ç”¨åˆ‡ç‰‡æ“ä½œé€²è¡Œåˆå§‹åŒ–æ™‚ï¼Œæœ€å¥½ä½¿ç”¨<code>append</code>å‡½å¼å°‡åˆ‡ç‰‡å‡ºä¾†çš„è³‡æ–™è¤‡è£½åˆ°ä¸€å€‹æ–°çš„sliceä¸­ï¼Œå¾è€Œé¿å…è¨˜æ†¶é«”ä½”ç”¨é™·é˜±ã€‚</em></p>
</blockquote>
<h4 id="å‡½å¼å¼•æ•¸-1"><a class="header" href="#å‡½å¼å¼•æ•¸-1">å‡½å¼å¼•æ•¸</a></h4>
<p>Goèªè¨€Sliceä½œç‚ºå‡½å¼å¼•æ•¸å‚³éæ™‚ç‚º<strong>æŒ‰å¼•ç”¨å‚³é</strong>çš„ï¼Œå‡½å¼å…§å°sliceå…§å…ƒç´ çš„ä¿®æ”¹å°‡å°è‡´å‡½å¼å¤–çš„å€¼ä¹Ÿç™¼ç”Ÿæ”¹è®Šï¼Œä¸éç”±æ–¼å‚³å…¥å‡½å¼çš„æ˜¯ä¸€å€‹æŒ‡æ¨™çš„å‰¯æœ¬ï¼Œæ‰€ä»¥å°è©²æŒ‡æ¨™çš„ä¿®æ”¹ä¸æœƒå°è‡´åŸä¾†çš„æŒ‡æ¨™çš„è®ŠåŒ–ï¼ˆä¾‹å¦‚appendå‡½å¼ä¸æœƒæ”¹è®ŠåŸä¾†çš„sliceçš„å€¼ï¼‰ã€‚å…·é«”å¯ä»¥æ ¹æ“šä¸‹é¢çš„ç¨‹å¼ç¢¼é€²è¡Œç†è§£ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

//PrintSlice print the value of slice
func PrintSlice(s []int) {
	s = append(s, 4)
	s[0] = -1
	fmt.Println(s)
}

func main() {
	s := []int{1,2,3,4,5}
	s1 := s[0:3]

    fmt.Println("s:",s)	//s: [1,2,3,4,5]
    fmt.Println("s1:",s1)	//s1: [1,2,3]
	PrintSlice(s1)	//[-1,2,3,4]
	fmt.Println("s:",s)	//[-1,2,3,4,5]
	fmt.Println("s1:",s1)	//[-1,2,3]
}
</code></pre>
<h4 id="ç¸½çµ"><a class="header" href="#ç¸½çµ">ç¸½çµ</a></h4>
<ul>
<li>é™£åˆ—é•·åº¦ä¸èƒ½æ”¹è®Šï¼Œåˆå§‹åŒ–å¾Œé•·åº¦å°±æ˜¯å›ºå®šçš„ï¼›åˆ‡ç‰‡çš„é•·åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥è¿½åŠ å…ƒç´ ï¼Œåœ¨è¿½åŠ æ™‚å¯èƒ½ä½¿åˆ‡ç‰‡çš„å®¹é‡å¢å¤§ã€‚</li>
<li>çµæ§‹ä¸åŒï¼Œé™£åˆ—æ˜¯ä¸€ä¸²å›ºå®šè³‡æ–™ï¼Œåˆ‡ç‰‡æè¿°çš„æ˜¯æ“·å–é™£åˆ—çš„ä¸€éƒ¨åˆ†è³‡æ–™ï¼Œå¾æ¦‚å¿µä¸Šèªªæ˜¯ä¸€å€‹çµæ§‹é«”ã€‚</li>
<li>åˆå§‹åŒ–æ–¹å¼ä¸åŒï¼Œå¦‚ä¸Šã€‚å¦å¤–åœ¨å®£å‘Šæ™‚çš„æ™‚å€™ï¼šå®£å‘Šé™£åˆ—æ™‚ï¼Œæ–¹æ‹¬è™Ÿå…§å¯«æ˜ç­é™£åˆ—çš„é•·åº¦æˆ–ä½¿ç”¨<code>...</code>è‡ªå‹•è¨ˆç®—é•·åº¦ï¼Œè€Œå®£å‘Š<code>slice</code>æ™‚ï¼Œæ–¹æ‹¬è™Ÿå…§æ²’æœ‰ä»»ä½•å­—å…ƒã€‚</li>
<li>unsafe.sizeofçš„å–å€¼ä¸åŒï¼Œunsafe.sizeof(slice)è¿”å›çš„å¤§å°æ˜¯åˆ‡ç‰‡çš„æè¿°ç¬¦ï¼Œä¸ç®¡sliceè£¡çš„å…ƒç´ æœ‰å¤šå°‘ï¼Œè¿”å›çš„è³‡æ–™éƒ½æ˜¯24ä½å…ƒçµ„ã€‚unsafe.sizeof(arr)çš„å€¼æ˜¯åœ¨éš¨è‘—arrçš„å…ƒç´ çš„å€‹æ•¸çš„å¢åŠ è€Œå¢åŠ ï¼Œæ˜¯é™£åˆ—æ‰€å„²å­˜çš„è³‡æ–™è¨˜æ†¶é«”çš„å¤§å°ã€‚</li>
<li>å‡½å¼å‘¼å«æ™‚çš„å‚³éæ–¹å¼ä¸åŒï¼Œé™£åˆ—æŒ‰å€¼å‚³éï¼ŒsliceæŒ‰å¼•ç”¨å‚³éã€‚</li>
</ul>
<h2 id="æŒ‡æ¨™"><a class="header" href="#æŒ‡æ¨™">æŒ‡æ¨™</a></h2>
<p>Go èªè¨€ä¸­æœ‰æŒ‡æ¨™ï¼ˆPointerï¼‰ï¼Œä½ å¯ä»¥åœ¨å®£å‘Šè®Šæ•¸æ™‚æ–¼å‹æ…‹å‰åŠ ä¸Š <code>*</code>ï¼Œé€™è¡¨ç¤ºå»ºç«‹ä¸€å€‹æŒ‡æ¨™ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">var i *int
</code></pre>
<p>é€™æ™‚ <code>i</code> æ˜¯å€‹ç©ºæŒ‡æ¨™ï¼Œä¹Ÿå°±æ˜¯å€¼ç‚º <code>nil</code>ï¼Œä¸Šé ­ç­‰åŒæ–¼ <code>var i *int = nil</code>ï¼Œç›®å‰ä¸¦æ²’æœ‰å„²å­˜ä»»ä½•ä½å€ï¼Œå¦‚æœæƒ³è®“å®ƒå„²å­˜å¦ä¸€å€‹è®Šæ•¸çš„è¨˜æ†¶é«”ä½å€ï¼Œå¯ä»¥ä½¿ç”¨ <code>&amp;</code> å–å¾—è®Šæ•¸ä½å€ä¸¦æŒ‡å®šçµ¦ <code>i</code>ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

func main() {
    var i *int
    j := 1

    i = &amp;j
    fmt.Println(i)  // 0x104382e0 ä¹‹é¡çš„å€¼
    fmt.Println(*i) // 1

    j = 10
    fmt.Println(*i) // 10

    *i = 20
    fmt.Println(j) // 20
}
</code></pre>
<p><code>j</code> çš„ä½ç½®å„²å­˜äº† 1ï¼Œé‚£éº¼å…·é«”ä¾†èªªï¼Œ<code>j</code> çš„ä½ç½®åˆ°åº•æ˜¯åœ¨å“ªï¼Ÿé€™å°±æ˜¯ <code>&amp;</code> å–å€é‹ç®—çš„ç›®çš„ï¼Œ<code>&amp;j</code> å…·é«”å–å¾—äº† <code>j</code> çš„ä½ç½®ï¼Œç„¶å¾ŒæŒ‡å®šçµ¦ <code>i</code>ã€‚</p>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå¦‚æœæƒ³å­˜å–æŒ‡æ¨™ä½å€è™•çš„è®Šæ•¸å„²å­˜çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ <code>*</code>ï¼Œå› è€Œï¼Œä½ æ”¹è®Š <code>j</code> çš„å€¼ï¼Œ<code>*i</code> å–å¾—çš„å°±æ˜¯æ”¹è®Šå¾Œçš„å€¼ï¼Œé€é <code>*i</code> æ”¹è®Šå€¼ï¼Œå¾ <code>j</code> å–å¾—çš„ä¹Ÿæœƒæ˜¯æ”¹è®Šå¾Œçš„å€¼ã€‚</p>
<pre><code class="language-go">package main

import "fmt"

func add1To(n *int) {
	*n = *n + 1
}

func main() {
	number := 1
	add1To(&amp;number)
	fmt.Println(number) // 2
}
</code></pre>
<h2 id="æ‰“å°å‹æ…‹"><a class="header" href="#æ‰“å°å‹æ…‹">æ‰“å°å‹æ…‹</a></h2>
<ul>
<li>ä½¿ç”¨reflectçš„TypeOfæ–¹æ³•</li>
<li>ä½¿ç”¨Printfä¸­çš„ %T</li>
</ul>
<pre><code class="language-go">package main

import (
	"fmt"
	"reflect"
)

func main() {
	x := 10
	p := &amp;x
	fmt.Printf("%T\n", p)
	fmt.Println(reflect.TypeOf(p))

}
</code></pre>
<h2 id="çµæ§‹èˆ‡æŒ‡æ¨™"><a class="header" href="#çµæ§‹èˆ‡æŒ‡æ¨™">çµæ§‹èˆ‡æŒ‡æ¨™</a></h2>
<p>å¦‚æœä½ å»ºç«‹äº†ä¸€å€‹çµæ§‹çš„å¯¦ä¾‹ï¼Œä¸¦å°‡ä¹‹æŒ‡å®šçµ¦å¦ä¸€å€‹çµæ§‹è®Šæ•¸ï¼Œé‚£éº¼æœƒé€²è¡Œå€¼åŸŸçš„è¤‡è£½ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

func main() {  
    point1 := Point{X: 10, Y: 20}
    point2 := point1

    point1.X = 20

    fmt.Println(point1)  // {20, 20}
    fmt.Println(point2)  // {10 20}
}
</code></pre>
<p>é€™å°æ–¼å‡½å¼çš„åƒæ•¸å‚³éä¹Ÿæ˜¯ä¸€æ¨£çš„ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

func changeX(point Point) {
    point.X = 20
    fmt.Println(point)
}

func main() {
    point := Point{X: 10, Y: 20}

    changeX(point)     // {20 20}
    fmt.Println(point) // {10 20}
}
</code></pre>
<p><code>point</code> çš„ä½ç½®é–‹å§‹å„²å­˜äº†çµæ§‹ï¼Œå¯ä»¥å° <code>point</code> ä½¿ç”¨ <code>&amp;</code> å–å€¼ï¼Œå°‡ä½å€å€¼æŒ‡å®šçµ¦æŒ‡æ¨™ï¼Œå› æ­¤è‹¥æŒ‡å®šæˆ–å‚³éçµæ§‹æ™‚ï¼Œä¸æ˜¯æƒ³è¦è¤‡è£½å€¼åŸŸï¼Œå¯ä»¥ä½¿ç”¨æŒ‡æ¨™ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

func main() {
    point1 := Point{X: 10, Y: 20}
    point2 := &amp;point1

    point1.X = 20

    fmt.Println(point1) // {20, 20}
    fmt.Println(point2) // &amp;{20 20}
}
</code></pre>
<p>æ³¨æ„åˆ° <code>point2 := &amp;point1</code> å¤šäº†å€‹ <code>&amp;</code>ï¼Œé€™å–å¾—äº† <code>point1</code> å¯¦ä¾‹çš„æŒ‡æ¨™å€¼ï¼Œä¸¦å‚³éçµ¦ <code>point2</code>ï¼Œ<code>point2</code> çš„å‹æ…‹æ˜¯ <code>*Point</code>ï¼Œä¹Ÿå°±æ˜¯ç›¸ç•¶æ–¼ <code>var point2 *Point = &amp;point1</code>ï¼Œå› æ­¤ï¼Œç•¶ä½ é€é <code>point1.X</code> æ”¹è®Šäº†å€¼ï¼Œé€é <code>point2</code> å°±èƒ½å–å¾—å°æ‡‰çš„æ”¹è®Šã€‚</p>
<p>é¡ä¼¼åœ°ï¼Œä¹Ÿå¯ä»¥åœ¨å‚³éåƒæ•¸çµ¦å‡½å¼æ™‚ä½¿ç”¨æŒ‡æ¨™ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

func changeX(point *Point) {
    point.X = 20
    fmt.Printf("&amp;{%d %d}\n", point.X, point.Y)
}

func main() {
    point := Point{X: 10, Y: 20}

    changeX(&amp;point)    // &amp;{20 20}
    fmt.Println(point) // {20 20}
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°åœ¨ Go èªè¨€ä¸­ï¼Œå³ä½¿æ˜¯æŒ‡æ¨™ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€éé»é‹ç®—å­ä¾†å­˜å–å€¼åŸŸï¼Œé€™æ˜¯ Go æä¾›çš„èªæ³•ç³–ï¼Œ<code>point.X</code> åœ¨ç·¨è­¯éå¾Œï¼Œæœƒè¢«è½‰æ›ç‚º <code>(*point).X</code>ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥é€é <code>new</code> ä¾†å»ºç«‹çµæ§‹å¯¦ä¾‹ï¼Œé€™æœƒå‚³å›çµæ§‹å¯¦ä¾‹çš„ä½å€ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

func default_point() *Point {
    point := new(Point)
    point.X = 10
    point.Y = 10
    return point
}

func main() {
    point := default_point()
    fmt.Println(point) // &amp;{10 10}
}
</code></pre>
<p>åœ¨é€™é‚Šï¼Œ<code>point</code> æ˜¯å€‹æŒ‡æ¨™ï¼Œä¹Ÿå°±æ˜¯ <code>*Point</code> å‹æ…‹ï¼Œå„²å­˜äº†çµæ§‹å¯¦ä¾‹çš„ä½å€ã€‚</p>
<p>çµæ§‹çš„å€¼åŸŸä¹Ÿå¯ä»¥æ˜¯æŒ‡æ¨™å‹æ…‹ï¼Œä¹Ÿå¯ä»¥æ˜¯çµæ§‹è‡ªèº«å‹æ…‹ä¹‹æŒ‡æ¨™ï¼Œå› æ­¤å¯å¯¦ç¾éˆç‹€åƒè€ƒï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

type Point struct {
    X, Y int
}

type Node struct {
    point *Point
    next  *Node
}

func main() {
    node := new(Node)

    node.point = &amp;Point{10, 20}
    node.next = new(Node)

    node.next.point = &amp;Point{10, 30}

    fmt.Println(node.point)      // &amp;{10 20}
    fmt.Println(node.next.point) // &amp;{10 30}
}
</code></pre>
<p><code>$T{}</code> çš„å¯«æ³•èˆ‡ <code>new(T)</code> æ˜¯ç­‰æ•ˆçš„ï¼Œä½¿ç”¨ <code>&amp;Point{10, 20}</code> é€™é¡çš„å¯«æ³•ï¼Œå¯ä»¥åŒæ™‚æŒ‡å®šçµæ§‹çš„å€¼åŸŸã€‚</p>
<h2 id="json"><a class="header" href="#json">Json</a></h2>
<p>go çš„ json.Unmarshal å¯ä»¥æŠŠ json å­—ä¸²è½‰æˆ structï¼Œè€Œ json.Marshal å¯ä»¥å°‡ struct è½‰æˆ json å­—ä¸²ï¼</p>
<pre><code class="language-go">package main

import (
	"encoding/json"
	"fmt"
)

type Person struct {
	Id   int    `json:"id"`
	Name string `json:name`
}

func main() {
	data := []byte(`{"id" : 1 , "name" : "Daniel"}`)
	var person Person
	json.Unmarshal(data, &amp;person)
	fmt.Println(person)
	jsondata, _ := json.Marshal(person)
	fmt.Println(string(jsondata))
}
</code></pre>
<h2 id="å”ç¨‹åŒæ­¥çš„ä¸‰å€‹æ–¹æ³•"><a class="header" href="#å”ç¨‹åŒæ­¥çš„ä¸‰å€‹æ–¹æ³•">å”ç¨‹åŒæ­¥çš„ä¸‰å€‹æ–¹æ³•</a></h2>
<h3 id="mutex"><a class="header" href="#mutex">Mutex</a></h3>
<p>äº’æ–¥é–ï¼Œå¯ä»¥å‰µå»ºç‚ºå…¶ä»–çµæ§‹é«”çš„å­—æ®µï¼›é›¶å€¼ç‚ºè§£é– ç‹€æ…‹ï¼ŒMutexé¡å‹çš„é–å’Œç·šç¨‹ç„¡é—œï¼Œå¯ä»¥ç”±ä¸åŒçš„ç·šç¨‹åŠ é–å’Œè§£é–ã€‚</p>
<h3 id="channel"><a class="header" href="#channel">Channel</a></h3>
<p>ä½¿ç”¨Goèªè¨€çš„channel</p>
<h3 id="waitgroup"><a class="header" href="#waitgroup">WaitGroup</a></h3>
<p>å®ƒèƒ½å¤ é˜»å¡ä¸»ç·šç¨‹çš„åŸ·è¡Œï¼Œç›´åˆ°æ‰€æœ‰çš„goroutineåŸ·è¡Œå®Œç•¢ã€‚è¦æ³¨æ„goroutineçš„åŸ·è¡Œçµæœæ˜¯äº‚åºçš„ï¼Œèª¿åº¦å™¨ç„¡æ³•ä¿è¨¼goroutineåŸ·è¡Œé †åºï¼Œä¸”é€²ç¨‹çµæŸæ™‚ä¸æœƒç­‰å¾…goroutineé€€å‡ºã€‚</p>
<h3 id="waitgroupä½¿ç”¨è©³è§£"><a class="header" href="#waitgroupä½¿ç”¨è©³è§£">WaitGroupä½¿ç”¨è©³è§£</a></h3>
<p>WaitGroupç¸½å…±æœ‰ä¸‰å€‹æ–¹æ³•ï¼š</p>
<ul>
<li>Add(delta int) : è¨ˆæ•¸å™¨å¢åŠ delta</li>
<li>Done() : è¨ˆæ•¸å™¨-1ï¼Œç›¸ç•¶æ–¼Add(-1)</li>
<li>Wait() : é˜»å¡ç›´åˆ°æ‰€æœ‰çš„WaitGroupæ•¸é‡è®Šç‚ºé›¶ï¼Œå³è¨ˆæ•¸å™¨è®Šç‚º0</li>
</ul>
<p>sync.WaitGroupå¯¦ç¾äº†ä¸€å€‹é¡ä¼¼Queçš„è³‡æ–™çµæ§‹ï¼Œæˆ‘å€‘å¯ä»¥ä¸æ–·åœ°å‘Queæ·»åŠ ä¸¦ç™¼ä»»å‹™ï¼Œæ¯æ·»åŠ ä¸€å€‹ä»»å‹™ï¼Œå°±å°‡è¨ˆæ•¸å™¨çš„å€¼å¢åŠ 1ï¼Œè‹¥æˆ‘å€‘å•Ÿå‹•äº† N å€‹ä¸¦ç™¼ä»»å‹™æ™‚æ™‚ï¼Œå°±éœ€è¦æŠŠè¨ˆæ•¸å™¨å¢åŠ  N ã€‚æ¯å€‹ä»»å‹™å®Œæˆæ™‚é€šéå‘¼å« Done()æ–¹æ³•å°‡è¨ˆæ•¸å™¨æ¸›1ï¼Œä¸¦ä¸”å¾Queä¸­åˆªé™¤ã€‚å¦‚æœéšŠä¾‹ä¸­çš„ä»»å‹™å°šæœªåŸ·è¡Œå®Œç•¢ï¼Œæˆ‘å€‘é€šéèª¿ç”¨ Wait() ä¾†ç™¼å‡ºé˜»å¡ï¼Œ ç›´åˆ°è¨ˆæ•¸å™¨æ­¸é›¶æ™‚ï¼Œè¡¨ç¤ºæ‰€æœ‰ä¸¦ç™¼å”ç¨‹å·²ç¶“å®Œæˆã€‚</p>
<pre><code class="language-go">var wg sync.WaitGroup //å®£å‘Šå…¨åŸŸçš„WaitGroup
var count int32

func AddOne() { //å®šç¾©å‡½æ•¸ï¼Œæ¯æ¬¡èª¿ç”¨æ™‚countåŠ 1
	defer wg.Done()
	count++
}

func main()  {
	wg.Add(3) //å¾€WaitGroupè£¡æ·»åŠ 3å€‹goroutine
	go AddOne()
	go AddOne()
	go AddOne()
	wg.Wait()
	fmt.Printf("Count: %d", count ) //åŸ·è¡ŒçµæŸï¼Œè¼¸å‡ºCount: 3
}
</code></pre>
<p>WaitGroupçš„ç‰¹é»æ˜¯å¯ä»¥èª¿ç”¨Wait()ä¾†é˜»å¡éšŠåˆ—ï¼Œç›´åˆ°éšŠåˆ—ä¸­çš„ä¸¦ç™¼ä»»å‹™åŸ·è¡Œå®Œç•¢æ‰è§£é™¤é˜»å¡ï¼Œä¸ç”¨sleepå›ºå®šæ™‚é–“ä¾†ç­‰å¾…ã€‚ç¼ºé»æ˜¯ç„¡æ³•æŒ‡å®šgoroutineçš„ä¸¦ç™¼å”ç¨‹æ•¸ç›®ã€‚</p>
<h3 id="waitgroupæºç¢¼é–±è®€"><a class="header" href="#waitgroupæºç¢¼é–±è®€">WaitGroupæºç¢¼é–±è®€</a></h3>
<h4 id="ä¿¡è™Ÿé‡"><a class="header" href="#ä¿¡è™Ÿé‡">ä¿¡è™Ÿé‡</a></h4>
<p>ä¿¡è™Ÿé‡æ˜¯Unixç³»çµ±æä¾›çš„ä¸€ç¨®å…±äº«è³‡æºçš„ä¿è­·æ©Ÿåˆ¶ï¼Œç”¨æ–¼é˜²æ­¢å¤šå€‹ç·šç¨‹åŒæ™‚è¨ªå•æŸå€‹è³‡æºã€‚</p>
<p>ç•¶ä¿¡è™Ÿé‡&gt;0æ™‚ï¼Œè¡¨ç¤ºè³‡æºå¯ç”¨ã€‚
ç•¶ä¿¡è™Ÿé‡==0æ™‚ï¼Œè¡¨ç¤ºè³‡æºæš«ä¸å¯ç”¨ã€‚</p>
<p>ç·šç¨‹ç²å–è³‡æºæ™‚ï¼Œç³»çµ±å°‡ä¿¡è™Ÿé‡æ¸›1ã€‚ç•¶ä¿¡è™Ÿé‡ç‚º0æ™‚ï¼Œç•¶å‰ç·šç¨‹æœƒé€²å…¥ç¡çœ ï¼Œç›´åˆ°ä¿¡è™Ÿé‡ç‚ºæ­£æ™‚ç·šç¨‹æœƒè¢«å–šé†’ã€‚</p>
<h4 id="è³‡æ–™çµæ§‹"><a class="header" href="#è³‡æ–™çµæ§‹">è³‡æ–™çµæ§‹</a></h4>
<p>æºç¢¼åŒ…src/sync/waitgroup.go:WaitGroupçš„çµæ§‹é«”å®šç¾©å¦‚ä¸‹ï¼š</p>
<pre><code class="language-go">type WaitGroup struct {
	state1 [3]uint32
}
</code></pre>
<p>state1 æ˜¯ä¸€å€‹é•·åº¦ç‚º3çš„arrayï¼ŒåŒ…å«äº†å…©çµ„è¨ˆæ•¸å™¨å’Œä¸€å€‹ä¿¡è™Ÿé‡ã€‚</p>
<ul>
<li>counter : ç•¶å‰é‚„æœªåŸ·è¡ŒçµæŸçš„goroutineè¨ˆæ•¸å™¨</li>
<li>waiter count : ç­‰å¾…goroutine-groupçµæŸçš„goroutineæ•¸é‡ï¼Œå³ç­‰å€™è€…çš„æ•¸é‡</li>
<li>semaphore : ä¿¡è™Ÿé‡</li>
</ul>
<p><img src="images/20120698CUTVP4tIWL.png" alt="" /></p>
<p>WaitGroupå°å¤–æä¾›ä¸‰å€‹æ¥å£ï¼ŒAdd(delta int)ï¼ŒWait()å’ŒDone()ï¼Œä¸‹é¢ä»‹ç´¹é€™ä¸‰å€‹å‡½æ•¸çš„å¯¦ç¾ç´°ç¯€ã€‚</p>
<h3 id="adddelta-int"><a class="header" href="#adddelta-int">Add(delta int)</a></h3>
<p>Add()çš„åŠŸèƒ½æœ‰å…©å€‹ï¼Œç¬¬ä¸€å€‹æ˜¯å°‡deltaå€¼åŠ åˆ°counterè£¡é ­ï¼Œå› ç‚ºdeltaå¯ä»¥ç‚ºè² å€¼ï¼Œæ‰€ä»¥counteræœ‰å¯èƒ½è®Šæˆ0æˆ–è² å€¼ã€‚Add()çš„ç¬¬äºŒå€‹åŠŸèƒ½å°±æ˜¯åˆ¤æ–·counterçš„å€¼ï¼Œç•¶å…¶ç‚º0æ™‚ï¼Œæ ¹æ“š waiter æ•¸å€¼é‡‹æ”¾ç­‰é‡çš„ä¿¡è™Ÿé‡ï¼ŒæŠŠç­‰å¾…çš„goroutineå…¨éƒ¨å–šé†’ï¼Œå¦‚æœcounterè®Šç‚ºè² å€¼ï¼Œå‰‡panicã€‚</p>
<pre><code class="language-go">func (wg *WaitGroup) Add(delta int) {
    statep, semap := wg.state() //ç²å–stateå’Œsemphoreçš„æŒ‡é‡
    
    state := atomic.AddUint64(statep, uint64(delta)&lt;&lt;32) //æŠŠdeltaå€¼åŠ åˆ°counter
    v := int32(state &gt;&gt; 32) //ç²å–counterå€¼
    w := uint32(state)      //ç²å–waiterå€¼
    
    if v &lt; 0 {              //å¦‚æœcounterå€¼ç‚ºè² æ•¸ï¼Œå‰‡panic
        panic("sync: negative WaitGroup counter")
    }

    //å¦‚æœcounterå¤§æ–¼é›¶ï¼Œæˆ–æ˜¯waiterç‚ºé›¶(æ²’æœ‰ç­‰å¾…è€…)ï¼Œå‰‡ç›´æ¥é€€å‡º
    if v &gt; 0 || w == 0 {
        return
    }

    //ç•¶counterç­‰æ–¼0æ™‚ï¼Œwaiterä¸€å®šå¤§æ–¼é›¶(å…§éƒ¨ç¶­è­·waiteræ•¸ç›®ï¼Œä¸æœƒå‡ºç¾å°æ–¼ç­‰æ–¼é›¶çš„æƒ…æ³)
    //å…ˆæŠŠcounteræ­¸é›¶ï¼Œå†é‡‹æ”¾waiterå€‹æ•¸çš„ä¿¡è™Ÿé‡
    *statep = 0
    for ; w != 0; w-- {
        runtime_Semrelease(semap, false)
    }
}
</code></pre>
<h3 id="wait"><a class="header" href="#wait">Wait()</a></h3>
<p>Wait()çš„åŠŸèƒ½ç‚ºç´¯åŠ waiterä»¥åŠé˜»å¡ç­‰å¾…ä¿¡è™Ÿé‡</p>
<pre><code class="language-go">func (wg *WaitGroup) Wait() {
    statep, semap := wg.state() //ç²å–stateå’Œsemaphoreçš„æŒ‡é‡
    for {
        state := atomic.LoadUint64(statep) //ç²å–stateå€¼
        v := int32(state &gt;&gt; 32)            //ç²å–counterå€¼
        w := uint32(state)                 //ç²å–waiterå€¼
        if v == 0 {                        //ç•¶counterç‚º0ï¼Œä»£è¡¨æ‰€æœ‰çš„goroutineéƒ½çµæŸäº†ï¼Œç›´æ¥é€€å‡º
            return
        }
        
        // ä½¿ç”¨CASå‡½æ•¸ç´¯åŠ waiterï¼Œä¿è¨¼æœ‰å¤šå€‹goroutineåŒæ™‚åŸ·è¡ŒWait()æ™‚ä¹Ÿèƒ½æ­£ç¢ºç´¯åŠ waiter
        if atomic.CompareAndSwapUint64(statep, state, state+1) {
            runtime_Semacquire(semap) 
            return
        }
    }
}
</code></pre>
<h3 id="done"><a class="header" href="#done">Done()</a></h3>
<p>Done()ç­‰åŒæ–¼Add(-1)ï¼Œä¹Ÿå°±æ˜¯æŠŠcounteræ¸›1ã€‚</p>
<pre><code class="language-go">func (wg *WaitGroup) Done() {
	wg.Add(-1)
}
</code></pre>
<h3 id="waitgroupçš„å‘"><a class="header" href="#waitgroupçš„å‘">WaitGroupçš„å‘</a></h3>
<ul>
<li>
<p>Add()æ“ä½œå¿…é ˆæ—©æ–¼Wait()ï¼Œå¦å‰‡æœƒpanic</p>
</li>
<li>
<p>Add()è¨­ç½®çš„å€¼å¿…é ˆèˆ‡å¯¦éš›ç­‰å¾…çš„goroutineæ•¸é‡ä¸€è‡´ï¼Œå¦å‰‡æœƒpanic</p>
</li>
</ul>
<h2 id="deferpanicrecover"><a class="header" href="#deferpanicrecover">deferã€panicã€recover</a></h2>
<h3 id="defer-å»¶é²åŸ·è¡Œ"><a class="header" href="#defer-å»¶é²åŸ·è¡Œ">defer å»¶é²åŸ·è¡Œ</a></h3>
<p>åœ¨ Go èªè¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>defer</code> æŒ‡å®šæŸå€‹å‡½å¼å»¶é²åŸ·è¡Œï¼Œé‚£éº¼å»¶é²åˆ°å“ªå€‹æ™‚æ©Ÿï¼Ÿç°¡å–®ä¾†èªªï¼Œåœ¨å‡½å¼ <code>return</code> ä¹‹å‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

func deferredFunc() {
    fmt.Println("deferredFunc")    
}

func main() {
    defer deferredFunc()
    fmt.Println("Hello, ä¸–ç•Œ")    
}
</code></pre>
<p>é€™å€‹ç¯„ä¾‹åŸ·è¡Œæ™‚ï¼Œ<code>deferredFunc()</code> å‰åŠ ä¸Šäº† <code>defer</code>ï¼Œå› æ­¤ï¼Œæœƒåœ¨ <code>main()</code> å‡½å¼ <code>return</code> å‰åŸ·è¡Œï¼Œçµæœå°±æ˜¯å…ˆé¡¯ç¤ºäº† <code>"Hello, ä¸–ç•Œ"</code>ï¼Œæ‰é¡¯ç¤º <code>"deferredFunc"</code>ã€‚</p>
<p>å¦‚æœæœ‰å¤šå€‹å‡½å¼è¢« <code>defer</code>ï¼Œé‚£éº¼åœ¨å‡½å¼ <code>return</code> å‰ï¼Œæœƒä¾ <code>defer</code> çš„ç›¸åé †åºåŸ·è¡Œï¼Œä¹Ÿå°±æ˜¯ LIFOï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-go">package main

import "fmt"

func deferredFunc1() {
    fmt.Println("deferredFunc1")
}

func deferredFunc2() {
    fmt.Println("deferredFunc2")
}

func main() {
    defer deferredFunc1()
    defer deferredFunc2()
    fmt.Println("Hello, ä¸–ç•Œ")
}
</code></pre>
<p>ç”±æ–¼å…ˆ <code>defer</code> äº† <code>deferredFunc1()</code>ï¼Œæ‰ <code>defer</code> äº† <code>deferredFunc2()</code>ï¼Œå› æ­¤åŸ·è¡Œçµæœæœƒæ˜¯ <code>"Hello, ä¸–ç•Œ"</code>ã€<code>"deferredFunc2"</code>ã€<code>"deferredFunc1"</code> çš„é¡¯ç¤ºé †åºã€‚</p>
<h4 id="ä½¿ç”¨-defer-æ¸…é™¤è³‡æº"><a class="header" href="#ä½¿ç”¨-defer-æ¸…é™¤è³‡æº">ä½¿ç”¨ defer æ¸…é™¤è³‡æº</a></h4>
<pre><code class="language-go">package main

import (
    "fmt"
    "os"
)

func main() {
    f, err := os.Open("/tmp/dat")
    if err != nil {
        fmt.Println(err)
        return;
    }

    defer func() { // å»¶é²åŸ·è¡Œï¼Œè€Œä¸”å‡½å¼ return å‰ä¸€å®šæœƒåŸ·è¡Œ
        if f != nil {
            f.Close()
        }
    }()

    b1 := make([]byte, 5)
    n1, err := f.Read(b1)
    if err != nil {
        fmt.Printf("%d bytes: %s\n", n1, string(b1))
        // è™•ç†è®€å–çš„å…§å®¹....
    }
}
</code></pre>
<p>é€™éº¼ä¸€ä¾†ï¼Œè‹¥ <code>Read</code> ç™¼ç”ŸéŒ¯èª¤ï¼Œæœ€å¾Œä¸€å®šæœƒåŸ·è¡Œè¢« <code>defer</code> çš„å‡½å¼ï¼Œå¾è€Œä¿è­‰äº† <code>f.Close()</code> ä¸€å®šæœƒé—œé–‰æª”æ¡ˆã€‚</p>
<p>ï¼ˆå°±æŸäº›æ„ç¾©ä¾†èªªï¼Œ<code>defer</code> çš„è§’è‰²é¡ä¼¼æ–¼ä¾‹å¤–è™•ç†æ©Ÿåˆ¶ä¸­ <code>finally</code> çš„æ©Ÿåˆ¶ï¼Œå°‡è³‡æºæ¸…é™¤çš„å‡½å¼ï¼Œè—‰ç”± <code>defer</code> ä¾†è™•ç†ï¼Œä¸€æ–¹é¢å¤§æ¦‚ä¹Ÿæ˜¯ç‚ºäº†åœ¨ç¨‹å¼ç¢¼é–±è®€ä¸Šï¼Œå¼·èª¿å‡ºè³‡æºæ¸…é™¤çš„é‡è¦æ€§å§ï¼ï¼‰</p>
<h3 id="panic-ææ…Œä¸­æ–·"><a class="header" href="#panic-ææ…Œä¸­æ–·">panic ææ…Œä¸­æ–·</a></h3>
<p>æ–¹æ‰ç¨å¾®æéï¼Œå¦‚æœåœ¨å‡½å¼ä¸­åŸ·è¡Œ <code>panic</code>ï¼Œé‚£éº¼å‡½å¼çš„æµç¨‹å°±æœƒä¸­æ–·ï¼Œè‹¥ A å‡½å¼å‘¼å«äº† B å‡½å¼ï¼Œè€Œ B å‡½å¼ä¸­å‘¼å«äº† <code>panic</code>ï¼Œé‚£éº¼ B å‡½å¼æœƒå¾å‘¼å«äº† <code>panic</code> çš„åœ°æ–¹ä¸­æ–·ï¼Œè€Œ A å‡½å¼ä¹Ÿæœƒå¾å‘¼å«äº† B å‡½å¼çš„åœ°æ–¹ä¸­æ–·ï¼Œè‹¥æœ‰æ›´æ·±å±¤çš„å‘¼å«éˆï¼Œ<code>panic</code> çš„æ•ˆæ‡‰ä¹Ÿæœƒä¸€è·¯å¾€å›å‚³æ’­ã€‚</p>
<p>ï¼ˆå¦‚æœä½ æœ‰ä¾‹å¤–è™•ç†çš„ç¶“é©—ï¼Œé€™å°±ç›¸ç•¶æ–¼è¢«æ‹‹å‡ºçš„ä¾‹å¤–éƒ½æ²’æœ‰è™•ç†çš„æƒ…æ³ã€‚ï¼‰</p>
<p>å¯ä»¥å°‡æ–¹æ‰çš„ç¯„ä¾‹æ”¹å¯«ç‚ºä»¥ä¸‹ï¼š</p>
<pre><code class="language-go">package main

import (
    "fmt"
    "os"
)

func check(err error) {
    if err != nil {
        panic(err)
    }
}

func main() {
    f, err := os.Open("/tmp/dat")
    check(err)

    defer func() {
        if f != nil {
            f.Close()
        }
    }()

    b1 := make([]byte, 5)
    n1, err := f.Read(b1)
    check(err)

    fmt.Printf("%d bytes: %s\n", n1, string(b1))
}
</code></pre>
<p>å¦‚æœåœ¨é–‹å•Ÿæª”æ¡ˆæ™‚ï¼Œå°±ç™¼ç”Ÿäº†éŒ¯èª¤ï¼Œå‡è¨­é€™æ˜¯åœ¨ä¸€å€‹å¾ˆæ·±çš„å‘¼å«å±¤æ¬¡ä¸­ç™¼ç”Ÿï¼Œè‹¥ä½ ç›´æ¥æƒ³æ’°å¯«ç¨‹å¼ï¼Œå°‡ <code>os.Open</code> çš„ <code>error</code> é€å±¤å‚³å›ï¼Œé‚£æœƒæ˜¯ä¸€ä»¶å¾ˆéº»ç…©çš„äº‹ï¼Œæ­¤æ™‚ç›´æ¥ç™¼å‡º <code>panic</code>ï¼Œå°±å¯ä»¥é”åˆ°æƒ³è¦çš„ç›®çš„ã€‚</p>
<h3 id="recover-æ¢å¾©æµç¨‹"><a class="header" href="#recover-æ¢å¾©æµç¨‹">recover æ¢å¾©æµç¨‹</a></h3>
<p>å¦‚æœç™¼ç”Ÿäº† <code>panic</code>ï¼Œè€Œä½ å¿…é ˆåšä¸€äº›è™•ç†ï¼Œå¯ä»¥ä½¿ç”¨ <code>recover</code>ï¼Œé€™å€‹å‡½å¼å¿…é ˆåœ¨è¢« <code>defer</code> çš„å‡½å¼ä¸­åŸ·è¡Œæ‰æœ‰æ•ˆæœï¼Œè‹¥åœ¨è¢« <code>defer</code> çš„å‡½å¼å¤–åŸ·è¡Œï¼Œ<code>recover</code> ä¸€å®šæ˜¯å‚³å› <code>nil</code>ã€‚</p>
<p>å¦‚æœæœ‰è¨­ç½® <code>defer</code> å‡½å¼ï¼Œåœ¨ç™¼ç”Ÿäº† <code>panic</code> çš„æƒ…æ³ä¸‹ï¼Œè¢« <code>defer</code> çš„å‡½å¼ä¸€å®šæœƒè¢«åŸ·è¡Œï¼Œè‹¥ç•¶ä¸­åŸ·è¡Œäº† <code>recover</code>ï¼Œé‚£éº¼ <code>panic</code> å°±æœƒè¢«æ•æ‰ä¸¦ä½œç‚º <code>recover</code> çš„å‚³å›å€¼ï¼Œé‚£éº¼ <code>panic</code> å°±ä¸æœƒä¸€è·¯å¾€å›å‚³æ’­ï¼Œé™¤éä½ åˆå‘¼å«äº† <code>panic</code>ã€‚</p>
<p>å› æ­¤ï¼Œé›–ç„¶ Go èªè¨€ä¸­æ²’æœ‰ä¾‹å¤–è™•ç†æ©Ÿåˆ¶ï¼Œä¹Ÿå¯ä½¿ç”¨ <code>defer</code>ã€<code>panic</code> èˆ‡ <code>recover</code> ä¾†é€²è¡Œé¡ä¼¼çš„éŒ¯èª¤è™•ç†ã€‚ä¾‹å¦‚ï¼Œå°‡ä¸Šé ­çš„ç¯„ä¾‹ï¼Œå†ä¿®æ”¹ç‚ºï¼š</p>
<pre><code class="language-go">package main

import (
    "fmt"
    "os"
)

func check(err error) {
    if err != nil {
        panic(err)
    }
}

func main() {
    f, err := os.Open("/tmp/dat")
    check(err)

    defer func() {
        if err := recover(); err != nil {
            fmt.Println(err) // é€™å·²ç¶“æ˜¯é ‚å±¤çš„ UI ä»‹é¢äº†ï¼Œæƒ³ä»¥è‡ªå·±çš„æ–¹å¼å‘ˆç¾éŒ¯èª¤
        }

        if f != nil {
            if err := f.Close(); err != nil {
                panic(err) // ç¤ºç¯„å†æ‹‹å‡º panic
            }
        }
    }()

    b1 := make([]byte, 5)
    n1, err := f.Read(b1)
    check(err)

    fmt.Printf("%d bytes: %s\n", n1, string(b1))
}
</code></pre>
<p>åœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œå‡è¨­å·²ç¶“æ˜¯æœ€é ‚å±¤çš„ UI ä»‹é¢äº†ï¼Œå› æ­¤ä½¿ç”¨ <code>recover</code> å˜—è©¦æ•æ‰ <code>panic</code>ï¼Œä¸¦ä»¥è‡ªå·±çš„æ–¹å¼å‘ˆç¾éŒ¯èª¤ï¼Œé™„å¸¶ä¸€é¡Œçš„æ˜¯ï¼Œé—œé–‰æª”æ¡ˆä¹Ÿæœ‰å¯èƒ½ç™¼ç”ŸéŒ¯èª¤ï¼Œç¨‹å¼ä¸­ä¹Ÿæª¢æŸ¥äº† <code>f.Close()</code>ï¼Œè¦–éœ€æ±‚è€Œå®šï¼Œä½ å¯ä»¥åƒé€™é‚Šé‡æ–°æ‹‹å‡º <code>panic</code>ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥å–®ç´”åœ°è¨­è¨ˆä¸€å€‹ UI ä»‹é¢ä¾†å‘ˆç¾éŒ¯èª¤ã€‚</p>
<p>ä»€éº¼æ™‚å€™è©²ç”¨ <code>error</code>ï¼Ÿä»€éº¼æ™‚å€™è©²ç”¨ <code>panic</code>ï¼Ÿåœ¨ Go çš„æ…£ä¾‹ä¸­ï¼Œé¼“å‹µä½ ä½¿ç”¨ <code>error</code>ï¼Œæ˜ç¢ºåœ°é€²è¡ŒéŒ¯èª¤æª¢æŸ¥ï¼Œç„¶è€Œï¼Œå°±å¦‚æ–¹æ‰æ‰€è¨€ï¼Œå·¢ç‹€ä¸”æ·±å±¤çš„å‘¼å«æ™‚ï¼Œä½¿ç”¨ <code>panic</code> æœƒæ¯”è¼ƒä¾¿æ–¼å‚³æ’­éŒ¯èª¤ï¼Œå°± Go çš„æ…£ä¾‹ä¾†èªªï¼Œæ˜¯ä»¥å¥—ä»¶ç‚ºç•Œé™ï¼Œæ–¼å¥—ä»¶ä¹‹ä¸­ï¼Œå¿…è¦æ™‚å¯ä»¥ä½¿ç”¨ <code>panic</code>ï¼Œè€Œå¥—ä»¶å…¬é–‹çš„å‡½å¼ï¼Œå»ºè­°ä»¥ <code>error</code> ä¾†å›å ±éŒ¯èª¤ï¼Œè‹¥å¥—ä»¶å…¬é–‹çš„å‡½å¼å¯èƒ½æœƒæ”¶åˆ° <code>panic</code>ï¼Œå»ºè­°ä½¿ç”¨ <code>recover</code> æ•æ‰ï¼Œä¸¦è½‰æ›ç‚º <code>error</code>ã€‚</p>
<h2 id="çµæ§‹èˆ‡æ–¹æ³•"><a class="header" href="#çµæ§‹èˆ‡æ–¹æ³•">çµæ§‹èˆ‡æ–¹æ³•</a></h2>
<h1 id="å»ºç«‹æ–¹æ³•"><a class="header" href="#å»ºç«‹æ–¹æ³•">å»ºç«‹æ–¹æ³•</a></h1>
<p>å‡è¨­å¯èƒ½åŸæœ¬æœ‰å¦‚ä¸‹çš„ç¨‹å¼å…§å®¹ï¼Œè² è²¬éŠ€è¡Œå¸³æˆ¶çš„å»ºç«‹ã€å­˜æ¬¾èˆ‡ææ¬¾ï¼š</p>
<pre><code class="language-go">package main

import (
    "errors"
    "fmt"
)

type Account struct {
    id      string
    name    string
    balance float64
}

func Deposit(account *Account, amount float64) {
    if amount &lt;= 0 {
        panic("å¿…é ˆå­˜å…¥æ­£æ•¸")
    }
    account.balance += amount
}

func Withdraw(account *Account, amount float64) error {
    if amount &gt; account.balance {
        return errors.New("é¤˜é¡ä¸è¶³")
    }
    account.balance -= amount
    return nil
}

func String(account *Account) string {
    return fmt.Sprintf("Account{%s %s %.2f}",
        account.id, account.name, account.balance)
}

func main() {
    account := &amp;Account{"1234-5678", "Justin Lin", 1000}
    Deposit(account, 500)
    Withdraw(account, 200)
    fmt.Println(String(account)) // Account{1234-5678 Justin Lin 1300.00}
}
</code></pre>
<p>å¯¦éš›ä¸Šï¼Œ<code>Desposit</code>ã€<code>Withdraw</code>ã€<code>String</code> çš„å‡½å¼æ“ä½œï¼Œéƒ½æ˜¯èˆ‡å‚³å…¥çš„ <code>Account</code> å¯¦ä¾‹æœ‰é—œï¼Œä½•ä¸å°‡å®ƒå€‘çµ„ç¹”åœ¨ä¸€èµ·å‘¢ï¼Ÿé€™æ¨£æ¯”è¼ƒå®¹æ˜“ä½¿ç”¨äº›ï¼Œåœ¨ Go èªè¨€ä¸­ï¼Œä½ å¯ä»¥é‡æ–°ä¿®æ”¹å‡½å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="language-go">package main

import (
    "errors"
    "fmt"
)

type Account struct {
    id      string
    name    string
    balance float64
}

func (ac *Account) Deposit(amount float64) {
    if amount &lt;= 0 {
        panic("å¿…é ˆå­˜å…¥æ­£æ•¸")
    }
    ac.balance += amount
}

func (ac *Account) Withdraw(amount float64) error {
    if amount &gt; ac.balance {
        return errors.New("é¤˜é¡ä¸è¶³")
    }
    ac.balance -= amount
    return nil
}

func (ac *Account) String() string {
    return fmt.Sprintf("Account{%s %s %.2f}",
        ac.id, ac.name, ac.balance)
}

func main() {
    account := &amp;Account{"1234-5678", "Justin Lin", 1000}
    account.Deposit(500)
    account.Withdraw(200)
    fmt.Println(account.String()) // Account{1234-5678 Justin Lin 1300.00}
}
</code></pre>
<p>ç°¡å–®ä¾†èªªï¼Œåªæ˜¯å°‡å‡½å¼çš„ç¬¬ä¸€å€‹åƒæ•¸ï¼Œç§»è‡³æ–¹æ³•åç¨±ä¹‹å‰æˆç‚ºå‡½å¼å‘¼å«çš„æ¥æ”¶è€…ï¼ˆReceiverï¼‰ï¼Œé€™éº¼ä¸€ä¾†ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>account.Deposit(500)</code>ã€<code>account.Withdraw(200)</code>ã€<code>account.String()</code> é€™æ¨£çš„æ–¹å¼ä¾†å‘¼å«å‡½å¼ï¼Œå°±åƒæ˜¯ç‰©ä»¶å°å‘ç¨‹å¼èªè¨€ä¸­çš„æ–¹æ³•ï¼ˆMethodï¼‰ã€‚</p>
<p>æ³¨æ„åˆ°ï¼Œåœ¨é€™é‚Šä½¿ç”¨çš„æ˜¯ <code>(ac *Account)</code>ï¼Œä¹Ÿå°±æ˜¯æŒ‡æ¨™ï¼Œå¦‚æœä½ æ˜¯å¦‚ä¸‹ä½¿ç”¨ <code>(ac Account)</code>ï¼š</p>
<pre><code class="language-go">func (ac Account) Deposit(amount float64) {
    if amount &lt;= 0 {
        panic("å¿…é ˆå­˜å…¥æ­£æ•¸")
    }
    ac.balance += amount
}
</code></pre>
<p><strong>é‚£éº¼åŸ·è¡Œåƒæ˜¯ <code>account.Deposit(500)</code>ï¼Œå°±åƒæ˜¯ä»¥ <code>Deposit(*account, 500)</code> å‘¼å«ä»¥ä¸‹å‡½å¼ï¼š</strong></p>
<pre><code class="language-go">func Deposit(account Account, amount float64) {
    if amount &lt;= 0 {
        panic("å¿…é ˆå­˜å…¥æ­£æ•¸")
    }
    account.balance += amount
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯ï¼Œç›¸ç•¶æ–¼å°‡ <code>Account</code> å¯¦ä¾‹ä»¥å‚³å€¼æ–¹å¼è¤‡è£½çµ¦ <code>Deposit</code> å‡½å¼çš„åƒæ•¸ã€‚</p>
<p>æŸäº›ç¨‹åº¦ä¸Šï¼Œå¯ä»¥å°‡æ¥æ”¶è€…æƒ³æˆæ˜¯å…¶ä»–èªè¨€ä¸­çš„ <code>this</code> æˆ– <code>self</code>ï¼Œ<a href="https://github.com/golang/go/wiki/CodeReviewComments#receiver-names">Go å»ºè­°ç‚ºæ¥æ”¶è€…é©ç•¶å‘½å</a>ï¼Œè€Œä¸æ˜¯ç”¨ <code>this</code>ã€<code>self</code> ä¹‹é¡çš„åç¨±ã€‚æ¥æ”¶è€…ä¸¦æ²’æœ‰æ–‡ä»¶ä¸Šè¨˜è¼‰çš„ä½œç”¨ï¼Œå‘½åæ™‚ä¸ç”¨å…¶ä»–åƒæ•¸å…·æœ‰ä¸€å®šçš„æè¿°æ€§ï¼Œåªè¦èƒ½è¡¨é”ç¨‹å¼æ„åœ–å°±å¯ä»¥äº†ï¼ŒGo å»ºè­°æ˜¯å€‹ä¸€æˆ–å…©å€‹å­—æ¯çš„åç¨±ï¼ˆæŸäº›ç¨‹åº¦ä¸Šï¼Œä¹Ÿå¯ä»¥ç”¨ä¾†èˆ‡å…¶ä»–åƒæ•¸å€åˆ¥ï¼‰ã€‚</p>
<h2 id="channel-1"><a class="header" href="#channel-1">Channel</a></h2>
<pre><code class="language-go">package main

import (
	"fmt"
)

func main() {
	var test = make(chan int)
	go func() { test &lt;- 123 }() // å¦‚æœå‚³éå€¼åˆ° channel æ™‚ä¸åœ¨ go func å…§ç¨‹å¼æœƒå¡ä½
	msg := &lt;-test               // channel æ˜¯ä¸€å€‹åœ°å€ï¼Œè¦è³¦äºˆçµ¦ä¸€å€‹è®Šæ•¸å¾Œæ‰èƒ½è®€å‡º
	fmt.Println(test)
	fmt.Println(msg)
}
</code></pre>
<h2 id="go-gorillaçš„ping-pong"><a class="header" href="#go-gorillaçš„ping-pong">go-gorillaçš„ping pong</a></h2>
<p>æ¥­å‹™éœ€æ±‚ï¼Œpingæ¯éš”60ç§’åŸ·è¡Œä¸€æ¬¡ï¼Œpingå…©æ¬¡å¾Œï¼Œæ²’æœ‰å¾—åˆ°pongçš„æ¶ˆæ¯ï¼Œè‡ªå‹•åˆ‡æ–·clientã€‚</p>
<pre><code class="language-go">pongTime=180 * time.Second
pingTime=60 * time.Second

readPump()
c.conn.SetReadDeadline(time.Now().Add(pongTime))
	c.conn.SetPongHandler(func(string) error {
		c.conn.SetReadDeadline(time.Now().Add(pongTime))
		return nil
	})

readPump()
ticker := time.NewTicker(pingTime)
c.conn.WriteMessage(websocket.PingMessage, []byte{})
</code></pre>
<p>é—œæ–¼ping/pongï¼Œä¸€èˆ¬ç€è¦½å™¨æ¥æ”¶åˆ°pingä¹‹å¾Œæœƒè‡ªå‹•è¿”å›pong.
ä½†æ˜¯ç”¨nodejs,goç­‰ç·¨å¯«çš„å®¢æˆ¶ç«¯ï¼Œå¯èƒ½æœƒéœ€è¦æ˜æ–‡ç·¨å¯« pongè¿”å›ä¿¡æ¯ï¼Œ
é€™å€‹éœ€è¦æ ¹æ“šè‡ªå·±çš„ç’°å¢ƒæ˜¯å¦æ”¯æŒè‡ªå‹•è¿”ä¿¡ã€‚
å› ç‚ºæˆ‘ç”¨nodejsåšçš„å®¢æˆ¶ç«¯æ¥æ”¶åˆ°pingä»¥å¾Œæ²’æœ‰æ˜æ–‡è¿”å›pongæ¶ˆæ¯ï¼Œä½†æ˜¯åœ¨æœå‹™å™¨ç«¯å¯ä»¥è‡ªå‹•æ¥æ”¶åˆ°pongçš„æ¶ˆæ¯ã€‚</p>
<h2 id="new-è·Ÿ-make-ä½¿ç”¨æ™‚æ©Ÿ"><a class="header" href="#new-è·Ÿ-make-ä½¿ç”¨æ™‚æ©Ÿ">new è·Ÿ make ä½¿ç”¨æ™‚æ©Ÿ</a></h2>
<p>https://blog.wu-boy.com/2021/06/what-is-different-between-new-and-make-in-golang/</p>
<p>å¤§å®¶æ¥è§¸ Go èªè¨€è‚¯å®šå° <code>new</code> è·Ÿ <code>make</code> ä¸é™Œç”Ÿï¼Œä½†æ˜¯ä»€éº¼æ™‚å€™è¦ä½¿ç”¨ <code>new</code> ä»€éº¼æ™‚å€™ç”¨ <code>make</code>ï¼Œä¹Ÿè¨±æ˜¯å¾ˆå¤šå‰›å…¥é–€çš„é–‹ç™¼è€…æ¯”è¼ƒä¸æ‡‚ï¼Œæœ¬ç¯‡å°±ç°¡å–®ç­†è¨˜ <code>new</code> è·Ÿ <code>make</code> çš„å·®ç•°åŠä½¿ç”¨æ™‚æ©Ÿã€‚</p>
<h3 id="ä½¿ç”¨-new-é—œéµå­—"><a class="header" href="#ä½¿ç”¨-new-é—œéµå­—">ä½¿ç”¨ new é—œéµå­—</a></h3>
<p>Go æä¾›å…©ç¨®æ–¹å¼ä¾†åˆ†é…è¨˜æ†¶é«”ï¼Œä¸€å€‹æ˜¯ <code>new</code> å¦ä¸€å€‹æ˜¯ <code>make</code>ï¼Œé€™å…©å€‹é—œéµå­—åšçš„äº‹æƒ…ä¸åŒï¼Œæ‡‰ç”¨çš„é¡å‹ä¹Ÿä¸åŒï¼Œå¯èƒ½æœƒé€ æˆå‰›å…¥é–€çš„æœ‹å‹ä¸€äº›æ··æ·†ï¼Œä½†æ˜¯é€™å…©å€‹é—œéµå­—ä½¿ç”¨çš„è¦å‰‡å»å¾ˆç°¡å–®ï¼Œå…ˆä¾†çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <code>new</code> é—œéµå­—ã€‚<code>new(T)</code> å®£å‘Šæœƒç›´æ¥æ‹¿åˆ°å„²å­˜ä½ç½®ï¼Œä¸¦ä¸”é…ç½® Zero Value (åˆå§‹åŒ–)ï¼Œä¹Ÿå°±æ˜¯æ•¸å­—å‹æ…‹ç‚º <code>0</code>ï¼Œå­—ä¸²å‹æ…‹å°±æ˜¯ <code>""</code>ã€‚åº•ä¸‹æ˜¯<a href="https://play.golang.org/p/4e933UXThtK">ç¯„ä¾‹ç¨‹å¼</a></p>
<pre><code class="language-go">package main

import "fmt"

func main() {
  foo := new(int)
  fmt.Println(foo)
  fmt.Println(*foo)
  fmt.Printf("%#v", foo)
}
</code></pre>
<p>åŸ·è¡Œå¾Œå¯ä»¥çœ‹åˆ°åº•ä¸‹çµæœ</p>
<pre><code class="language-go">$ go run main.go 
0xc00001a110
0
(*int)(0xc00001a110)
</code></pre>
<p>ä¸Šé¢çš„åšæ³•æ¯”è¼ƒå°‘äººç”¨ï¼Œæ¯”è¼ƒå¤šäººç”¨åœ¨ <code>struct</code> ä¸Šé¢ï¼Œç”±æ–¼ <code>new</code> çš„ç‰¹æ€§ï¼Œç›´æ¥å¯ä»¥ç”¨åœ¨ <code>struct</code> åšåˆå§‹åŒ–ï¼Œåº•ä¸‹æ˜¯<a href="https://play.golang.org/p/xM1k5zi6OJ1">ç¯„ä¾‹ç¨‹å¼</a></p>
<pre><code class="language-go">package main

import (
  "bytes"
  "fmt"
  "sync"
)

type SyncedBuffer struct {
  lock   sync.Mutex
  buffer bytes.Buffer
  foo    int
  bar    string
}

func main() {
  p := new(SyncedBuffer)
  fmt.Println("foo:", p.foo)
  fmt.Println("bar:", p.bar)
  fmt.Printf("%#v\n", p)
}
</code></pre>
<p>ä¸Šé¢å¯ä»¥çœ‹åˆ°é€é <code>new</code> å¿«é€Ÿçš„é”åˆ°åˆå§‹åŒ–ï¼Œä½†æ˜¯æœ‰å€‹ä¸æ–¹ä¾¿çš„åœ°æ–¹å°±æ˜¯ï¼Œå¦‚æœé–‹ç™¼è€…è¦å¡å…¥ç‰¹å®šçš„åˆå§‹åŒ–å€¼ï¼Œé€é <code>new</code> æ˜¯æ²’è¾¦æ³•åšåˆ°çš„ï¼Œæ‰€ä»¥å¤§å¤šæ•¸çš„å¯«æ³•æœƒæ”¹æˆå¦‚ä¸‹ï¼Œ<a href="https://play.golang.org/p/tLyY-TKsloc">ç¯„ä¾‹é€£çµ</a></p>
<pre><code class="language-go">package main

import (
  "bytes"
  "fmt"
  "sync"
)

type SyncedBuffer struct {
  lock   sync.Mutex
  buffer bytes.Buffer
  foo    int
  bar    string
}

func main() {
  p := &amp;SyncedBuffer{
    foo: 100,
    bar: "foobar",
  }
  fmt.Println("foo:", p.foo)
  fmt.Println("bar:", p.bar)
  fmt.Printf("%#v\n", p)
}
</code></pre>
<p>æˆ–è€…æ˜¯å¤§éƒ¨åˆ†æœƒå¯«ä¸€å€‹æ–°çš„ Func åšåˆå§‹åŒ–è¨­å®šï¼Œ<a href="https://play.golang.org/p/hgEWKNdiwqC">ç¯„ä¾‹ç¨‹å¼</a>å¦‚ä¸‹</p>
<pre><code class="language-go">package main

import (
  "bytes"
  "fmt"
  "sync"
)

type SyncedBuffer struct {
  lock   sync.Mutex
  buffer bytes.Buffer
  foo    int
  bar    string
}

func NewSynced(foo int, bar string) *SyncedBuffer {
  return &amp;SyncedBuffer{
    foo: foo,
    bar: bar,
  }
}

func main() {
  p := NewSynced(100, "foobar")
  fmt.Println("foo:", p.foo)
  fmt.Println("bar:", p.bar)
  fmt.Printf("%#v\n", p)
}
</code></pre>
<p>ä½†æ˜¯ <code>new</code> å¦‚æœä½¿ç”¨åœ¨ <code>slice</code>, <code>map</code> åŠ <code>channel</code> èº«ä¸Šçš„è©±ï¼Œå…¶åˆå§‹çš„ Value æœƒæ˜¯ <code>nil</code>ï¼Œè«‹çœ‹åº•ä¸‹<a href="https://play.golang.org/p/EAEIPcKKWjJ">ç¯„ä¾‹</a>ï¼š</p>
<pre><code class="language-go">package main

import (
  "fmt"
)

func main() {
  p := new(map[string]string)
  test := *p
  test["foo"] = "bar"
  fmt.Println(test)
}
</code></pre>
<p>åº•ä¸‹çµæœçœ‹åˆ° panic</p>
<pre><code class="language-go">$ go run main.go 
panic: assignment to entry in nil map

goroutine 1 [running]:
main.main()
        /app/main.go:10 +0x4f
exit status 2
</code></pre>
<p>åˆå§‹åŒ– <code>map</code> æ‹¿åˆ°çš„æœƒæ˜¯ <code>nil</code>ï¼Œæ•…é€šå¸¸åœ¨å®£å‘Š <code>slice</code>, <code>map</code> åŠ <code>channel</code> å‰‡æœƒä½¿ç”¨ Go æä¾›çš„å¦ä¸€å€‹å®£å‘Šæ–¹å¼ <code>make</code>ã€‚</p>
<h3 id="ä½¿ç”¨-make-é—œéµå­—"><a class="header" href="#ä½¿ç”¨-make-é—œéµå­—">ä½¿ç”¨ make é—œéµå­—</a></h3>
<p><code>make</code> èˆ‡ <code>new</code> ä¸åŒçš„åœ°æ–¹åœ¨æ–¼ï¼Œnew å›å‚³æŒ‡æ¨™ï¼Œè€Œ <code>make</code> ä¸æ˜¯ï¼Œ<code>make</code> é€šå¸¸åªç”¨æ–¼åœ¨å®£å‘Šä¸‰å€‹åœ°æ–¹ï¼Œåˆ†åˆ¥æ˜¯ <code>slice</code>, <code>map</code> åŠ <code>channel</code>ï¼Œå¦‚æœçœŸçš„æƒ³è¦æ‹¿åˆ°æŒ‡æ¨™ï¼Œå»ºè­°é‚„æ˜¯ç”¨ <code>new</code> æ–¹å¼ã€‚åº•ä¸‹æ‹¿ <a href="https://play.golang.org/p/_ITcvotyjn1">map ç•¶ä½œç¯„ä¾‹</a></p>
<pre><code class="language-go">package main

import "fmt"

func main() {
  var p *map[string]string
  // new
  p = new(map[string]string)
  *p = map[string]string{
    "bar": "foo",
  }
  people := *p
  people["foo"] = "bar"

  fmt.Println(people)
  fmt.Println(p)

  // make
  foobar := make(map[string]string)
  foobar["foo"] = "bar"
  foobar["bar"] = "foo"
  fmt.Println(foobar)
}
</code></pre>
<p>ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹åˆ° p å®£å‘Šç‚º map æŒ‡æ¨™ï¼Œnew åˆå§‹åŒ– map å¾Œå‰‡éœ€è¦ç¨ç«‹å¯«æˆ <code>map[string]string{}</code>ï¼Œæ‰å¯ä»¥æ­£å¸¸é‹ä½œï¼Œå¦‚æœæ˜¯é€é <code>make</code> æ–¹å¼å°±å¯ä»¥å¿«é€Ÿå®£å‘Šå®Œæˆã€‚é€šå¸¸æ˜¯é€™æ¨£ï¼Œæˆ‘è‡ªå·±åœ¨é–‹ç™¼ï¼Œå¹¾ä¹å¾ˆå°‘ç”¨åˆ° <code>new</code>ï¼Œååˆ°æ˜¯åœ¨å®£å‘Š <code>slice</code>, <code>map</code> åŠ <code>channel</code> æ™‚ä¸€å®šæœƒä½¿ç”¨åˆ° <code>make</code>ã€‚è¨˜ä½ï¼Œç”¨ <code>make</code> å›å‚³çš„ä¸æœƒæ˜¯æŒ‡æ¨™ï¼ŒçœŸçš„è¦æ‹¿åˆ°æŒ‡æ¨™ï¼Œè«‹ä½¿ç”¨ <code>new</code> çš„æ–¹å¼ï¼Œä½†æ˜¯ç¨‹å¼ç¢¼å°±æœƒè®Šå¾—æ¯”è¼ƒè¤‡é›œäº›ã€‚</p>
<h3 id="å¿ƒå¾—"><a class="header" href="#å¿ƒå¾—">å¿ƒå¾—</a></h3>
<p>ç¸½çµåº•ä¸‹ <code>make</code> è·Ÿ <code>new</code> çš„å€åˆ¥</p>
<ul>
<li><code>make</code> èƒ½å¤ åˆ†é…ä¸¦ä¸”åˆå§‹åŒ–æ‰€éœ€è¦çš„è¨˜æ†¶é«”ç©ºé–“è·Ÿçµæ§‹ï¼Œè€Œ <code>new</code> åªèƒ½å›å‚³æŒ‡æ¨™ä½ç½®</li>
<li><code>make</code> åªèƒ½ç”¨åœ¨ä¸‰ç¨®é¡å‹ <code>slice</code>, <code>map</code> åŠ <code>channel</code></li>
<li><code>make</code> å¯ä»¥åˆå§‹åŒ–ä¸Šè¿°ä¸‰ç¨®æ ¼å¼çš„é•·åº¦è·Ÿå®¹é‡ä»¥ä¾¿æä¾›æ•ˆç‡è·Ÿæ¸›å°‘é–‹éŠ·</li>
</ul>
<h2 id="å…§åµŒ"><a class="header" href="#å…§åµŒ">å…§åµŒ</a></h2>
<p>åœ¨ç‰©ä»¶å°å‘ç¨‹å¼ä¸­ï¼Œé€šå¸¸æœƒç”¨ç¹¼æ‰¿ä¾†å…±äº«ä¸Šå±¤å…ƒä»¶çš„ç¨‹å¼ç¢¼ã€‚ç„¶è€Œï¼Œgoèªè¨€æ²’æœ‰ç¹¼æ‰¿çš„ç‰¹æ€§ï¼Œä½†æˆ‘å€‘èƒ½ç”¨çµ„åˆçš„æ–¹å¼ä¾†å…±äº«ç¨‹å¼ç¢¼ã€‚ä¸åƒ…å¦‚æ­¤ï¼Œgoèªè¨€é‚„æä¾›ä¸€ç¨®å„ªæ–¼çµ„åˆçš„èªæ³•ç‰¹æ€§ï¼Œç¨±ä½œå…§åµŒã€‚</p>
<h3 id="çµ„åˆcomposition"><a class="header" href="#çµ„åˆcomposition">çµ„åˆ(composition)</a></h3>
<p>å…ˆä¾†è«‡è«‡æˆ‘æ‰€çŸ¥é“çš„çµ„åˆï¼Œå¤§éƒ¨åˆ†çš„æ–‡ç« æœƒè¬›åˆ°çµ„åˆæ˜¯èšåˆ(aggregation)çš„ä¸€ç¨®ï¼Œè€Œå®ƒå€‘éƒ½æ˜¯æºè‡ªæ–¼UMLçš„ç”¢ç‰©ï¼Œå¯¦éš›ä¸ŠUMLå®šç¾©çš„å®šç¾©å¾ˆæ¨¡ç³Šä¹Ÿå¾ˆé›£ç†è§£ã€‚å› æ­¤ï¼Œæˆ‘è¦è¬›çš„æ˜¯å®ƒå€‘æœ€åŸºæœ¬çš„ä¸€é¢ï¼Œä¹Ÿå°±æ˜¯ <code>Is-A</code> å’Œ <code>Has-A</code> é—œä¿‚:</p>
<ul>
<li>Is-A: ç¹¼æ‰¿é—œä¿‚ï¼Œè¡¨ç¤ºä¸€å€‹ç‰©ä»¶ä¹Ÿæ˜¯å¦ä¸€å€‹ç‰©ä»¶ã€‚</li>
<li>Has-A: çµ„åˆé—œä¿‚ï¼Œè¡¨ç¤ºä¸€å€‹ç‰©ä»¶æ“æœ‰å¦ä¸€å€‹ç‰©ä»¶ã€‚</li>
</ul>
<p>å¾ˆå¤šæ–‡ç« å’Œæ›¸éƒ½å»ºè­°æˆ‘å€‘è¦å¤šç”¨<strong>çµ„åˆå°‘ç”¨ç¹¼æ‰¿</strong>ï¼Œé€™æ˜¯å› ç‚ºç¹¼æ‰¿æœƒå°ç‰©ä»¶é€ æˆå·¨å¤§çš„ä¾è³´é—œä¿‚ã€‚æˆ‘å€‘ç”¨ä¸€å€‹ç¯„ä¾‹ä¾†èªªæ˜çµ„åˆ:</p>
<pre><code class="language-go">package main

import (
	"fmt"
)

// å®šç¾©ä¸€å€‹è‹±é›„çµæ§‹ï¼ŒåŒ…å«äº†æ­£å¸¸äººçµæ§‹
type Hero struct {
	Person   *Person
	HeroName string
	HerkRank int
}

// å®šç¾©ä¸€å€‹æ­£å¸¸äººçµæ§‹
type Person struct {
	Name string
}

func main() {
	var tony = &amp;Hero{&amp;Person{"Tony Stark"}, "Iron Man", 1}
	fmt.Printf("Hero=%+v\n", *tony)
	fmt.Printf("Person=%+v\n", *(tony.Person))
}
</code></pre>
<p>åŸ·è¡Œçµæœ:</p>
<pre><code class="language-bash">Hero={Person:0xc0000841e0 HeroName:Iron Man HerkRank:1}
Person={Name:Tony Stark}
</code></pre>
<p>ä¸Šé¢ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘çœ‹åˆ°äº†æ‰€è¬‚çš„çµ„åˆå°±æ˜¯çµæ§‹å†åŒ…çµæ§‹çš„æ¦‚å¿µï¼Œé€éé€™æ¨£çš„æ–¹å¼å…±äº«çµæ§‹è³‡æ–™æˆ–æ–¹æ³•ã€‚</p>
<h3 id="å…§åµŒembedding"><a class="header" href="#å…§åµŒembedding">å…§åµŒ(Embedding)</a></h3>
<p>å†ä¾†è«‡è«‡goèªè¨€çš„å…§åµŒç‰¹æ€§ï¼Œé€™å€‹ç‰¹æ€§ä¸¦æ²’æœ‰å¯«åœ¨<strong>A Tour of Go</strong>ï¼Œè€Œæ˜¯åœ¨<strong>Effective Go</strong>è£¡é ­ã€‚</p>
<p>Goèªè¨€çš„å…§åµŒå…¶å¯¦å°±æ˜¯çµ„åˆçš„æ¦‚å¿µï¼Œåªæ˜¯å®ƒæ›´åŠ ç°¡æ½”åŠå¼·å¤§ã€‚å…§åµŒå…è¨±æˆ‘å€‘åœ¨çµæ§‹å…§çµ„åˆå…¶ä»–çµæ§‹æ™‚ï¼Œä¸éœ€è¦å®šç¾©æ¬„ä½åç¨±ï¼Œä¸¦ä¸”èƒ½ç›´æ¥é€éè©²çµæ§‹å«ç”¨æ¬„ä½æˆ–æ–¹æ³•ã€‚æˆ‘å€‘å°‡ä¸Šé¢çš„ç¯„ä¾‹æ”¹æˆä½¿ç”¨å…§åµŒï¼Œå¦‚ä¸‹:</p>
<pre><code class="language-go">package main

import (
	"fmt"
)

// å®šç¾©ä¸€å€‹è‹±é›„çµæ§‹
type Hero struct {
	*Person  // ä¸éœ€è¦æ¬„ä½åç¨±
	HeroName string
	HerkRank int
}

// å®šç¾©ä¸€å€‹æ­£å¸¸äººçµæ§‹
type Person struct {
	Name string
}

func main() {
	var tony = &amp;Hero{
		&amp;Person{"Tony Stark"},
		"Iron Man",
		1}

	fmt.Printf("%s\n", tony.Name) // ç›´æ¥å«ç”¨å…§éƒ¨çµæ§‹è³‡æ–™
	// ç­‰æ–¼ fmt.Printf("%s\n", tony.Person.Name)
}
</code></pre>
<p>å¯¦éš›ä¸Šï¼Œå…§åµŒçš„çµæ§‹æ¬„ä½é‚„æ˜¯æœƒæœ‰åç¨±ï¼Œå°±æ˜¯å’Œçµæ§‹æœ¬èº«çš„åç¨±åŒåã€‚</p>
<p>å¦å¤–ï¼Œä¸Šé¢ç¯„ä¾‹æ˜¯ç”¨åŒ¿ååˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…·ååˆå§‹åŒ–ï¼Œå·®åˆ¥åœ¨æ–¼åˆå§‹åŒ–åƒæ•¸çš„æ•¸é‡å’Œé †åºæ˜¯å¯ä»¥è¢«èª¿æ•´çš„:</p>
<pre><code class="language-go">var tony = &amp;Hero{
		Person:   &amp;Person{"Tony Stark"},
		HeroName: "Iron Man",
		HeroRank: 1}
</code></pre>
<h3 id="å…§åµŒèˆ‡æ–¹æ³•"><a class="header" href="#å…§åµŒèˆ‡æ–¹æ³•">å…§åµŒèˆ‡æ–¹æ³•</a></h3>
<p>ä¸Šé¢çœ‹åˆ°çš„ç¯„ä¾‹éƒ½æ˜¯å…§åµŒçµæ§‹è³‡æ–™ï¼Œç¾åœ¨æˆ‘å€‘ä¾†è©¦è©¦çœ‹å…§åµŒçµæ§‹æ–¹æ³•ï¼Œä¿®æ”¹åŒä¸€å€‹ç¯„ä¾‹å¦‚ä¸‹:</p>
<pre><code class="language-go">package main

import (
	"fmt"
)

// å®šç¾©ä¸€å€‹è‹±é›„çµæ§‹
type Hero struct {
	*Person
	HeroName string
	HeroRank int
}

// è‹±é›„éƒ½æœƒé£›
func (*Hero) Fly() {
	fmt.Println("I can fly.")
}

// å®šç¾©ä¸€å€‹æ­£å¸¸äººçµæ§‹
type Person struct {
	Name string
}

// æ­£å¸¸äººæœƒèµ°è·¯
func (p *Person) Walk() {
	fmt.Println("I can walk.")
	fmt.Println(p.Name)
}

func main() {
	var tony = &amp;Hero{
		Person:   &amp;Person{"Tony Stark"},
		HeroName: "Iron Man",
		HeroRank: 1}

	tony.Walk() // ç­‰æ–¼ tony.Person.Walk()
	tony.Fly()
}
</code></pre>
<h3 id="å…§åµŒçµæ§‹æ¬„ä½åŒå"><a class="header" href="#å…§åµŒçµæ§‹æ¬„ä½åŒå">å…§åµŒçµæ§‹æ¬„ä½åŒå</a></h3>
<p>ç•¶æœ‰å¤šå€‹å…§åµŒçµæ§‹æ™‚ï¼Œå°±æœ‰å¯èƒ½ç™¼ç”Ÿæ¬„ä½åŒåçš„å•é¡Œã€‚æˆ‘å€‘ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ç¯„ä¾‹ï¼Œè¶…ç´šè‹±é›„ä¹Ÿæœƒæƒ³é¤Šä¸€éš»å¯µç‰©ï¼Œé€™å¾ˆåˆç†çš„ã€‚å› æ­¤ï¼Œæˆ‘å€‘å°±åŠ å…¥ä¸€å€‹å¯µç‰©çµæ§‹:</p>
<pre><code class="language-go">// å®šç¾©ä¸€å€‹è‹±é›„çµæ§‹
type Hero struct {
	*Person
	*Pet
	HeroName string
	HeroRank int
}

// å®šç¾©ä¸€å€‹æ­£å¸¸äººçµæ§‹
type Person struct {
	Name string
}

// å®šç¾©ä¸€å€‹å¯µç‰©çµæ§‹
type Pet struct {
	Name string
}

func main() {
	var tony = &amp;Hero{
		Person:   &amp;Person{"Tony Stark"},
		Pet:   &amp;Pet{"Pepper"},
		HeroName: "Iron Man",
		HeroRank: 1}

	fmt.Printf("%s\n", tony.Name)
}
</code></pre>
<p>ç”±æ–¼ Person å’Œ Parner éƒ½æœ‰ Name é€™å€‹æ¬„ä½ï¼Œç›´æ¥å«ç”¨ tony.Name å°±æœƒç”¢ç”Ÿè¡çªï¼Œç·¨è­¯å™¨æœƒé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯:</p>
<pre><code>./main.go:40:25: ambiguous selector tony.Name
</code></pre>
<h3 id="å…§åµŒå…¶ä»–å‹åˆ¥"><a class="header" href="#å…§åµŒå…¶ä»–å‹åˆ¥">å…§åµŒå…¶ä»–å‹åˆ¥</a></h3>
<p>äº‹å¯¦ä¸Šï¼Œå¯ä»¥è¢«å…§åµŒçš„å‹åˆ¥ä¸åªæœ‰çµæ§‹ï¼Œä¹Ÿå¯ä»¥æ˜¯åŸºæœ¬å‹åˆ¥ï¼Œç¯„ä¾‹å¦‚ä¸‹:</p>
<pre><code class="language-go">type Data struct {
	int
	string
	float32
	bool
}

func main() {
	var data = &amp;Data{1, "Iron Man", 1.2, true}
	fmt.Println(*data)
	fmt.Printf("%+v \n", *data)
}
</code></pre>
<h2 id="interfaceçš„ä½¿ç”¨è¦æ»¿è¶³2å€‹æ¢ä»¶æ‰æœ‰æ„ç¾©"><a class="header" href="#interfaceçš„ä½¿ç”¨è¦æ»¿è¶³2å€‹æ¢ä»¶æ‰æœ‰æ„ç¾©">interfaceçš„ä½¿ç”¨è¦æ»¿è¶³2å€‹æ¢ä»¶æ‰æœ‰æ„ç¾©ï¼š</a></h2>
<ol>
<li>å¯¦ç¾äº†interfaceçš„å¹¾å€‹structæ˜¯ç›¸ä¼¼é—œç³»ï¼ˆæ¯”å¦‚dockerå’Œkvméƒ½æ˜¯è™›æ“¬æ©Ÿï¼‰ã€å¹³ç´šçš„ï¼Œä¸¦ä¸”è¼¸å…¥è¼¸å‡ºåƒæ•¸å®Œå…¨ä¸€è‡´ã€‚ï¼ˆé€™é»æ˜¯interfaceçš„æœ¬è³ªï¼Œèƒ½å¯¦ç¾interfaceçš„è‚¯å®šæ˜¯æ»¿è¶³é€™å€‹æ¢ä»¶ï¼‰</li>
<li>åœ¨æ¥­å‹™é‚è¼¯ä¸Šï¼Œèª¿ç”¨å¯¦ç¾interfaceçš„structæ˜¯ä¸ç¢ºå®šçš„ï¼Œæ˜¯é€šéæŸç¨®æ–¹å¼å‚³éé€²ä¾†ï¼Œè€Œä¸æ˜¯é †åºçš„æ¥­å‹™é‚è¼¯ï¼Œæ¯”å¦‚structAã€structBã€structCå¦‚æœæ˜¯æœ‰é †åºçš„å‰‡æ˜¯éŒ¯èª¤çš„ï¼Œä¸‹é¢é€™æ¨£æ˜¯éŒ¯èª¤çš„ï¼š</li>
</ol>
<pre><code class="language-go">func main() {
    var i interfaceX
    i = &amp;structA{...}
    i.Add()
    i = &amp;structB{...}
    i.Add()
    i = &amp;structC{...}
    i.Add()
}
</code></pre>
<p>é€™æ¨£é‚è¼¯æ˜¯æ­£ç¢ºçš„ï¼š</p>
<pre><code class="language-go">var i interfaceX
switch opt {
case "A":
    i = &amp;structA{}
case "B":
    i = &amp;structB{}
case "C":
    i = &amp;structC{}
}
i.Add()
i.Del()
</code></pre>
<p>å°±æ˜¯èªªèª¿ç”¨è€…å°æ–¼å¯¦ç¾interfaceçš„structæ˜¯æ ¹æ“šæŸå€‹åƒæ•¸ï¼ˆé€šéAPIå‚³ééä¾†ï¼Œæˆ–è€…é…ç½®æ–‡ä»¶å‚³ééä¾†ï¼Œæˆ–è€…etcdå‚³ééä¾†ï¼‰ä¾†é¸æ“‡æŸå€‹structï¼Œé€™ç¨®é‚è¼¯æ‰é©ç”¨interfaceã€‚è€Œå¦‚æœç¨‹åºé‚è¼¯æ˜¯è¢«èª¿ç”¨è€…ä¾æ¬¡åŸ·è¡Œï¼Œå‰‡ä¸é©ç”¨interfaceã€‚</p>
<p>ç¸½çµé©ç”¨interfaceçš„èª¿ç”¨è€…æ¥­å‹™é‚è¼¯ï¼ˆå½ä»£ç¢¼ï¼‰ï¼š</p>
<pre><code class="language-go">type I interface {
    ...
}

var i I
switch opt {    //opté€šéæŸç¨®æ–¹å¼å‚³éé€²ä¾†ï¼Œè€Œä¸æ˜¯å¯«æ­»
case "A":
    i = &amp;structA{...}
case "B":
    i = &amp;structB{...}
case "C":
    i = &amp;structC{...}
default:
    errors.New("not support")
</code></pre>
<p>interfaceä½¿ç”¨èµ·ä¾†æœ‰ç„¡æ•¸ç¨®è®Šå½¢æ–¹å¼ï¼Œä½†ç„¡è«–æ˜¯é‚£ç¨®ï¼Œéƒ½è¦ç¬¦åˆä¸Šé¢èªªçš„å¹³è¡Œé¸ä¸€çš„æ¥­å‹™é‚è¼¯ã€‚</p>
<h2 id="go-interfaceä½¿ç”¨å ´æ™¯"><a class="header" href="#go-interfaceä½¿ç”¨å ´æ™¯"><strong>go interfaceä½¿ç”¨å ´æ™¯</strong></a></h2>
<p>ä»€éº¼æ˜¯go æ¥å£å‘¢ï¼Ÿå­¸ç¿’éC++ï¼Œä¸€å®šçŸ¥é“C++ çš„å¤šæ…‹å¯¦ç¾ï¼Œè€ŒGolang ä¸­ å¤šæ…‹ç‰¹æ€§ä¸»è¦æ˜¯é€šéæ¥å£ä¾†é«”ç¾çš„ã€‚æ¥å£æ˜¯ç”±å…©éƒ¨åˆ†çµ„æˆï¼šä¸€å€‹æ–¹æ³•é›†åˆï¼Œä»¥åŠä¸€å€‹é¡å‹ã€‚é¦–å…ˆæˆ‘å€‘å°‡é—œæ³¨é»é›†ä¸­åˆ°æ–¹æ³•é›†åˆä¸Šã€‚</p>
<ul>
<li>interface{} æ¥å£ä¸æ˜¯ä»»ä½•é¡å‹ï¼šå®ƒæ˜¯ä¸€å€‹ interface{} é¡å‹</li>
</ul>
<p>interface é¡å‹å¯ä»¥å®šç¾©ä¸€çµ„æ–¹æ³•ï¼Œä½†æ˜¯é€™äº›ä¸éœ€è¦å¯¦ç¾ã€‚
interface ä¸èƒ½åŒ…å«ä»»ä½•è®Šé‡ã€‚
åˆ°æŸå€‹è‡ªå®šç¾©é¡å‹(æ¯”å¦‚çµæ§‹é«” Phone)è¦ä½¿ç”¨çš„æ™‚å€™,åœ¨æ ¹æ“šå…·é«”æƒ…æ³æŠŠé€™äº›æ–¹æ³•å¯«å‡ºä¾†(å¯¦ç¾)ã€‚</p>
<pre><code class="language-go">type  æ¥å£å interface {
	method1ï¼ˆåƒæ•¸åˆ—è¡¨ï¼‰ è¿”å›å€¼åˆ—è¡¨
	method2ï¼ˆåƒæ•¸åˆ—è¡¨ï¼‰ è¿”å›å€¼åˆ—è¡¨
	...
}

type animal interface {
    Speakï¼ˆï¼‰ string
}
</code></pre>
<p>å®šç¾©ä¸€å€‹animal æ¥å£ï¼Œä¾›ä¸åŒé¡å‹çš„animal èª¿ç”¨ï¼Œä¸åŒçš„animalå¯ä»¥é€²è¡Œå†æ¬¡çš„å¯¦ç¾</p>
<pre><code class="language-go">package main

import "fmt"

type Animal interface {
	Speak() string
}

type Dog struct {
}

func (d Dog) Speak() string {
	return "Dog ï¼šæ±ªæ±ªæ±ªï¼Œåœ¨çœ‹å°±åƒäº†ä½ "
}

type Cat struct {
}

func (c Cat) Speak() string {
	return "Cat ï¼šå–µæ˜Ÿäººï¼Œ ä¸æƒ³ç†ä½ ï¼Œèµ°é–‹ï¼ï¼ï¼"
}

type Fish struct {
}

func (f Fish) Speak() string {
	return "Fish ï¼šé›–åœ¨æ°´è£¡ï¼Œä½†é¸æ“‡é€†æµè€Œä¸Šï¼Œçµ•ä¸éš¨æ³¢é€æµ"
}

type Bird struct {
}

func (b Bird) Speak() string {
	return "Birdï¼š ç•¶æˆ‘åƒé³¥é£›å¾€ä½ çš„å±±ï¼Œ æ‰“ç ´åŸæœ‰çš„æŸç¸›ï¼Œå‰µé€ æ–°çš„æ©Ÿé‡"
}

func main() {
	animals := []Animal{Dog{}, Cat{}, Fish{}, Bird{}}
	for _, animal := range animals {
		fmt.Println(animal.Speak())
	}
}
</code></pre>
<h2 id="difference-between-users-and-users-in-golang"><a class="header" href="#difference-between-users-and-users-in-golang">Difference between []*Users and *[]Users in Golang?</a></h2>
<pre><code class="language-go">package main

import (
	"fmt"
)

type Users struct {
	ID   int
	Name string
}

var (
	userList []Users
)

func main() {
	//Make the slice of Users
	userList = []Users{Users{ID: 43215, Name: "Billy"}}

	//Then pass the slice as a reference to some function
	myFunc(&amp;userList)

	fmt.Println(userList) // Outputs: [{1337 Bobby}]
}

//Now the function gets a pointer *[]Users that when changed, will affect the global variable "userList"
func myFunc(input *[]Users) {
	*input = []Users{Users{ID: 1337, Name: "Bobby"}}
}

</code></pre>
<pre><code class="language-go">package main

import (
	"fmt"
)

type Users struct {
	ID   int
	Name string
}

var (
	user1 Users
	user2 Users
)

func main() {
	//Make a couple Users:
	user1 = Users{ID: 43215, Name: "Billy"}
	user2 = Users{ID: 84632, Name: "Bobby"}

	//Then make a list of pointers to those Users:
	var userList []*Users = []*Users{&amp;user1, &amp;user2}

	//Now you can change an individual Users in that list.
	//This changes the variable user2:
	*userList[1] = Users{ID: 1337, Name: "Larry"}

	fmt.Println(user1) // Outputs: {43215 Billy}
	fmt.Println(user2) // Outputs: {1337 Larry}
}
</code></pre>
<h2 id="åœ¨-go-çœ‹-control-flow-çš„è¼”åŠ©å‡½å¼"><a class="header" href="#åœ¨-go-çœ‹-control-flow-çš„è¼”åŠ©å‡½å¼">åœ¨ Go çœ‹ control flow çš„è¼”åŠ©å‡½å¼</a></h2>
<p>å‡ºè™•: https://medium.com/@fcamel/%E5%9C%A8-go-%E7%9C%8B-control-flow-%E7%9A%84%E8%BC%94%E5%8A%A9%E5%87%BD%E5%BC%8F-7dfc07e88b86</p>
<p>çœ‹ C/C++ code çš„æ™‚å€™ï¼Œæˆ‘ç¿’æ…£è¼¸å‡º <code>__FILE__</code>, <code>__LINE__</code>, <code>__FUNCTION__</code> å¹«åŠ©çœ‹ control flowã€‚é€é C çš„å·¨é›†ï¼Œå¾ˆå®¹æ˜“å¯«å‡ºé«˜æ•ˆç‡çš„è¼”åŠ©å‡½å¼ã€‚</p>
<p>æˆ‘åœ¨ Go å¯«äº†é¡ä¼¼çš„å‡½å¼ <a href="https://github.com/fcamel/golang-practice/blob/master/utils/debug.go">Trace()</a>ã€‚ä½œæ³•æ˜¯å– runtime infoï¼Œæ•ˆç‡æ¯” C/C++ ç‰ˆæœ¬å·®ï¼Œå…§å®¹å¦‚ä¸‹:</p>
<pre><code class="language-go">func Trace(format string, a ...interface{}) { 
  function, file, line, _ := runtime.Caller(1) 
  info := fmt.Sprintf("DEBUG&gt; %s:%d %s:", path.Base(file), line,
                       runtime.FuncForPC(function).Name()) 
  msg := fmt.Sprintf(format, a...) 
  fmt.Println(info, msg)
}
</code></pre>
<pre><code class="language-go">package main

import (
	"github.com/fcamel/golang-practice/utils"
)

type myType struct {
}

func (t myType) hello() {
	utils.Trace("")
}

func foo() {
	utils.Trace("begin")
	defer utils.Trace("end")
	bar()
}

func bar() {
	utils.Trace("Hello %d", 101)
	var t myType
	t.hello()
}

func main() {
	foo()
}

</code></pre>
<p>åŸ·è¡Œçµæœ:</p>
<pre><code class="language-sh">$ go run cmd/trace/main.go
DEBUG&gt; main.go:15 main.foo: begin
DEBUG&gt; main.go:21 main.bar: Hello 101
DEBUG&gt; main.go:11 main.myType.hello:
DEBUG&gt; main.go:18 main.foo: end
</code></pre>
<p>ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œå¾ method å‘¼å« Trace() çš„æ™‚å€™ï¼Œç„¡æ³•è‡ªå‹•è£œä¸Š object çš„ addressã€‚è¦è‡ªå·±æ‰‹å‹•å¯«ï¼Œåƒæ˜¯é€™æ¨£:</p>
<pre><code class="language-sh">func (t myType) hello() {
  utils.Trace("%p", &amp;t)
}
</code></pre>
<p>æœ‰å¤šå€‹ objects å‘¼å«ä¸€æ¨£å‡½å¼çš„æ™‚å€™ï¼Œæœƒä¸å¤ªæ–¹ä¾¿ã€‚æˆ–è¨±å¤šç ”ç©¶ä¸€ä¸‹ <a href="https://golang.org/pkg/runtime/">runtime</a> çš„åŠŸèƒ½ï¼Œæœ‰æ©Ÿæœƒä½œåˆ°ï¼Ÿç­‰å—ä¸äº†çš„æ™‚å€™ï¼Œå†ç ”ç©¶çœ‹çœ‹ã€‚</p>
<pre><code class="language-sh">find . -name '*.go' -exec sed -i '/import/a\"github.com/fcamel/golang-practice/utils"' {} \;

find . -name '*.go' -exec gofmt -l -w {} \;

go mod tidy
</code></pre>
<hr />
<h1 id="golangå­¸ç¿’ç­†è¨˜"><a class="header" href="#golangå­¸ç¿’ç­†è¨˜">Golangå­¸ç¿’ç­†è¨˜</a></h1>
<p>å‡ºè™•: https://hackmd.io/Ku4_3XGMSAuRcFGxy8qTlA?both</p>
<h6 id="tags-rd1"><a class="header" href="#tags-rd1">tags: <code>RD1</code></a></h6>
<p>:::spoiler ç›®éŒ„
[TOC]
:::</p>
<h2 id="golangç‰¹é»"><a class="header" href="#golangç‰¹é»">Golangç‰¹é»</a></h2>
<p>ç‚ºä»€éº¼ Golang é©åˆåšç‚ºç¶²é å¾Œç«¯ç¨‹å¼çš„èªè¨€å‘¢ï¼Ÿ</p>
<p>ç”±æ–¼ Golang æœ‰ä»¥ä¸‹çš„å„ªé»ï¼š</p>
<ul>
<li>Golang æ˜“å­¸æ˜“ç”¨ï¼šGolang åŸºæœ¬ä¸Šæ˜¯å¼·åŒ–ç‰ˆçš„ C èªè¨€ï¼Œéƒ½ä»¥æ ¸å¿ƒèªæ³•çŸ­å°ç²¾è¦è‘—ç¨±</li>
<li>Golang æ˜¯éœæ…‹å‹åˆ¥èªè¨€ï¼šå¾ˆå¤šç¨‹å¼çš„éŒ¯èª¤åœ¨ç·¨è­¯æœŸå°±æœƒæŒ‘å‡ºä¾†ï¼Œç›¸å°æ˜“æ–¼é™¤éŒ¯</li>
<li>Golang ç·¨è­¯é€Ÿåº¦å¾ˆå¿«ï¼šå¸¶å‹•æ•´å€‹é–‹ç™¼çš„æµç¨‹æ›´å¿«é€Ÿ</li>
<li>Golang æ”¯æ´åƒåœ¾å›æ”¶ï¼šç¶²é ç¨‹å¼è¼ƒæ¥è¿‘æ‡‰ç”¨ç¨‹å¼ï¼Œè€Œéç³»çµ±ç¨‹å¼ï¼Œåƒåœ¾å›æ”¶åœ¨é€™å€‹æƒ…å¢ƒä¸‹ä¸ç®—ç¼ºé»ï¼›æ­¤å¤–ï¼Œä½¿ç”¨åƒåœ¾å›æ”¶å¯ç°¡åŒ–ç¨‹å¼ç¢¼</li>
<li>Golang å…§å»ºå…±æ™‚æ€§çš„èªæ³•ï¼šgoroutine æ¯”èµ·å‚³çµ±çš„åŸ·è¡Œç·’ (thread) ä¾†èªªè¼•é‡å¾—å¤šï¼Œåœ¨é«˜è² è¼‰æ™‚æ‰€éœ€é–‹éŠ·æ›´å°‘</li>
<li>Golang æ˜¯è·¨å¹³è‡ºçš„ï¼šåªè¦ç¨‹å¼ä¸­ä¸ç¢°åˆ° C å‡½å¼åº«ï¼Œåœ¨ Windows (æˆ– Mac) å¯«å¥½çš„ Golang ç¶²é ç¨‹å¼ï¼Œå¯ä»¥ä¸ç¶“ä¿®æ”¹å°±ç›´æ¥ç™¼å¸ƒåœ¨ GNU/Linux ä¼ºæœå™¨ä¸Š</li>
<li>Golang çš„å°ˆæ¡ˆä¸éœ€é¡å¤–çš„è¨­å®šæª”ï¼šåœ¨å°ˆæ¡ˆä¸­ï¼Œåªè¦æ”¾ Golang ç¨‹å¼ç¢¼å’Œä¸€äº› assets å³å¯é‹ä½œï¼Œæ‰€éœ€çš„å·¥å…·çš†å…§å»ºåœ¨ Golang ä¸»ç¨‹å¼ä¸­ï¼Œçœå»å­¸ç¿’å°ˆæ¡ˆè¨­ç½çš„åŠŸå¤«</li>
<li>Golang æ²’æœ‰æ­»ç¡¬çš„ç¨‹å¼æ¶æ§‹ï¼šç”¨ Golang å¯«ç¶²é ç¨‹å¼æ€ç¶­ä¸Šæ¥è¿‘å¾®æ¡†æ¶ (micro-framework)ï¼Œåªè¦å°‘æ•¸æ¨£æ¿ç¨‹å¼ç¢¼å°±å¯ä»¥å¯«å‡ºç¶²é ç¨‹å¼ï¼Œä¹Ÿä¸é™å®šå¯ç”¨çš„ç¬¬ä¸‰æ–¹å‡½å¼åº«</li>
</ul>
<p>ä½† Golang ä¸¦éå®Œç¾ç„¡ç¼ºï¼Œä»¥ä¸‹æ˜¯è¦è€ƒé‡çš„é»ï¼š</p>
<ul>
<li>Golang ä¸¦éå®Œæ•´çš„ç‰©ä»¶å°å‘ (object-oriented) èªè¨€ï¼Œé ‚å¤šæ˜¯åŸºæ–¼ç‰©ä»¶çš„ (object-based) èªè¨€</li>
<li>Golang çš„èªè¨€ç‰¹æ€§ç›¸å°å°‘ï¼šé€™æ˜¯ Golang æ™‚å¸¸è¢«æ”»æ“Šçš„é»ï¼Œé€™åªèƒ½é è‡ªå·±èª¿æ•´å¯«ç¨‹å¼çš„ç¿’æ…£</li>
<li>åœ¨ä¸€äº›æƒ…å¢ƒä¸‹ï¼ŒGolang ç¨‹å¼ç¢¼ç›¸å°ç¬¨æ‹™å†—é¤˜ï¼Œåƒæ˜¯æ’åº (sorting)</li>
</ul>
<h2 id="é–‹å§‹ä¸€å€‹å°ˆæ¡ˆ"><a class="header" href="#é–‹å§‹ä¸€å€‹å°ˆæ¡ˆ">é–‹å§‹ä¸€å€‹å°ˆæ¡ˆ</a></h2>
<ol>
<li>å®‰è£å¥½ go ä»¥åŠè¨­å®š $GOPATH ç’°å¢ƒ</li>
<li><a href="https://maiyang.me/post/2018-09-14-tips-vscode/">VSCodeè¨­ç½®</a></li>
<li>ç›®éŒ„çµæ§‹</li>
</ol>
<pre><code>--src æ”¾ç½®å°ˆæ¡ˆçš„åŸå§‹ç¢¼æª”æ¡ˆ
--pkg æ”¾ç½®ç·¨è­¯å¾Œç”Ÿæˆçš„åŒ… / åº«æª”æ¡ˆ
--bin æ”¾ç½®ç·¨è­¯å¾Œç”Ÿæˆçš„å¯åŸ·è¡Œæª”æ¡ˆ
</code></pre>
<ol start="3">
<li>mod</li>
</ol>
<pre><code>go mod init åˆå§‹åŒ–
go mod tidy æ•´ç†æ¨¡çµ„
</code></pre>
<ol start="4">
<li>æ¸¬è©¦å›‰(Ginã€Mysql)</li>
</ol>
<pre><code>go get github.com/gin-gonic/gin
go get github.com/go-sql-driver/mysql
</code></pre>
<p>main.go</p>
<pre><code class="language-go">package main

import (
	"github.com/gin-gonic/gin"
)

func main() {
	r := gin.Default()
	r.GET("/ping", func(c *gin.Context) {
		c.JSON(200, gin.H{
			"message": "pong",
		})
	})

	r.Run(":8000")
}
</code></pre>
<p>mysql.go</p>
<pre><code class="language-go">package main

import (
	"database/sql"
	_ "github.com/go-sql-driver/mysql"  //åªå¼•ç”¨è©²å¥—ä»¶çš„initå‡½æ•¸
)

func main() {
	db, err := sql.Open("mysql", "root:root@tcp(mysql)/test?charset=utf8")
	defer db.Close()

	//æ’å…¥è³‡æ–™,ä½¿ç”¨é è™•ç†é¿å…ç™¼ç”Ÿinjection
	stmt, err := db.Prepare("INSERT userinfo SET username=?,department=?,created=?")
	checkErr(err)

	_, err = stmt.Exec("astaxie", "ç ”ç™¼éƒ¨é–€", "2012-12-09")
	checkErr(err)
}

func checkErr(err error) {
	if err != nil {
		panic(err)
	}
}
</code></pre>
<blockquote>
<p>å…©è€…éƒ½ç‚º package main ä»£è¡¨ä»–å€‘æœ¬è³ªä¸Šæ˜¯ä¸€éš»ç¨‹å¼ åªæ˜¯åˆ†ç‚ºä¸åŒæª”æ¡ˆ
ä¸åŒçš„packageä¹‹é–“éœ€åˆ†ç‚ºä¸åŒè³‡æ–™å¤¾ï¼Œä¸¦äº’ç›¸å¼•ç”¨ï¼š "module_name/floder_name" ex.import router(åˆ¥å) "main/routes"
<a href="https://medium.com/skyler-record/go-%E5%AF%A6%E4%BD%9C-restful-api-2a32210adeaf">Go å¯¦ä½œ Restful API</a></p>
</blockquote>
<h2 id="goçš„è³‡æ–™å‹æ…‹"><a class="header" href="#goçš„è³‡æ–™å‹æ…‹">Goçš„è³‡æ–™å‹æ…‹</a></h2>
<p>Goçš„è³‡æ–™é¡åˆ¥ä¸€å…±åˆ†ç‚ºå››å¤§é¡:</p>
<ol>
<li>åŸºæœ¬å‹åˆ¥(Basic type): æ•¸å­—ã€å­—ä¸²ã€å¸ƒæ—å€¼</li>
<li>èšåˆå‹åˆ¥(Aggregate type): é™£åˆ—ã€çµæ§‹</li>
<li>åƒç…§å‹åˆ¥(Reference type): æŒ‡æ¨™ã€sliceã€mapã€functionã€channel</li>
<li>ä»‹é¢å‹åˆ¥(Interface type)</li>
</ol>
<h3 id="è®Šæ•¸å®£å‘Š"><a class="header" href="#è®Šæ•¸å®£å‘Š">è®Šæ•¸å®£å‘Š</a></h3>
<pre><code class="language-go">var a          // ä¸å®šå‹åˆ¥çš„è®Šæ•¸
var a int      // å®£å‘Šæˆ int
var msg string // å®£å‘Šæˆ string
var a int = 10 // åˆå§‹åŒ–åŒæ™‚å®£å‘Š
var a = 10     // æœƒè‡ªå‹•å¹«ä½ åˆ¤å®šç‚ºæ•´æ•¸å‹åˆ¥
var a, b int   // a è·Ÿ b éƒ½æ˜¯ intvar a, b = 0
var a int , b string
var a, b, c int = 1, 2, 3
var a, b, c = 1, 2, 3
var(
    a bool = false // è¨˜å¾—è¦ä¸åŒè¡Œï¼Œä¸ç„¶æœƒéŒ¯
    b int
    c = "hello"
)

// åœ¨å‡½æ•¸ä¸­ï¼Œã€Œ:=ã€ ç°¡æ½”è³¦å€¼èªå¥åœ¨æ˜ç¢ºé¡å‹çš„åœ°æ–¹ï¼Œå¯ä»¥æ›¿ä»£ var å®šç¾©ã€‚
//ã€Œ:=ã€ çµæ§‹ä¸èƒ½ä½¿ç”¨åœ¨å‡½æ•¸å¤–ï¼Œå‡½æ•¸å¤–çš„æ¯å€‹èªæ³•éƒ½å¿…é ˆä»¥é—œéµå­—é–‹å§‹ã€‚
// := åªèƒ½ç”¨åœ¨å®£å‘Š
var msg = "Hello World"

ç­‰æ–¼

msg := "Hello World" //è‡ªå‹•åˆ¤å®šå‹æ…‹

a := 0
a, b, c := 0, true, "tacolin" // é€™æ¨£å°±å¯ä»¥ä¸åŒå‹åˆ¥å¯«åœ¨åŒä¸€è¡Œ

_, b := 34, 35 // _ï¼ˆä¸‹åŠƒç·šï¼‰æ˜¯å€‹ç‰¹æ®Šçš„è®Šæ•¸åï¼Œä»»ä½•è³¦äºˆå®ƒçš„å€¼éƒ½æœƒè¢«ä¸Ÿæ£„ã€‚

</code></pre>
<h3 id="å¸ƒæ—å€¼"><a class="header" href="#å¸ƒæ—å€¼">å¸ƒæ—å€¼</a></h3>
<p>åœ¨Goä¸­
bool èˆ‡ int ä¸èƒ½ç›´æ¥è½‰æ›ï¼Œ<code>true</code>,<code>false</code> ä¸ç›´æ¥ç­‰æ–¼ 1 èˆ‡ 0</p>
<h3 id="æ•´æ•¸"><a class="header" href="#æ•´æ•¸">æ•´æ•¸</a></h3>
<div class="table-wrapper"><table><thead><tr><th>å‹æ…‹</th><th>æè¿°</th></tr></thead><tbody>
<tr><td>int8</td><td>8-bit signed integer</td></tr>
<tr><td>int16</td><td>16-bit signed integer</td></tr>
<tr><td>int32</td><td>32-bit signed integer</td></tr>
<tr><td>int64</td><td>64-bit signed integer</td></tr>
<tr><td>uint8</td><td>8-bit unsigned integer</td></tr>
<tr><td>uint16</td><td>16-bit unsigned integer</td></tr>
<tr><td>uint32</td><td>32-bit unsigned integer</td></tr>
<tr><td>uint64</td><td>64-bit unsigned integer</td></tr>
<tr><td>int</td><td>Both in and uint contain same size, either 32 or 64 bit.</td></tr>
<tr><td>uint</td><td>Both in and uint contain same size, either 32 or 64 bit.</td></tr>
<tr><td>rune</td><td>ç­‰åƒ¹ unit32 ï¼Œè¡¨ç¤ºä¸€å€‹Unicodeå­—ç¬¦</td></tr>
<tr><td>byte</td><td>ç­‰åƒ¹ uint8 ï¼Œè¡¨ç¤ºä¸€å€‹ASCIIå­—ç¬¦</td></tr>
<tr><td>uintptr</td><td>It is an unsigned integer type. Its width is not defined, but its can hold all the bits of a pointer value.</td></tr>
</tbody></table>
</div>
<h3 id="æµ®é»æ•¸"><a class="header" href="#æµ®é»æ•¸">æµ®é»æ•¸</a></h3>
<div class="table-wrapper"><table><thead><tr><th>å‹æ…‹</th><th>æè¿°</th></tr></thead><tbody>
<tr><td>float32</td><td>32-bit IEEE 754 floating-point number</td></tr>
<tr><td>float64</td><td>64-bit IEEE 754 floating-point number</td></tr>
</tbody></table>
</div>
<h3 id="è¤‡æ•¸"><a class="header" href="#è¤‡æ•¸">è¤‡æ•¸</a></h3>
<div class="table-wrapper"><table><thead><tr><th>å‹æ…‹</th><th>æè¿°</th></tr></thead><tbody>
<tr><td>complex64</td><td>Complex numbers which contain float32 as a real and imaginary component.</td></tr>
<tr><td>complex128</td><td>Complex numbers which contain float64 as a real and imaginary component.</td></tr>
</tbody></table>
</div>
<h3 id="å­—ä¸²-1"><a class="header" href="#å­—ä¸²-1">å­—ä¸²</a></h3>
<pre><code class="language-go">var mystr01 string = "\\r\\n"
ç­‰æ–¼
var mystr02 string = `\r\n`

è¼¸å‡ºï¼š\r\n
</code></pre>
<p><code>``</code> è¡¨ç¤ºä¸€å€‹å¤šè¡Œçš„å­—ä¸²</p>
<h3 id="é™£åˆ—"><a class="header" href="#é™£åˆ—">é™£åˆ—</a></h3>
<h4 id="é™£åˆ—-1"><a class="header" href="#é™£åˆ—-1">é™£åˆ—</a></h4>
<pre><code class="language-go">// ç¬¬ä¸€ç¨®æ–¹æ³•
var arr = [3]int{1,2,3} //%T = [3]int

// ç¬¬äºŒç¨®æ–¹æ³•
arr := [3]int{1,2,3}

// ç¬¬ä¸‰ç¨®æ–¹æ³•
arr := [...]int{1,2,3} // å¯ä»¥çœç•¥é•·åº¦è€Œæ¡ç”¨`...`çš„æ–¹å¼ï¼ŒGo æœƒè‡ªå‹•æ ¹æ“šå…ƒç´ å€‹æ•¸ä¾†è¨ˆç®—é•·åº¦

//æ³¨æ„é¡å‹ç‚ºå­—ä¸²æ™‚
var arr = [3]string{
    "first",
    "second",
    "third", //æœ€å¾Œé€™è£¡è¦æœ‰é€—è™Ÿ
}
</code></pre>
<h4 id="åˆ‡ç‰‡"><a class="header" href="#åˆ‡ç‰‡">åˆ‡ç‰‡</a></h4>
<p>ç‚ºä¸€å€‹å·¦é–‰å³é–‹çš„çµæ§‹</p>
<pre><code class="language-go">//å®£å‘Šä¸€å€‹ç©ºçš„åˆ‡ç‰‡
var arr []int    //é»˜èªå€¼ç‚ºnil
</code></pre>
<p>é‹ç”¨<code>make( []Type, size, cap )</code>æŒ‡å®šé¡å‹ã€é•·åº¦ã€å®¹é‡ï¼Œ
å»ºç«‹ä¸€å€‹å®¹é‡ç‚º10ï¼Œç›®å‰é•·åº¦ç‚º3çš„åˆ‡ç‰‡ï¼š</p>
<pre><code class="language-go">make([]int, 3, 10)    //make( []Type, size, cap )
</code></pre>
<ul>
<li>è¼¸å‡º</li>
</ul>
<pre><code class="language-go">arr[0:2] 
//--&gt;[1 2] çµå°¾ç´¢å¼•ä¸ç®—åœ¨å…§
</code></pre>
<ul>
<li>append</li>
</ul>
<pre><code class="language-go">myarr := []int{1}
// è¿½åŠ ä¸€å€‹å…ƒç´ 
myarr = append(myarr, 2)
// è¿½åŠ å¤šå€‹å…ƒç´ 
myarr = append(myarr, 3, 4)
// è¿½åŠ ä¸€å€‹åˆ‡ç‰‡, ... è¡¨ç¤ºè§£åŒ…ï¼Œä¸èƒ½çœç•¥
myarr = append(myarr, []int{7, 8}...)
// åœ¨é–‹é ­æ’å…¥å…ƒç´ 0
myarr = append([]int{0}, myarr[0:]...) //[0:]ç‚ºé–‹é ­çš„è©±å¯çœç•¥
// åœ¨ä¸­é–“æ’å…¥ä¸€å€‹åˆ‡ç‰‡(å…©å€‹å…ƒç´ )
myarr = append(myarr[:5], append([]int{5, 6}, myarr[5:]...)...)

fmt.Println(myarr) //--&gt; [0 1 2 3 4 7 8]
</code></pre>
<ul>
<li>copy</li>
</ul>
<pre><code class="language-go">slice1 := []int{1,2,3}
slice2 := make([]int, 2)
copy(slice2, slice1) 
fmt.Println(slice1, slice2)
// ç”±æ–¼slice2å®¹é‡åªæœ‰2æ‰€ä»¥åªæœ‰slice1[0:2]è¢«è¤‡è£½éå»
// è¼¸å‡ºçµæœ: [1 2 3] [1 2]
</code></pre>
<h3 id="å­—å…¸"><a class="header" href="#å­—å…¸">å­—å…¸</a></h3>
<ul>
<li>å®£å‘Š</li>
</ul>
<pre><code class="language-go">// ç¬¬ä¸€ç¨®æ–¹æ³•
var scores map[string]int = map[string]int{"english": 80, "chinese": 85}

// ç¬¬äºŒç¨®æ–¹æ³•
scores := map[string]int{"english": 80, "chinese": 85}

// ç¬¬ä¸‰ç¨®æ–¹æ³•
scores := make(map[string]int)
scores["english"] = 80
scores["chinese"] = 85
</code></pre>
<ul>
<li>æ–°å¢ / è®€å– / æ›´æ–° / åˆªé™¤</li>
</ul>
<pre><code class="language-go">scores["math"] = 95
scores["math"] = 100 //è‹¥å·²å­˜åœ¨ï¼Œç›´æ¥æ›´æ–°
delete( scores, "math" )
fmt.Println(scores["math"]) //ä¸å­˜åœ¨å‰‡è¿”å›value-typeçš„0å€¼
//--&gt;100
</code></pre>
<ul>
<li>åˆ¤æ–·æ˜¯å¦å­˜åœ¨å­—å…¸è£¡</li>
</ul>
<pre><code class="language-go">elements := map[string]string{
    "H": "Hydrogen",
    "He": "Helium",
    "Li": "Lithium",
    "Be": "Beryllium"
}

value, isExist := elements["H"];
// value = Hydrogen, isExist = true

value, isExist := elements["A"];
// value = "", isExist = false
</code></pre>
<ul>
<li>å·¢ç‹€å­—å…¸</li>
</ul>
<pre><code class="language-go">elements := map[string]map[string]string{
    "H": map[string]string{
        "name":"Hydrogen",
        "state":"gas",
    },
    "He": map[string]string{
        "name":"Helium",
        "state":"gas",
    },
    "Li": map[string]string{
        "name":"Lithium",
        "state":"solid",
    },
    "Be": map[string]string{
        "name":"Beryllium",
        "state":"solid",
    },
    "B":  map[string]string{
        "name":"Boron",
        "state":"solid",
    },
    "C":  map[string]string{
        "name":"Carbon",
        "state":"solid",
    },
    "N":  map[string]string{
        "name":"Nitrogen",
        "state":"gas",
    },
    "O":  map[string]string{
        "name":"Oxygen",
        "state":"gas",
    },
    "F":  map[string]string{
        "name":"Fluorine",
        "state":"gas",
    },
    "Ne":  map[string]string{
        "name":"Neon",
        "state":"gas",
    },
}

if el, ok := elements["Li"]; ok {
    fmt.Println(el["name"], el["state"])
}
</code></pre>
<h3 id="struct-1"><a class="header" href="#struct-1">Struct</a></h3>
<p>è‡ªå®šç¾©å‹åˆ¥ï¼Œstructè£¡å¯ä»¥æ”¾structå‹åˆ¥çš„ç‰©ä»¶
<a href="https://ithelp.ithome.com.tw/articles/10188100">åƒè€ƒè³‡æ–™</a></p>
<pre><code class="language-go">type person struct {
    name string
    height int
}
</code></pre>
<h4 id="json--struct"><a class="header" href="#json--struct">json &amp; struct</a></h4>
<ul>
<li>å®£å‘Š
Struct fields must start with upper case letter (exported) for the JSON package to see their value.</li>
</ul>
<pre><code class="language-go">type Message struct {
	Sender  string `json:"sender"`
	RoomId  string `json:"roomId"`
	Content string `json:"content"`
	Time    string `json:"time"`
}
</code></pre>
<ul>
<li>æ”¾å…¥è³‡æ–™ç”¢ç”Ÿ<code>[]byte</code> æ ¼å¼çš„ json è³‡æ–™</li>
</ul>
<pre><code class="language-go">jsonMessage, _ := json.Marshal(&amp;Message{Sender: c.id, RoomId: c.roomId, Content: string(message), Time: time})
</code></pre>
<ul>
<li>è§£å›structç‰©ä»¶</li>
</ul>
<pre><code class="language-go">var msg Message
json.Unmarshal(message, &amp;msg)
</code></pre>
<h3 id="æŒ‡æ¨™-1"><a class="header" href="#æŒ‡æ¨™-1">æŒ‡æ¨™</a></h3>
<p>è·ŸCèªè¨€ä¸€æ¨£ï¼ŒGoèªè¨€ä¹Ÿæœ‰æŒ‡æ¨™ã€‚</p>
<pre><code class="language-go">func zero( x *int ) {
    *x = 0
}

func main() {
    x := 5
    zero( &amp;x )
    fmt.Println( x )
}
</code></pre>
<h3 id="ä»‹é¢-interface"><a class="header" href="#ä»‹é¢-interface">ä»‹é¢ interface</a></h3>
<pre><code class="language-go">package main

import "fmt"
import "math"

type geometry interface {
    area() float64
    perimeter() float64
}

type square struct {
    width, height float64
}
type circle struct {
    radius float64
}

func (s square) area() float64 {
    return s.width * s.height
}
func (s square) perimeter() float64 {
    return 2*s.width + 2*s.height
}

func (c circle) area() float64 {
    return math.Pi * c.radius * c.radius
}
func (c circle) perimeter() float64 {
    return 2 * math.Pi * c.radius
}

func measure(g geometry) {
    fmt.Println(g)
    fmt.Println(g.area())
    fmt.Println(g.perimeter())
}

func main() {
    s := square{width: 3, height: 4}
    c := circle{radius: 5}

    measure(s)
    measure(c)
}
</code></pre>
<h2 id="æ§åˆ¶èªå¥"><a class="header" href="#æ§åˆ¶èªå¥">æ§åˆ¶èªå¥</a></h2>
<h3 id="è¿´åœˆ"><a class="header" href="#è¿´åœˆ">è¿´åœˆ</a></h3>
<h4 id="for"><a class="header" href="#for">for</a></h4>
<p>Goåªæœ‰ä¸€ç¨®è¿´åœˆé—œéµå­—ï¼Œå°±æ˜¯for</p>
<pre><code class="language-go">func main() {
    sum := 0
    for i := 0; i &lt; 10; i++ {
        sum += i
    }
    fmt.Println(sum)
}
</code></pre>
<p>è·Ÿ C æˆ–è€… Java ä¸­ä¸€æ¨£ï¼Œå¯ä»¥è®“å‰ç½®ã€å¾Œç½®èªå¥ç‚ºç©ºã€‚</p>
<pre><code class="language-go">func main() {
    sum := 1
    for ; sum &lt; 1000; {
        sum += sum
    }
    fmt.Println(sum)
}
</code></pre>
<p>åŸºæ–¼æ­¤å¯ä»¥çœç•¥åˆ†è™Ÿï¼šC çš„ while åœ¨ Go ä¸­å«åš ã€Œforã€ã€‚</p>
<pre><code class="language-go">func main() {
    sum := 1
    for sum &lt; 1000 {
        sum += sum
    }
    fmt.Println(sum)
}
</code></pre>
<p>å¦‚æœçœç•¥äº†è¿´åœˆæ¢ä»¶ï¼Œè¿´åœˆå°±ä¸æœƒçµæŸï¼Œå› æ­¤å¯ä»¥ç”¨æ›´ç°¡æ½”åœ°å½¢å¼è¡¨é”ç„¡çª®è¿´åœˆã€‚</p>
<pre><code class="language-go">func main() {
    for {
        fmt.Println("Hello World")
    }
}
</code></pre>
<h4 id="é™£åˆ—å°‹è¨ª"><a class="header" href="#é™£åˆ—å°‹è¨ª">é™£åˆ—å°‹è¨ª</a></h4>
<p>å¯ä»¥é€™æ¨£å°‹è¨ª</p>
<pre><code class="language-go">var x [4]float64{ 23, 45, 33, 21 }
var total float64 = 0
for i := 0; i &lt; 4; i++ {
    total += x[i]
}
fmt.Println( total / float64(4))
</code></pre>
<p>ä½¿ç”¨<code>len</code>ç²å–é™£åˆ—å…ƒç´ æ•¸é‡</p>
<pre><code class="language-go">var x [4]float64{ 23, 45, 33, 21 }
var total float64 = 0
for i := 0; i &lt; len(x); i++ {
    total += x[i]
}
fmt.Println( total / float64(len(x)))
</code></pre>
<p>æ›´ç²¾ç°¡ä¸€é»</p>
<pre><code class="language-go">var x [4]float64{ 23, 45, 33, 21 }
var total float64 = 0

for i, value := range x {
    total += value
}
fmt.Println( total / float64(len(x)))
</code></pre>
<p>forè¿´åœˆå‰é¢çš„ç¬¬ä¸€å€‹è®Šæ•¸æ„ç¾©ç‚ºé™£åˆ—ç´¢å¼•(index),è€Œå¾Œé¢è®Šæ•¸ä»£è¡¨è©²ç´¢å¼•å€¼æ‰€ä»£è¡¨çš„é™£åˆ—å€¼ã€‚ä»¥ä¸Šå¯«æ³•æœƒå‡ºéŒ¯ï¼Œç”±æ–¼Goä¸å…è¨±æ²’æœ‰ä½¿ç”¨çš„è®Šæ•¸å‡ºç¾åœ¨ç¨‹å¼ç¢¼ä¸­,è¿´åœˆçš„iè®Šæ•¸æˆ‘å€‘ä½¿ç”¨ä½”ä½ç¬¦(_)æ›¿ä»£ã€‚</p>
<pre><code class="language-go">func main() {
    var x [4]float64{ 23, 45, 33, 21 }
    var total float64 = 0

    for _, value := range x {
        total += value
    }
    fmt.Println( total / float64(len(x)))
}
</code></pre>
<h3 id="åˆ†æ”¯-breakcontinutegoto"><a class="header" href="#åˆ†æ”¯-breakcontinutegoto">åˆ†æ”¯ breakã€continuteã€goto</a></h3>
<h4 id="break"><a class="header" href="#break">break</a></h4>
<p>å¯ä»¥åˆ©ç”¨breakæå‰é€€å‡ºå¾ªç’°ã€‚</p>
<pre><code class="language-go">func main() {
    for i := 0; i &lt; 10; i++ {
        if i &gt; 5 {
            break       
        }
        fmt.Println(i)
    }
}
</code></pre>
<p>å¦‚æœæœ‰å¤šé‡è¿´åœˆï¼Œå¯ä»¥æŒ‡å®šè¦è·³å‡ºå“ªä¸€å€‹è¿´åœˆï¼Œä½†éœ€è¦æŒ‡å®šæ¨™ç±¤ã€‚</p>
<pre><code class="language-go">func main() {
outer: // æ¨™ç±¤åœ¨æ­¤
    for j := 0; j &lt; 5; j++ {
        for i := 0; i &lt; 10; i++ {
            if i &gt; 6 {
                break outer 
            }
            fmt.Println(i)
        }
    }
}
</code></pre>
<h4 id="continute"><a class="header" href="#continute">continute</a></h4>
<p>continueå¿½ç•¥ä¹‹å¾Œçš„ç¨‹å¼ç¢¼ï¼Œç›´æ¥åŸ·è¡Œä¸‹ä¸€æ¬¡è¿­ä»£ã€‚</p>
<pre><code class="language-go">func main() {
    for i := 1; i &lt;= 10; i++ {
        if i &lt; 6 {
            continue
        }
        fmt.Println(i)
    }
}
</code></pre>
<p>åŒæ¨£çš„å¦‚æœæœ‰å¤šé‡è¿´åœˆï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ¨™ç±¤ã€‚</p>
<pre><code class="language-go">func main() {
outer: // æ¨™ç±¤åœ¨æ­¤
    for i := 1; i &lt; 10; i++ {
        for j := 1; j &lt; 10; j++ {
            if i == j {
                continue outer
            }
            fmt.Println( "i: ", i, " j: ", j );
        }
    }
}
</code></pre>
<h4 id="goto"><a class="header" href="#goto">goto</a></h4>
<p>Go èªè¨€è·Ÿ C èªè¨€ä¸€æ¨£ä¹Ÿæœ‰ã€Œ goto ã€ï¼Œä½†æ˜¯ä¸å»ºè­°ä½¿ç”¨ï¼Œæœƒè®“ç¨‹å¼çš„çµæ§‹è®Šå¾—å¾ˆç³Ÿç³•ã€‚</p>
<pre><code class="language-go">func main() {
    i := 0
HERE:
    fmt.Print(i)
    i++
    if i &lt; 10 {
        goto HERE
    }
}
</code></pre>
<h3 id="deferpanicrecover-1"><a class="header" href="#deferpanicrecover-1">deferã€panicã€recover</a></h3>
<blockquote>
<p>æ­¤ç¯„ä¾‹æ–‡ç« å–è‡ª<a href="https://openhome.cc/Gossip/Go/DeferPanicRecover.html">openhome.cc</a></p>
</blockquote>
<p>å°±è¨±å¤šç¾ä»£èªè¨€è€Œè¨€ï¼Œä¾‹å¤–è™•ç†æ©Ÿåˆ¶æ˜¯åŸºæœ¬ç‰¹æ€§ä¹‹ä¸€ï¼Œç„¶è€Œï¼Œä¾‹å¤–è™•ç†æ˜¯å¥½æ˜¯å£ï¼Œä¸€ç›´ä»¥ä¾†å­˜åœ¨è‘—å„ç¨®ä¸åŒçš„æ„è¦‹ï¼Œåœ¨ Go èªè¨€ä¸­ï¼Œæ²’æœ‰ä¾‹å¤–è™•ç†æ©Ÿåˆ¶ï¼Œå–è€Œä»£ä¹‹çš„ï¼Œæ˜¯é‹ç”¨ deferã€panicã€recover ä¾†æ»¿è¶³é¡ä¼¼çš„è™•ç†éœ€æ±‚ã€‚</p>
<h4 id="defer"><a class="header" href="#defer">defer</a></h4>
<p>åœ¨ Go èªè¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ defer æŒ‡å®šæŸå€‹å‡½å¼å»¶é²åŸ·è¡Œï¼Œé‚£éº¼å»¶é²åˆ°å“ªå€‹æ™‚æ©Ÿï¼Ÿç°¡å–®ä¾†èªªï¼Œåœ¨å‡½å¼ returnèªå¥ä¹‹å¾Œæº–å‚™è¿”å›å‘¼å«çš„å‡½å¼ä¹‹å‰ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å»¶é²æ•ˆæœ</li>
</ul>
<pre><code class="language-go">func myfunc() {
    fmt.Println("B")
}

func main() {
    defer myfunc()
    fmt.Println("A")
}
</code></pre>
<p>è¼¸å‡º</p>
<pre><code class="language-go">A
B
</code></pre>
<ul>
<li>å¯åœ¨è¿”å›ä¹‹å‰ä¿®æ”¹è¿”å›å€¼</li>
</ul>
<pre><code class="language-go">package main

import "fmt"

func Triple(n int) (r int) {
	defer func() {
		r += n // ä¿®æ”¹è¿”å›å€¼
	}()

	return n + n // &lt;=&gt; r = n + n; return
}

func main() {
	fmt.Println(Triple(5))
}
</code></pre>
<p>è¼¸å‡º</p>
<pre><code>15
</code></pre>
<ul>
<li>è®Šæ•¸çš„å¿«ç…§</li>
</ul>
<pre><code class="language-go">func main() {
    name := "go"
    defer fmt.Println(name) // è®Šæ•¸nameçš„å€¼è¢«è¨˜ä½äº†ï¼Œæ‰€ä»¥æœƒè¼¸å‡ºgo

    name = "python"
    fmt.Println(name)      // è¼¸å‡º: python
}
</code></pre>
<p>è¼¸å‡º</p>
<pre><code>python
go
</code></pre>
<ul>
<li>æ‡‰ç”¨</li>
</ul>
<ol>
<li>ååºèª¿ç”¨
å¦‚æœæœ‰å¤šå€‹å‡½å¼è¢« deferï¼Œé‚£éº¼åœ¨å‡½å¼ return å‰ï¼Œæœƒä¾ defer çš„ç›¸åé †åºåŸ·è¡Œï¼Œä¹Ÿå°±æ˜¯ LIFOï¼Œä¾‹å¦‚ï¼š</li>
</ol>
<pre><code class="language-go">package main

import "fmt"

func deferredFunc1() {
    fmt.Println("deferredFunc1")
}

func deferredFunc2() {
    fmt.Println("deferredFunc2")
}

func main() {
    defer deferredFunc1()
    defer deferredFunc2()
    fmt.Println("Hello, ä¸–ç•Œ")
}

// è¼¸å‡ºçµæœ:
Hello, ä¸–ç•Œ
deferredFunc2
deferredFunc1
</code></pre>
<ol start="2">
<li>defer èˆ‡ return</li>
</ol>
<pre><code class="language-go">func f() {
    r := getResource()  //0ï¼Œç²å–è³‡æº
    ......
    if ... {
        r.release()  //1ï¼Œé‡‹æ”¾è³‡æº
        return
    }
    ......
    if ... {
        r.release()  //2ï¼Œé‡‹æ”¾è³‡æº
        return
    }
    ......
    r.release()  //3ï¼Œé‡‹æ”¾è³‡æº
    return


}
</code></pre>
<p>ä½¿ç”¨ defer å¾Œï¼Œä¸è«–åœ¨å“ª return éƒ½æœƒåŸ·è¡Œ defer å¾Œæ–¹çš„å‡½æ•¸ï¼Œå¦‚æ­¤ä¾¿ä¸ç”¨åœ¨æ¯å€‹returnå‰å¯«ä¸Š<code>r.release()</code></p>
<pre><code class="language-go">func f() {
    r := getResource()  //0ï¼Œç²å–è³‡æº

    defer r.release()  //1ï¼Œé‡‹æ”¾è³‡æº
    ......
    if ... {
        ...
        return
    }
    ......
    if ... {
        ...
        return
    }
    ......
    return
}
</code></pre>
<p>ä»¥ä¸‹æ˜¯æ¸…é™¤è³‡æºçš„ç¯„ä¾‹:</p>
<pre><code class="language-go">package main

import (
    "fmt"
    "os"
)

func main() {
    f, err := os.Open("/tmp/dat")
    if err != nil {
        fmt.Println(err)
        return;
    }

    defer func() { // å»¶é²åŸ·è¡Œï¼Œè€Œä¸”å‡½å¼ return å¾Œä¸€å®šæœƒåŸ·è¡Œ
        if f != nil {
            f.Close()
        }
    }()

    b1 := make([]byte, 5)
    n1, err := f.Read(b1)
    if err != nil {
        fmt.Printf("%d bytes: %s\n", n1, string(b1))
        // è™•ç†è®€å–çš„å…§å®¹....
    }
}

</code></pre>
<h3 id="panic-ææ…Œä¸­æ–·-1"><a class="header" href="#panic-ææ…Œä¸­æ–·-1">panic ææ…Œä¸­æ–·</a></h3>
<p>å¦‚æœåœ¨å‡½å¼ä¸­åŸ·è¡Œ panicï¼Œé‚£éº¼å‡½å¼çš„æµç¨‹å°±æœƒä¸­æ–·ï¼Œè‹¥ A å‡½å¼å‘¼å«äº† B å‡½å¼ï¼Œè€Œ B å‡½å¼ä¸­å‘¼å«äº† panicï¼Œé‚£éº¼ B å‡½å¼æœƒå¾å‘¼å«äº† panic çš„åœ°æ–¹ä¸­æ–·ï¼Œè€Œ A å‡½å¼ä¹Ÿæœƒå¾å‘¼å«äº† B å‡½å¼çš„åœ°æ–¹ä¸­æ–·ï¼Œè‹¥æœ‰æ›´æ·±å±¤çš„å‘¼å«éˆï¼Œpanic çš„æ•ˆæ‡‰ä¹Ÿæœƒä¸€è·¯å¾€å›å‚³æ’­ã€‚</p>
<pre><code class="language-go">package main

import (
    "fmt"
    "os"
)

func check(err error) {
    if err != nil {
        panic(err)
    }
}

func main() {
    f, err := os.Open("/tmp/dat")
    check(err)

    defer func() {
        if f != nil {
            f.Close()
        }
    }()

    b1 := make([]byte, 5)
    n1, err := f.Read(b1)
    check(err)

    fmt.Printf("%d bytes: %s\n", n1, string(b1))
}
</code></pre>
<p>å¦‚æœåœ¨é–‹å•Ÿæª”æ¡ˆæ™‚ï¼Œå°±ç™¼ç”Ÿäº†éŒ¯èª¤ï¼Œå‡è¨­é€™æ˜¯åœ¨ä¸€å€‹å¾ˆæ·±çš„å‘¼å«å±¤æ¬¡ä¸­ç™¼ç”Ÿï¼Œè‹¥ä½ ç›´æ¥æƒ³æ’°å¯«ç¨‹å¼ï¼Œå°‡ os.Open çš„ error é€å±¤å‚³å›ï¼Œé‚£æœƒæ˜¯ä¸€ä»¶å¾ˆéº»ç…©çš„äº‹ï¼Œæ­¤æ™‚ç›´æ¥ç™¼å‡º panicï¼Œå°±å¯ä»¥é”åˆ°æƒ³è¦çš„ç›®çš„ã€‚</p>
<h3 id="recover"><a class="header" href="#recover">recover</a></h3>
<p>å¦‚æœç™¼ç”Ÿäº† panicï¼Œè€Œä½ å¿…é ˆåšä¸€äº›è™•ç†ï¼Œå¯ä»¥ä½¿ç”¨ recoverï¼Œé€™å€‹å‡½å¼å¿…é ˆåœ¨è¢« defer çš„å‡½å¼ä¸­åŸ·è¡Œæ‰æœ‰æ•ˆæœï¼Œè‹¥åœ¨è¢« defer çš„å‡½å¼å¤–åŸ·è¡Œï¼Œrecover ä¸€å®šæ˜¯å‚³å› nilã€‚</p>
<p>å¦‚æœæœ‰è¨­ç½® defer å‡½å¼ï¼Œåœ¨ç™¼ç”Ÿäº† panic çš„æƒ…æ³ä¸‹ï¼Œè¢« defer çš„å‡½å¼ä¸€å®šæœƒè¢«åŸ·è¡Œï¼Œè‹¥ç•¶ä¸­åŸ·è¡Œäº† recoverï¼Œé‚£éº¼ panic å°±æœƒè¢«æ•æ‰ä¸¦ä½œç‚º recover çš„å‚³å›å€¼ï¼Œé‚£éº¼ panic å°±ä¸æœƒä¸€è·¯å¾€å›å‚³æ’­ï¼Œé™¤éä½ åˆå‘¼å«äº† panicã€‚</p>
<p>å› æ­¤ï¼Œé›–ç„¶ Go èªè¨€ä¸­æ²’æœ‰ä¾‹å¤–è™•ç†æ©Ÿåˆ¶ï¼Œä¹Ÿå¯ä½¿ç”¨ deferã€panic èˆ‡ recover ä¾†é€²è¡Œé¡ä¼¼çš„éŒ¯èª¤è™•ç†ã€‚ä¾‹å¦‚ï¼Œå°‡ä¸Šé ­çš„ç¯„ä¾‹ï¼Œå†ä¿®æ”¹ç‚ºï¼š</p>
<pre><code class="language-go">package main

import (
    "fmt"
    "os"
)

func check(err error) {
    if err != nil {
        panic(err)
    }
}

func main() {
    f, err := os.Open("/tmp/dat")
    check(err)

    defer func() {
        if err := recover(); err != nil {
            fmt.Println(err) // é€™å·²ç¶“æ˜¯é ‚å±¤çš„ UI ä»‹é¢äº†ï¼Œæƒ³ä»¥è‡ªå·±çš„æ–¹å¼å‘ˆç¾éŒ¯èª¤
        }

        if f != nil {
            if err := f.Close(); err != nil {
                panic(err) // ç¤ºç¯„å†æ‹‹å‡º panic
            }
        }
    }()

    b1 := make([]byte, 5)
    n1, err := f.Read(b1)
    check(err)

    fmt.Printf("%d bytes: %s\n", n1, string(b1))
}

</code></pre>
<h3 id="æ¢ä»¶åˆ¤æ–·"><a class="header" href="#æ¢ä»¶åˆ¤æ–·">æ¢ä»¶åˆ¤æ–·</a></h3>
<h4 id="ifelseelse-if"><a class="header" href="#ifelseelse-if">ifã€elseã€else if</a></h4>
<pre><code class="language-go">if æ¢ä»¶ä¸€ {    
  åˆ†æ”¯ä¸€
} else if æ¢ä»¶äºŒ {
  åˆ†æ”¯äºŒ
} else if æ¢ä»¶ ... {
  åˆ†æ”¯ ...
} else {
  åˆ†æ”¯ else
}

// { å¿…é ˆèˆ‡if..åœ¨åŒä¸€è¡Œ
</code></pre>
<p><code>&amp;&amp;</code> : ä¸”
<code>||</code> : æˆ–</p>
<p>åœ¨ if è£¡å…è¨±å…ˆé‹è¡Œä¸€å€‹è¡¨é”å¼ï¼Œå–å¾—è®Šæ•¸å¾Œå†ä¾†åšåˆ¤æ–·ï¼š</p>
<pre><code class="language-go">func main() {
    if age := 20;age &gt; 18 {
        fmt.Println("å·²æˆå¹´")
    }
}
</code></pre>
<h4 id="switch"><a class="header" href="#switch">switch</a></h4>
<p>èˆ‡ä¸€èˆ¬çš„switchå®£å‘Šæ–¹æ³•ä¸€æ¨£ï¼Œæ¢ä»¶ä¸èƒ½é‡è¤‡</p>
<ul>
<li>ä¸€å€‹caseå¤šå€‹æ¢ä»¶</li>
</ul>
<pre><code class="language-go">import "fmt"

func main() {
    month := 2

    switch month {
    case 3, 4, 5:
        fmt.Println("æ˜¥å¤©")
    case 6, 7, 8:
        fmt.Println("å¤å¤©")
    case 9, 10, 11:
        fmt.Println("ç§‹å¤©")
    case 12, 1, 2:
        fmt.Println("å†¬å¤©")
    default:
        fmt.Println("è¼¸å…¥æœ‰èª¤...")
    }
}
</code></pre>
<ul>
<li>switch å¾Œå¯æ¥å‡½æ•¸</li>
</ul>
<pre><code class="language-go">import "fmt"

// åˆ¤æ–·ä¸€å€‹åŒå­¸æ˜¯å¦æœ‰æ›ç§‘è¨˜éŒ„çš„å‡½æ•¸
// è¿”å›å€¼æ˜¯å¸ƒçˆ¾é¡å‹
func getResult(args ...int) bool {
    for _, i := range args {
        if i &lt; 60 {
            return false
        }
    }
    return true
}

func main() {
    chinese := 80
    english := 50
    math := 100

    switch getResult(chinese, english, math) {
    // case å¾Œä¹Ÿå¿…é ˆ æ˜¯å¸ƒçˆ¾é¡å‹
    case true:
        fmt.Println("è©²åŒå­¸æ‰€æœ‰æˆç¸¾éƒ½åˆæ ¼")
    case false:
        fmt.Println("è©²åŒå­¸æœ‰æ›ç§‘è¨˜éŒ„")
    }
}
</code></pre>
<ul>
<li>switch å¾Œé¢ä¸æ¥æ±è¥¿æ™‚å°±ç›¸ç•¶æ–¼if-else</li>
<li>ä½¿ç”¨<code>fallthrough</code> å¯ä»¥å¾€ä¸‹ç©¿é€ä¸€å±¤ï¼ŒåŸ·è¡Œä¸‹ä¸€å€‹caseèªå¥ä¸”<strong>ä¸ç”¨åˆ¤æ–·æ¢ä»¶</strong>ï¼Œä½†å…¶å¿…é ˆç‚ºè©²caseçš„æœ€å¾Œä¸€å€‹èªå¥ï¼Œå¦å‰‡æœƒéŒ¯èª¤</li>
</ul>
<h2 id="go-å‡½å¼"><a class="header" href="#go-å‡½å¼">Go å‡½å¼</a></h2>
<ol>
<li>ä¸€èˆ¬ç”¨æ³•</li>
</ol>
<pre><code class="language-go">func add( x int, y int ) int {
	return x + y
}

func main() {
	fmt.Println( add( 42, 13 ) )
}
</code></pre>
<p>ç•¶å…©å€‹æˆ–å¤šå€‹é€£çºŒçš„å‡½æ•¸å‘½ååƒæ•¸æ˜¯åŒä¸€é¡å‹ï¼Œå‰‡é™¤äº†æœ€å¾Œä¸€å€‹é¡å‹ä¹‹å¤–ï¼Œå…¶ä»–éƒ½å¯ä»¥çœç•¥ã€‚
æ‰€ä»¥å¦‚æœåƒæ•¸çš„å‹æ…‹éƒ½ä¸€æ¨£çš„è©±ï¼Œå¯ä»¥ç²¾ç°¡ç‚º:</p>
<pre><code class="language-go">func add( x, y int ) int {  
    return x + y  
}  
 
func main() {  
    fmt.Println( add( 42, 13 ) )  
}  
</code></pre>
<ol start="2">
<li>å¤šæ•¸å€¼è¿”å›</li>
</ol>
<p>å‡½æ•¸å¯ä»¥è¿”å›ä»»æ„æ•¸é‡çš„è¿”å›å€¼ï¼Œé€™å€‹å‡½æ•¸è¿”å›äº†å…©å€‹å­—ä¸²ã€‚</p>
<pre><code class="language-go">func swap(x, y string) (string, string) {  
    return y, x  
}  
 
func main() {  
    a, b := swap("hello", "world")  
    fmt.Println(a, b)  
}
// è¼¸å‡ºçµæœ world hello
</code></pre>
<ol start="3">
<li>å‘½åè¿”å›å€¼</li>
</ol>
<p>åœ¨ Go ä¸­ï¼Œå‡½æ•¸å¯ä»¥è¿”å›å¤šå€‹ã€Œçµæœåƒæ•¸ã€ï¼Œè€Œä¸åƒ…åƒ…æ˜¯ä¸€å€‹å€¼ã€‚å®ƒå€‘å¯ä»¥åƒè®Šæ•¸é‚£æ¨£å‘½åå’Œä½¿ç”¨ã€‚
å¦‚æœå‘½åäº†è¿”å›å€¼åƒæ•¸ï¼Œä¸€å€‹æ²’æœ‰åƒæ•¸çš„ return èªå¥ï¼Œæœƒå°‡ç•¶å‰çš„å€¼ä½œç‚ºè¿”å›å€¼è¿”å›ã€‚ä»¥é€™å€‹ç¨‹å¼ç¢¼ç‚ºä¾‹ï¼Œsum int è¡¨ç¤ºå®£å‘Šæ•´æ•¸ sum ï¼Œå°‡åƒæ•¸ 17 æ”¾å…¥ sum ä¸­ï¼Œx, y int å®£å‘Šæ•´æ•¸ x,y åœ¨ä¸‹é¢ä½¿ç”¨ï¼Œç”±æ–¼ return æ²’æœ‰è¨­å®šè¿”å›å€¼ï¼Œé€™é‚Šç¨‹å¼å°±å°‡ x,y éƒ½å›å‚³äº†ï¼Œæ‰€ä»¥çµæœæœƒå‡ºç¾ 7 10ã€‚</p>
<pre><code class="language-go">func split(sum int) (x, y int) {  
    x = sum * 4 / 9  
    y = sum - x  
    return  
}  
 
func main() {  
    fmt.Println(split(17))  
}
</code></pre>
<h2 id="goroutine"><a class="header" href="#goroutine">Goroutine</a></h2>
<p>è¦ä½¿ç”¨Goroutineåªè¦åœ¨å‘¼å«çš„å‡½æ•¸å‰é¢åŠ ä¸€å€‹goé—œéµå­—å³å¯</p>
<pre><code class="language-go">package main
import "fmt"  
 
func f(n int) {  
    for i := 0; i &lt; 10; i++ {  
        fmt.Println(n, ":", i)  
    }  
}  
 
func main() {  
    go f(0)  
} 
</code></pre>
<p>åŸ·è¡Œå¾Œæœƒç™¼ç¾ä»€éº¼æ±è¥¿éƒ½æ²’æœ‰å°å‡ºï¼Œå› ç‚º goroutine æ˜¯å¹³è¡Œè™•ç†çš„ï¼Œ
æ‰€ä»¥åœ¨é‚„æ²’é–‹å§‹å° n ä¹‹å‰ main é€™å€‹ä¸»è¦çš„å‡½å¼å·²ç¶“çµæŸäº†ã€‚
ä½¿ç”¨å…§å»ºçš„ time å‡½å¼è®“ main å‡½å¼ç­‰ goroutine å…ˆè·‘å®Œã€‚</p>
<pre><code class="language-go">package main  
 
import (  
    "fmt"  
    "time"  
)  
 
func f(n int) {  
    for i := 0; i &lt; 10; i++ {  
        fmt.Println(n, ":", i)  
    }  
}  
 
func main() {  
    go f(0)  
    time.Sleep(time.Second * 1) // æš«åœä¸€ç§’é˜  
}  
</code></pre>
<h3 id="é¾œå…”è³½è·‘çš„ç¯„ä¾‹"><a class="header" href="#é¾œå…”è³½è·‘çš„ç¯„ä¾‹">é¾œå…”è³½è·‘çš„ç¯„ä¾‹</a></h3>
<blockquote>
<p>æ­¤é¾œå…”è³½è·‘ç¯„ä¾‹æ–‡ç« å¼•ç”¨è‡ª<a href="https://openhome.cc/Gossip/Go/Goroutine.html">openhome.cc/Go/Goroutine</a></p>
</blockquote>
<p>å…ˆä¾†çœ‹å€‹æ²’æœ‰å•Ÿç”¨ Goroutineï¼Œå»è¦å¯«å€‹é¾œå…”è³½è·‘éŠæˆ²çš„ä¾‹å­ï¼Œä½ å¯èƒ½æ˜¯é€™éº¼å¯«çš„:</p>
<pre><code class="language-go">package main

import (
    "fmt"
    "math/rand"
    "time"
)

func random(min, max int) int {
    rand.Seed(time.Now().Unix())
    return rand.Intn(max-min) + min
}

func main() {
    flags := [...]bool{true, false}
    totalStep := 10
    tortoiseStep := 0
    hareStep := 0
    fmt.Println("é¾œå…”è³½è·‘é–‹å§‹...")
    for tortoiseStep &lt; totalStep &amp;&amp; hareStep &lt; totalStep {
        tortoiseStep++
        fmt.Printf("çƒé¾œè·‘äº† %d æ­¥...\n", tortoiseStep)
        isHareSleep := flags[random(1, 10)%2]
        if isHareSleep {
            fmt.Println("å…”å­ç¡è‘—äº†zzzz")
        } else {
            hareStep += 2
            fmt.Printf("å…”å­è·‘äº† %d æ­¥...\n", hareStep)
        }
    }
}
</code></pre>
<p>ç”±æ–¼ç¨‹å¼åªæœ‰ä¸€å€‹æµç¨‹ï¼Œæ‰€ä»¥åªèƒ½å°‡çƒé¾œèˆ‡å…”å­çš„è¡Œç‚ºæ··é›œåœ¨é€™å€‹æµç¨‹ä¸­æ’°å¯«ï¼Œè€Œä¸”ç‚ºä»€éº¼æ¯æ¬¡éƒ½å…ˆéå¢çƒé¾œå†éå¢å…”å­æ­¥æ•¸å‘¢ï¼Ÿé€™æ¨£å°å…”å­å¾ˆä¸å…¬å¹³å•Šï¼å¦‚æœå¯ä»¥æ’°å¯«ç¨‹å¼å†å•Ÿå‹•å…©å€‹æµç¨‹ï¼Œä¸€å€‹æ˜¯çƒé¾œæµç¨‹ï¼Œä¸€å€‹å…”å­æµç¨‹ï¼Œç¨‹å¼é‚è¼¯æœƒæ¯”è¼ƒæ¸…æ¥šã€‚</p>
<p>ä½ å¯ä»¥å°‡çƒé¾œçš„æµç¨‹èˆ‡å…”å­çš„æµç¨‹åˆ†åˆ¥å¯«åœ¨ä¸€å€‹å‡½å¼ä¸­ï¼Œä¸¦ç”¨ go å•Ÿå‹•åŸ·è¡Œï¼š</p>
<pre><code class="language-go">package main

import (
	"fmt"
	"math/rand"
    "time"
)

func random( min, max int ) int {
	rand.Seed( time.Now().Unix() )
	return rand.Intn( max - min ) + min
}

func tortoise( totalStep int ) {
	for step := 1; step &lt;= totalStep; step++ {
		fmt.Printf( "çƒé¾œè·‘äº† %d æ­¥...\n", step )
	}
}

func hare(totalStep int) {
    flags := [...]bool{true, false}
    step := 0
    for step &lt; totalStep {
        isHareSleep := flags[random(1, 10)%2]
        if isHareSleep {
            fmt.Println("å…”å­ç¡è‘—äº†zzzz")
        } else {
            step += 2
            fmt.Printf("å…”å­è·‘äº† %d æ­¥...\n", step)
        }
    }
}

func main() {
    totalStep := 10

    go tortoise(totalStep)
    go hare(totalStep)

    time.Sleep(5 * time.Second) // çµ¦äºˆæ™‚é–“ç­‰å¾… Goroutine å®Œæˆ
}
</code></pre>
<h4 id="ä½¿ç”¨syncwaitgroupç­‰å¾…çƒé¾œèˆ‡å…”å­è·‘å®Œ"><a class="header" href="#ä½¿ç”¨syncwaitgroupç­‰å¾…çƒé¾œèˆ‡å…”å­è·‘å®Œ">ä½¿ç”¨sync.WaitGroupç­‰å¾…çƒé¾œèˆ‡å…”å­è·‘å®Œ</a></h4>
<p>æœ‰æ²’æœ‰è¾¦æ³•çŸ¥é“ Goroutine åŸ·è¡ŒçµæŸå‘¢ï¼Ÿå¯¦éš›ä¸Šæ²’æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥å¾—çŸ¥ï¼Œé™¤éä½ ä¸»å‹•è¨­è¨ˆä¸€ç¨®æ©Ÿåˆ¶ï¼Œå¯ä»¥åœ¨ Goroutine çµæŸæ™‚åŸ·è¡Œé€šçŸ¥ï¼Œä½¿ç”¨ Channel æ˜¯ä¸€ç¨®æ–¹å¼ï¼Œé€™åœ¨ä¹‹å¾Œçš„æ–‡ä»¶å†èªªæ˜ï¼Œé€™é‚Šå…ˆèªªæ˜å¦ä¸€ç¨®æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ sync.WaitGroupã€‚</p>
<p>sync.WaitGroup å¯ä»¥ç”¨ä¾†ç­‰å¾…ä¸€çµ„ Goroutine çš„å®Œæˆï¼Œä¸»æµç¨‹ä¸­å»ºç«‹ sync.WaitGroupï¼Œä¸¦é€é Add å‘ŠçŸ¥è¦ç­‰å¾…çš„ Goroutine æ•¸é‡ï¼Œä¸¦ä½¿ç”¨ Wait ç­‰å¾… Goroutine çµæŸï¼Œè€Œæ¯å€‹ Goroutine çµæŸå‰ï¼Œå¿…é ˆåŸ·è¡Œ sync.WaitGroup çš„ Done æ–¹æ³•ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ sync.WaitGroup ä¾†æ”¹å¯«ä»¥ä¸Šçš„ç¯„ä¾‹ï¼š</p>
<pre><code class="language-go">package main

import (
	"fmt"
	"math/rand"
	"time"
	"sync"
)

func random( min, max int ) int {
	rand.Seed( time.Now().Unix() )
	return rand.Intn( max - min ) + min
}

func tortoise( totalStep int, wg *sync.WaitGroup ) {
	defer wg.Done()

	for step := 1; step &lt;= totalStep; step++ {
		fmt.Printf( "çƒé¾œè·‘äº† %d æ­¥...\n", step )
	}
}

func hare(totalStep int, wg *sync.WaitGroup ) {
	defer wg.Done()

    flags := [...]bool{true, false}
    step := 0
    for step &lt; totalStep {
        isHareSleep := flags[random(1, 10)%2]
        if isHareSleep {
            fmt.Println("å…”å­ç¡è‘—äº†zzzz")
        } else {
            step += 2
            fmt.Printf("å…”å­è·‘äº† %d æ­¥...\n", step)
        }
    }
}

func main() {
	wg := new( sync.WaitGroup )
	wg.Add( 2 )

    totalStep := 10

    go tortoise( totalStep, wg )
    go hare( totalStep, wg )

    time.Sleep(5 * time.Second) // çµ¦äºˆæ™‚é–“ç­‰å¾… Goroutine å®Œæˆ
}
</code></pre>
<h2 id="channel-2"><a class="header" href="#channel-2">Channel</a></h2>
<p>é€šé Channel å¯ä»¥è®“ goroutine ä¹‹é–“é€šä¿¡</p>
<pre><code class="language-go">ch_name := make(chan &lt;TYPE&gt;{,NUM})    //é¡å‹èˆ‡å¤§å°
</code></pre>
<h3 id="è³‡æ–™æµå‘"><a class="header" href="#è³‡æ–™æµå‘">è³‡æ–™æµå‘</a></h3>
<ul>
<li>å‘Channelå‚³å…¥ï¼š<code>Ch &lt;- DATA</code></li>
<li>å¾Channelè®€å–ï¼š<code>DATA := &lt;- Ch</code></li>
</ul>
<pre><code class="language-go">func main() {  
 
    messages := make(chan string)  
 
    go func() { messages &lt;- "ping" }()  
 
    msg := &lt;- messages  
    fmt.Println( msg )  
}  
</code></pre>
<ul>
<li>å»ºç«‹ä¸€å€‹ channel(message) ç”¨ä»¥å‚³è¼¸å­—ä¸²</li>
<li>ç”¨ go ä¾† call goroutine åŸ·è¡Œå‡½å¼ï¼Œå‚³ "ping" åˆ° messages é€™å€‹ channel è£¡é¢</li>
<li>æ¥è‘—ä»¥ msg è² è²¬æ¥æ”¶ messages çš„å‚³è¼¸è³‡æ–™å¾Œå°å‡º</li>
</ul>
<p>é€éé€™å€‹æ–¹æ³•å°±å¯ä»¥ç°¡å–®çš„è®“ Goroutine å¯ä»¥æºé€š</p>
<h3 id="select"><a class="header" href="#select">select</a></h3>
<p>æœ‰ä¸€å€‹é¡ä¼¼ Switch çš„æµç¨‹æ§åˆ¶ã€ŒSelectã€ï¼Œå®ƒåªèƒ½æ‡‰ç”¨æ–¼ Channel</p>
<pre><code class="language-go">package main

import "time"
import "fmt"

func main() {

    c1 := make(chan string)
    c2 := make(chan string)

    go func() {
        time.Sleep(time.Second * 1)
        c1 &lt;- "one"
    }()
    go func() {
        time.Sleep(time.Second * 2)
        c2 &lt;- "two"
    }()

    for i := 0; i &lt; 2; i++ {
        select {
        case msg1 := &lt;-c1:
            fmt.Println("received", msg1)
        case msg2 := &lt;-c2:
            fmt.Println("received", msg2)
        }
    }
}
</code></pre>
<h2 id="go-coding-style"><a class="header" href="#go-coding-style">Go Coding Style</a></h2>
<ol>
<li>
<p>å¼·åˆ¶ç·¨ç¢¼é¢¨æ ¼
Goèªè¨€ç‚ºäº†è®“åœ˜éšŠé–‹ç™¼èƒ½å¤ æ›´åŠ çš„ç°¡å–®ï¼Œä»–çµ±ä¸€äº†ç¨‹å¼ç¢¼çš„é¢¨æ ¼ï¼Œå¦‚æœæ²’æœ‰éµç…§ä»–çš„è¦ç¯„å¯«çš„è©±ï¼Œä½ å†å¦‚ä½•ç·¨è­¯éƒ½ä¸æœƒæˆåŠŸã€‚
ä»¥ä¸‹ç‚ºéŒ¯èª¤çš„ç¨‹å¼ç¢¼é¢¨æ ¼</p>
<pre><code class="language-go">package main
import "fmt"
func main()
{
    i:= 1
    fmt.Println("Hello World", i)
}
</code></pre>
<p>å¦‚æœä½ å·¦å³æ‹¬å¼§çš„å¯«æ³•æ˜¯åƒä¸Šé¢é‚£æ¨£ï¼Œä½ å°‡æœƒçœ‹åˆ°ä¸‹åˆ—çš„éŒ¯èª¤è¨Šæ¯</p>
<pre><code>syntax error: unexpected semicolon or newline before {non-declaration 
statement outside function body syntax error: unexpected }
</code></pre>
<p>ä»¥ä¸‹ç‚ºæ­£ç¢ºçš„å¯«æ³•</p>
<pre><code class="language-go">package main
import "fmt"
func main() {
    i:= 1
    fmt.Println("Hello World", i)
}
</code></pre>
<p>ç‚ºäº†ä¿æŒç¨‹å¼ç¢¼çš„ä¹¾æ·¨ï¼Œä½ å®£å‘Šäº†ä¸€å€‹è®Šæ•¸ï¼Œä½†æ˜¯å»æ²’æœ‰ä½¿ç”¨ï¼ŒGo èªè¨€é€£ç·¨è­¯éƒ½ä¸æœƒè®“ä½ ç·¨è­¯ã€‚èˆ‰ä¾‹ä¾†èªªï¼Œè®Šæ•¸ i ä¸¦æ²’æœ‰è¢«ä½¿ç”¨ã€‚</p>
<pre><code class="language-go">package main

import "fmt"

func main() {
    i := 1
    fmt.Println("Hello World i")
}
</code></pre>
<p>ä½ æœƒå‡ºç¾ä¸‹åˆ—éŒ¯èª¤è¨Šæ¯</p>
<pre><code># command-line-arguments
./test.go:6:2: i declared but not used
</code></pre>
</li>
<li>
<p>éå¼·åˆ¶æ€§ç·¨è­¯é¢¨æ ¼å»ºè­°
ä»¥ä¸‹ç¨‹å¼ç¢¼å¯ä»¥æ­£å¸¸çš„ç·¨è­¯ï¼Œä½†æ˜¯å¾ˆé†œä¸å¥½é–±è®€ã€‚</p>
<pre><code class="language-go">package main
import "fmt"
func main() { i:= 1
fmt.Println("Hello World", i)}
</code></pre>
<p>æˆ‘å€‘å¯ä»¥åˆ©ç”¨<code>go fmt</code>æŒ‡ä»¤å¹«å¿™æ•´ç†ç¨‹å¼ç¢¼ç·¨è­¯æ ¼å¼ã€‚
ç”¨æ³•
<code>go fmt &lt;filename&gt;.go # æ•´ç†æŸå€‹æª”æ¡ˆ</code>
<code>go fmt *.go # æ•´ç†ç›®éŒ„ä¸‹æ‰€æœ‰goæª”æ¡ˆ</code>
<code>go fmt # åŒä¸Š</code></p>
<p>å¦‚æœç¨‹å¼ç¢¼ä¸éœ€è¦èª¿æ•´ä»–ä¸æœƒå‡ºç¾ä»»ä½•è¨Šæ¯ï¼ŒæˆåŠŸæœƒå‡ºç¾ä½ ä½¿ç”¨çš„ç¨‹å¼æª”åã€‚
æ ¼å¼åŒ–å·¥å…·å¹«ä½ åšåˆ°äº†ä¸‹åˆ—äº‹æƒ…ï¼š</p>
<ul>
<li>èª¿æ•´æ¯ä¸€æ¢èªå¥çš„ä½ç½®</li>
<li>é‡æ–°æ“ºæ”¾æ‹¬å¼§çš„ä½ç½®</li>
<li>ä»¥ tab å¹«ä½ ç¸®æ’</li>
<li>æ·»åŠ ç©ºæ ¼</li>
</ul>
</li>
</ol>
<h2 id="å¥—ä»¶"><a class="header" href="#å¥—ä»¶">å¥—ä»¶</a></h2>
<h4 id="goå¥—ä»¶çš„ä¸€äº›è¦å‰‡"><a class="header" href="#goå¥—ä»¶çš„ä¸€äº›è¦å‰‡">Goå¥—ä»¶çš„ä¸€äº›è¦å‰‡</a></h4>
<p>Goä¹‹æ‰€ä»¥æœƒé‚£éº¼ç°¡æ½”ï¼Œæ˜¯å› ç‚ºå®ƒæœ‰ä¸€äº›é è¨­çš„è¡Œç‚ºï¼š</p>
<ul>
<li>å¤§å¯«å­—æ¯é–‹é ­çš„è®Šæ•¸æ˜¯å¯åŒ¯å‡ºçš„ï¼Œä¹Ÿå°±æ˜¯å…¶å®ƒå¥—ä»¶å¯ä»¥è®€å–çš„ï¼Œæ˜¯å…¬æœ‰è®Šæ•¸ï¼›å°å¯«å­—æ¯é–‹é ­çš„å°±æ˜¯ä¸å¯åŒ¯å‡ºçš„ï¼Œæ˜¯ç§æœ‰è®Šæ•¸ã€‚</li>
<li>å¤§å¯«å­—æ¯é–‹é ­çš„å‡½å¼ä¹Ÿæ˜¯ä¸€æ¨£ï¼Œç›¸ç•¶æ–¼ class ä¸­çš„å¸¶ public é—œéµè©çš„å…¬æœ‰å‡½å¼ï¼›å°å¯«å­—æ¯é–‹é ­çš„å°±æ˜¯æœ‰ private é—œéµè©çš„ç§æœ‰å‡½å¼ã€‚</li>
</ul>
<h2 id="grpc"><a class="header" href="#grpc">gRPC</a></h2>
<p><img src="https://www.grpc.io/img/landing-2.svg" alt="" /></p>
<h3 id="go-grpc"><a class="header" href="#go-grpc">GO gRPC</a></h3>
<p><a href="https://www.grpc.io/docs/languages/go/quickstart/">å®˜æ–¹ - Quick start</a>
<a href="https://myapollo.com.tw/zh-tw/golang-grpc-tutorial-part-1/">ç¯„ä¾‹ - Hello ,gRPC</a>
<a href="https://medium.com/pantomath/how-we-use-grpc-to-build-a-client-server-system-in-go-dd20045fa1c2">How we use gRPC to build a client/server system in Go</a>
<a href="https://yami.io/protobuf/">æ¯”èµ· JSON æ›´æ–¹ä¾¿ã€æ›´å¿«é€Ÿã€æ›´ç°¡çŸ­çš„ Protobuf æ ¼å¼</a>
<a href="https://yami.io/grpc/">API æ–‡ä»¶å°±æ˜¯ä½ çš„ä¼ºæœå™¨ï¼ŒREST çš„å¦ä¸€å€‹é¸æ“‡ï¼šgRPC</a></p>
<h3 id="grpc-and-http-apis"><a class="header" href="#grpc-and-http-apis">gRPC and HTTP APIs</a></h3>
<p><a href="https://docs.microsoft.com/zh-tw/aspnet/core/grpc/comparison?view=aspnetcore-3.1">æ¯”è¼ƒ gRPC æœå‹™èˆ‡ HTTP API</a>
<a href="https://segmentfault.com/a/1190000016601836">åŒæ™‚æä¾›HTTPæ¥å£</a>
<a href="https://ithelp.ithome.com.tw/articles/10244296">gRPC-Webï¼šenvoy</a>
<a href="https://ithelp.ithome.com.tw/articles/10243864">å¦‚æœå…©é‚Šéƒ½æƒ³è¦ - gRPC Gateway</a></p>
<h2 id="åƒè€ƒè³‡æ–™"><a class="header" href="#åƒè€ƒè³‡æ–™">åƒè€ƒè³‡æ–™</a></h2>
<p>[1] <a href="https://michaelchen.tech/blog/golang-as-backend-language-for-beginners/">Go (Golang) é©åˆåˆå­¸è€…åšç‚ºç¶²é å¾Œç«¯ç¨‹å¼å—ï¼Ÿ</a>
[2] <a href="https://medium.com/%E4%BC%81%E9%B5%9D%E4%B9%9F%E6%87%82%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88/golang-goroot-gopath-go-modules-%E4%B8%89%E8%80%85%E7%9A%84%E9%97%9C%E4%BF%82%E4%BB%8B%E7%B4%B9-d17481d7a655">Golang â€” GOROOTã€GOPATHã€Go-Modules-ä¸‰è€…çš„é—œä¿‚ä»‹ç´¹</a>
[3] <a href="https://www.geeksforgeeks.org/data-types-in-go/">GeeksforGeeks: Data Types in Go</a>
[4] <a href="https://ithelp.ithome.com.tw/users/20079210/ironman/721">åˆå­¸Golang30å¤©</a>
[5] <a href="https://draveness.me/golang/docs/part2-foundation/ch05-keyword/golang-make-and-new/">Go èªè¨€è¨­è¨ˆèˆ‡å¯¦ç¾ - make å’Œ new</a>
[6] <a href="https://openhome.cc/Gossip/Go/">Opencc Go</a>
[7] <a href="https://willh.gitbook.io/build-web-application-with-golang-zhtw/">ä½¿ç”¨ Golang æ‰“é€  Web æ‡‰ç”¨ç¨‹å¼</a>
[8] <a href="https://zhuanlan.zhihu.com/p/34211611">äº”åˆ†é˜ç†è§£golangçš„initå‡½æ•¸</a>
[9] <a href="https://www.cnblogs.com/f-ck-need-u/p/10053124.html">Goæ¨™æº–åº«ï¼šGo templateç”¨æ³•è©³è§£</a>
[10] <a href="https://brokencode.io/how-to-use-local-go-modules-with-golang-with-examples/">How to use local go modules with golang with examples</a>
[11] <a href="https://zhuanlan.zhihu.com/p/66659719">Goä½µç™¼ç·¨ç¨‹æ¨¡å‹ï¼šä¸»å‹•åœæ­¢goroutine</a>
[12] <a href="https://www.tizi365.com/archives/244.html">Go ginæ¡†æ¶å…¥é–€æ•™ç¨‹</a>
[13] <a href="https://www.jianshu.com/p/9ba805f07a95">Golang å¥—ä»¶åˆå§‹åŒ–æµç¨‹</a>
[14] <a href="https://www.itread01.com/content/1546733197.html">Goèªè¨€è®Šæ•¸çš„ç”Ÿå‘½é€±æœŸ</a>
[15] <a href="https://blog.csdn.net/qq_43192269/article/details/103289623">ä½¿ç”¨golangçš„mysqlç„¡æ³•æ’å…¥emojiè¡¨æƒ…çš„å•é¡Œ</a>
[16] <a href="https://chai2010.cn/advanced-go-programming-book/">Goèªè¨€é«˜ç´šç·¨ç¨‹(Advanced Go Programming)</a>
[17] <a href="https://studygolang.com/articles/12958">Golangä¸­rangeçš„ä½¿ç”¨æ–¹æ³•åŠæ³¨æ„äº‹é …</a>
[18] <a href="https://gfw.go101.org/article/101.html">Goèªè¨€101</a></p>
<h2 id="ç¯„ä¾‹è£œå……è³‡æ–™"><a class="header" href="#ç¯„ä¾‹è£œå……è³‡æ–™">ç¯„ä¾‹è£œå……è³‡æ–™</a></h2>
<p><a href="https://github.com/gorilla/websocket/tree/master/examples/chat">gorilla/websocket - example:chat</a>
<a href="https://scotch.io/bar-talk/build-a-realtime-chat-server-with-go-and-websockets">Build a Realtime Chat Server With Go and WebSockets</a>
<a href="https://ithelp.ithome.com.tw/articles/10223666">Go Websocket é•·é€£ç·š</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../go/go.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../go/pytago.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../go/go.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../go/pytago.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>



    </div>
    </body>
</html>
